{"version":3,"file":"audioplayer.bundle.map.js","names":["this","BX","Messenger","v2","Component","exports","ui_fonts_opensans","main_polyfill_intersectionobserver","main_core_events","im_v2_const","im_v2_lib_localStorage","im_v2_lib_utils","im_v2_component_elements_avatar","im_v2_lib_analytics","ID_KEY","AudioPlayer","name","components","MessageAvatar","props","id","type","Number","default","src","String","file","Object","required","authorId","messageId","timelineType","withContextMenu","Boolean","withAvatar","withPlaybackRateControl","data","preload","loaded","loading","state","AudioPlaybackState","none","progress","progressInPixel","seek","timeCurrent","timeTotal","showContextButton","currentRate","AudioPlaybackRate","computed","State","seekPosition","isPlaying","play","labelTime","time","Utils","date","formatMediaDurationTime","AvatarSize","fileSize","formatFileSize","size","progressPosition","width","activeTimelineStyles","TIMELINE_VERTICAL_SHIFT","ACTIVE_TIMELINE_VERTICAL_SHIFT","shift","timelineStyles","getAudioPlayerIds","$Bitrix","Data","get","currentRateLabel","metaInfo","watch","value","registerPlayer","preloadNext","created","localStorageInst","LocalStorageManager","getInstance","getRateFromLS","preloadRequestSent","registeredId","EventEmitter","subscribe","EventType","audioPlayer","onPlay","stop","onStop","pause","onPause","onPreload","mounted","getObserver","observe","$refs","body","beforeUnmount","unregisterPlayer","unsubscribe","unobserve","methods","loadFile","source","clickToButton","updateRate","setPosition","pixelPerPercent","track","offsetWidth","setProgress","currentTime","LocalStorageKey","audioPlaybackRate","setRateInLS","newRate","set","getNextPlaybackRate","rates","values","sort","currentIndex","indexOf","nextIndex","length","changeRate","includes","commonCurrentRate","Analytics","audioMessage","onChangeRate","chatId","playbackRate","seeking","event","offsetX","percent","pixel","Math","round","audioIdArray","Set","a","b","filter","playNext","nextId","slice","emit","start","getData","initiator","audioEventRouter","eventName","duration","console","error","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","target","threshold","template","Elements","Event","Const","Lib"],"sources":["audioplayer.bundle.js"],"mappings":"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","ignoreList":[]}