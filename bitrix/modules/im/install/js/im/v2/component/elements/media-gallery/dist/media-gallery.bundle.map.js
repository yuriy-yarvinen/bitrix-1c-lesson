{"version":3,"file":"media-gallery.bundle.map.js","names":["this","BX","Messenger","v2","Component","exports","main_core","ui_iconSet_api_core","ui_vue3_directives_lazyload","im_v2_const","im_v2_lib_utils","im_v2_component_elements_progressbar","MAX_HEIGHT","MediaGalleryItem","name","directives","lazyload","components","ProgressBar","props","file","type","Object","required","size","isGallery","Boolean","default","handleLoading","allowRemove","allowSorting","viewerGroupBy","String","highlightDropzonePosition","emits","data","isDraggable","dragEvents","computed","viewerAttributes","viewerAttrs","Utils","getViewerDataAttributes","previewImageSrc","urlPreview","context","FileViewerContext","dialog","viewer","viewerResized","viewerType","title","src","urlDownload","canBeOpenedWithViewer","_BX$UI","UI","Viewer","imageTitle","formatFileSize","loc","isLoaded","progress","isVideo","FileType","video","showPlayIcon","FileStatus","wait","done","includes","status","previewSourceLink","extension","urlShow","allowLazyLoad","startsWith","withoutPreview","Type","isStringFilled","containerStyle","width","height","Math","min","hasImageGap","ratio","image","imageWidth","imageHeight","floor","useBlur","blurStyle","backgroundImage","draggableClasses","classes","progressbarSize","ProgressBarSize","L","S","methods","download","_this$file$urlDownloa","url","window","open","phraseCode","replacements","$Bitrix","Loc","getMessage","onRemoveClick","event","stopPropagation","$emit","onCancelClick","onDragStart","onDragEnd","target","removeAttribute","onDragOver","onDragLeave","onDrop","onMouseDown","$refs","dragElement","setAttribute","getHandleStatus","preparing","upload","getStatusMap","iconClass","Outline","CLOUD","template","RATIO_THRESHOLD","RATIO_FALLBACK","MIN_PREVIEW_WIDTH","MIN_PREVIEW_HEIGHT","FALLBACK_WIDTH","FALLBACK_HEIGHT","FALLBACK_SIZE","MediaGalleryRow","files","Array","allowRemoveItem","Number","spacingSize","highlightDropzone","totalRatio","reduce","acc","getSafeSize","getSafeRatio","spacing","length","availableContainerWidth","sizes","map","max","_file$image","_file$image2","isNumber","_file$image3","_file$image4","abnormalRatio","onRemove","onCancel","onItemDragStart","onItemDragEnd","onItemDragOver","onItemDragLeave","onItemDrop","getHighlightDropzonePosition","id","fileId","position","rowsLayouts","MediaGallery","rows","lengths","cursor","rowSize","row","slice","onRemoveItem","Elements","IconSet","Vue3","Directives","Const","Lib"],"sources":["media-gallery.bundle.js"],"mappings":"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","ignoreList":[]}