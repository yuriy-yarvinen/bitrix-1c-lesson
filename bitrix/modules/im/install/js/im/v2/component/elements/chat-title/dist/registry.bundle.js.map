{"version":3,"file":"registry.bundle.js","sources":["../src/base/const/const.js","../src/base/chat-title.js","../src/with-highlighting/with-highlighting.js","../src/message-author/message-author.js","../src/editable/editable.js"],"sourcesContent":["export const DialogSpecialType = {\n\tbot: 'bot',\n\textranet: 'extranet',\n\tnetwork: 'network',\n\tcollaber: 'collaber',\n\tsupport24: 'support24',\n};\n\nexport const TitleIcons = {\n\tabsent: 'absent',\n\tbirthday: 'birthday',\n};\n\nexport const ChatTitleType = {\n\tnotes: 'notes',\n};\n","import { Text, Type } from 'main.core';\nimport { BIcon, Outline as OutlineIcons } from 'ui.icon-set.api.vue';\n\nimport { Core } from 'im.v2.application.core';\nimport { ChatType, Settings, UserType, Color, BotCode } from 'im.v2.const';\n\nimport { DialogSpecialType, ChatTitleType, TitleIcons } from './const/const';\n\nimport './css/chat-title.css';\n\nimport type { ImModelChat, ImModelUser, ImModelBot } from 'im.v2.model';\n\nconst ICON_SIZE = 18;\n\nexport const ChatTitle = {\n\tname: 'ChatTitle',\n\tcomponents: { BIcon },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 0,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tshowItsYou: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithLeftIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithColor: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twithMute: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twithAutoDelete: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tonlyFirstName: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\ttwoLine: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tcustomType: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tColor: () => Color,\n\t\tICON_SIZE: () => ICON_SIZE,\n\t\tOutlineIcons: () => OutlineIcons,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tchatId(): number\n\t\t{\n\t\t\treturn this.dialog.chatId;\n\t\t},\n\t\tuser(): ImModelUser\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](this.dialogId, true);\n\t\t},\n\t\tbotType(): string\n\t\t{\n\t\t\tconst EXCLUDED_BOT_CODES = [BotCode.aiAssistant];\n\n\t\t\tif (!this.isUser)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconst bot: ?ImModelBot = this.$store.getters['users/bots/getByUserId'](this.dialogId);\n\t\t\tif (!bot || EXCLUDED_BOT_CODES.includes(bot.code))\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn bot.type;\n\t\t},\n\t\tisUser(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.user;\n\t\t},\n\t\tisSelfChat(): boolean\n\t\t{\n\t\t\treturn this.isUser && this.user.id === Core.getUserId();\n\t\t},\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\tconst classes = [];\n\n\t\t\tif (this.twoLine)\n\t\t\t{\n\t\t\t\tclasses.push('--twoline');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\tdialogName(): string\n\t\t{\n\t\t\tif (this.customType === ChatTitleType.notes)\n\t\t\t{\n\t\t\t\treturn this.loc('IM_CHAT_TITLE_MY_NOTES');\n\t\t\t}\n\n\t\t\tif (this.text)\n\t\t\t{\n\t\t\t\treturn Text.encode(this.text);\n\t\t\t}\n\n\t\t\tlet resultText = this.dialog.name;\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\tresultText = this.onlyFirstName ? this.user.firstName : this.user.name;\n\t\t\t}\n\n\t\t\treturn Text.encode(resultText);\n\t\t},\n\t\tdialogSpecialType(): string\n\t\t{\n\t\t\tif (!this.isUser)\n\t\t\t{\n\t\t\t\tif (this.isCollabChat)\n\t\t\t\t{\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\n\t\t\t\tif (this.isExtranet)\n\t\t\t\t{\n\t\t\t\t\treturn DialogSpecialType.extranet;\n\t\t\t\t}\n\n\t\t\t\tif (this.isCollaberChatOrUser)\n\t\t\t\t{\n\t\t\t\t\treturn DialogSpecialType.collaber;\n\t\t\t\t}\n\n\t\t\t\tif ([ChatType.support24Notifier, ChatType.support24Question].includes(this.dialog.type))\n\t\t\t\t{\n\t\t\t\t\treturn DialogSpecialType.support24;\n\t\t\t\t}\n\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tif (this.isSelfChat)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tif (this.isBot)\n\t\t\t{\n\t\t\t\treturn this.botType;\n\t\t\t}\n\n\t\t\tif (this.isExtranet)\n\t\t\t{\n\t\t\t\treturn DialogSpecialType.extranet;\n\t\t\t}\n\n\t\t\tif (this.isCollaberChatOrUser)\n\t\t\t{\n\t\t\t\treturn DialogSpecialType.collaber;\n\t\t\t}\n\n\t\t\tif (this.isNetwork)\n\t\t\t{\n\t\t\t\treturn DialogSpecialType.network;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\tisDialogSpecialTypeWithLeftIcon(): boolean\n\t\t{\n\t\t\tif (this.isCollaberChatOrUser || this.isExtranet)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn Type.isStringFilled(this.dialogSpecialType);\n\t\t},\n\t\tleftIcon(): string\n\t\t{\n\t\t\tif (!this.withLeftIcon || this.isSelfChat)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tif (this.isDialogSpecialTypeWithLeftIcon)\n\t\t\t{\n\t\t\t\treturn this.dialogSpecialType;\n\t\t\t}\n\n\t\t\tif (!this.isUser)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tif (this.showBirthdays && this.user.isBirthday)\n\t\t\t{\n\t\t\t\treturn TitleIcons.birthday;\n\t\t\t}\n\n\t\t\tif (this.user.isAbsent)\n\t\t\t{\n\t\t\t\treturn TitleIcons.absent;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\tcolor(): string\n\t\t{\n\t\t\tif (!this.withColor || this.specialColor)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.dialog.color;\n\t\t},\n\t\tspecialColor(): string\n\t\t{\n\t\t\treturn this.dialogSpecialType;\n\t\t},\n\t\tisBot(): boolean\n\t\t{\n\t\t\tif (!this.isUser)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.user.type === UserType.bot;\n\t\t},\n\t\tisExtranet(): boolean\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn this.user.type === UserType.extranet;\n\t\t\t}\n\n\t\t\treturn this.dialog.extranet;\n\t\t},\n\t\tisCollaberChatOrUser(): boolean\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn this.user.type === UserType.collaber;\n\t\t\t}\n\n\t\t\treturn this.dialog.containsCollaber;\n\t\t},\n\t\tisCollabChat(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.collab;\n\t\t},\n\t\tisNetwork(): boolean\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn this.user.network;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tisChatMuted(): boolean\n\t\t{\n\t\t\tconst isMuted = this.dialog.muteList.find((element) => {\n\t\t\t\treturn element === Core.getUserId();\n\t\t\t});\n\n\t\t\treturn Boolean(isMuted);\n\t\t},\n\t\tisAutoDeleteEnabled(): boolean\n\t\t{\n\t\t\tif (!this.withAutoDelete)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.$store.getters['chats/autoDelete/isEnabled'](this.chatId);\n\t\t},\n\t\ttooltipText(): string\n\t\t{\n\t\t\tif (this.customType === ChatTitleType.notes)\n\t\t\t{\n\t\t\t\treturn this.loc('IM_CHAT_TITLE_MY_NOTES');\n\t\t\t}\n\n\t\t\tif (this.isSelfChat && this.showItsYou)\n\t\t\t{\n\t\t\t\treturn `${this.dialog.name} (${this.loc('IM_CHAT_TITLE_SELF')})`;\n\t\t\t}\n\n\t\t\treturn this.dialog.name;\n\t\t},\n\t\tshowBirthdays(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['application/settings/get'](Settings.recent.showBirthday);\n\t\t},\n\t},\n\tmethods: {\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClasses\" class=\"bx-im-chat-title__scope bx-im-chat-title__container\">\n\t\t\t<span class=\"bx-im-chat-title__content\">\n\t\t\t\t<span v-if=\"leftIcon\" :class=\"'--' + leftIcon\" class=\"bx-im-chat-title__icon\"></span>\n\t\t\t\t<span\n\t\t\t\t\t:class=\"[specialColor ? '--' + specialColor : '']\"\n\t\t\t\t\t:style=\"{color: color}\"\n\t\t\t\t\t:title=\"tooltipText\"\n\t\t\t\t\tclass=\"bx-im-chat-title__text\"\n\t\t\t\t\tv-html=\"dialogName\"\n\t\t\t\t></span>\n\t\t\t\t<strong v-if=\"isSelfChat && showItsYou\">\n\t\t\t\t\t<span class=\"bx-im-chat-title__text --self\">({{ loc('IM_CHAT_TITLE_SELF') }})</span>\n\t\t\t\t</strong>\n\t\t\t\t<span v-if=\"withMute && isChatMuted\" class=\"bx-im-chat-title__muted-icon\"></span>\n\t\t\t\t<BIcon\n\t\t\t\t\tv-if=\"isAutoDeleteEnabled\"\n\t\t\t\t\t:name=\"OutlineIcons.TIMER_DOT\"\n\t\t\t\t\t:color=\"Color.accentBlue\"\n\t\t\t\t\t:size=\"ICON_SIZE\"\n\t\t\t\t\t:hoverable=\"false\"\n\t\t\t\t\t:title=\"loc('IM_CHAT_TITLE_AUTO_DELETE_TITLE')\"\n\t\t\t\t\tclass=\"bx-im-chat-title__auto-delete-icon\"\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</div>\n\t`,\n};\n","import { BitrixVue } from 'ui.vue3';\n\nimport { highlightText } from 'im.v2.lib.text-highlighter';\nimport { ChatTitle } from '../registry';\n\n// @vue/component\nexport const ChatTitleWithHighlighting = BitrixVue.cloneComponent(ChatTitle, {\n\tname: 'ChatTitleWithHighlighting',\n\tprops: {\n\t\ttextToHighlight: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed:\n\t\t{\n\t\t\tdialogName(): string\n\t\t\t{\n\t\t\t\t// noinspection JSUnresolvedVariable\n\t\t\t\treturn highlightText(this.parentDialogName, this.textToHighlight);\n\t\t\t},\n\t\t},\n});\n","import { CopilotManager } from 'im.v2.lib.copilot';\n\nimport { ChatTitle } from '../registry';\n\nimport type { ImModelMessage } from 'im.v2.model';\n\n// @vue/component\nexport const MessageAuthorTitle = {\n\tname: 'MessageAuthorTitle',\n\tcomponents: { ChatTitle },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 0,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 0,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tshowItsYou: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithLeftIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithColor: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twithMute: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tonlyFirstName: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\ttwoLine: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.$store.getters['messages/getById'](this.messageId);\n\t\t},\n\t\tauthorId(): number\n\t\t{\n\t\t\treturn this.message.authorId;\n\t\t},\n\t\tcustomAuthorName(): string\n\t\t{\n\t\t\tconst copilotManager = new CopilotManager();\n\t\t\tif (!copilotManager.isCopilotBot(this.dialogId))\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn copilotManager.getNameWithRole({\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tmessageId: this.messageId,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ChatTitle \n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:text=\"customAuthorName\"\n\t\t\t:showItsYou=\"showItsYou\"\n\t\t\t:withLeftIcon=\"withLeftIcon\"\n\t\t\t:withColor=\"withColor\"\n\t\t\t:withMute=\"withMute\"\n\t\t\t:onlyFirstName=\"onlyFirstName\"\n\t\t\t:twoLine=\"twoLine\"\n\t\t/>\n\t`,\n};\n","import { EventEmitter } from 'main.core.events';\n\nimport { ActionByRole, EventType } from 'im.v2.const';\nimport { EscEventAction } from 'im.v2.lib.esc-manager';\nimport { PermissionManager } from 'im.v2.lib.permission';\n\nimport { ChatTitle } from '../registry';\n\nimport './css/editable-chat-title.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelChat } from 'im.v2.model';\n\nconst INPUT_PADDING = 5;\n\n// @vue/component\nexport const EditableChatTitle = {\n\tname: 'EditableChatTitle',\n\tcomponents: { ChatTitle },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['newTitleSubmit'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisEditing: false,\n\t\t\tinputWidth: 0,\n\t\t\tshowEditIcon: false,\n\t\t\tchatTitle: '',\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tcanBeRenamed(): boolean\n\t\t{\n\t\t\treturn PermissionManager.getInstance().canPerformActionByRole(ActionByRole.rename, this.dialogId);\n\t\t},\n\t\tinputStyle(): { width: string }\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: `calc(${this.inputWidth}ch + ${INPUT_PADDING}px)`,\n\t\t\t};\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tchatTitle()\n\t\t{\n\t\t\tthis.inputWidth = this.chatTitle.length;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.key.onBeforeEscape, this.onBeforeEscape);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tEventEmitter.unsubscribe(EventType.key.onBeforeEscape, this.onBeforeEscape);\n\t},\n\tmounted()\n\t{\n\t\tthis.chatTitle = this.dialog.name;\n\t},\n\tmethods:\n\t{\n\t\tasync onTitleClick()\n\t\t{\n\t\t\tif (!this.canBeRenamed)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.chatTitle = this.dialog.name;\n\n\t\t\tthis.isEditing = true;\n\t\t\tawait this.$nextTick();\n\t\t\tthis.$refs.titleInput.focus();\n\t\t},\n\t\tonNewTitleSubmit()\n\t\t{\n\t\t\tif (!this.isEditing)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.isEditing = false;\n\n\t\t\tconst nameNotChanged = this.chatTitle === this.dialog.name;\n\t\t\tif (nameNotChanged || this.chatTitle === '')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('newTitleSubmit', this.chatTitle);\n\t\t},\n\t\tonBeforeEscape(): $Values<typeof EscEventAction>\n\t\t{\n\t\t\tif (!this.isEditing)\n\t\t\t{\n\t\t\t\treturn EscEventAction.ignored;\n\t\t\t}\n\n\t\t\tthis.isEditing = false;\n\t\t\tthis.showEditIcon = false;\n\t\t\tthis.chatTitle = this.dialog.name;\n\n\t\t\treturn EscEventAction.handled;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-if=\"!isEditing\"\n\t\t\t@click=\"onTitleClick\"\n\t\t\t@mouseover=\"showEditIcon = true\"\n\t\t\t@mouseleave=\"showEditIcon = false\"\n\t\t\tclass=\"bx-im-elements-editable-chat-title__wrap\"\n\t\t\t:class=\"{'--can-rename': canBeRenamed}\"\n\t\t>\n\t\t\t<div class=\"bx-im-elements-editable-chat-title__container\">\n\t\t\t\t<ChatTitle :dialogId=\"dialogId\" :withMute=\"true\" :withAutoDelete=\"true\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-elements-editable-chat-title__edit-icon_container\">\n\t\t\t\t<div v-if=\"showEditIcon && canBeRenamed\" class=\"bx-im-elements-editable-chat-title__edit-icon\"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-else class=\"bx-im-elements-editable-chat-title__input_container\">\n\t\t\t<input\n\t\t\t\tv-model=\"chatTitle\"\n\t\t\t\t:style=\"inputStyle\"\n\t\t\t\t@focus=\"$event.target.select()\"\n\t\t\t\t@blur=\"onNewTitleSubmit\"\n\t\t\t\t@keyup.enter=\"onNewTitleSubmit\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"bx-im-elements-editable-chat-title__input\"\n\t\t\t\tref=\"titleInput\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n"],"names":["DialogSpecialType","bot","extranet","network","collaber","support24","TitleIcons","absent","birthday","ChatTitleType","notes","ICON_SIZE","ChatTitle","name","components","BIcon","props","dialogId","type","Number","String","default","text","showItsYou","Boolean","withLeftIcon","withColor","withMute","withAutoDelete","onlyFirstName","twoLine","customType","computed","Color","OutlineIcons","dialog","$store","getters","chatId","user","botType","EXCLUDED_BOT_CODES","BotCode","aiAssistant","isUser","includes","code","ChatType","isSelfChat","id","Core","getUserId","containerClasses","classes","push","dialogName","loc","Text","encode","resultText","firstName","dialogSpecialType","isCollabChat","isExtranet","isCollaberChatOrUser","support24Notifier","support24Question","isBot","isNetwork","isDialogSpecialTypeWithLeftIcon","Type","isStringFilled","leftIcon","showBirthdays","isBirthday","isAbsent","color","specialColor","UserType","containsCollaber","collab","isChatMuted","isMuted","muteList","find","element","isAutoDeleteEnabled","tooltipText","Settings","recent","showBirthday","methods","phraseCode","$Bitrix","Loc","getMessage","template","ChatTitleWithHighlighting","BitrixVue","cloneComponent","textToHighlight","highlightText","parentDialogName","MessageAuthorTitle","messageId","message","authorId","customAuthorName","copilotManager","CopilotManager","isCopilotBot","getNameWithRole","INPUT_PADDING","EditableChatTitle","required","emits","data","isEditing","inputWidth","showEditIcon","chatTitle","canBeRenamed","PermissionManager","getInstance","canPerformActionByRole","ActionByRole","rename","inputStyle","width","watch","length","created","EventEmitter","subscribe","EventType","key","onBeforeEscape","beforeUnmount","unsubscribe","mounted","onTitleClick","$nextTick","$refs","titleInput","focus","onNewTitleSubmit","nameNotChanged","$emit","EscEventAction","ignored","handled"],"mappings":"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"}