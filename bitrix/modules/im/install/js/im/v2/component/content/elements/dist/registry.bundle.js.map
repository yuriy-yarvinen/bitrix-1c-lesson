{"version":3,"file":"registry.bundle.js","sources":["../src/chat/header/components/call-button/call-header-button.js","../src/chat/header/components/entity-link/const/chat-type-params.js","../src/chat/header/components/entity-link/entity-link.js","../src/chat/header/components/title/user-counter.js","../src/chat/header/components/title/group-chat.js","../src/chat/header/components/title/user.js","../src/chat/header/components/header-avatar.js","../src/chat/header/components/add-to-chat-button.js","../src/chat/header/components/search-button.js","../src/chat/header/components/sidebar-button.js","../src/chat/header/chat-header.js","../src/chat/base-content/const/size.js","../src/chat/base-content/components/drop-area.js","../src/chat/base-content/components/mute-panel.js","../src/chat/base-content/components/join-panel.js","../src/chat/base-content/components/bulk-actions-panel.js","../src/chat/base-content/components/loading-bar.js","../src/chat/base-content/utils/observer-directive.js","../src/chat/base-content/base-content.js"],"sourcesContent":["import { CallButton } from 'call.component.call-button';\nimport { Extension } from 'main.core';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\nimport type { ImModelChat } from 'im.v2.model';\n\nconst { callInstalled } = Extension.getSettings('im.v2.lib.call');\n\n// @vue/component\nexport const CallHeaderButton = {\n\tname: 'CallHeaderButton',\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcompactMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tcomponentToRender(): BitrixVueComponentProps\n\t\t{\n\t\t\tif (!callInstalled)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn CallButton;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<component v-if=\"componentToRender\" :is=\"componentToRender\" :dialog=\"dialog\" :compactMode=\"compactMode\" />\n\t`,\n};","import { ChatType, ChatEntityLinkType } from 'im.v2.const';\nimport { Loc } from 'main.core';\n\ntype ChatTypeParams = {\n\t[chatType: $Values<typeof ChatType>]: {\n\t\tclassName: string,\n\t\tloc: string,\n\t}\n};\n\nexport const ParamsByLinkType: ChatTypeParams = {\n\t[ChatEntityLinkType.tasks]: {\n\t\tclassName: '--task',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_TASK'),\n\t},\n\t[ChatEntityLinkType.calendar]: {\n\t\tclassName: '--calendar',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_MEETING_MSGVER_1'),\n\t},\n\t[ChatEntityLinkType.sonetGroup]: {\n\t\tclassName: '--group',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_GROUP_MSGVER_1'),\n\t},\n\t[ChatEntityLinkType.mail]: {\n\t\tclassName: '--mail',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_MAIL_MSGVER_1'),\n\t},\n\t[ChatEntityLinkType.contact]: {\n\t\tclassName: '--crm',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_CONTACT'),\n\t},\n\t[ChatEntityLinkType.deal]: {\n\t\tclassName: '--crm',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_DEAL'),\n\t},\n\t[ChatEntityLinkType.lead]: {\n\t\tclassName: '--crm',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_LEAD'),\n\t},\n\t[ChatEntityLinkType.dynamic]: {\n\t\tclassName: '--crm',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_DYNAMIC_ELEMENT'),\n\t},\n};\n","import { ParamsByLinkType } from './const/chat-type-params';\n\nimport './css/entity-link.css';\n\nimport type { ImModelChat } from 'im.v2.model';\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const EntityLink = {\n\tname: 'EntityLink',\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tentityType(): string\n\t\t{\n\t\t\treturn this.dialog.entityLink.type;\n\t\t},\n\t\tentityUrl(): string\n\t\t{\n\t\t\treturn this.dialog.entityLink.url;\n\t\t},\n\t\tcontainerClassName(): string\n\t\t{\n\t\t\treturn ParamsByLinkType[this.entityType]?.className ?? '';\n\t\t},\n\t\tlinkText(): string\n\t\t{\n\t\t\treturn ParamsByLinkType[this.entityType]?.loc ?? 'Open entity';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<a :href=\"entityUrl\" class=\"bx-im-chat-header-entity-link__container\" :class=\"containerClassName\" target=\"_blank\">\n\t\t\t<div class=\"bx-im-chat-header-entity-link__icon\"></div>\n\t\t\t<div class=\"bx-im-chat-header-entity-link__text --ellipsis\">{{ linkText }}</div>\n\t\t\t<div class=\"bx-im-chat-header-entity-link__arrow\"></div>\n\t\t</a>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport { ChatType, EventType, SidebarDetailBlock } from 'im.v2.const';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst UserCounterPhraseCodeByChatType = {\n\t[ChatType.openChannel]: 'IM_CONTENT_CHAT_HEADER_CHANNEL_USER_COUNT',\n\t[ChatType.channel]: 'IM_CONTENT_CHAT_HEADER_CHANNEL_USER_COUNT',\n\t[ChatType.generalChannel]: 'IM_CONTENT_CHAT_HEADER_CHANNEL_USER_COUNT',\n\tdefault: 'IM_CONTENT_CHAT_HEADER_USER_COUNT',\n};\n\n// @vue/component\nexport const UserCounter = {\n\tname: 'UserCounter',\n\tinject: ['currentSidebarPanel', 'withSidebar'],\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tsidebarTooltipText(): string\n\t\t{\n\t\t\treturn this.withSidebar ? this.loc('IM_CONTENT_CHAT_HEADER_OPEN_MEMBERS') : '';\n\t\t},\n\t\tisMembersPanelActive(): boolean\n\t\t{\n\t\t\treturn this.currentSidebarPanel === SidebarDetailBlock.members;\n\t\t},\n\t\tneedShowSubtitleCursor(): boolean\n\t\t{\n\t\t\treturn this.withSidebar;\n\t\t},\n\t\tuserCounterPhraseCode(): string\n\t\t{\n\t\t\treturn UserCounterPhraseCodeByChatType[this.dialog.type] ?? UserCounterPhraseCodeByChatType.default;\n\t\t},\n\t\tuserCounterText(): string\n\t\t{\n\t\t\treturn Loc.getMessagePlural(this.userCounterPhraseCode, this.dialog.userCounter, {\n\t\t\t\t'#COUNT#': this.dialog.userCounter,\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonMembersClick()\n\t\t{\n\t\t\tif (this.isMembersPanelActive)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(EventType.sidebar.close, { panel: SidebarDetailBlock.members });\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEventEmitter.emit(EventType.sidebar.open, {\n\t\t\t\tpanel: SidebarDetailBlock.members,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:title=\"sidebarTooltipText\"\n\t\t\t@click=\"onMembersClick\"\n\t\t\tclass=\"bx-im-chat-header__subtitle_content\"\n\t\t\t:class=\"{'--click': needShowSubtitleCursor}\"\n\t\t>\n\t\t\t{{ userCounterText }}\n\t\t</div>\n\t`,\n};\n","import { LineLoader } from 'im.v2.component.elements.loader';\nimport { EditableChatTitle } from 'im.v2.component.elements.chat-title';\nimport { FadeAnimation } from 'im.v2.component.animation';\n\nimport { EntityLink } from '../entity-link/entity-link';\nimport { UserCounter } from './user-counter';\n\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const GroupChatTitle = {\n\tname: 'GroupChatTitle',\n\tcomponents: { EditableChatTitle, EntityLink, LineLoader, FadeAnimation, UserCounter },\n\tinject: ['withSidebar'],\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['newTitle'],\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\thasEntityLink(): boolean\n\t\t{\n\t\t\treturn Boolean(this.dialog.entityLink?.url);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-header__info\">\n\t\t\t<EditableChatTitle :dialogId=\"dialogId\" @newTitleSubmit=\"$emit('newTitle', $event)\" />\n\t\t\t<LineLoader v-if=\"!dialog.inited\" :width=\"50\" :height=\"16\" />\n\t\t\t<FadeAnimation :duration=\"100\">\n\t\t\t\t<div v-if=\"dialog.inited\" class=\"bx-im-chat-header__subtitle_container\">\n\t\t\t\t\t<UserCounter :dialogId=\"dialogId\" />\n\t\t\t\t\t<EntityLink v-if=\"hasEntityLink\" :dialogId=\"dialogId\" />\n\t\t\t\t</div>\n\t\t\t</FadeAnimation>\n\t\t</div>\n\t`,\n};\n","import { Utils } from 'im.v2.lib.utils';\nimport { ChatTitle } from 'im.v2.component.elements.chat-title';\n\nimport type { JsonObject } from 'main.core';\n\nconst ONE_MINUTE = 60 * 1000;\n\n// @vue/component\nexport const UserTitle = {\n\tname: 'UserTitle',\n\tcomponents: { ChatTitle },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tuserLastOnlineText: '',\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tuserPosition(): string\n\t\t{\n\t\t\treturn this.$store.getters['users/getPosition'](this.dialogId);\n\t\t},\n\t\tuserLastOnline(): string\n\t\t{\n\t\t\treturn this.$store.getters['users/getLastOnline'](this.dialogId);\n\t\t},\n\t\tuserLink(): string\n\t\t{\n\t\t\treturn Utils.user.getProfileLink(this.dialogId);\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tuserLastOnline(value)\n\t\t{\n\t\t\tthis.userLastOnlineText = value;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.updateUserOnline();\n\t\tthis.userLastOnlineInterval = setInterval(this.updateUserOnline, ONE_MINUTE);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tclearInterval(this.userLastOnlineInterval);\n\t},\n\tmethods:\n\t{\n\t\tupdateUserOnline(): void\n\t\t{\n\t\t\tthis.userLastOnlineText = this.$store.getters['users/getLastOnline'](this.dialogId);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-header__info\">\n\t\t\t<div class=\"bx-im-chat-header__title --user\">\n\t\t\t\t<a :href=\"userLink\" target=\"_blank\" class=\"bx-im-chat-header__title_container\">\n\t\t\t\t\t<ChatTitle :dialogId=\"dialogId\" :withAutoDelete=\"true\" :withMute=\"true\" />\n\t\t\t\t</a>\n\t\t\t\t<span class=\"bx-im-chat-header__user-status\">{{ userLastOnlineText }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-chat-header__subtitle_container\">\n\t\t\t\t<div class=\"bx-im-chat-header__subtitle_content\">{{ userPosition }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Core } from 'im.v2.application.core';\nimport { ChatAvatar, ChatAvatarType, AvatarSize } from 'im.v2.component.elements.avatar';\nimport { ActionByRole, ChatType } from 'im.v2.const';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { Utils } from 'im.v2.lib.utils';\nimport { ChatService } from 'im.v2.provider.service.chat';\n\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const HeaderAvatar = {\n\tname: 'HeaderAvatar',\n\tcomponents: { ChatAvatar },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['avatarClick'],\n\tcomputed:\n\t{\n\t\tAvatarSize: () => AvatarSize,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisUser(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.user;\n\t\t},\n\t\tcanChangeAvatar(): boolean\n\t\t{\n\t\t\treturn PermissionManager.getInstance().canPerformActionByRole(ActionByRole.avatar, this.dialogId);\n\t\t},\n\t\tisNotes(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['chats/isNotes'](this.dialogId);\n\t\t},\n\t\tuserLink(): string\n\t\t{\n\t\t\treturn Utils.user.getProfileLink(this.dialogId);\n\t\t},\n\t\tavatarType(): string\n\t\t{\n\t\t\treturn this.isNotes ? ChatAvatarType.notes : '';\n\t\t},\n\t\tneedProfileLink(): boolean\n\t\t{\n\t\t\treturn this.isUser && !this.isNotes;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonAvatarClick()\n\t\t{\n\t\t\tif (this.isUser || !this.canChangeAvatar)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$refs.avatarInput.click();\n\t\t},\n\t\tasync onAvatarSelect(event: Event)\n\t\t{\n\t\t\tconst input: HTMLInputElement = event.target;\n\t\t\tconst file: File = input.files[0];\n\t\t\tif (!file)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst preparedAvatar = await this.getChatService().prepareAvatar(file);\n\t\t\tif (!preparedAvatar)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvoid this.getChatService().changeAvatar(this.dialog.chatId, preparedAvatar);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-header__avatar\" :class=\"{'--can-change': canChangeAvatar}\" @click=\"onAvatarClick\">\n\t\t\t<a v-if=\"needProfileLink\" :href=\"userLink\" target=\"_blank\">\n\t\t\t\t<ChatAvatar\n\t\t\t\t\t:avatarDialogId=\"dialogId\"\n\t\t\t\t\t:contextDialogId=\"dialogId\"\n\t\t\t\t\t:size=\"AvatarSize.L\"\n\t\t\t\t/>\n\t\t\t</a>\n\t\t\t<ChatAvatar v-else :avatarDialogId=\"dialogId\" :contextDialogId=\"dialogId\" :size=\"AvatarSize.L\" :customType=\"avatarType\" />\n\t\t</div>\n\t\t<input\n\t\t\ttype=\"file\"\n\t\t\taccept=\"image/*\"\n\t\t\tclass=\"bx-im-chat-header__avatar_input\"\n\t\t\tref=\"avatarInput\"\n\t\t\t@change=\"onAvatarSelect\"\n\t\t>\n\t`,\n};\n","import { AddToChat } from 'im.v2.component.entity-selector';\nimport { Analytics } from 'im.v2.lib.analytics';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const AddToChatButton = {\n\tname: 'AddToChatButton',\n\tcomponents: { AddToChat },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tshowInviteButton: false,\n\t\t\tshowAddToChatPopup: false,\n\t\t};\n\t},\n\tmethods:\n\t{\n\t\topenAddToChatPopup(): void\n\t\t{\n\t\t\tAnalytics.getInstance().userAdd.onChatHeaderClick(this.dialogId);\n\t\t\tthis.showAddToChatPopup = true;\n\t\t},\n\t\tcloseAddToChatPopup(): void\n\t\t{\n\t\t\tthis.showAddToChatPopup = false;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:title=\"loc('IM_CONTENT_CHAT_HEADER_OPEN_INVITE_POPUP_TITLE')\"\n\t\t\t:class=\"{'--active': showAddToChatPopup}\"\n\t\t\tclass=\"bx-im-chat-header__icon --add-people\"\n\t\t\t@click=\"openAddToChatPopup\"\n\t\t\tref=\"add-members\"\n\t\t></div>\n\t\t<AddToChat\n\t\t\tv-if=\"showAddToChatPopup\"\n\t\t\t:bindElement=\"$refs['add-members'] ?? {}\"\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:popupConfig=\"{ offsetTop: 15, offsetLeft: -300 }\"\n\t\t\t@close=\"closeAddToChatPopup\"\n\t\t/>\n\t`,\n};\n","import { EventEmitter } from 'main.core.events';\n\nimport { EventType, SidebarDetailBlock } from 'im.v2.const';\n\n// @vue/component\nexport const SearchButton = {\n\tname: 'SearchButton',\n\tinject: ['currentSidebarPanel'],\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tisMessageSearchActive(): boolean\n\t\t{\n\t\t\treturn this.currentSidebarPanel === SidebarDetailBlock.messageSearch;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\ttoggleSearchPanel()\n\t\t{\n\t\t\tif (this.isMessageSearchActive)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(EventType.sidebar.close, { panel: SidebarDetailBlock.messageSearch });\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEventEmitter.emit(EventType.sidebar.open, {\n\t\t\t\tpanel: SidebarDetailBlock.messageSearch,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:title=\"loc('IM_CONTENT_CHAT_HEADER_OPEN_SEARCH')\"\n\t\t\t:class=\"{'--active': isMessageSearchActive}\"\n\t\t\tclass=\"bx-im-chat-header__icon --search\"\n\t\t\t@click=\"toggleSearchPanel\"\n\t\t></div>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport { EventType, SidebarDetailBlock } from 'im.v2.const';\n\n// @vue/component\nexport const SidebarButton = {\n\tname: 'SidebarButton',\n\tinject: ['currentSidebarPanel'],\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tisSidebarOpened(): boolean\n\t\t{\n\t\t\treturn Type.isStringFilled(this.currentSidebarPanel);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\ttoggleRightPanel()\n\t\t{\n\t\t\tif (this.isSidebarOpened)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(EventType.sidebar.close, { panel: '' });\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEventEmitter.emit(EventType.sidebar.open, {\n\t\t\t\tpanel: SidebarDetailBlock.main,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"bx-im-chat-header__icon --panel\"\n\t\t\t:title=\"loc('IM_CONTENT_CHAT_HEADER_OPEN_SIDEBAR')\"\n\t\t\t:class=\"{'--active': isSidebarOpened}\"\n\t\t\t@click=\"toggleRightPanel\"\n\t\t></div>\n\t`,\n};\n","import { LineLoader } from 'im.v2.component.elements.loader';\nimport { ChatAvatar } from 'im.v2.component.elements.avatar';\nimport { ChatService } from 'im.v2.provider.service.chat';\nimport { ChatType, ActionByRole, UserType, ActionByUserType } from 'im.v2.const';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { FadeAnimation } from 'im.v2.component.animation';\n\nimport { CallHeaderButton } from './components/call-button/call-header-button';\nimport { GroupChatTitle } from './components/title/group-chat';\nimport { UserTitle as UserChatTitle } from './components/title/user';\nimport { HeaderAvatar } from './components/header-avatar';\nimport { AddToChatButton } from './components/add-to-chat-button';\nimport { SearchButton } from './components/search-button';\nimport { SidebarButton } from './components/sidebar-button';\n\nimport './css/chat-header.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelUser, ImModelChat } from 'im.v2.model';\n\nconst HEADER_WIDTH_BREAKPOINT = 700;\n\n// @vue/component\nexport const ChatHeader = {\n\tname: 'ChatHeader',\n\tcomponents: {\n\t\tChatAvatar,\n\t\tCallHeaderButton,\n\t\tGroupChatTitle,\n\t\tUserChatTitle,\n\t\tLineLoader,\n\t\tFadeAnimation,\n\t\tHeaderAvatar,\n\t\tAddToChatButton,\n\t\tSearchButton,\n\t\tSidebarButton,\n\t},\n\tinject: ['withSidebar'],\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\twithCallButton: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSearchButton: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithAddToChatButton: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\temits: ['buttonPanelReady', 'compactModeChange'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tcompactMode: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tuser(): ImModelUser\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](this.dialogId, true);\n\t\t},\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisInited(): boolean\n\t\t{\n\t\t\treturn this.dialog.inited;\n\t\t},\n\t\tisUser(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.user;\n\t\t},\n\t\tisBot(): boolean\n\t\t{\n\t\t\tif (!this.isUser)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.user.type === UserType.bot;\n\t\t},\n\t\tshowCallButton(): boolean\n\t\t{\n\t\t\tif (this.isBot || !this.withCallButton)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn PermissionManager.getInstance().canPerformActionByRole(ActionByRole.call, this.dialogId);\n\t\t},\n\t\tshowAddToChatButton(): boolean\n\t\t{\n\t\t\tif (this.isBot || !this.withAddToChatButton)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst hasCreateChatAccess = PermissionManager.getInstance().canPerformActionByUserType(\n\t\t\t\tActionByUserType.createChat,\n\t\t\t);\n\t\t\tif (this.isUser && !hasCreateChatAccess)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn PermissionManager.getInstance().canPerformActionByRole(ActionByRole.extend, this.dialogId);\n\t\t},\n\t\tshowSearchButton(): boolean\n\t\t{\n\t\t\treturn this.withSearchButton;\n\t\t},\n\t\tshowSidebarButton(): boolean\n\t\t{\n\t\t\tif (!this.withSidebar)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn PermissionManager.getInstance().canPerformActionByRole(ActionByRole.openSidebar, this.dialogId);\n\t\t},\n\t\tchatTitleComponent(): string\n\t\t{\n\t\t\treturn this.isUser ? UserChatTitle : GroupChatTitle;\n\t\t},\n\t\tcontainerClasses(): Record<string, boolean>\n\t\t{\n\t\t\treturn { '--compact': this.compactMode };\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tif (this.isInited)\n\t\t{\n\t\t\tthis.emitButtonPanelReady();\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tthis.initResizeObserver();\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.getResizeObserver().disconnect();\n\t},\n\tmethods:\n\t{\n\t\tinitResizeObserver()\n\t\t{\n\t\t\tthis.resizeObserver = new ResizeObserver(([entry]) => {\n\t\t\t\tthis.onContainerResize(entry.contentRect.width);\n\t\t\t});\n\t\t\tthis.resizeObserver.observe(this.$refs.container);\n\t\t},\n\t\tonContainerResize(newContainerWidth: number)\n\t\t{\n\t\t\tconst newCompactMode = newContainerWidth <= HEADER_WIDTH_BREAKPOINT;\n\t\t\tif (newCompactMode !== this.compactMode)\n\t\t\t{\n\t\t\t\tthis.$emit('compactModeChange', newCompactMode);\n\t\t\t\tthis.compactMode = newCompactMode;\n\t\t\t}\n\t\t},\n\t\tonNewTitleSubmit(newTitle: string)\n\t\t{\n\t\t\tvoid this.getChatService().renameChat(this.dialogId, newTitle);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tgetResizeObserver(): ResizeObserver\n\t\t{\n\t\t\treturn this.resizeObserver;\n\t\t},\n\t\temitButtonPanelReady()\n\t\t{\n\t\t\tthis.$emit('buttonPanelReady');\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-header__scope bx-im-chat-header__container\" :class=\"containerClasses\" ref=\"container\">\n\t\t\t<div class=\"bx-im-chat-header__left\">\n\t\t\t\t<slot name=\"left\">\n\t\t\t\t\t<HeaderAvatar :dialogId=\"dialogId\" />\n\t\t\t\t\t<slot name=\"title\" :onNewTitleHandler=\"onNewTitleSubmit\">\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is=\"chatTitleComponent\"\n\t\t\t\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t\t\t\t@newTitle=\"onNewTitleSubmit\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</slot>\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t\t<LineLoader v-if=\"!isInited\" :width=\"45\" :height=\"22\" />\n\t\t\t<FadeAnimation @afterEnter=\"emitButtonPanelReady\" :duration=\"100\">\n\t\t\t\t<div v-if=\"isInited\" class=\"bx-im-chat-header__right\">\n\t\t\t\t\t<slot name=\"before-actions\"></slot>\n\t\t\t\t\t<CallHeaderButton v-if=\"showCallButton\" :dialogId=\"dialogId\" :compactMode=\"compactMode\" />\n\t\t\t\t\t<slot v-if=\"showAddToChatButton\" name=\"add-to-chat-button\">\n\t\t\t\t\t\t<AddToChatButton :dialogId=\"dialogId\" />\n\t\t\t\t\t</slot>\n\t\t\t\t\t<SearchButton v-if=\"showSearchButton\" :dialogId=\"dialogId\" />\n\t\t\t\t\t<SidebarButton v-if=\"showSidebarButton\" :dialogId=\"dialogId\" />\n\t\t\t\t</div>\n\t\t\t</FadeAnimation>\n\t\t</div>\n\t`,\n};\n","export const Height = {\n\tchatHeader: 64,\n\tpinnedMessages: 53,\n\tblockedTextarea: 64,\n\tdropAreaOffset: 16,\n};\n","import { getFilesFromDataTransfer, hasDataTransferOnlyFiles } from 'ui.uploader.core';\nimport { Event, Type, type JsonObject } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport { EventType } from 'im.v2.const';\nimport { MultiUploadingService, type MultiUploadingResult } from 'im.v2.provider.service.uploading';\n\nimport { Height } from '../const/size';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nimport '../css/drop-area.css';\n\n// @vue/component\nexport const DropArea = {\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcontainer: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tshowDropArea: false,\n\t\t\tlastDropAreaEnterTarget: null,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\thasPinnedMessages(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['messages/pin/getPinned'](this.dialog.chatId).length > 0;\n\t\t},\n\t\tdropAreaStyles(): {[top: string]: string}\n\t\t{\n\t\t\tlet offset = Height.dropAreaOffset + Height.chatHeader;\n\t\t\tif (this.hasPinnedMessages)\n\t\t\t{\n\t\t\t\toffset += Height.pinnedMessages;\n\t\t\t}\n\n\t\t\treturn { top: `${offset}px` };\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tcontainer: {\n\t\t\timmediate: true,\n\t\t\thandler(newValue)\n\t\t\t{\n\t\t\t\tif (!Type.isElementNode(newValue))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.bindEvents();\n\t\t\t},\n\t\t},\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.unbindEvents();\n\t},\n\tmethods:\n\t{\n\t\tbindEvents()\n\t\t{\n\t\t\tEvent.bind(this.container, 'dragenter', this.onDragEnter);\n\t\t\tEvent.bind(this.container, 'dragleave', this.onDragLeave);\n\t\t\tEvent.bind(this.container, 'dragover', this.onDragOver);\n\t\t\tEvent.bind(this.container, 'drop', this.onDrop);\n\t\t},\n\t\tunbindEvents()\n\t\t{\n\t\t\tEvent.unbind(this.container, 'dragenter', this.onDragEnter);\n\t\t\tEvent.unbind(this.container, 'dragleave', this.onDragLeave);\n\t\t\tEvent.unbind(this.container, 'dragover', this.onDragOver);\n\t\t\tEvent.unbind(this.container, 'drop', this.onDrop);\n\t\t},\n\t\tasync onDragEnter(event: DragEvent)\n\t\t{\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tconst success = await hasDataTransferOnlyFiles(event.dataTransfer, false);\n\t\t\tif (!success)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.lastDropAreaEnterTarget = event.target;\n\t\t\tthis.showDropArea = true;\n\t\t},\n\t\tonDragLeave(event: DragEvent)\n\t\t{\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tif (this.lastDropAreaEnterTarget !== event.target)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.showDropArea = false;\n\t\t},\n\t\tonDragOver(event: DragEvent)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tasync onDrop(event: DragEvent)\n\t\t{\n\t\t\tevent.preventDefault();\n\n\t\t\tconst multiUploadingService: MultiUploadingService = this.getMultiUploadingService();\n\t\t\tconst multiUploadingResult: MultiUploadingResult = await multiUploadingService.upload({\n\t\t\t\tfiles: await getFilesFromDataTransfer(event.dataTransfer),\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tsendAsFile: false,\n\t\t\t\tautoUpload: false,\n\t\t\t});\n\n\t\t\tif (Type.isArrayFilled(multiUploadingResult.uploaderIds))\n\t\t\t{\n\t\t\t\tEventEmitter.emit(EventType.textarea.openUploadPreview, { multiUploadingResult });\n\t\t\t}\n\t\t\tthis.showDropArea = false;\n\t\t},\n\t\tgetMultiUploadingService(): MultiUploadingService\n\t\t{\n\t\t\tif (!this.multiUploadingService)\n\t\t\t{\n\t\t\t\tthis.multiUploadingService = new MultiUploadingService();\n\t\t\t}\n\n\t\t\treturn this.multiUploadingService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Transition name=\"drop-area-fade\">\n\t\t\t<div v-if=\"showDropArea\" :style=\"dropAreaStyles\" class=\"bx-im-content-chat-drop-area__container bx-im-content-chat-drop-area__scope\">\n\t\t\t\t<div class=\"bx-im-content-chat-drop-area__box\">\n\t\t\t\t\t<span class=\"bx-im-content-chat-drop-area__icon\"></span>\n\t\t\t\t\t<label class=\"bx-im-content-chat-drop-area__label-text\">\n\t\t\t\t\t\t{{ loc('IM_CONTENT_DROP_AREA') }}\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Transition>\n\t`,\n};\n","import { Core } from 'im.v2.application.core';\nimport { ChatButton, ButtonSize, type CustomColorScheme } from 'im.v2.component.elements.button';\nimport { Color } from 'im.v2.const';\nimport { ChatService } from 'im.v2.provider.service.chat';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst BUTTON_BACKGROUND_COLOR = 'rgba(0, 0, 0, 0.1)';\nconst BUTTON_HOVER_COLOR = 'rgba(0, 0, 0, 0.2)';\nconst BUTTON_TEXT_COLOR = '#fff';\n\n// @vue/component\nexport const MutePanel = {\n\tcomponents: { ChatButton },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisMuted(): boolean\n\t\t{\n\t\t\treturn this.dialog.muteList.includes(Core.getUserId());\n\t\t},\n\t\tbuttonText(): string\n\t\t{\n\t\t\tconst mutedCode = this.loc('IM_CONTENT_BLOCKED_TEXTAREA_ENABLE_NOTIFICATIONS');\n\t\t\tconst unmutedCode = this.loc('IM_CONTENT_BLOCKED_TEXTAREA_DISABLE_NOTIFICATIONS');\n\n\t\t\treturn this.isMuted ? mutedCode : unmutedCode;\n\t\t},\n\t\tbuttonColorScheme(): CustomColorScheme\n\t\t{\n\t\t\treturn {\n\t\t\t\tborderColor: Color.transparent,\n\t\t\t\tbackgroundColor: BUTTON_BACKGROUND_COLOR,\n\t\t\t\ticonColor: BUTTON_TEXT_COLOR,\n\t\t\t\ttextColor: BUTTON_TEXT_COLOR,\n\t\t\t\thoverColor: BUTTON_HOVER_COLOR,\n\t\t\t};\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonButtonClick()\n\t\t{\n\t\t\tif (this.isMuted)\n\t\t\t{\n\t\t\t\tthis.getChatService().unmuteChat(this.dialogId);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.getChatService().muteChat(this.dialogId);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat__textarea_placeholder\">\n\t\t\t<ChatButton\n\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t:customColorScheme=\"buttonColorScheme\"\n\t\t\t\t:text=\"buttonText\"\n\t\t\t\t:isRounded=\"true\"\n\t\t\t\t@click=\"onButtonClick\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { ChatButton, ButtonColor, ButtonSize } from 'im.v2.component.elements.button';\nimport { ChatService } from 'im.v2.provider.service.chat';\n\n// @vue/component\nexport const JoinPanel = {\n\tcomponents: { ChatButton },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonColor: () => ButtonColor,\n\t},\n\tmethods:\n\t{\n\t\tonButtonClick()\n\t\t{\n\t\t\tthis.getChatService().joinChat(this.dialogId);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat__textarea_placeholder\">\n\t\t\t<ChatButton\n\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t:color=\"ButtonColor.Primary\"\n\t\t\t\t:text=\"loc('IM_CONTENT_BLOCKED_TEXTAREA_JOIN_CHAT')\"\n\t\t\t\t:isRounded=\"true\"\n\t\t\t\t@click=\"onButtonClick\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { EventEmitter } from 'main.core.events';\nimport { hint } from 'ui.vue3.directives.hint';\nimport { Core } from 'im.v2.application.core';\n\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { ActionByRole, EventType } from 'im.v2.const';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ChatButton, ButtonSize, ButtonIcon, ButtonColor } from 'im.v2.component.elements.button';\nimport { ForwardPopup } from 'im.v2.component.entity-selector';\nimport { showDeleteMessagesConfirm } from 'im.v2.lib.confirm';\nimport { MessageService } from 'im.v2.provider.service.message';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nimport '../css/bulk-actions-panel.css';\n\n// @vue/component\nexport const BulkActionsPanel = {\n\tname: 'BulkActionsPanel',\n\tcomponents: { ChatButton, ForwardPopup },\n\tdirectives: { hint },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tshowForwardPopup: false,\n\t\t\tmessagesIds: [],\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonIcon: () => ButtonIcon,\n\t\tButtonColor: () => ButtonColor,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tselectedMessages(): Set<number>\n\t\t{\n\t\t\treturn this.$store.getters['messages/select/getCollection'](this.dialogId);\n\t\t},\n\t\tmessagesAuthorId(): number[]\n\t\t{\n\t\t\treturn [...this.selectedMessages].map((messageId) => {\n\t\t\t\treturn this.$store.getters['messages/getById'](messageId).authorId;\n\t\t\t});\n\t\t},\n\t\thasOthersMessages(): boolean\n\t\t{\n\t\t\tconst userId = Core.getUserId();\n\n\t\t\treturn this.messagesAuthorId.some((authorId) => authorId !== userId);\n\t\t},\n\t\tcanDeleteMessage(): boolean\n\t\t{\n\t\t\tconst permissionManager = PermissionManager.getInstance();\n\n\t\t\treturn permissionManager.canPerformActionByRole(\n\t\t\t\tActionByRole.deleteOthersMessage,\n\t\t\t\tthis.dialogId,\n\t\t\t);\n\t\t},\n\t\tselectedMessagesSize(): number\n\t\t{\n\t\t\treturn this.selectedMessages.size;\n\t\t},\n\t\tformattedMessagesCounter(): string\n\t\t{\n\t\t\tif (!this.selectedMessagesSize)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn `(${this.selectedMessagesSize})`;\n\t\t},\n\t\tisBlockedDeletion(): boolean\n\t\t{\n\t\t\tif (this.canDeleteMessage)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.hasOthersMessages;\n\t\t},\n\t\tmessageCounterText(): string\n\t\t{\n\t\t\tif (!this.selectedMessagesSize)\n\t\t\t{\n\t\t\t\treturn this.loc('IM_CONTENT_BULK_ACTIONS_SELECT_MESSAGES');\n\t\t\t}\n\n\t\t\treturn this.loc('IM_CONTENT_BULK_ACTIONS_COUNT_MESSAGES');\n\t\t},\n\t\tconfirmTitle(): string\n\t\t{\n\t\t\treturn this.loc('IM_CONTENT_BULK_ACTIONS_CONFIRM_TITLE', { '#COUNT#': this.selectedMessagesSize });\n\t\t},\n\t\ttooltipSettings(): { text: string, popupOptions: Object<string, any> }\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('IM_CONTENT_BULK_ACTIONS_DELETE_NOT_CAN_DELETE'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tangle: true,\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t\toffsetTop: -13,\n\t\t\t\t\toffsetLeft: 65,\n\t\t\t\t\tbindOptions: {\n\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonForwardButtonClick()\n\t\t{\n\t\t\tAnalytics.getInstance().messageForward.onClickForward(this.dialogId);\n\t\t\tthis.messagesIds = [...this.selectedMessages];\n\t\t\tthis.showForwardPopup = true;\n\t\t},\n\t\tcloseForwardPopup()\n\t\t{\n\t\t\tthis.messagesIds = [];\n\t\t\tthis.showForwardPopup = false;\n\t\t},\n\t\tasync onDeleteButtonClick(): Promise<boolean>\n\t\t{\n\t\t\tconst confirmResult = await showDeleteMessagesConfirm(this.confirmTitle);\n\n\t\t\tif (!confirmResult)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.getMessageService().deleteMessages([...this.selectedMessages]);\n\t\t\tthis.closeBulkActionsMode();\n\n\t\t\treturn true;\n\t\t},\n\t\tcloseBulkActionsMode()\n\t\t{\n\t\t\tEventEmitter.emit(EventType.dialog.closeBulkActionsMode, {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t\tgetMessageService(): MessageService\n\t\t{\n\t\t\tif (!this.messageService)\n\t\t\t{\n\t\t\t\tthis.messageService = new MessageService({ chatId: this.dialog.chatId });\n\t\t\t}\n\n\t\t\treturn this.messageService;\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-bulk-actions-panel\">\n\t\t\t<div class=\"bx-im-content-bulk-actions-panel__container\">\n\t\t\t\t<div class=\"bx-im-content-bulk-actions-panel__left-section\">\n\t\t\t\t\t<div @click=\"closeBulkActionsMode\" class=\"bx-im-content-bulk-actions-panel__cancel\"></div>\n\t\t\t\t\t<div class=\"bx-im-content-bulk-actions-panel__counter-container\">\n\t\t\t\t\t\t<span class=\"bx-im-content-bulk-actions-panel__counter-name\">{{ messageCounterText }}</span>\n\t\t\t\t\t\t<span class=\"bx-im-content-bulk-actions-panel__counter-number\">{{ formattedMessagesCounter }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-bulk-actions-panel__right-section\">\n\t\t\t\t\t<div class=\"bx-im-content-bulk-actions-panel__delete-button\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isBlockedDeletion\"\n\t\t\t\t\t\t\tv-hint=\"tooltipSettings\"\n\t\t\t\t\t\t\tclass=\"bx-im-content-bulk-actions-panel__tooltip\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ChatButton\n\t\t\t\t\t\t\t:size=\"ButtonSize.L\"\n\t\t\t\t\t\t\t:icon=\"ButtonIcon.Delete\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.Delete\"\n\t\t\t\t\t\t\t:isDisabled=\"!selectedMessagesSize || isBlockedDeletion\"\n\t\t\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t\t\t:isUppercase=\"false\"\n\t\t\t\t\t\t\t:text=\"loc('IM_CONTENT_BULK_ACTIONS_PANEL_DELETE')\"\n\t\t\t\t\t\t\t@click=\"onDeleteButtonClick\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ChatButton\n\t\t\t\t\t\t:size=\"ButtonSize.L\"\n\t\t\t\t\t\t:icon=\"ButtonIcon.Forward\"\n\t\t\t\t\t\t:color=\"ButtonColor.Forward\"\n\t\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t\t:isUppercase=\"false\"\n\t\t\t\t\t\t:isDisabled=\"!selectedMessagesSize\"\n\t\t\t\t\t\t:text=\"loc('IM_CONTENT_BULK_ACTIONS_PANEL_FORWARD')\"\n\t\t\t\t\t\t@click=\"onForwardButtonClick\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<ForwardPopup\n\t\t\t\t\tv-if=\"showForwardPopup\"\n\t\t\t\t\t:messagesIds=\"messagesIds\"\n\t\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t\t@close=\"closeForwardPopup\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import '../css/loading-bar.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const LoadingBar = {\n\tname: 'LoadingBar',\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat__loading-bar\"></div>\n\t`,\n};\n","export const TextareaObserverDirective = {\n\tmounted(element, binding)\n\t{\n\t\tbinding.instance.textareaResizeManager.observeTextarea(element);\n\t},\n\tbeforeUnmount(element, binding)\n\t{\n\t\tbinding.instance.textareaResizeManager.unobserveTextarea(element);\n\t},\n};\n","import { EventEmitter, BaseEvent } from 'main.core.events';\nimport { computed } from 'ui.vue3';\n\nimport { ChatDialog } from 'im.v2.component.dialog.chat';\nimport { ChatTextarea } from 'im.v2.component.textarea';\nimport { ThemeManager } from 'im.v2.lib.theme';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ResizeManager } from 'im.v2.lib.textarea';\nimport { ChatSidebar } from 'im.v2.component.sidebar';\nimport { ActionByRole, Settings, UserRole, EventType, SidebarDetailBlock } from 'im.v2.const';\nimport { BulkActionsManager } from 'im.v2.lib.bulk-actions';\n\nimport { Height } from './const/size';\nimport { ChatHeader } from '../header/chat-header';\nimport { DropArea } from './components/drop-area';\nimport { MutePanel } from './components/mute-panel';\nimport { JoinPanel } from './components/join-panel';\nimport { BulkActionsPanel } from './components/bulk-actions-panel';\nimport { LoadingBar } from './components/loading-bar';\nimport { TextareaObserverDirective } from './utils/observer-directive';\n\nimport './css/base-chat-content.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelChat } from 'im.v2.model';\nimport type { BackgroundStyle } from 'im.v2.lib.theme';\n\ntype SidebarDetailBlockType = $Values<typeof SidebarDetailBlock>;\n\n// @vue/component\nexport const BaseChatContent = {\n\tname: 'BaseChatContent',\n\tcomponents:\n\t{\n\t\tChatHeader,\n\t\tChatDialog,\n\t\tChatTextarea,\n\t\tChatSidebar,\n\t\tDropArea,\n\t\tMutePanel,\n\t\tJoinPanel,\n\t\tBulkActionsPanel,\n\t\tLoadingBar,\n\t},\n\tdirectives: { 'textarea-observer': TextareaObserverDirective },\n\tprovide(): { currentSidebarPanel: SidebarDetailBlockType, withSidebar: boolean }\n\t{\n\t\treturn {\n\t\t\tcurrentSidebarPanel: computed(() => this.currentSidebarPanel),\n\t\t\twithSidebar: computed(() => this.withSidebar),\n\t\t};\n\t},\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\twithSidebar: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithHeader: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithDropArea: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\ttextareaHeight: 0,\n\t\t\tshowLoadingBar: false,\n\t\t\tcurrentSidebarPanel: '',\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tcanSend(): boolean\n\t\t{\n\t\t\tif (!this.dialog.isTextareaEnabled)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn PermissionManager.getInstance().canPerformActionByRole(ActionByRole.send, this.dialog.dialogId);\n\t\t},\n\t\tisGuest(): boolean\n\t\t{\n\t\t\treturn this.dialog.role === UserRole.guest;\n\t\t},\n\t\tisBulkActionsMode(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['messages/select/isBulkActionsModeActive'](this.dialogId);\n\t\t},\n\t\thasCommentsOnTop(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['messages/comments/areOpenedForChannel'](this.dialogId);\n\t\t},\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\tconst alignment = this.$store.getters['application/settings/get'](Settings.appearance.alignment);\n\n\t\t\treturn [`--${alignment}-align`];\n\t\t},\n\t\tbackgroundStyle(): BackgroundStyle\n\t\t{\n\t\t\treturn ThemeManager.getCurrentBackgroundStyle(this.dialogId);\n\t\t},\n\t\tdialogContainerStyle(): Object\n\t\t{\n\t\t\tlet textareaHeight = this.textareaHeight;\n\t\t\tif (!this.canSend || this.isBulkActionsMode)\n\t\t\t{\n\t\t\t\ttextareaHeight = Height.blockedTextarea;\n\t\t\t}\n\n\t\t\tconst headerHeight = this.withHeader ? Height.chatHeader : 0;\n\n\t\t\treturn {\n\t\t\t\theight: `calc(100% - ${headerHeight}px - ${textareaHeight}px)`,\n\t\t\t};\n\t\t},\n\t},\n\twatch:\n\t{\n\t\ttextareaHeight(newValue, oldValue)\n\t\t{\n\t\t\tif (!this.dialog.inited || oldValue === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEventEmitter.emit(EventType.dialog.scrollToBottom, {\n\t\t\t\tchatId: this.dialog.chatId,\n\t\t\t\tanimation: false,\n\t\t\t});\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initTextareaResizeManager();\n\t\tthis.bindEvents();\n\n\t\tBulkActionsManager.init();\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.unbindEvents();\n\t},\n\tmethods:\n\t{\n\t\tinitTextareaResizeManager()\n\t\t{\n\t\t\tthis.textareaResizeManager = new ResizeManager();\n\t\t\tthis.textareaResizeManager.subscribe(ResizeManager.events.onHeightChange, this.onTextareaHeightChange);\n\t\t},\n\t\tonTextareaMount()\n\t\t{\n\t\t\tconst textareaContainer: HTMLDivElement = this.$refs['textarea-container'];\n\t\t\tthis.textareaHeight = textareaContainer.clientHeight;\n\t\t},\n\t\tonTextareaHeightChange(event: BaseEvent<{newHeight: number}>)\n\t\t{\n\t\t\tconst { newHeight } = event.getData();\n\t\t\tthis.textareaHeight = newHeight;\n\t\t},\n\t\tonShowLoadingBar(event: BaseEvent<{ dialogId: string }>)\n\t\t{\n\t\t\tconst { dialogId } = event.getData();\n\t\t\tif (dialogId !== this.dialogId)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.showLoadingBar = true;\n\t\t},\n\t\tonHideLoadingBar(event: BaseEvent<{ dialogId: string }>)\n\t\t{\n\t\t\tconst { dialogId } = event.getData();\n\t\t\tif (dialogId !== this.dialogId)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.showLoadingBar = false;\n\t\t},\n\t\tonChangeSidebarPanel({ panel }: { panel: SidebarDetailBlockType })\n\t\t{\n\t\t\tthis.currentSidebarPanel = panel;\n\t\t},\n\t\tbindEvents()\n\t\t{\n\t\t\tEventEmitter.subscribe(EventType.dialog.showLoadingBar, this.onShowLoadingBar);\n\t\t\tEventEmitter.subscribe(EventType.dialog.hideLoadingBar, this.onHideLoadingBar);\n\t\t},\n\t\tunbindEvents()\n\t\t{\n\t\t\tEventEmitter.unsubscribe(EventType.dialog.showLoadingBar, this.onShowLoadingBar);\n\t\t\tEventEmitter.unsubscribe(EventType.dialog.hideLoadingBar, this.onHideLoadingBar);\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat__scope bx-im-content-chat__container\" :class=\"containerClasses\" :style=\"backgroundStyle\">\n\t\t\t<div class=\"bx-im-content-chat__content\" ref=\"content\">\n\t\t\t\t<slot v-if=\"withHeader\" name=\"header\">\n\t\t\t\t\t<ChatHeader :dialogId=\"dialogId\" :key=\"dialogId\" />\n\t\t\t\t</slot>\n\t\t\t\t<slot name=\"sub-header\"></slot>\n\t\t\t\t<div :style=\"dialogContainerStyle\" class=\"bx-im-content-chat__dialog_container\">\n\t\t\t\t\t<Transition name=\"loading-bar-transition\">\n\t\t\t\t\t\t<LoadingBar v-if=\"showLoadingBar\" />\n\t\t\t\t\t</Transition>\n\t\t\t\t\t<div class=\"bx-im-content-chat__dialog_content\">\n\t\t\t\t\t\t<slot name=\"dialog\">\n\t\t\t\t\t\t\t<ChatDialog :dialogId=\"dialogId\" :key=\"dialogId\"/>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!-- Textarea -->\n\t\t\t\t<Transition name=\"bx-im-panel-transition\">\n\t\t\t\t\t<BulkActionsPanel v-if=\"isBulkActionsMode\" :dialogId=\"dialogId\"/>\n\t\t\t\t\t<div v-else-if=\"canSend\" v-textarea-observer class=\"bx-im-content-chat__textarea_container\" ref=\"textarea-container\">\n\t\t\t\t\t\t<slot name=\"textarea\" :onTextareaMount=\"onTextareaMount\">\n\t\t\t\t\t\t\t<ChatTextarea\n\t\t\t\t\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t\t\t\t\t:key=\"dialogId\"\n\t\t\t\t\t\t\t\t@mounted=\"onTextareaMount\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t\t<slot v-else-if=\"isGuest\" name=\"join-panel\">\n\t\t\t\t\t\t<JoinPanel :dialogId=\"dialogId\" />\n\t\t\t\t\t</slot>\n\t\t\t\t\t<MutePanel v-else :dialogId=\"dialogId\" />\n\t\t\t\t</Transition>\n\t\t\t\t<DropArea\n\t\t\t\t\tv-if=\"withDropArea\"\n\t\t\t\t\t:key=\"dialogId\" \n\t\t\t\t\t:dialogId=\"dialogId\" \n\t\t\t\t\t:container=\"$refs.content || {}\" \n\t\t\t\t/>\n\t\t\t\t<!-- End textarea -->\n\t\t\t</div>\n\t\t\t<ChatSidebar\n\t\t\t\tv-if=\"dialogId && withSidebar\" \n\t\t\t\t:originDialogId=\"dialogId\"\n\t\t\t\t:isActive=\"!hasCommentsOnTop\"\n\t\t\t\t@changePanel=\"onChangeSidebarPanel\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n"],"names":["callInstalled","Extension","getSettings","CallHeaderButton","name","props","dialogId","type","String","required","compactMode","Boolean","default","computed","dialog","$store","getters","componentToRender","CallButton","template","ParamsByLinkType","ChatEntityLinkType","tasks","className","loc","Loc","getMessage","calendar","sonetGroup","mail","contact","deal","lead","dynamic","EntityLink","data","entityType","entityLink","entityUrl","url","containerClassName","linkText","UserCounterPhraseCodeByChatType","ChatType","openChannel","channel","generalChannel","UserCounter","inject","sidebarTooltipText","withSidebar","isMembersPanelActive","currentSidebarPanel","SidebarDetailBlock","members","needShowSubtitleCursor","userCounterPhraseCode","userCounterText","getMessagePlural","userCounter","methods","onMembersClick","EventEmitter","emit","EventType","sidebar","close","panel","open","phraseCode","$Bitrix","GroupChatTitle","components","EditableChatTitle","LineLoader","FadeAnimation","emits","hasEntityLink","ONE_MINUTE","UserTitle","ChatTitle","userLastOnlineText","userPosition","userLastOnline","userLink","Utils","user","getProfileLink","watch","value","created","updateUserOnline","userLastOnlineInterval","setInterval","beforeUnmount","clearInterval","HeaderAvatar","ChatAvatar","AvatarSize","isUser","canChangeAvatar","PermissionManager","getInstance","canPerformActionByRole","ActionByRole","avatar","isNotes","avatarType","ChatAvatarType","notes","needProfileLink","onAvatarClick","$refs","avatarInput","click","onAvatarSelect","event","input","target","file","files","preparedAvatar","getChatService","prepareAvatar","changeAvatar","chatId","chatService","ChatService","AddToChatButton","AddToChat","showInviteButton","showAddToChatPopup","openAddToChatPopup","Analytics","userAdd","onChatHeaderClick","closeAddToChatPopup","SearchButton","isMessageSearchActive","messageSearch","toggleSearchPanel","SidebarButton","isSidebarOpened","Type","isStringFilled","toggleRightPanel","main","HEADER_WIDTH_BREAKPOINT","ChatHeader","UserChatTitle","withCallButton","withSearchButton","withAddToChatButton","isInited","inited","isBot","UserType","bot","showCallButton","call","showAddToChatButton","hasCreateChatAccess","canPerformActionByUserType","ActionByUserType","createChat","extend","showSearchButton","showSidebarButton","openSidebar","chatTitleComponent","containerClasses","emitButtonPanelReady","mounted","initResizeObserver","getResizeObserver","disconnect","resizeObserver","ResizeObserver","entry","onContainerResize","contentRect","width","observe","container","newContainerWidth","newCompactMode","$emit","onNewTitleSubmit","newTitle","renameChat","replacements","Height","chatHeader","pinnedMessages","blockedTextarea","dropAreaOffset","DropArea","Object","showDropArea","lastDropAreaEnterTarget","hasPinnedMessages","length","dropAreaStyles","offset","top","immediate","handler","newValue","isElementNode","bindEvents","unbindEvents","Event","bind","onDragEnter","onDragLeave","onDragOver","onDrop","unbind","stopPropagation","preventDefault","success","hasDataTransferOnlyFiles","dataTransfer","multiUploadingService","getMultiUploadingService","multiUploadingResult","upload","getFilesFromDataTransfer","sendAsFile","autoUpload","isArrayFilled","uploaderIds","textarea","openUploadPreview","MultiUploadingService","BUTTON_BACKGROUND_COLOR","BUTTON_HOVER_COLOR","BUTTON_TEXT_COLOR","MutePanel","ChatButton","ButtonSize","isMuted","muteList","includes","Core","getUserId","buttonText","mutedCode","unmutedCode","buttonColorScheme","borderColor","Color","transparent","backgroundColor","iconColor","textColor","hoverColor","onButtonClick","unmuteChat","muteChat","JoinPanel","ButtonColor","joinChat","BulkActionsPanel","ForwardPopup","directives","hint","showForwardPopup","messagesIds","ButtonIcon","selectedMessages","messagesAuthorId","map","messageId","authorId","hasOthersMessages","userId","some","canDeleteMessage","permissionManager","deleteOthersMessage","selectedMessagesSize","size","formattedMessagesCounter","isBlockedDeletion","messageCounterText","confirmTitle","tooltipSettings","text","popupOptions","angle","targetContainer","document","body","offsetTop","offsetLeft","bindOptions","position","onForwardButtonClick","messageForward","onClickForward","closeForwardPopup","onDeleteButtonClick","confirmResult","showDeleteMessagesConfirm","getMessageService","deleteMessages","closeBulkActionsMode","messageService","MessageService","LoadingBar","TextareaObserverDirective","element","binding","instance","textareaResizeManager","observeTextarea","unobserveTextarea","BaseChatContent","ChatDialog","ChatTextarea","ChatSidebar","provide","withHeader","withDropArea","textareaHeight","showLoadingBar","canSend","isTextareaEnabled","send","isGuest","role","UserRole","guest","isBulkActionsMode","hasCommentsOnTop","alignment","Settings","appearance","backgroundStyle","ThemeManager","getCurrentBackgroundStyle","dialogContainerStyle","headerHeight","height","oldValue","scrollToBottom","animation","initTextareaResizeManager","BulkActionsManager","init","ResizeManager","subscribe","events","onHeightChange","onTextareaHeightChange","onTextareaMount","textareaContainer","clientHeight","newHeight","getData","onShowLoadingBar","onHideLoadingBar","onChangeSidebarPanel","hideLoadingBar","unsubscribe"],"mappings":"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"}