{"version":3,"file":"media-gallery.bundle.js","sources":["../src/media-gallery-item.js","../src/media-gallery-row.js","../src/media-gallery.js"],"sourcesContent":["import { Type } from 'main.core';\nimport { Outline } from 'ui.icon-set.api.core';\nimport { lazyload } from 'ui.vue3.directives.lazyload';\nimport { FileType, FileViewerContext, FileStatus } from 'im.v2.const';\nimport { Utils } from 'im.v2.lib.utils';\nimport { ProgressBar, ProgressBarSize } from 'im.v2.component.elements.progressbar';\n\nimport './css/media-gallery-item.css';\n\nconst MAX_HEIGHT = 590;\n\n// @vue/component\nexport const MediaGalleryItem = {\n\tname: 'MediaGalleryItem',\n\tdirectives: { lazyload },\n\tcomponents: { ProgressBar },\n\tprops: {\n\t\t/** @type ImModelFile */\n\t\tfile: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tisGallery: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\thandleLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tallowRemove: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tallowSorting: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tviewerGroupBy: {\n\t\t\ttype: String || null,\n\t\t\tdefault: null,\n\t\t},\n\t\thighlightDropzonePosition: {\n\t\t\ttype: String || null,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: ['remove', 'cancelClick', 'itemDragStart', 'itemDragEnd', 'itemDragOver', 'itemDragLeave', 'itemDrop'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisDraggable: false,\n\t\t\tdragEvents: {},\n\t\t};\n\t},\n\tcomputed: {\n\t\tviewerAttributes(): Object\n\t\t{\n\t\t\tif (this.file.viewerAttrs)\n\t\t\t{\n\t\t\t\treturn Utils.file.getViewerDataAttributes({\n\t\t\t\t\tviewerAttributes: this.file.viewerAttrs,\n\t\t\t\t\tpreviewImageSrc: this.file.urlPreview,\n\t\t\t\t\tcontext: FileViewerContext.dialog,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn Utils.file.getViewerDataAttributes({\n\t\t\t\tviewerAttributes: {\n\t\t\t\t\tviewer: true,\n\t\t\t\t\tviewerResized: true,\n\t\t\t\t\tviewerType: this.file.type,\n\t\t\t\t\ttitle: this.file.name,\n\t\t\t\t\tsrc: this.file.urlDownload,\n\t\t\t\t\tviewerGroupBy: this.viewerGroupBy,\n\t\t\t\t},\n\t\t\t\tpreviewImageSrc: this.file.urlPreview,\n\t\t\t\tcontext: FileViewerContext.dialog,\n\t\t\t});\n\t\t},\n\t\tcanBeOpenedWithViewer(): boolean\n\t\t{\n\t\t\treturn this.file.viewerAttrs && BX.UI?.Viewer;\n\t\t},\n\t\timageTitle(): string\n\t\t{\n\t\t\tconst size = Utils.file.formatFileSize(this.file.size);\n\n\t\t\treturn this.loc(\n\t\t\t\t'IM_ELEMENTS_MEDIA_IMAGE_TITLE',\n\t\t\t\t{\n\t\t\t\t\t'#NAME#': this.file.name,\n\t\t\t\t\t'#SIZE#': size,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tisLoaded(): boolean\n\t\t{\n\t\t\treturn this.file.progress === 100;\n\t\t},\n\t\tisVideo(): boolean\n\t\t{\n\t\t\treturn this.file.type === FileType.video;\n\t\t},\n\t\tshowPlayIcon(): boolean\n\t\t{\n\t\t\treturn [FileStatus.wait, FileStatus.done].includes(this.file.status);\n\t\t},\n\t\tpreviewSourceLink(): string\n\t\t{\n\t\t\tif (this.file.extension === 'gif')\n\t\t\t{\n\t\t\t\treturn this.file.urlShow || this.file.urlDownload;\n\t\t\t}\n\n\t\t\treturn this.file.urlPreview || this.file.urlShow || this.file.urlDownload;\n\t\t},\n\t\tallowLazyLoad(): boolean\n\t\t{\n\t\t\treturn !this.previewSourceLink.startsWith('blob:');\n\t\t},\n\t\twithoutPreview(): boolean\n\t\t{\n\t\t\treturn !Type.isStringFilled(this.previewSourceLink);\n\t\t},\n\t\tcontainerStyle(): { width: string, height: string }\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: `${this.size.width}px`,\n\t\t\t\theight: `${Math.min(this.size.height, MAX_HEIGHT)}px`,\n\t\t\t};\n\t\t},\n\t\thasImageGap(): boolean\n\t\t{\n\t\t\tconst ratio: number = Math.min(\n\t\t\t\tthis.size.width / this.file.image.width,\n\t\t\t\tthis.size.height / this.file.image.height,\n\t\t\t);\n\t\t\tconst imageWidth = this.file.image.width * ratio;\n\t\t\tconst imageHeight = this.file.image.height * ratio;\n\n\t\t\treturn (\n\t\t\t\tMath.floor(this.size.width) > Math.floor(imageWidth)\n\t\t\t\t|| Math.floor(this.size.height) > Math.floor(imageHeight)\n\t\t\t);\n\t\t},\n\t\tuseBlur(): boolean\n\t\t{\n\t\t\treturn this.hasImageGap;\n\t\t},\n\t\tblurStyle(): any\n\t\t{\n\t\t\treturn {\n\t\t\t\tbackgroundImage: `url(\"${this.previewSourceLink}\")`,\n\t\t\t};\n\t\t},\n\t\tdraggableClasses(): { [key: string]: boolean }\n\t\t{\n\t\t\tconst classes = {};\n\n\t\t\tif (this.highlightDropzonePosition)\n\t\t\t{\n\t\t\t\tclasses[`--dropzone-${this.highlightDropzonePosition}`] = true;\n\t\t\t}\n\n\t\t\tclasses['--draggable'] = this.isDraggable;\n\n\t\t\treturn classes;\n\t\t},\n\t\tprogressbarSize(): any\n\t\t{\n\t\t\tif (this.size.width > 100 && this.size.height > 90)\n\t\t\t{\n\t\t\t\treturn ProgressBarSize.L;\n\t\t\t}\n\n\t\t\treturn ProgressBarSize.S;\n\t\t},\n\t},\n\tmethods: {\n\t\tdownload()\n\t\t{\n\t\t\tif (this.file.progress !== 100 || this.canBeOpenedWithViewer)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst url = this.file.urlDownload ?? this.file.urlShow;\n\t\t\twindow.open(url, '_blank');\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tonRemoveClick(event)\n\t\t{\n\t\t\tevent.stopPropagation();\n\t\t\tthis.$emit('remove', { file: this.file });\n\t\t},\n\t\tonCancelClick(event)\n\t\t{\n\t\t\tthis.$emit('cancelClick', event);\n\t\t},\n\t\tonDragStart(event)\n\t\t{\n\t\t\tthis.$emit('itemDragStart', { file: this.file, event });\n\n\t\t\tthis.isDraggable = true;\n\t\t},\n\t\tonDragEnd(event)\n\t\t{\n\t\t\tthis.$emit('itemDragEnd', { file: this.file, event });\n\t\t\tevent.target.removeAttribute('draggable');\n\t\t\tthis.isDraggable = false;\n\t\t},\n\t\tonDragOver(event)\n\t\t{\n\t\t\tthis.$emit('itemDragOver', { file: this.file, event });\n\t\t},\n\t\tonDragLeave(event)\n\t\t{\n\t\t\tthis.$emit('itemDragLeave', { file: this.file, event });\n\t\t},\n\t\tonDrop(event)\n\t\t{\n\t\t\tthis.$emit('itemDrop', { file: this.file, event });\n\n\t\t\tthis.isDraggable = false;\n\t\t},\n\t\tonMouseDown(event)\n\t\t{\n\t\t\tthis.$refs.dragElement.setAttribute('draggable', 'true');\n\t\t},\n\t\tgetHandleStatus(): Array<string>\n\t\t{\n\t\t\tif (this.isVideo)\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\tFileStatus.preparing,\n\t\t\t\t\tFileStatus.progress,\n\t\t\t\t\tFileStatus.upload,\n\t\t\t\t];\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\tFileStatus.progress,\n\t\t\t\tFileStatus.upload,\n\t\t\t];\n\t\t},\n\t\tgetStatusMap(): { [key: string]: { iconClass?: string, labelText?: string } }\n\t\t{\n\t\t\tif (this.isVideo)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t[FileStatus.preparing]: {\n\t\t\t\t\t\ticonClass: Outline.CLOUD,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"bx-im-elements-media-gallery__item\"\n\t\t\t:class=\"{'--without-preview': withoutPreview, ...this.draggableClasses}\"\n\t\t\t@click=\"download\"\n\t\t\t:style=\"containerStyle\"\n\t\t\t@dragstart=\"onDragStart\"\n\t\t\t@dragend=\"onDragEnd\"\n\t\t\t@dragover=\"onDragOver\"\n\t\t\t@dragleave=\"onDragLeave\"\n\t\t\t@drop=\"onDrop\"\n\t\t\tref=\"dragElement\"\n\t\t\tdraggable=\"false\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"bx-im-elements-media-gallery__item-drag\"\n\t\t\t\tv-if=\"allowSorting\"\n\t\t\t\t@mousedown=\"onMouseDown\"\n\t\t\t>\n\t\t\t\t<div class=\"bx-im-elements-media-gallery__item-drag-icon\"></div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"bx-im-elements-media-gallery__item-inner\"\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tv-if=\"allowLazyLoad\"\n\t\t\t\t\tv-lazyload\n\t\t\t\t\tdata-lazyload-dont-hide\n\t\t\t\t\t:data-lazyload-src=\"previewSourceLink\"\n\t\t\t\t\t:title=\"imageTitle\"\n\t\t\t\t\t:alt=\"file.name\"\n\t\t\t\t\tclass=\"bx-im-elements-media-gallery__item-source\"\n\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t/>\n\t\t\t\t<img\n\t\t\t\t\tv-else\n\t\t\t\t\t:src=\"previewSourceLink\"\n\t\t\t\t\t:title=\"imageTitle\"\n\t\t\t\t\t:alt=\"file.name\"\n\t\t\t\t\tclass=\"bx-im-elements-media-gallery__item-source\"\n\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"useBlur\"\n\t\t\t\t\tclass=\"bx-im-elements-media-gallery__item-blur\"\n\t\t\t\t\t:style=\"blurStyle\"\n\t\t\t\t></div>\n\t\t\t\t<div v-if=\"isVideo && showPlayIcon\" class=\"bx-im-elements-media-gallery__item-play\">\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass=\"bx-im-elements-media-gallery__item-play-icon\"\n\t\t\t\t\t\tv-bind=\"viewerAttributes\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"allowRemove\" class=\"bx-im-elements-media-gallery__item-remove\" @click.stop=\"onRemoveClick\">\n\t\t\t\t<div class=\"bx-im-elements-media-gallery__item-remove-icon\"></div>\n\t\t\t</div>\n\t\t\t<ProgressBar\n\t\t\t\tv-if=\"handleLoading && !isLoaded\"\n\t\t\t\t:item=\"file\"\n\t\t\t\t:size=\"progressbarSize\"\n\t\t\t\t:handleStatus=\"getHandleStatus()\"\n\t\t\t\t:statusMap=\"getStatusMap()\"\n\t\t\t\t@cancelClick=\"onCancelClick\"\n\t\t\t/>\n\t\t\t<div \n\t\t\t\tclass=\"bx-im-elements-media-gallery__item-viewer-clickable-overlay\"\n\t\t\t\tv-bind=\"viewerAttributes\"\n\t\t\t></div>\n\t\t</div>\n\n\t`,\n};\n","import { Type } from 'main.core';\nimport { MediaGalleryItem } from './media-gallery-item';\n\nimport './css/media-gallery-row.css';\n\nimport type { ImModelFile } from 'im.v2.model';\n\ntype Size = {\n\twidth: number,\n\theight: number,\n};\n\nconst RATIO_THRESHOLD = 4;\nconst RATIO_FALLBACK = 3;\n\nconst MIN_PREVIEW_WIDTH = 70;\nconst MIN_PREVIEW_HEIGHT = 58;\nconst FALLBACK_WIDTH = 1600;\nconst FALLBACK_HEIGHT = 900;\nconst FALLBACK_SIZE: Size = {\n\twidth: FALLBACK_WIDTH,\n\theight: FALLBACK_HEIGHT,\n};\n\n// @vue/component\nexport const MediaGalleryRow = {\n\tname: 'MediaGalleryRow',\n\tcomponents: { MediaGalleryItem },\n\tprops: {\n\t\t/** @type { Array<ImModelFile> } */\n\t\tfiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tallowRemoveItem: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tallowSorting: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\thandleLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twidth: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tspacingSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1,\n\t\t},\n\t\tviewerGroupBy: {\n\t\t\ttype: String || null,\n\t\t\tdefault: null,\n\t\t},\n\t\thighlightDropzone: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {\n\t\t\t\treturn {};\n\t\t\t},\n\t\t},\n\t},\n\temits: ['remove', 'cancelClick', 'itemDragStart', 'itemDragEnd', 'itemDragOver', 'itemDragLeave', 'itemDrop'],\n\tcomputed: {\n\t\ttotalRatio(): number\n\t\t{\n\t\t\treturn this.files.reduce((acc, file: ImModelFile) => {\n\t\t\t\tconst size = this.getSafeSize(file);\n\n\t\t\t\treturn acc + this.getSafeRatio(size);\n\t\t\t}, 0);\n\t\t},\n\t\tspacing(): number\n\t\t{\n\t\t\treturn this.files.length - 1;\n\t\t},\n\t\tavailableContainerWidth(): number\n\t\t{\n\t\t\treturn this.width - (this.spacing * this.spacingSize);\n\t\t},\n\t\tsizes(): Array<Size>\n\t\t{\n\t\t\tconst height = this.availableContainerWidth / this.totalRatio;\n\n\t\t\treturn this.files.map((file: ImModelFile) => {\n\t\t\t\tconst size = this.getSafeSize(file);\n\t\t\t\tconst width = this.getSafeRatio(size) * height;\n\n\t\t\t\treturn {\n\t\t\t\t\twidth: Math.max(width, MIN_PREVIEW_WIDTH),\n\t\t\t\t\theight: Math.max(height, MIN_PREVIEW_HEIGHT),\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\tgetSafeSize(file: ImModelFile): Size\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isNumber(file.image?.width)\n\t\t\t\t&& Type.isNumber(file.image?.height)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\twidth: file.image?.width,\n\t\t\t\t\theight: file.image?.height,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn FALLBACK_SIZE;\n\t\t},\n\t\tgetSafeRatio(size: Size): number\n\t\t{\n\t\t\tconst abnormalRatio = Math.max(\n\t\t\t\tsize.width / size.height,\n\t\t\t\tsize.height / size.width,\n\t\t\t);\n\n\t\t\tif (abnormalRatio > RATIO_THRESHOLD)\n\t\t\t{\n\t\t\t\tif (size.height > size.width)\n\t\t\t\t{\n\t\t\t\t\treturn 1 / RATIO_FALLBACK;\n\t\t\t\t}\n\n\t\t\t\treturn RATIO_FALLBACK;\n\t\t\t}\n\n\t\t\treturn size.width / size.height;\n\t\t},\n\t\tonRemove(event)\n\t\t{\n\t\t\tthis.$emit('remove', event);\n\t\t},\n\t\tonCancel(event)\n\t\t{\n\t\t\tthis.$emit('cancelClick', event);\n\t\t},\n\t\tonItemDragStart(event)\n\t\t{\n\t\t\tthis.$emit('itemDragStart', event);\n\t\t},\n\t\tonItemDragEnd(event)\n\t\t{\n\t\t\tthis.$emit('itemDragEnd', event);\n\t\t},\n\t\tonItemDragOver(event)\n\t\t{\n\t\t\tthis.$emit('itemDragOver', event);\n\t\t},\n\t\tonItemDragLeave(event)\n\t\t{\n\t\t\tthis.$emit('itemDragLeave', event);\n\t\t},\n\t\tonItemDrop(event)\n\t\t{\n\t\t\tthis.$emit('itemDrop', event);\n\t\t},\n\t\tgetHighlightDropzonePosition(file: ImModelFile): string | null\n\t\t{\n\t\t\tif (file.id === this.highlightDropzone.fileId)\n\t\t\t{\n\t\t\t\treturn this.highlightDropzone.position;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-elements-media-gallery__row\">\n\t\t\t<MediaGalleryItem\n\t\t\t\tv-for=\"(file, index) in files\"\n\t\t\t\t:key=\"file.id\"\n\t\t\t\t:file=\"file\"\n\t\t\t\t:size=\"sizes[index]\"\n\t\t\t\t:allowRemove=\"allowRemoveItem\"\n\t\t\t\t:allowSorting=\"allowSorting\"\n\t\t\t\t:handleLoading=\"handleLoading\"\n\t\t\t\t:highlightDropzonePosition=\"getHighlightDropzonePosition(file)\"\n\t\t\t\tviewerGroupBy=\"viewerGroupBy\"\n\t\t\t\t@remove=\"onRemove\"\n\t\t\t\t@cancelClick=\"onCancel\"\n\t\t\t\t@itemDragStart=\"onItemDragStart\"\n\t\t\t\t@itemDragEnd=\"onItemDragEnd\"\n\t\t\t\t@itemDragOver=\"onItemDragOver\"\n\t\t\t\t@itemDragLeave=\"onItemDragLeave\"\n\t\t\t\t@itemDrop=\"onItemDrop\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import type { ImModelFile } from 'im.v2.model';\nimport { MediaGalleryRow } from './media-gallery-row';\n\nimport './css/media-gallery.css';\n\nconst rowsLayouts = {\n\t1: [1],\n\t2: [2],\n\t3: [3],\n\t4: [2, 2],\n\t5: [2, 3],\n\t6: [2, 2, 2],\n\t7: [2, 3, 2],\n\t8: [2, 3, 3],\n\t9: [2, 3, 2, 2],\n\t10: [2, 3, 2, 3],\n};\n\n// @vue/component\nexport const MediaGallery = {\n\tname: 'MediaGallery',\n\tcomponents: { MediaGalleryRow },\n\tprops: {\n\t\tfiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tallowRemoveItem: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tallowSorting: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\thandleLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 376,\n\t\t},\n\t\tviewerGroupBy: {\n\t\t\ttype: String || null,\n\t\t\tdefault: null,\n\t\t},\n\t\thighlightDropzone: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {\n\t\t\t\treturn {};\n\t\t\t},\n\t\t},\n\t},\n\temits: ['removeItem', 'cancelClick', 'itemDragStart', 'itemDragEnd', 'itemDragOver', 'itemDragLeave', 'itemDrop'],\n\tcomputed: {\n\t\trows(): number\n\t\t{\n\t\t\tconst lengths = rowsLayouts[this.files.length];\n\t\t\tlet cursor = 0;\n\n\t\t\treturn lengths.map((rowSize) => {\n\t\t\t\tconst row = this.files.slice(cursor, cursor + rowSize);\n\t\t\t\tcursor += rowSize;\n\n\t\t\t\treturn row;\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\tonRemoveItem(event: { file: ImModelFile })\n\t\t{\n\t\t\tthis.$emit('removeItem', event);\n\t\t},\n\t\tonCancel(event)\n\t\t{\n\t\t\tthis.$emit('cancelClick', event);\n\t\t},\n\t\tonItemDragStart(event)\n\t\t{\n\t\t\tthis.$emit('itemDragStart', event);\n\t\t},\n\t\tonItemDragEnd(event)\n\t\t{\n\t\t\tthis.$emit('itemDragEnd', event);\n\t\t},\n\t\tonItemDragOver(event)\n\t\t{\n\t\t\tthis.$emit('itemDragOver', event);\n\t\t},\n\t\tonItemDragLeave(event)\n\t\t{\n\t\t\tthis.$emit('itemDragLeave', event);\n\t\t},\n\t\tonItemDrop(event)\n\t\t{\n\t\t\tthis.$emit('itemDrop', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-elements-media-gallery\">\n\t\t\t<MediaGalleryRow\n\t\t\t\tv-for=\"(row) in rows\"\n\t\t\t\t:files=\"row\"\n\t\t\t\t:allowRemoveItem=\"allowRemoveItem\"\n\t\t\t\t:allowSorting=\"allowSorting\"\n\t\t\t\t:handleLoading=\"handleLoading\"\n\t\t\t\t:width=\"width\"\n\t\t\t\t:highlightDropzone=\"highlightDropzone\"\n\t\t\t\t@remove=\"onRemoveItem\"\n\t\t\t\t@cancelClick=\"onCancel\"\n\t\t\t\t@itemDragStart=\"onItemDragStart\"\n\t\t\t\t@itemDragEnd=\"onItemDragEnd\"\n\t\t\t\t@itemDragOver=\"onItemDragOver\"\n\t\t\t\t@itemDragLeave=\"onItemDragLeave\"\n\t\t\t\t@itemDrop=\"onItemDrop\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n"],"names":["MAX_HEIGHT","MediaGalleryItem","name","directives","lazyload","components","ProgressBar","props","file","type","Object","required","size","isGallery","Boolean","default","handleLoading","allowRemove","allowSorting","viewerGroupBy","String","highlightDropzonePosition","emits","data","isDraggable","dragEvents","computed","viewerAttributes","viewerAttrs","Utils","getViewerDataAttributes","previewImageSrc","urlPreview","context","FileViewerContext","dialog","viewer","viewerResized","viewerType","title","src","urlDownload","canBeOpenedWithViewer","BX","UI","Viewer","imageTitle","formatFileSize","loc","isLoaded","progress","isVideo","FileType","video","showPlayIcon","FileStatus","wait","done","includes","status","previewSourceLink","extension","urlShow","allowLazyLoad","startsWith","withoutPreview","Type","isStringFilled","containerStyle","width","height","Math","min","hasImageGap","ratio","image","imageWidth","imageHeight","floor","useBlur","blurStyle","backgroundImage","draggableClasses","classes","progressbarSize","ProgressBarSize","L","S","methods","download","url","window","open","phraseCode","replacements","$Bitrix","Loc","getMessage","onRemoveClick","event","stopPropagation","$emit","onCancelClick","onDragStart","onDragEnd","target","removeAttribute","onDragOver","onDragLeave","onDrop","onMouseDown","$refs","dragElement","setAttribute","getHandleStatus","preparing","upload","getStatusMap","iconClass","Outline","CLOUD","template","RATIO_THRESHOLD","RATIO_FALLBACK","MIN_PREVIEW_WIDTH","MIN_PREVIEW_HEIGHT","FALLBACK_WIDTH","FALLBACK_HEIGHT","FALLBACK_SIZE","MediaGalleryRow","files","Array","allowRemoveItem","Number","spacingSize","highlightDropzone","totalRatio","reduce","acc","getSafeSize","getSafeRatio","spacing","length","availableContainerWidth","sizes","map","max","isNumber","abnormalRatio","onRemove","onCancel","onItemDragStart","onItemDragEnd","onItemDragOver","onItemDragLeave","onItemDrop","getHighlightDropzonePosition","id","fileId","position","rowsLayouts","MediaGallery","rows","lengths","cursor","rowSize","row","slice","onRemoveItem"],"mappings":";;;;;;;;CASA,MAAMA,UAAU,GAAG,GAAG;;CAEtB;AACA,OAAaC,gBAAgB,GAAG;GAC/BC,IAAI,EAAE,kBAAkB;GACxBC,UAAU,EAAE;eAAEC;IAAU;GACxBC,UAAU,EAAE;kBAAEC;IAAa;GAC3BC,KAAK,EAAE;;KAENC,IAAI,EAAE;OACLC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDC,IAAI,EAAE;OACLH,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDE,SAAS,EAAE;OACVJ,IAAI,EAAEK,OAAO;OACbC,OAAO,EAAE;MACT;KACDC,aAAa,EAAE;OACdP,IAAI,EAAEK,OAAO;OACbC,OAAO,EAAE;MACT;KACDE,WAAW,EAAE;OACZR,IAAI,EAAEK,OAAO;OACbC,OAAO,EAAE;MACT;KACDG,YAAY,EAAE;OACbT,IAAI,EAAEK,OAAO;OACbC,OAAO,EAAE;MACT;KACDI,aAAa,EAAE;OACdV,IAAI,EAAEW,MAAM,IAAI,IAAI;OACpBL,OAAO,EAAE;MACT;KACDM,yBAAyB,EAAE;OAC1BZ,IAAI,EAAEW,MAAM,IAAI,IAAI;OACpBL,OAAO,EAAE;;IAEV;GACDO,KAAK,EAAE,CAAC,QAAQ,EAAE,aAAa,EAAE,eAAe,EAAE,aAAa,EAAE,cAAc,EAAE,eAAe,EAAE,UAAU,CAAC;GAC7GC,IAAI,GACJ;KACC,OAAO;OACNC,WAAW,EAAE,KAAK;OAClBC,UAAU,EAAE;MACZ;IACD;GACDC,QAAQ,EAAE;KACTC,gBAAgB,GAChB;OACC,IAAI,IAAI,CAACnB,IAAI,CAACoB,WAAW,EACzB;SACC,OAAOC,qBAAK,CAACrB,IAAI,CAACsB,uBAAuB,CAAC;WACzCH,gBAAgB,EAAE,IAAI,CAACnB,IAAI,CAACoB,WAAW;WACvCG,eAAe,EAAE,IAAI,CAACvB,IAAI,CAACwB,UAAU;WACrCC,OAAO,EAAEC,6BAAiB,CAACC;UAC3B,CAAC;;OAGH,OAAON,qBAAK,CAACrB,IAAI,CAACsB,uBAAuB,CAAC;SACzCH,gBAAgB,EAAE;WACjBS,MAAM,EAAE,IAAI;WACZC,aAAa,EAAE,IAAI;WACnBC,UAAU,EAAE,IAAI,CAAC9B,IAAI,CAACC,IAAI;WAC1B8B,KAAK,EAAE,IAAI,CAAC/B,IAAI,CAACN,IAAI;WACrBsC,GAAG,EAAE,IAAI,CAAChC,IAAI,CAACiC,WAAW;WAC1BtB,aAAa,EAAE,IAAI,CAACA;UACpB;SACDY,eAAe,EAAE,IAAI,CAACvB,IAAI,CAACwB,UAAU;SACrCC,OAAO,EAAEC,6BAAiB,CAACC;QAC3B,CAAC;MACF;KACDO,qBAAqB,GACrB;OAAA;OACC,OAAO,IAAI,CAAClC,IAAI,CAACoB,WAAW,eAAIe,EAAE,CAACC,EAAE,qBAAL,OAAOC,MAAM;MAC7C;KACDC,UAAU,GACV;OACC,MAAMlC,IAAI,GAAGiB,qBAAK,CAACrB,IAAI,CAACuC,cAAc,CAAC,IAAI,CAACvC,IAAI,CAACI,IAAI,CAAC;OAEtD,OAAO,IAAI,CAACoC,GAAG,CACd,+BAA+B,EAC/B;SACC,QAAQ,EAAE,IAAI,CAACxC,IAAI,CAACN,IAAI;SACxB,QAAQ,EAAEU;QACV,CACD;MACD;KACDqC,QAAQ,GACR;OACC,OAAO,IAAI,CAACzC,IAAI,CAAC0C,QAAQ,KAAK,GAAG;MACjC;KACDC,OAAO,GACP;OACC,OAAO,IAAI,CAAC3C,IAAI,CAACC,IAAI,KAAK2C,oBAAQ,CAACC,KAAK;MACxC;KACDC,YAAY,GACZ;OACC,OAAO,CAACC,sBAAU,CAACC,IAAI,EAAED,sBAAU,CAACE,IAAI,CAAC,CAACC,QAAQ,CAAC,IAAI,CAAClD,IAAI,CAACmD,MAAM,CAAC;MACpE;KACDC,iBAAiB,GACjB;OACC,IAAI,IAAI,CAACpD,IAAI,CAACqD,SAAS,KAAK,KAAK,EACjC;SACC,OAAO,IAAI,CAACrD,IAAI,CAACsD,OAAO,IAAI,IAAI,CAACtD,IAAI,CAACiC,WAAW;;OAGlD,OAAO,IAAI,CAACjC,IAAI,CAACwB,UAAU,IAAI,IAAI,CAACxB,IAAI,CAACsD,OAAO,IAAI,IAAI,CAACtD,IAAI,CAACiC,WAAW;MACzE;KACDsB,aAAa,GACb;OACC,OAAO,CAAC,IAAI,CAACH,iBAAiB,CAACI,UAAU,CAAC,OAAO,CAAC;MAClD;KACDC,cAAc,GACd;OACC,OAAO,CAACC,cAAI,CAACC,cAAc,CAAC,IAAI,CAACP,iBAAiB,CAAC;MACnD;KACDQ,cAAc,GACd;OACC,OAAO;SACNC,KAAK,EAAG,GAAE,IAAI,CAACzD,IAAI,CAACyD,KAAM,IAAG;SAC7BC,MAAM,EAAG,GAAEC,IAAI,CAACC,GAAG,CAAC,IAAI,CAAC5D,IAAI,CAAC0D,MAAM,EAAEtE,UAAU,CAAE;QAClD;MACD;KACDyE,WAAW,GACX;OACC,MAAMC,KAAa,GAAGH,IAAI,CAACC,GAAG,CAC7B,IAAI,CAAC5D,IAAI,CAACyD,KAAK,GAAG,IAAI,CAAC7D,IAAI,CAACmE,KAAK,CAACN,KAAK,EACvC,IAAI,CAACzD,IAAI,CAAC0D,MAAM,GAAG,IAAI,CAAC9D,IAAI,CAACmE,KAAK,CAACL,MAAM,CACzC;OACD,MAAMM,UAAU,GAAG,IAAI,CAACpE,IAAI,CAACmE,KAAK,CAACN,KAAK,GAAGK,KAAK;OAChD,MAAMG,WAAW,GAAG,IAAI,CAACrE,IAAI,CAACmE,KAAK,CAACL,MAAM,GAAGI,KAAK;OAElD,OACCH,IAAI,CAACO,KAAK,CAAC,IAAI,CAAClE,IAAI,CAACyD,KAAK,CAAC,GAAGE,IAAI,CAACO,KAAK,CAACF,UAAU,CAAC,IACjDL,IAAI,CAACO,KAAK,CAAC,IAAI,CAAClE,IAAI,CAAC0D,MAAM,CAAC,GAAGC,IAAI,CAACO,KAAK,CAACD,WAAW,CAAC;MAE1D;KACDE,OAAO,GACP;OACC,OAAO,IAAI,CAACN,WAAW;MACvB;KACDO,SAAS,GACT;OACC,OAAO;SACNC,eAAe,EAAG,QAAO,IAAI,CAACrB,iBAAkB;QAChD;MACD;KACDsB,gBAAgB,GAChB;OACC,MAAMC,OAAO,GAAG,EAAE;OAElB,IAAI,IAAI,CAAC9D,yBAAyB,EAClC;SACC8D,OAAO,CAAE,cAAa,IAAI,CAAC9D,yBAA0B,EAAC,CAAC,GAAG,IAAI;;OAG/D8D,OAAO,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC3D,WAAW;OAEzC,OAAO2D,OAAO;MACd;KACDC,eAAe,GACf;OACC,IAAI,IAAI,CAACxE,IAAI,CAACyD,KAAK,GAAG,GAAG,IAAI,IAAI,CAACzD,IAAI,CAAC0D,MAAM,GAAG,EAAE,EAClD;SACC,OAAOe,oDAAe,CAACC,CAAC;;OAGzB,OAAOD,oDAAe,CAACE,CAAC;;IAEzB;GACDC,OAAO,EAAE;KACRC,QAAQ,GACR;OAAA;OACC,IAAI,IAAI,CAACjF,IAAI,CAAC0C,QAAQ,KAAK,GAAG,IAAI,IAAI,CAACR,qBAAqB,EAC5D;SACC;;OAGD,MAAMgD,GAAG,4BAAG,IAAI,CAAClF,IAAI,CAACiC,WAAW,oCAAI,IAAI,CAACjC,IAAI,CAACsD,OAAO;OACtD6B,MAAM,CAACC,IAAI,CAACF,GAAG,EAAE,QAAQ,CAAC;MAC1B;KACD1C,GAAG,CAAC6C,UAAkB,EAAEC,YAAgC,GAAG,EAAE,EAC7D;OACC,OAAO,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,UAAU,CAACJ,UAAU,EAAEC,YAAY,CAAC;MAC5D;KACDI,aAAa,CAACC,KAAK,EACnB;OACCA,KAAK,CAACC,eAAe,EAAE;OACvB,IAAI,CAACC,KAAK,CAAC,QAAQ,EAAE;SAAE7F,IAAI,EAAE,IAAI,CAACA;QAAM,CAAC;MACzC;KACD8F,aAAa,CAACH,KAAK,EACnB;OACC,IAAI,CAACE,KAAK,CAAC,aAAa,EAAEF,KAAK,CAAC;MAChC;KACDI,WAAW,CAACJ,KAAK,EACjB;OACC,IAAI,CAACE,KAAK,CAAC,eAAe,EAAE;SAAE7F,IAAI,EAAE,IAAI,CAACA,IAAI;SAAE2F;QAAO,CAAC;OAEvD,IAAI,CAAC3E,WAAW,GAAG,IAAI;MACvB;KACDgF,SAAS,CAACL,KAAK,EACf;OACC,IAAI,CAACE,KAAK,CAAC,aAAa,EAAE;SAAE7F,IAAI,EAAE,IAAI,CAACA,IAAI;SAAE2F;QAAO,CAAC;OACrDA,KAAK,CAACM,MAAM,CAACC,eAAe,CAAC,WAAW,CAAC;OACzC,IAAI,CAAClF,WAAW,GAAG,KAAK;MACxB;KACDmF,UAAU,CAACR,KAAK,EAChB;OACC,IAAI,CAACE,KAAK,CAAC,cAAc,EAAE;SAAE7F,IAAI,EAAE,IAAI,CAACA,IAAI;SAAE2F;QAAO,CAAC;MACtD;KACDS,WAAW,CAACT,KAAK,EACjB;OACC,IAAI,CAACE,KAAK,CAAC,eAAe,EAAE;SAAE7F,IAAI,EAAE,IAAI,CAACA,IAAI;SAAE2F;QAAO,CAAC;MACvD;KACDU,MAAM,CAACV,KAAK,EACZ;OACC,IAAI,CAACE,KAAK,CAAC,UAAU,EAAE;SAAE7F,IAAI,EAAE,IAAI,CAACA,IAAI;SAAE2F;QAAO,CAAC;OAElD,IAAI,CAAC3E,WAAW,GAAG,KAAK;MACxB;KACDsF,WAAW,CAACX,KAAK,EACjB;OACC,IAAI,CAACY,KAAK,CAACC,WAAW,CAACC,YAAY,CAAC,WAAW,EAAE,MAAM,CAAC;MACxD;KACDC,eAAe,GACf;OACC,IAAI,IAAI,CAAC/D,OAAO,EAChB;SACC,OAAO,CACNI,sBAAU,CAAC4D,SAAS,EACpB5D,sBAAU,CAACL,QAAQ,EACnBK,sBAAU,CAAC6D,MAAM,CACjB;;OAGF,OAAO,CACN7D,sBAAU,CAACL,QAAQ,EACnBK,sBAAU,CAAC6D,MAAM,CACjB;MACD;KACDC,YAAY,GACZ;OACC,IAAI,IAAI,CAAClE,OAAO,EAChB;SACC,OAAO;WACN,CAACI,sBAAU,CAAC4D,SAAS,GAAG;aACvBG,SAAS,EAAEC,2BAAO,CAACC;;UAEpB;;OAGF,OAAO,EAAE;;IAEV;GACDC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAwEZ,CAAC;;CCvUD,MAAMC,eAAe,GAAG,CAAC;CACzB,MAAMC,cAAc,GAAG,CAAC;CAExB,MAAMC,iBAAiB,GAAG,EAAE;CAC5B,MAAMC,kBAAkB,GAAG,EAAE;CAC7B,MAAMC,cAAc,GAAG,IAAI;CAC3B,MAAMC,eAAe,GAAG,GAAG;CAC3B,MAAMC,aAAmB,GAAG;GAC3B3D,KAAK,EAAEyD,cAAc;GACrBxD,MAAM,EAAEyD;CACT,CAAC;;CAED;AACA,OAAaE,eAAe,GAAG;GAC9B/H,IAAI,EAAE,iBAAiB;GACvBG,UAAU,EAAE;KAAEJ;IAAkB;GAChCM,KAAK,EAAE;;KAEN2H,KAAK,EAAE;OACNzH,IAAI,EAAE0H,KAAK;OACXxH,QAAQ,EAAE;MACV;KACDyH,eAAe,EAAE;OAChB3H,IAAI,EAAEK,OAAO;OACbC,OAAO,EAAE;MACT;KACDG,YAAY,EAAE;OACbT,IAAI,EAAEK,OAAO;OACbC,OAAO,EAAE;MACT;KACDC,aAAa,EAAE;OACdP,IAAI,EAAEK,OAAO;OACbC,OAAO,EAAE;MACT;KACDsD,KAAK,EAAE;OACN5D,IAAI,EAAE4H,MAAM;OACZ1H,QAAQ,EAAE;MACV;KACD2H,WAAW,EAAE;OACZ7H,IAAI,EAAE4H,MAAM;OACZtH,OAAO,EAAE;MACT;KACDI,aAAa,EAAE;OACdV,IAAI,EAAEW,MAAM,IAAI,IAAI;OACpBL,OAAO,EAAE;MACT;KACDwH,iBAAiB,EAAE;OAClB9H,IAAI,EAAEC,MAAM;OACZK,OAAO,EAAE,MAAM;SACd,OAAO,EAAE;;;IAGX;GACDO,KAAK,EAAE,CAAC,QAAQ,EAAE,aAAa,EAAE,eAAe,EAAE,aAAa,EAAE,cAAc,EAAE,eAAe,EAAE,UAAU,CAAC;GAC7GI,QAAQ,EAAE;KACT8G,UAAU,GACV;OACC,OAAO,IAAI,CAACN,KAAK,CAACO,MAAM,CAAC,CAACC,GAAG,EAAElI,IAAiB,KAAK;SACpD,MAAMI,IAAI,GAAG,IAAI,CAAC+H,WAAW,CAACnI,IAAI,CAAC;SAEnC,OAAOkI,GAAG,GAAG,IAAI,CAACE,YAAY,CAAChI,IAAI,CAAC;QACpC,EAAE,CAAC,CAAC;MACL;KACDiI,OAAO,GACP;OACC,OAAO,IAAI,CAACX,KAAK,CAACY,MAAM,GAAG,CAAC;MAC5B;KACDC,uBAAuB,GACvB;OACC,OAAO,IAAI,CAAC1E,KAAK,GAAI,IAAI,CAACwE,OAAO,GAAG,IAAI,CAACP,WAAY;MACrD;KACDU,KAAK,GACL;OACC,MAAM1E,MAAM,GAAG,IAAI,CAACyE,uBAAuB,GAAG,IAAI,CAACP,UAAU;OAE7D,OAAO,IAAI,CAACN,KAAK,CAACe,GAAG,CAAEzI,IAAiB,IAAK;SAC5C,MAAMI,IAAI,GAAG,IAAI,CAAC+H,WAAW,CAACnI,IAAI,CAAC;SACnC,MAAM6D,KAAK,GAAG,IAAI,CAACuE,YAAY,CAAChI,IAAI,CAAC,GAAG0D,MAAM;SAE9C,OAAO;WACND,KAAK,EAAEE,IAAI,CAAC2E,GAAG,CAAC7E,KAAK,EAAEuD,iBAAiB,CAAC;WACzCtD,MAAM,EAAEC,IAAI,CAAC2E,GAAG,CAAC5E,MAAM,EAAEuD,kBAAkB;UAC3C;QACD,CAAC;;IAEH;GACDrC,OAAO,EAAE;KACRmD,WAAW,CAACnI,IAAiB,EAC7B;OAAA;OACC,IACC0D,cAAI,CAACiF,QAAQ,gBAAC3I,IAAI,CAACmE,KAAK,qBAAV,YAAYN,KAAK,CAAC,IAC7BH,cAAI,CAACiF,QAAQ,iBAAC3I,IAAI,CAACmE,KAAK,qBAAV,aAAYL,MAAM,CAAC,EAErC;SAAA;SACC,OAAO;WACND,KAAK,kBAAE7D,IAAI,CAACmE,KAAK,qBAAV,aAAYN,KAAK;WACxBC,MAAM,kBAAE9D,IAAI,CAACmE,KAAK,qBAAV,aAAYL;UACpB;;OAGF,OAAO0D,aAAa;MACpB;KACDY,YAAY,CAAChI,IAAU,EACvB;OACC,MAAMwI,aAAa,GAAG7E,IAAI,CAAC2E,GAAG,CAC7BtI,IAAI,CAACyD,KAAK,GAAGzD,IAAI,CAAC0D,MAAM,EACxB1D,IAAI,CAAC0D,MAAM,GAAG1D,IAAI,CAACyD,KAAK,CACxB;OAED,IAAI+E,aAAa,GAAG1B,eAAe,EACnC;SACC,IAAI9G,IAAI,CAAC0D,MAAM,GAAG1D,IAAI,CAACyD,KAAK,EAC5B;WACC,OAAO,CAAC,GAAGsD,cAAc;;SAG1B,OAAOA,cAAc;;OAGtB,OAAO/G,IAAI,CAACyD,KAAK,GAAGzD,IAAI,CAAC0D,MAAM;MAC/B;KACD+E,QAAQ,CAAClD,KAAK,EACd;OACC,IAAI,CAACE,KAAK,CAAC,QAAQ,EAAEF,KAAK,CAAC;MAC3B;KACDmD,QAAQ,CAACnD,KAAK,EACd;OACC,IAAI,CAACE,KAAK,CAAC,aAAa,EAAEF,KAAK,CAAC;MAChC;KACDoD,eAAe,CAACpD,KAAK,EACrB;OACC,IAAI,CAACE,KAAK,CAAC,eAAe,EAAEF,KAAK,CAAC;MAClC;KACDqD,aAAa,CAACrD,KAAK,EACnB;OACC,IAAI,CAACE,KAAK,CAAC,aAAa,EAAEF,KAAK,CAAC;MAChC;KACDsD,cAAc,CAACtD,KAAK,EACpB;OACC,IAAI,CAACE,KAAK,CAAC,cAAc,EAAEF,KAAK,CAAC;MACjC;KACDuD,eAAe,CAACvD,KAAK,EACrB;OACC,IAAI,CAACE,KAAK,CAAC,eAAe,EAAEF,KAAK,CAAC;MAClC;KACDwD,UAAU,CAACxD,KAAK,EAChB;OACC,IAAI,CAACE,KAAK,CAAC,UAAU,EAAEF,KAAK,CAAC;MAC7B;KACDyD,4BAA4B,CAACpJ,IAAiB,EAC9C;OACC,IAAIA,IAAI,CAACqJ,EAAE,KAAK,IAAI,CAACtB,iBAAiB,CAACuB,MAAM,EAC7C;SACC,OAAO,IAAI,CAACvB,iBAAiB,CAACwB,QAAQ;;OAGvC,OAAO,IAAI;;IAEZ;GACDtC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;CAsBZ,CAAC;;CC5LD,MAAMuC,WAAW,GAAG;GACnB,CAAC,EAAE,CAAC,CAAC,CAAC;GACN,CAAC,EAAE,CAAC,CAAC,CAAC;GACN,CAAC,EAAE,CAAC,CAAC,CAAC;GACN,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;GACT,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;GACT,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;GACZ,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;GACZ,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;GACZ,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;GACf,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CAChB,CAAC;;CAED;AACA,OAAaC,YAAY,GAAG;GAC3B/J,IAAI,EAAE,cAAc;GACpBG,UAAU,EAAE;KAAE4H;IAAiB;GAC/B1H,KAAK,EAAE;KACN2H,KAAK,EAAE;OACNzH,IAAI,EAAE0H,KAAK;OACXxH,QAAQ,EAAE;MACV;KACDyH,eAAe,EAAE;OAChB3H,IAAI,EAAEK,OAAO;OACbC,OAAO,EAAE;MACT;KACDG,YAAY,EAAE;OACbT,IAAI,EAAEK,OAAO;OACbC,OAAO,EAAE;MACT;KACDC,aAAa,EAAE;OACdP,IAAI,EAAEK,OAAO;OACbC,OAAO,EAAE;MACT;KACDsD,KAAK,EAAE;OACN5D,IAAI,EAAE4H,MAAM;OACZtH,OAAO,EAAE;MACT;KACDI,aAAa,EAAE;OACdV,IAAI,EAAEW,MAAM,IAAI,IAAI;OACpBL,OAAO,EAAE;MACT;KACDwH,iBAAiB,EAAE;OAClB9H,IAAI,EAAEC,MAAM;OACZK,OAAO,EAAE,MAAM;SACd,OAAO,EAAE;;;IAGX;GACDO,KAAK,EAAE,CAAC,YAAY,EAAE,aAAa,EAAE,eAAe,EAAE,aAAa,EAAE,cAAc,EAAE,eAAe,EAAE,UAAU,CAAC;GACjHI,QAAQ,EAAE;KACTwI,IAAI,GACJ;OACC,MAAMC,OAAO,GAAGH,WAAW,CAAC,IAAI,CAAC9B,KAAK,CAACY,MAAM,CAAC;OAC9C,IAAIsB,MAAM,GAAG,CAAC;OAEd,OAAOD,OAAO,CAAClB,GAAG,CAAEoB,OAAO,IAAK;SAC/B,MAAMC,GAAG,GAAG,IAAI,CAACpC,KAAK,CAACqC,KAAK,CAACH,MAAM,EAAEA,MAAM,GAAGC,OAAO,CAAC;SACtDD,MAAM,IAAIC,OAAO;SAEjB,OAAOC,GAAG;QACV,CAAC;;IAEH;GACD9E,OAAO,EAAE;KACRgF,YAAY,CAACrE,KAA4B,EACzC;OACC,IAAI,CAACE,KAAK,CAAC,YAAY,EAAEF,KAAK,CAAC;MAC/B;KACDmD,QAAQ,CAACnD,KAAK,EACd;OACC,IAAI,CAACE,KAAK,CAAC,aAAa,EAAEF,KAAK,CAAC;MAChC;KACDoD,eAAe,CAACpD,KAAK,EACrB;OACC,IAAI,CAACE,KAAK,CAAC,eAAe,EAAEF,KAAK,CAAC;MAClC;KACDqD,aAAa,CAACrD,KAAK,EACnB;OACC,IAAI,CAACE,KAAK,CAAC,aAAa,EAAEF,KAAK,CAAC;MAChC;KACDsD,cAAc,CAACtD,KAAK,EACpB;OACC,IAAI,CAACE,KAAK,CAAC,cAAc,EAAEF,KAAK,CAAC;MACjC;KACDuD,eAAe,CAACvD,KAAK,EACrB;OACC,IAAI,CAACE,KAAK,CAAC,eAAe,EAAEF,KAAK,CAAC;MAClC;KACDwD,UAAU,CAACxD,KAAK,EAChB;OACC,IAAI,CAACE,KAAK,CAAC,UAAU,EAAEF,KAAK,CAAC;;IAE9B;GACDsB,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;CAoBZ,CAAC;;;;;;;;;;"}