this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,s,n){"use strict";const l="BX.Messenger.v2.Textarea.ResizeManager";var o=babelHelpers.classPrivateFieldLooseKey("observer");var i=babelHelpers.classPrivateFieldLooseKey("textareaHeight");var a=babelHelpers.classPrivateFieldLooseKey("initObserver");class c extends n.EventEmitter{constructor(){super();Object.defineProperty(this,a,{value:r});Object.defineProperty(this,o,{writable:true,value:void 0});Object.defineProperty(this,i,{writable:true,value:void 0});this.setEventNamespace(l);babelHelpers.classPrivateFieldLooseBase(this,a)[a]()}observeTextarea(e){babelHelpers.classPrivateFieldLooseBase(this,o)[o].observe(e);babelHelpers.classPrivateFieldLooseBase(this,i)[i]=e.clientHeight}unobserveTextarea(e){babelHelpers.classPrivateFieldLooseBase(this,o)[o].unobserve(e);babelHelpers.classPrivateFieldLooseBase(this,i)[i]=0}}function r(){babelHelpers.classPrivateFieldLooseBase(this,o)[o]=new ResizeObserver((e=>{e.forEach((e=>{var t;const n=(t=e.borderBoxSize)==null?void 0:t[0].blockSize;if(s.Type.isNumber(n)&&n!==babelHelpers.classPrivateFieldLooseBase(this,i)[i]){this.emit(c.events.onHeightChange,{newHeight:n});babelHelpers.classPrivateFieldLooseBase(this,i)[i]=n}}))}))}c.events={onHeightChange:"onHeightChange"};const v="\t";const u="\n";const d="Key";const h={addTab(e){const t=e.selectionStart+1;const s=e.value.slice(0,e.selectionStart);const n=e.value.slice(e.selectionEnd);const l=`${s}${v}${n}`;e.value=l;e.selectionStart=t;e.selectionEnd=t;return l},removeTab(e){const t=e.value.slice(e.selectionStart-1,e.selectionStart);if(t!==v){return e.value}const s=e.selectionStart-1;const n=e.value.slice(0,e.selectionStart-1);const l=e.value.slice(e.selectionEnd);const o=`${n}${l}`;e.value=o;e.selectionStart=s;e.selectionEnd=s;return o},handleDecorationTag(e,t){t=t.replace(d,"").toLowerCase();const s=`[${t}]`;const n=`[/${t}]`;const l=e.value.slice(e.selectionStart,e.selectionEnd);if(!l){return e.value}const o=l.toLowerCase().startsWith(s)&&l.toLowerCase().endsWith(n);if(o){return this.removeDecorationTag(e,t)}else{return this.addDecorationTag(e,t)}},addDecorationTag(e,t){const s=`[${t}]`;const n=`[/${t}]`;return this.applyWrapping(e,s,n)},removeDecorationTag(e,t){const s=`[${t}]`;const n=`[/${t}]`;const l=s.length+n.length;const o=e.selectionStart;const i=e.selectionEnd-l;const a=e.value.slice(0,e.selectionStart);const c=e.selectionStart+s.length;const r=e.selectionEnd-n.length;const v=e.value.slice(c,r);const u=e.value.slice(e.selectionEnd);const d=`${a}${v}${u}`;e.value=d;e.selectionStart=o;e.selectionEnd=i;return d},addNewLine(e){const t=e.selectionStart+1;const s=e.value.slice(0,e.selectionStart);const n=e.value.slice(e.selectionEnd);const l=`${s}${u}${n}`;e.value=l;e.selectionStart=t;e.selectionEnd=t;return l},insertText(e,t={}){const{text:s,withNewLine:n=false,replace:l=false}=t;const o=e.selectionStart+s.length+1;let i="";if(l){i="";e.value="";e.selectionStart=0;e.selectionEnd=0}if(e.value.length===0){i=s}else{const t=e.value.slice(0,e.selectionStart);const l=e.value.slice(e.selectionEnd);i=n?`${e.value}${u}${s}`:`${t} ${s} ${l}`}e.focus({preventScroll:true});e.value=i;e.selectionStart=o;e.selectionEnd=o;return i},insertMention(e,t={}){const{textToInsert:s,textToReplace:n=""}=t;const l=n.length>0;let o="";let i=e.selectionStart+s.length+1;if(l){i-=n.length;const t=e.value.slice(0,e.selectionStart-n.length);const l=e.value.slice(e.selectionStart);o=`${t}${s} ${l}`}else{const t=e.value.slice(0,e.selectionStart);const n=e.value.slice(e.selectionEnd);o=`${t}${s} ${n}`}e.focus({preventScroll:true});e.value=o;e.selectionStart=i;e.selectionEnd=i;return o},handlePasteUrl(e,s){var n;const l=(n=s.clipboardData)==null?void 0:n.getData("text/plain");const o=e.value.slice(e.selectionStart,e.selectionEnd);const i=t.Utils.text.checkUrl(l);if(!i||!o){return e.value}s.preventDefault();const a=`[URL=${l}]`;const c="[/URL]";return this.applyWrapping(e,a,c)},applyWrapping(e,t,s){const n=e.value.slice(e.selectionStart,e.selectionEnd);const l=t.length+s.length;const o=e.selectionStart;const i=e.selectionEnd+l;const a=e.value.slice(0,e.selectionStart);const c=e.value.slice(e.selectionEnd);const r=`${a}${t}${n}${s}${c}`;e.value=r;e.selectionStart=o;e.selectionEnd=i;return r}};e.Textarea=h;e.ResizeManager=c})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Lib,BX,BX.Event);
//# sourceMappingURL=textarea.bundle.map.js