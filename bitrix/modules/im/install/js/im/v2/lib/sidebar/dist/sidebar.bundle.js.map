{"version":3,"file":"sidebar.bundle.js","sources":["../src/classes/block-filter.js","../src/configs/base.js","../src/classes/preset.js","../src/classes/config.js","../src/configs/chat.js","../src/configs/user.js","../src/configs/bot.js","../src/configs/notes.js","../src/configs/lines.js","../src/configs/collab.js","../src/configs/support.js","../src/configs/ai-assistant-bot.js","../src/configs/comment.js","../src/configs/channel.js","../src/configs/copilot.js","../src/configs/task-comments.js","../src/sidebar.js"],"sourcesContent":["import { Core } from 'im.v2.application.core';\nimport { ChatType, PlacementType, SidebarMainPanelBlock } from 'im.v2.const';\nimport { ChannelManager } from 'im.v2.lib.channel';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\nimport { MarketManager } from 'im.v2.lib.market';\n\nimport type { ImModelChat } from 'im.v2.model';\nimport type { SidebarMainPanelBlockType } from 'im.v2.const';\n\nexport class BlockFilter\n{\n\t#dialogId: string;\n\t#chat: ImModelChat;\n\t#blocks: SidebarMainPanelBlockType[];\n\n\tconstructor(dialogId: string, blocks: SidebarMainPanelBlockType[])\n\t{\n\t\tthis.#dialogId = dialogId;\n\t\tthis.#chat = Core.getStore().getters['chats/get'](dialogId, true);\n\t\tthis.#blocks = blocks;\n\t}\n\n\trun(): SidebarMainPanelBlockType[]\n\t{\n\t\tconst blocksSet = new Set(this.#blocks);\n\n\t\tif (this.#isFileMigrationFinished())\n\t\t{\n\t\t\tblocksSet.delete(SidebarMainPanelBlock.fileUnsortedList);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tblocksSet.delete(SidebarMainPanelBlock.fileList);\n\t\t}\n\n\t\tif (!this.#hasMarketApps())\n\t\t{\n\t\t\tblocksSet.delete(SidebarMainPanelBlock.marketAppList);\n\t\t}\n\n\t\tif (!this.#hasHistoryLimit())\n\t\t{\n\t\t\tblocksSet.delete(SidebarMainPanelBlock.tariffLimit);\n\t\t}\n\n\t\treturn [...blocksSet];\n\t}\n\n\t#isFileMigrationFinished(): boolean\n\t{\n\t\treturn FeatureManager.isFeatureAvailable(Feature.sidebarFiles);\n\t}\n\n\t#hasMarketApps(): boolean\n\t{\n\t\treturn MarketManager.getInstance().getAvailablePlacementsByType(PlacementType.sidebar, this.#dialogId).length > 0;\n\t}\n\n\t#hasHistoryLimit(): boolean\n\t{\n\t\tconst isChannelCommentsChat = ChatType.comment === this.#chat.type;\n\t\tconst isChannelChat = ChannelManager.isChannel(this.#dialogId);\n\n\t\tif (isChannelChat || isChannelCommentsChat || FeatureManager.chatHistory.isAvailable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn Core.getStore().getters['sidebar/hasHistoryLimit'](this.#chat.chatId);\n\t}\n}\n","import { SidebarMainPanelBlock } from 'im.v2.const';\n\nexport const baseBlocks = [\n\tSidebarMainPanelBlock.chat,\n\tSidebarMainPanelBlock.tariffLimit,\n\tSidebarMainPanelBlock.info,\n\tSidebarMainPanelBlock.fileList,\n\tSidebarMainPanelBlock.fileUnsortedList,\n\tSidebarMainPanelBlock.taskList,\n\tSidebarMainPanelBlock.meetingList,\n\tSidebarMainPanelBlock.marketAppList,\n];\n","import { Loc } from 'main.core';\n\nimport { baseBlocks } from '../configs/base';\n\nimport type { SidebarMainPanelBlockType } from 'im.v2.const';\n\ntype SidebarPresetOptions = {\n\tblocks: SidebarMainPanelBlockType[],\n\tgetHeaderTitle?: () => string,\n\tgetCustomDescription?: () => string,\n\tareChatMembersEnabled?: () => boolean,\n\tisHeaderMenuEnabled?: () => boolean,\n\tareSharedChatsEnabled?: () => boolean,\n\tisAutoDeleteEnabled?: () => boolean,\n};\n\nexport class SidebarPreset\n{\n\t#configTemplate: SidebarPresetOptions;\n\n\tconstructor(rawConfig: SidebarPresetOptions = {})\n\t{\n\t\tthis.#configTemplate = { ...this.#getDefaultConfig(), ...rawConfig };\n\t}\n\n\tget(): SidebarPresetOptions\n\t{\n\t\treturn this.#configTemplate;\n\t}\n\n\t#getDefaultConfig(): SidebarPresetOptions\n\t{\n\t\treturn {\n\t\t\tblocks: baseBlocks,\n\t\t\tgetHeaderTitle: () => Loc.getMessage('IM_SIDEBAR_HEADER_TITLE'),\n\t\t\tisHeaderMenuEnabled: () => true,\n\t\t\tareSharedChatsEnabled: () => true,\n\t\t\tareChatMembersEnabled: () => true,\n\t\t\tisAutoDeleteEnabled: () => true,\n\t\t\tgetCustomDescription: () => '',\n\t\t};\n\t}\n}\n","import { BlockFilter } from './block-filter';\n\nimport { SidebarPreset } from './preset';\n\nimport type { SidebarMainPanelBlockType } from 'im.v2.const';\n\nexport class SidebarConfig\n{\n\t#dialogId: string;\n\t#blocks: SidebarMainPanelBlockType[];\n\t#getHeaderTitle: () => string;\n\t#getCustomDescription: () => string;\n\t#areChatMembersEnabled: () => boolean;\n\t#isHeaderMenuEnabled: () => boolean;\n\t#areSharedChatsEnabled: boolean;\n\t#isAutoDeleteEnabled: boolean;\n\n\tconstructor(dialogId: string, preset: ?SidebarPreset)\n\t{\n\t\tconst presetInstance = preset ?? new SidebarPreset();\n\n\t\tconst {\n\t\t\tblocks,\n\t\t\tgetHeaderTitle,\n\t\t\tisHeaderMenuEnabled,\n\t\t\tgetCustomDescription,\n\t\t\tareSharedChatsEnabled,\n\t\t\tareChatMembersEnabled,\n\t\t\tisAutoDeleteEnabled,\n\t\t} = presetInstance.get();\n\n\t\tthis.#dialogId = dialogId;\n\t\tthis.#blocks = blocks;\n\t\tthis.#getHeaderTitle = getHeaderTitle;\n\t\tthis.#areSharedChatsEnabled = areSharedChatsEnabled;\n\t\tthis.#areChatMembersEnabled = areChatMembersEnabled;\n\t\tthis.#getCustomDescription = getCustomDescription;\n\t\tthis.#isHeaderMenuEnabled = isHeaderMenuEnabled;\n\t\tthis.#isAutoDeleteEnabled = isAutoDeleteEnabled;\n\t}\n\n\tgetBlocks(): SidebarMainPanelBlockType[]\n\t{\n\t\treturn (new BlockFilter(this.#dialogId, this.#blocks)).run();\n\t}\n\n\tgetHeaderTitle(): string\n\t{\n\t\treturn this.#getHeaderTitle();\n\t}\n\n\tgetCustomDescription(): string\n\t{\n\t\treturn this.#getCustomDescription(this.#dialogId);\n\t}\n\n\tisHeaderMenuEnabled(): boolean\n\t{\n\t\treturn this.#isHeaderMenuEnabled();\n\t}\n\n\tisAutoDeleteEnabled(): boolean\n\t{\n\t\treturn this.#isAutoDeleteEnabled();\n\t}\n\n\tareSharedChatsEnabled(): boolean\n\t{\n\t\treturn this.#areSharedChatsEnabled();\n\t}\n\n\tareChatMembersEnabled(): boolean\n\t{\n\t\treturn this.#areChatMembersEnabled(this.#dialogId);\n\t}\n}\n","import { ChatType, SidebarMainPanelBlock } from 'im.v2.const';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isChat = (chatContext: ImModelChat) => chatContext.type === ChatType.chat;\n\nconst chatPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.chat,\n\t\tSidebarMainPanelBlock.tariffLimit,\n\t\tSidebarMainPanelBlock.info,\n\t\tSidebarMainPanelBlock.fileList,\n\t\tSidebarMainPanelBlock.fileUnsortedList,\n\t\tSidebarMainPanelBlock.taskList,\n\t\tSidebarMainPanelBlock.meetingList,\n\t\tSidebarMainPanelBlock.marketAppList,\n\t],\n});\n\nexport { isChat, chatPreset };\n","import { ChatType, SidebarMainPanelBlock } from 'im.v2.const';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isUser = (chatContext: ImModelChat) => chatContext.type === ChatType.user;\n\nconst userPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.user,\n\t\tSidebarMainPanelBlock.tariffLimit,\n\t\tSidebarMainPanelBlock.info,\n\t\tSidebarMainPanelBlock.fileList,\n\t\tSidebarMainPanelBlock.fileUnsortedList,\n\t\tSidebarMainPanelBlock.taskList,\n\t\tSidebarMainPanelBlock.meetingList,\n\t\tSidebarMainPanelBlock.marketAppList,\n\t],\n});\n\nexport { isUser, userPreset };\n","import { Core } from 'im.v2.application.core';\nimport { UserType, SidebarMainPanelBlock } from 'im.v2.const';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isBot = (chatContext: ImModelChat) => {\n\tconst user = Core.getStore().getters['users/get'](chatContext.dialogId);\n\n\treturn user?.type === UserType.bot;\n};\n\nconst botPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.user,\n\t\tSidebarMainPanelBlock.tariffLimit,\n\t\tSidebarMainPanelBlock.info,\n\t\tSidebarMainPanelBlock.fileList,\n\t\tSidebarMainPanelBlock.fileUnsortedList,\n\t\tSidebarMainPanelBlock.marketAppList,\n\t],\n});\n\nexport { isBot, botPreset };\n","import { Core } from 'im.v2.application.core';\nimport { ChatType, SidebarMainPanelBlock } from 'im.v2.const';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isNotes = (chatContext: ImModelChat) => {\n\treturn Core.getStore().getters['chats/isNotes'](chatContext.dialogId);\n};\n\nconst notesPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.notes,\n\t\tSidebarMainPanelBlock.tariffLimit,\n\t\tSidebarMainPanelBlock.info,\n\t\tSidebarMainPanelBlock.fileList,\n\t\tSidebarMainPanelBlock.fileUnsortedList,\n\t],\n});\n\nexport { isNotes, notesPreset };\n","import { ChatType, SidebarMainPanelBlock } from 'im.v2.const';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isLines = (chatContext: ImModelChat) => chatContext.type === ChatType.lines;\n\nconst linesPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.chat,\n\t\tSidebarMainPanelBlock.info,\n\t\tSidebarMainPanelBlock.fileList,\n\t],\n\tisHeaderMenuEnabled: () => false,\n});\n\nexport { isLines, linesPreset };\n","import { Loc } from 'main.core';\n\nimport { ChatType, SidebarMainPanelBlock } from 'im.v2.const';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isCollab = (chatContext: ImModelChat) => chatContext.type === ChatType.collab;\n\nconst collabPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.chat,\n\t\tSidebarMainPanelBlock.info,\n\t\tSidebarMainPanelBlock.fileList,\n\t\tSidebarMainPanelBlock.fileUnsortedList,\n\t\tSidebarMainPanelBlock.collabHelpdesk,\n\t],\n\tgetHeaderTitle: () => Loc.getMessage('IM_SIDEBAR_COLLAB_HEADER_TITLE'),\n});\n\nexport { isCollab, collabPreset };\n","import { Core } from 'im.v2.application.core';\nimport { SidebarMainPanelBlock } from 'im.v2.const';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isSupport = (chatContext: ImModelChat) => Core.getStore().getters['sidebar/multidialog/isSupport'](chatContext.dialogId);\n\nconst supportPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.support,\n\t\tSidebarMainPanelBlock.tariffLimit,\n\t\tSidebarMainPanelBlock.multidialog,\n\t\tSidebarMainPanelBlock.info,\n\t\tSidebarMainPanelBlock.fileList,\n\t],\n});\n\nexport { isSupport, supportPreset };\n","import { Core } from 'im.v2.application.core';\nimport { SidebarMainPanelBlock } from 'im.v2.const';\nimport { Loc } from 'main.core';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isAiAssistantBot = (chatContext: ImModelChat) => Core.getStore().getters['users/bots/isAiAssistant'](chatContext.dialogId);\n\nconst aiAssistantBotPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.user,\n\t\tSidebarMainPanelBlock.info,\n\t\tSidebarMainPanelBlock.taskList,\n\t\tSidebarMainPanelBlock.meetingList,\n\t],\n\tareSharedChatsEnabled: () => false,\n\tgetCustomDescription: () => {\n\t\treturn Loc.getMessage('IM_SIDEBAR_AI_ASSISTANT_DESCRIPTION');\n\t},\n});\n\nexport { isAiAssistantBot, aiAssistantBotPreset };\n","import { Loc } from 'main.core';\n\nimport { ChatType, SidebarMainPanelBlock } from 'im.v2.const';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isComment = (chatContext: ImModelChat) => chatContext.type === ChatType.comment;\n\nconst commentPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.post,\n\t\tSidebarMainPanelBlock.info,\n\t\tSidebarMainPanelBlock.fileList,\n\t\tSidebarMainPanelBlock.taskList,\n\t\tSidebarMainPanelBlock.meetingList,\n\t],\n\tgetHeaderTitle: () => Loc.getMessage('IM_SIDEBAR_COMMENTS_HEADER_TITLE'),\n\tisHeaderMenuEnabled: () => false,\n});\n\nexport { isComment, commentPreset };\n","import { Loc } from 'main.core';\n\nimport { ChannelManager } from 'im.v2.lib.channel';\nimport { SidebarMainPanelBlock } from 'im.v2.const';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isChannel = (chatContext: ImModelChat) => ChannelManager.isChannel(chatContext.dialogId);\n\nconst channelPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.chat,\n\t\tSidebarMainPanelBlock.info,\n\t\tSidebarMainPanelBlock.fileList,\n\t\tSidebarMainPanelBlock.taskList,\n\t\tSidebarMainPanelBlock.meetingList,\n\t],\n\tgetHeaderTitle: () => Loc.getMessage('IM_SIDEBAR_CHANNEL_HEADER_TITLE'),\n});\n\nexport { isChannel, channelPreset };\n","import { ChatType, SidebarMainPanelBlock } from 'im.v2.const';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isCopilot = (chatContext: ImModelChat) => chatContext.type === ChatType.copilot;\n\nconst copilotPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.copilot,\n\t\tSidebarMainPanelBlock.tariffLimit,\n\t\tSidebarMainPanelBlock.copilotInfo,\n\t\tSidebarMainPanelBlock.taskList,\n\t\tSidebarMainPanelBlock.meetingList,\n\t],\n});\n\nexport { isCopilot, copilotPreset };\n","import { SidebarMainPanelBlock, ChatType } from 'im.v2.const';\n\nimport { SidebarPreset } from '../classes/preset';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst isTaskComments = (chatContext: ImModelChat) => chatContext.type === ChatType.taskComments;\n\nconst taskCommentsPreset = new SidebarPreset({\n\tblocks: [\n\t\tSidebarMainPanelBlock.task,\n\t\tSidebarMainPanelBlock.info,\n\t\tSidebarMainPanelBlock.fileList,\n\t\tSidebarMainPanelBlock.meetingList,\n\t],\n\tisHeaderMenuEnabled: () => false,\n});\n\nexport { isTaskComments, taskCommentsPreset };\n","import { Core } from 'im.v2.application.core';\nimport { FeatureManager, Feature } from 'im.v2.lib.feature';\n\nimport { SidebarConfig } from './classes/config';\nimport { SidebarPreset } from './classes/preset';\nimport { isChat, chatPreset } from './configs/chat';\nimport { isUser, userPreset } from './configs/user';\nimport { isBot, botPreset } from './configs/bot';\nimport { isNotes, notesPreset } from './configs/notes';\nimport { isLines, linesPreset } from './configs/lines';\nimport { isCollab, collabPreset } from './configs/collab';\nimport { isSupport, supportPreset } from './configs/support';\nimport { isAiAssistantBot, aiAssistantBotPreset } from './configs/ai-assistant-bot';\nimport { isComment, commentPreset } from './configs/comment';\nimport { isChannel, channelPreset } from './configs/channel';\nimport { isCopilot, copilotPreset } from './configs/copilot';\nimport { isTaskComments, taskCommentsPreset } from './configs/task-comments';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nexport { SidebarConfig } from './classes/config';\nexport { SidebarPreset } from './classes/preset';\n\nexport type ContextCheckFunction = (context: ImModelChat) => boolean\n\nexport class SidebarManager\n{\n\tstatic #instance = null;\n\n\t#defaultConfigMap: Map<ContextCheckFunction, SidebarPreset> = new Map();\n\t#customConfigMap: Map<ContextCheckFunction, SidebarPreset> = new Map();\n\n\tstatic getInstance(): SidebarManager\n\t{\n\t\tif (!this.#instance)\n\t\t{\n\t\t\tthis.#instance = new SidebarManager();\n\t\t}\n\n\t\treturn this.#instance;\n\t}\n\n\tconstructor()\n\t{\n\t\tthis.#checkMigrationStatus();\n\t\tthis.#registerDefaultConfigs();\n\t}\n\n\tregisterConfig(callback: ContextCheckFunction, sidebarPreset: SidebarPreset): void\n\t{\n\t\tthis.#customConfigMap.set(callback, sidebarPreset);\n\t}\n\n\tgetConfig(dialogId: string): SidebarConfig\n\t{\n\t\tconst chat = Core.getStore().getters['chats/get'](dialogId, true);\n\n\t\tconst allConfigEntries = [...this.#customConfigMap.entries(), ...this.#defaultConfigMap.entries()];\n\t\tfor (const [callback, preset] of allConfigEntries)\n\t\t{\n\t\t\tif (callback(chat))\n\t\t\t{\n\t\t\t\treturn new SidebarConfig(dialogId, preset);\n\t\t\t}\n\t\t}\n\n\t\treturn (new SidebarConfig(dialogId));\n\t}\n\n\t#checkMigrationStatus()\n\t{\n\t\tconst filesMigrated = FeatureManager.isFeatureAvailable(Feature.sidebarFiles);\n\t\tconst linksMigrated = FeatureManager.isFeatureAvailable(Feature.sidebarLinks);\n\t\tvoid Core.getStore().dispatch('sidebar/setFilesMigrated', filesMigrated);\n\t\tvoid Core.getStore().dispatch('sidebar/setLinksMigrated', linksMigrated);\n\t}\n\n\t#registerDefaultConfigs()\n\t{\n\t\t// most specific configs first\n\t\tthis.#defaultConfigMap.set(isTaskComments, taskCommentsPreset);\n\t\tthis.#defaultConfigMap.set(isCopilot, copilotPreset);\n\t\tthis.#defaultConfigMap.set(isChannel, channelPreset);\n\t\tthis.#defaultConfigMap.set(isComment, commentPreset);\n\t\tthis.#defaultConfigMap.set(isSupport, supportPreset);\n\t\tthis.#defaultConfigMap.set(isAiAssistantBot, aiAssistantBotPreset);\n\t\tthis.#defaultConfigMap.set(isBot, botPreset);\n\t\tthis.#defaultConfigMap.set(isNotes, notesPreset);\n\t\tthis.#defaultConfigMap.set(isLines, linesPreset);\n\t\tthis.#defaultConfigMap.set(isCollab, collabPreset);\n\t\tthis.#defaultConfigMap.set(isUser, userPreset);\n\t\tthis.#defaultConfigMap.set(isChat, chatPreset);\n\t}\n}\n"],"names":["BlockFilter","constructor","dialogId","blocks","Core","getStore","getters","run","blocksSet","Set","delete","SidebarMainPanelBlock","fileUnsortedList","fileList","marketAppList","tariffLimit","FeatureManager","isFeatureAvailable","Feature","sidebarFiles","MarketManager","getInstance","getAvailablePlacementsByType","PlacementType","sidebar","length","isChannelCommentsChat","ChatType","comment","type","isChannelChat","ChannelManager","isChannel","chatHistory","isAvailable","chatId","baseBlocks","chat","info","taskList","meetingList","SidebarPreset","rawConfig","get","getHeaderTitle","Loc","getMessage","isHeaderMenuEnabled","areSharedChatsEnabled","areChatMembersEnabled","isAutoDeleteEnabled","getCustomDescription","SidebarConfig","preset","presetInstance","getBlocks","isChat","chatContext","chatPreset","isUser","user","userPreset","isBot","UserType","bot","botPreset","isNotes","notesPreset","notes","isLines","lines","linesPreset","isCollab","collab","collabPreset","collabHelpdesk","isSupport","supportPreset","support","multidialog","isAiAssistantBot","aiAssistantBotPreset","isComment","commentPreset","post","channelPreset","isCopilot","copilot","copilotPreset","copilotInfo","isTaskComments","taskComments","taskCommentsPreset","task","SidebarManager","Map","registerConfig","callback","sidebarPreset","set","getConfig","allConfigEntries","entries","filesMigrated","linksMigrated","sidebarLinks","dispatch"],"mappings":";;;;;;;CAIiD;CAAA;CAAA;CAAA;CAAA;CAAA;AAKjD,CAAO,MAAMA,WAAW,CACxB;GAKCC,WAAW,CAACC,QAAgB,EAAEC,MAAmC,EACjE;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,0BAAaD,QAAQ;KACzB,4CAAI,kBAASE,2BAAI,CAACC,QAAQ,EAAE,CAACC,OAAO,CAAC,WAAW,CAAC,CAACJ,QAAQ,EAAE,IAAI,CAAC;KACjE,4CAAI,sBAAWC,MAAM;;GAGtBI,GAAG,GACH;KACC,MAAMC,SAAS,GAAG,IAAIC,GAAG,yCAAC,IAAI,oBAAS;KAEvC,4CAAI,IAAI,yDACR;OACCD,SAAS,CAACE,MAAM,CAACC,iCAAqB,CAACC,gBAAgB,CAAC;MACxD,MAED;OACCJ,SAAS,CAACE,MAAM,CAACC,iCAAqB,CAACE,QAAQ,CAAC;;KAGjD,IAAI,yCAAC,IAAI,mCAAiB,EAC1B;OACCL,SAAS,CAACE,MAAM,CAACC,iCAAqB,CAACG,aAAa,CAAC;;KAGtD,IAAI,yCAAC,IAAI,uCAAmB,EAC5B;OACCN,SAAS,CAACE,MAAM,CAACC,iCAAqB,CAACI,WAAW,CAAC;;KAGpD,OAAO,CAAC,GAAGP,SAAS,CAAC;;CAyBvB;CAAC,qCArBA;GACC,OAAOQ,gCAAc,CAACC,kBAAkB,CAACC,yBAAO,CAACC,YAAY,CAAC;CAC/D;CAAC,2BAGD;GACC,OAAOC,8BAAa,CAACC,WAAW,EAAE,CAACC,4BAA4B,CAACC,yBAAa,CAACC,OAAO,0CAAE,IAAI,wBAAW,CAACC,MAAM,GAAG,CAAC;CAClH;CAAC,6BAGD;GACC,MAAMC,qBAAqB,GAAGC,oBAAQ,CAACC,OAAO,KAAK,4CAAI,gBAAOC,IAAI;GAClE,MAAMC,aAAa,GAAGC,gCAAc,CAACC,SAAS,yCAAC,IAAI,wBAAW;GAE9D,IAAIF,aAAa,IAAIJ,qBAAqB,IAAIV,gCAAc,CAACiB,WAAW,CAACC,WAAW,EAAE,EACtF;KACC,OAAO,KAAK;;GAGb,OAAO9B,2BAAI,CAACC,QAAQ,EAAE,CAACC,OAAO,CAAC,yBAAyB,CAAC,CAAC,4CAAI,gBAAO6B,MAAM,CAAC;CAC7E;;CCnEM,MAAMC,UAAU,GAAG,CACzBzB,iCAAqB,CAAC0B,IAAI,EAC1B1B,iCAAqB,CAACI,WAAW,EACjCJ,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAACE,QAAQ,EAC9BF,iCAAqB,CAACC,gBAAgB,EACtCD,iCAAqB,CAAC4B,QAAQ,EAC9B5B,iCAAqB,CAAC6B,WAAW,EACjC7B,iCAAqB,CAACG,aAAa,CACnC;;CCT4C;CAAA;AAc7C,CAAO,MAAM2B,aAAa,CAC1B;GAGCxC,WAAW,CAACyC,SAA+B,GAAG,EAAE,EAChD;KAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,sCAAmB;OAAE,2CAAG,IAAI,yCAAoB;OAAE,GAAGA;MAAW;;GAGrEC,GAAG,GACH;KACC,+CAAO,IAAI;;CAeb;CAAC,8BAXA;GACC,OAAO;KACNxC,MAAM,EAAEiC,UAAU;KAClBQ,cAAc,EAAE,MAAMC,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC;KAC/DC,mBAAmB,EAAE,MAAM,IAAI;KAC/BC,qBAAqB,EAAE,MAAM,IAAI;KACjCC,qBAAqB,EAAE,MAAM,IAAI;KACjCC,mBAAmB,EAAE,MAAM,IAAI;KAC/BC,oBAAoB,EAAE,MAAM;IAC5B;CACF;;CCvCwC;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAIzC,CAAO,MAAMC,aAAa,CAC1B;GAUCnD,WAAW,CAACC,QAAgB,EAAEmD,MAAsB,EACpD;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,MAAMC,cAAc,GAAGD,MAAM,WAANA,MAAM,GAAI,IAAIZ,aAAa,EAAE;KAEpD,MAAM;OACLtC,MAAM;OACNyC,cAAc;OACdG,mBAAmB;OACnBI,oBAAoB;OACpBH,qBAAqB;OACrBC,qBAAqB;OACrBC;MACA,GAAGI,cAAc,CAACX,GAAG,EAAE;KAExB,4CAAI,8BAAazC,QAAQ;KACzB,4CAAI,0BAAWC,MAAM;KACrB,4CAAI,sCAAmByC,cAAc;KACrC,4CAAI,oDAA0BI,qBAAqB;KACnD,4CAAI,oDAA0BC,qBAAqB;KACnD,4CAAI,kDAAyBE,oBAAoB;KACjD,4CAAI,gDAAwBJ,mBAAmB;KAC/C,4CAAI,gDAAwBG,mBAAmB;;GAGhDK,SAAS,GACT;KACC,OAAQ,IAAIvD,WAAW,yCAAC,IAAI,qEAAY,IAAI,wBAAS,CAAEO,GAAG,EAAE;;GAG7DqC,cAAc,GACd;KACC,+CAAO,IAAI;;GAGZO,oBAAoB,GACpB;KACC,+CAAO,IAAI,wFAAuB,IAAI;;GAGvCJ,mBAAmB,GACnB;KACC,+CAAO,IAAI;;GAGZG,mBAAmB,GACnB;KACC,+CAAO,IAAI;;GAGZF,qBAAqB,GACrB;KACC,+CAAO,IAAI;;GAGZC,qBAAqB,GACrB;KACC,+CAAO,IAAI,0FAAwB,IAAI;;CAEzC;;CCrEA,MAAMO,MAAM,GAAIC,WAAwB,IAAKA,WAAW,CAAC5B,IAAI,KAAKF,oBAAQ,CAACU,IAAI;CAE/E,MAAMqB,UAAU,GAAG,IAAIjB,aAAa,CAAC;GACpCtC,MAAM,EAAE,CACPQ,iCAAqB,CAAC0B,IAAI,EAC1B1B,iCAAqB,CAACI,WAAW,EACjCJ,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAACE,QAAQ,EAC9BF,iCAAqB,CAACC,gBAAgB,EACtCD,iCAAqB,CAAC4B,QAAQ,EAC9B5B,iCAAqB,CAAC6B,WAAW,EACjC7B,iCAAqB,CAACG,aAAa;CAErC,CAAC,CAAC;;CCbF,MAAM6C,MAAM,GAAIF,WAAwB,IAAKA,WAAW,CAAC5B,IAAI,KAAKF,oBAAQ,CAACiC,IAAI;CAE/E,MAAMC,UAAU,GAAG,IAAIpB,aAAa,CAAC;GACpCtC,MAAM,EAAE,CACPQ,iCAAqB,CAACiD,IAAI,EAC1BjD,iCAAqB,CAACI,WAAW,EACjCJ,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAACE,QAAQ,EAC9BF,iCAAqB,CAACC,gBAAgB,EACtCD,iCAAqB,CAAC4B,QAAQ,EAC9B5B,iCAAqB,CAAC6B,WAAW,EACjC7B,iCAAqB,CAACG,aAAa;CAErC,CAAC,CAAC;;CCZF,MAAMgD,KAAK,GAAIL,WAAwB,IAAK;GAC3C,MAAMG,IAAI,GAAGxD,2BAAI,CAACC,QAAQ,EAAE,CAACC,OAAO,CAAC,WAAW,CAAC,CAACmD,WAAW,CAACvD,QAAQ,CAAC;GAEvE,OAAO,CAAA0D,IAAI,oBAAJA,IAAI,CAAE/B,IAAI,MAAKkC,oBAAQ,CAACC,GAAG;CACnC,CAAC;CAED,MAAMC,SAAS,GAAG,IAAIxB,aAAa,CAAC;GACnCtC,MAAM,EAAE,CACPQ,iCAAqB,CAACiD,IAAI,EAC1BjD,iCAAqB,CAACI,WAAW,EACjCJ,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAACE,QAAQ,EAC9BF,iCAAqB,CAACC,gBAAgB,EACtCD,iCAAqB,CAACG,aAAa;CAErC,CAAC,CAAC;;CCfF,MAAMoD,OAAO,GAAIT,WAAwB,IAAK;GAC7C,OAAOrD,2BAAI,CAACC,QAAQ,EAAE,CAACC,OAAO,CAAC,eAAe,CAAC,CAACmD,WAAW,CAACvD,QAAQ,CAAC;CACtE,CAAC;CAED,MAAMiE,WAAW,GAAG,IAAI1B,aAAa,CAAC;GACrCtC,MAAM,EAAE,CACPQ,iCAAqB,CAACyD,KAAK,EAC3BzD,iCAAqB,CAACI,WAAW,EACjCJ,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAACE,QAAQ,EAC9BF,iCAAqB,CAACC,gBAAgB;CAExC,CAAC,CAAC;;CCbF,MAAMyD,OAAO,GAAIZ,WAAwB,IAAKA,WAAW,CAAC5B,IAAI,KAAKF,oBAAQ,CAAC2C,KAAK;CAEjF,MAAMC,WAAW,GAAG,IAAI9B,aAAa,CAAC;GACrCtC,MAAM,EAAE,CACPQ,iCAAqB,CAAC0B,IAAI,EAC1B1B,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAACE,QAAQ,CAC9B;GACDkC,mBAAmB,EAAE,MAAM;CAC5B,CAAC,CAAC;;CCPF,MAAMyB,QAAQ,GAAIf,WAAwB,IAAKA,WAAW,CAAC5B,IAAI,KAAKF,oBAAQ,CAAC8C,MAAM;CAEnF,MAAMC,YAAY,GAAG,IAAIjC,aAAa,CAAC;GACtCtC,MAAM,EAAE,CACPQ,iCAAqB,CAAC0B,IAAI,EAC1B1B,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAACE,QAAQ,EAC9BF,iCAAqB,CAACC,gBAAgB,EACtCD,iCAAqB,CAACgE,cAAc,CACpC;GACD/B,cAAc,EAAE,MAAMC,aAAG,CAACC,UAAU,CAAC,gCAAgC;CACtE,CAAC,CAAC;;CCZF,MAAM8B,SAAS,GAAInB,WAAwB,IAAKrD,2BAAI,CAACC,QAAQ,EAAE,CAACC,OAAO,CAAC,+BAA+B,CAAC,CAACmD,WAAW,CAACvD,QAAQ,CAAC;CAE9H,MAAM2E,aAAa,GAAG,IAAIpC,aAAa,CAAC;GACvCtC,MAAM,EAAE,CACPQ,iCAAqB,CAACmE,OAAO,EAC7BnE,iCAAqB,CAACI,WAAW,EACjCJ,iCAAqB,CAACoE,WAAW,EACjCpE,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAACE,QAAQ;CAEhC,CAAC,CAAC;;CCTF,MAAMmE,gBAAgB,GAAIvB,WAAwB,IAAKrD,2BAAI,CAACC,QAAQ,EAAE,CAACC,OAAO,CAAC,0BAA0B,CAAC,CAACmD,WAAW,CAACvD,QAAQ,CAAC;CAEhI,MAAM+E,oBAAoB,GAAG,IAAIxC,aAAa,CAAC;GAC9CtC,MAAM,EAAE,CACPQ,iCAAqB,CAACiD,IAAI,EAC1BjD,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAAC4B,QAAQ,EAC9B5B,iCAAqB,CAAC6B,WAAW,CACjC;GACDQ,qBAAqB,EAAE,MAAM,KAAK;GAClCG,oBAAoB,EAAE,MAAM;KAC3B,OAAON,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC;;CAE9D,CAAC,CAAC;;CCbF,MAAMoC,SAAS,GAAIzB,WAAwB,IAAKA,WAAW,CAAC5B,IAAI,KAAKF,oBAAQ,CAACC,OAAO;CAErF,MAAMuD,aAAa,GAAG,IAAI1C,aAAa,CAAC;GACvCtC,MAAM,EAAE,CACPQ,iCAAqB,CAACyE,IAAI,EAC1BzE,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAACE,QAAQ,EAC9BF,iCAAqB,CAAC4B,QAAQ,EAC9B5B,iCAAqB,CAAC6B,WAAW,CACjC;GACDI,cAAc,EAAE,MAAMC,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC;GACxEC,mBAAmB,EAAE,MAAM;CAC5B,CAAC,CAAC;;CCXF,MAAMf,SAAS,GAAIyB,WAAwB,IAAK1B,gCAAc,CAACC,SAAS,CAACyB,WAAW,CAACvD,QAAQ,CAAC;CAE9F,MAAMmF,aAAa,GAAG,IAAI5C,aAAa,CAAC;GACvCtC,MAAM,EAAE,CACPQ,iCAAqB,CAAC0B,IAAI,EAC1B1B,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAACE,QAAQ,EAC9BF,iCAAqB,CAAC4B,QAAQ,EAC9B5B,iCAAqB,CAAC6B,WAAW,CACjC;GACDI,cAAc,EAAE,MAAMC,aAAG,CAACC,UAAU,CAAC,iCAAiC;CACvE,CAAC,CAAC;;CCdF,MAAMwC,SAAS,GAAI7B,WAAwB,IAAKA,WAAW,CAAC5B,IAAI,KAAKF,oBAAQ,CAAC4D,OAAO;CAErF,MAAMC,aAAa,GAAG,IAAI/C,aAAa,CAAC;GACvCtC,MAAM,EAAE,CACPQ,iCAAqB,CAAC4E,OAAO,EAC7B5E,iCAAqB,CAACI,WAAW,EACjCJ,iCAAqB,CAAC8E,WAAW,EACjC9E,iCAAqB,CAAC4B,QAAQ,EAC9B5B,iCAAqB,CAAC6B,WAAW;CAEnC,CAAC,CAAC;;CCVF,MAAMkD,cAAc,GAAIjC,WAAwB,IAAKA,WAAW,CAAC5B,IAAI,KAAKF,oBAAQ,CAACgE,YAAY;CAE/F,MAAMC,kBAAkB,GAAG,IAAInD,aAAa,CAAC;GAC5CtC,MAAM,EAAE,CACPQ,iCAAqB,CAACkF,IAAI,EAC1BlF,iCAAqB,CAAC2B,IAAI,EAC1B3B,iCAAqB,CAACE,QAAQ,EAC9BF,iCAAqB,CAAC6B,WAAW,CACjC;GACDO,mBAAmB,EAAE,MAAM;CAC5B,CAAC,CAAC;;CCK+C;CAAA;CAAA;CAAA;CAAA;AAIjD,CAAO,MAAM+C,cAAc,CAC3B;GAMC,OAAOzE,WAAW,GAClB;KACC,IAAI,yCAAC,IAAI,uBAAU,EACnB;OACC,4CAAI,0BAAa,IAAIyE,cAAc,EAAE;;KAGtC,+CAAO,IAAI;;GAGZ7F,WAAW,GACX;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA,OAd8D,IAAI8F,GAAG;;KAAE;OAAA;OAAA,OACV,IAAIA,GAAG;;KAcnE,4CAAI;KACJ,4CAAI;;GAGLC,cAAc,CAACC,QAA8B,EAAEC,aAA4B,EAC3E;KACC,4CAAI,sCAAkBC,GAAG,CAACF,QAAQ,EAAEC,aAAa,CAAC;;GAGnDE,SAAS,CAAClG,QAAgB,EAC1B;KACC,MAAMmC,IAAI,GAAGjC,2BAAI,CAACC,QAAQ,EAAE,CAACC,OAAO,CAAC,WAAW,CAAC,CAACJ,QAAQ,EAAE,IAAI,CAAC;KAEjE,MAAMmG,gBAAgB,GAAG,CAAC,GAAG,4CAAI,sCAAkBC,OAAO,EAAE,EAAE,GAAG,4CAAI,wCAAmBA,OAAO,EAAE,CAAC;KAClG,KAAK,MAAM,CAACL,QAAQ,EAAE5C,MAAM,CAAC,IAAIgD,gBAAgB,EACjD;OACC,IAAIJ,QAAQ,CAAC5D,IAAI,CAAC,EAClB;SACC,OAAO,IAAIe,aAAa,CAAClD,QAAQ,EAAEmD,MAAM,CAAC;;;KAI5C,OAAQ,IAAID,aAAa,CAAClD,QAAQ,CAAC;;CA2BrC;CAAC,kCAvBA;GACC,MAAMqG,aAAa,GAAGvF,gCAAc,CAACC,kBAAkB,CAACC,yBAAO,CAACC,YAAY,CAAC;GAC7E,MAAMqF,aAAa,GAAGxF,gCAAc,CAACC,kBAAkB,CAACC,yBAAO,CAACuF,YAAY,CAAC;GAC7E,KAAKrG,2BAAI,CAACC,QAAQ,EAAE,CAACqG,QAAQ,CAAC,0BAA0B,EAAEH,aAAa,CAAC;GACxE,KAAKnG,2BAAI,CAACC,QAAQ,EAAE,CAACqG,QAAQ,CAAC,0BAA0B,EAAEF,aAAa,CAAC;CACzE;CAAC,oCAGD;;GAEC,4CAAI,wCAAmBL,GAAG,CAACT,cAAc,EAAEE,kBAAkB,CAAC;GAC9D,4CAAI,wCAAmBO,GAAG,CAACb,SAAS,EAAEE,aAAa,CAAC;GACpD,4CAAI,wCAAmBW,GAAG,CAACnE,SAAS,EAAEqD,aAAa,CAAC;GACpD,4CAAI,wCAAmBc,GAAG,CAACjB,SAAS,EAAEC,aAAa,CAAC;GACpD,4CAAI,wCAAmBgB,GAAG,CAACvB,SAAS,EAAEC,aAAa,CAAC;GACpD,4CAAI,wCAAmBsB,GAAG,CAACnB,gBAAgB,EAAEC,oBAAoB,CAAC;GAClE,4CAAI,wCAAmBkB,GAAG,CAACrC,KAAK,EAAEG,SAAS,CAAC;GAC5C,4CAAI,wCAAmBkC,GAAG,CAACjC,OAAO,EAAEC,WAAW,CAAC;GAChD,4CAAI,wCAAmBgC,GAAG,CAAC9B,OAAO,EAAEE,WAAW,CAAC;GAChD,4CAAI,wCAAmB4B,GAAG,CAAC3B,QAAQ,EAAEE,YAAY,CAAC;GAClD,4CAAI,wCAAmByB,GAAG,CAACxC,MAAM,EAAEE,UAAU,CAAC;GAC9C,4CAAI,wCAAmBsC,GAAG,CAAC3C,MAAM,EAAEE,UAAU,CAAC;CAC/C;CAAC,sBAnEWoC,cAAc;GAAA;GAAA,OAEP;CAAI;;;;;;;;;;"}