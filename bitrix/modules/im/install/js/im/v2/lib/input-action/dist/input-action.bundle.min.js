this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,s,t){"use strict";const i={writing:"writing",recordingVoice:"recordingVoice",sendingFile:"sendingFile"};const r=25e3;const a={[i.writing]:{[t.ChatType.copilot]:18e4,default:r},[i.recordingVoice]:{default:r},[i.sendingFile]:{default:r}};var l=babelHelpers.classPrivateFieldLooseKey("instance");var o=babelHelpers.classPrivateFieldLooseKey("actionTimers");var c=babelHelpers.classPrivateFieldLooseKey("isAlreadyActive");var n=babelHelpers.classPrivateFieldLooseKey("buildTimerId");var b=babelHelpers.classPrivateFieldLooseKey("setTimer");var d=babelHelpers.classPrivateFieldLooseKey("clearTimer");var v=babelHelpers.classPrivateFieldLooseKey("getActionDuration");class p{constructor(){Object.defineProperty(this,v,{value:B});Object.defineProperty(this,d,{value:g});Object.defineProperty(this,b,{value:P});Object.defineProperty(this,n,{value:h});Object.defineProperty(this,c,{value:u});Object.defineProperty(this,o,{writable:true,value:{}})}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,l)[l]){babelHelpers.classPrivateFieldLooseBase(this,l)[l]=new this}return babelHelpers.classPrivateFieldLooseBase(this,l)[l]}startAction(e){if(babelHelpers.classPrivateFieldLooseBase(this,c)[c](e)){this.stopAction(e)}void s.Core.getStore().dispatch("chats/inputActions/start",e);const t=babelHelpers.classPrivateFieldLooseBase(this,n)[n](e);babelHelpers.classPrivateFieldLooseBase(this,o)[o][t]=babelHelpers.classPrivateFieldLooseBase(this,b)[b](e)}stopAction(e){if(!babelHelpers.classPrivateFieldLooseBase(this,c)[c](e)){return}const t=babelHelpers.classPrivateFieldLooseBase(this,n)[n](e);babelHelpers.classPrivateFieldLooseBase(this,d)[d](t);void s.Core.getStore().dispatch("chats/inputActions/stop",e)}clear(){Object.values(babelHelpers.classPrivateFieldLooseBase(this,o)[o]).forEach((e=>{clearTimeout(e)}));babelHelpers.classPrivateFieldLooseBase(this,o)[o]={}}}function u(e){return s.Core.getStore().getters["chats/inputActions/isActionActive"](e)}function h(e){const{dialogId:s,userId:t}=e;return`${s}|${t}`}function P(e){const s=babelHelpers.classPrivateFieldLooseBase(this,v)[v](e);return setTimeout((()=>{this.stopAction(e)}),s)}function g(e){clearTimeout(babelHelpers.classPrivateFieldLooseBase(this,o)[o][e]);delete babelHelpers.classPrivateFieldLooseBase(this,o)[o][e]}function B(e){var t;const{type:i,dialogId:r,duration:l}=e;if(l&&l>0){return l}const o=a[i];const c=s.Core.getStore().getters["chats/get"](r,true);return(t=o[c.type])!=null?t:o.default}Object.defineProperty(p,l,{writable:true,value:void 0});e.InputAction=i;e.InputActionListener=p})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Application,BX.Messenger.v2.Const);
//# sourceMappingURL=input-action.bundle.map.js