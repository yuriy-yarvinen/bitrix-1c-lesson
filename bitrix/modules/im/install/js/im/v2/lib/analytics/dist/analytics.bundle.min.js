this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,a,s,o,c,i){"use strict";const n="notes";const r=Object.freeze({private:"chatType_private",multiuser:"chatType_multiuser"});const l=Object.freeze({openChat:"open_chat",createNewChat:"create_new_chat",audioUse:"audio_use",openTab:"open_tab",popupOpen:"popup_open",openPrices:"open_prices",openSettings:"open_settings",clickCreateNew:"click_create_new",openExisting:"open_existing",typeMessage:"type_message",pinChat:"pin_chat",clickDelete:"click_delete",clickShare:"click_share",cancelDelete:"cancel_delete",delete:"delete",view:"view",click:"click",clickEdit:"click_edit",submitEdit:"submit_edit",clickCallButton:"click_call_button",clickStartConf:"click_start_conf",clickJoin:"click_join",clickAddUser:"click_add_user",openCalendar:"open_calendar",openTasks:"open_tasks",openFiles:"open_files",clickCreatePoll:"click_create_poll",clickCreateTask:"click_create_task",clickCreateEvent:"click_create_event",clickAttach:"click_attach",downloadFile:"download_file",saveToDisk:"save_to_disk",pinMessage:"pin_message",unpinMessage:"unpin_message",pinnedMessageLimitException:"pinned_message_limit_exception",startSearch:"start_search",selectRecipient:"select_recipient",selectUser:"select_user",openCreateMenu:"open_create_menu",clickUpdate:"click_update",clickMoreInformation:"click_more_information",goToWeb:"go_to_web",copyMessage:"copy_message",clickReply:"click_reply",copyFile:"copy_file",copyLink:"copy_link",addToFav:"add_to_fav",seeLater:"see_later",select:"select",addFeedback:"add_feedback",copyChatLink:"copy_chat_link",viewTranscription:"view_transcription",play:"play",pause:"pause",changeSpeed:"change_speed"});const p=Object.freeze({ai:"ai",checkin:"checkin",im:"im",infoHelper:"InfoHelper",inform:"inform"});const d=Object.freeze({chatOperations:"chat_operations",shift:"shift",messenger:"messenger",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",limit:"limit",limitBanner:"limit_banner",toolOff:"tool_off",message:"message",chatPopup:"chat_popup",call:"call",collab:"collab",updateAppPopup:"update_app_popup",audiomessage:"audiomessage"});const g=Object.freeze({ai:"ai",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",deletedMessage:"deleted_message",limitOfficeChatingHistory:"limit_office_chating_history",privateCall:"private",groupCall:"group",may25DesktopRelease:"may_25_desktop_release"});const h=Object.freeze({copilotTab:"copilot_tab",chat:"chat",chatStart:"chat_start",chatHistory:"chat_history",sidebar:"sidebar",popup:"popup",activeChat:"active_chat",comments:"comments",chatHeader:"chat_header",chatSidebar:"chat_sidebar",chatTextarea:"chat_textarea",editor:"editor",chatWindow:"chat_window",forward:"forward",userAdd:"user_add",chatCreateMenu:"chat_create_menu",chatEmptyState:"chat_empty_state"});const y=Object.freeze({contextMenu:"context_menu",sidebar:"sidebar",chatWindow:"chat_window",messageLink:"message_link",chatSidebar:"chat_sidebar",chatList:"chat_list",window:"window",membersPanel:"user_list"});const b=Object.freeze({initialBanner:"initial_banner",videocall:"videocall",audiocall:"audiocall",startButton:"start_button",more:"more"});const u=Object.freeze({success:"success",errorTurnedOff:"error_turnedoff"});const v=Object.freeze({collabEmptyState:"collab_empty_state"});const _=Object.freeze({single:"single",multiple:"multiple",selected:"selected"});function m(e){const t=c.Core.getStore().getters["chats/collabs/getByChatId"](e);if(!t){return null}return`collabId_${t.collabId}`}const C=Object.freeze({userIntranet:"user_intranet",userExtranet:"user_extranet",userCollaber:"user_collaber"});function f(){const e=c.Core.getStore().getters["users/get"](c.Core.getUserId(),true);switch(e.type){case i.UserType.user:return C.userIntranet;case i.UserType.extranet:return C.userExtranet;case i.UserType.collaber:return C.userCollaber;default:return C.userIntranet}}function I(e){switch(e){case i.ChatType.channel:case i.ChatType.openChannel:case i.ChatType.comment:case i.ChatType.generalChannel:return d.channel;case i.ChatType.copilot:return d.copilot;case i.ChatType.videoconf:return d.videoconf;case i.ChatType.collab:return d.collab;default:return d.chat}}function P(e){return c.Core.getStore().getters["chats/isNotes"](e)}const S="custom";function k(e){var t;if(P(e.dialogId)){return n}return(t=i.ChatType[e.type])!=null?t:S}const F={[i.CollabEntityType.tasks]:l.openTasks,[i.CollabEntityType.calendar]:l.openCalendar,[i.CollabEntityType.files]:l.openFiles};class L{onClick(e,t){const a=F[t];if(!a){return}const s=c.Core.getStore().getters["chats/get"](e,true);const n={tool:p.im,category:d.collab,event:a,c_section:h.chatHeader,p2:f(),p5:`chatId_${s.chatId}`};if(s.type===i.ChatType.collab){n.p4=m(s.chatId)}o.sendData(n)}}var T=babelHelpers.classPrivateFieldLooseKey("onClick");class B{constructor(){Object.defineProperty(this,T,{value:w})}onCreateTaskFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,T)[T]({dialogId:e,event:l.clickCreateTask,section:h.chatSidebar})}onCreateTaskFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,T)[T]({dialogId:e,event:l.clickCreateTask,section:h.chatTextarea})}onCreateEventFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,T)[T]({dialogId:e,event:l.clickCreateEvent,section:h.chatSidebar})}onCreateEventFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,T)[T]({dialogId:e,event:l.clickCreateEvent,section:h.chatTextarea})}onCreateVoteFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,T)[T]({dialogId:e,event:l.clickCreatePoll,section:h.chatTextarea})}}function w({dialogId:e,event:t,section:a}){const s=c.Core.getStore().getters["chats/get"](e,true);const n={tool:p.im,category:I(s.type),event:t,c_section:a,p1:`chatType_${k(s)}`,p2:f(),p5:`chatId_${s.chatId}`};if(s.type===i.ChatType.collab){n.p4=m(s.chatId)}o.sendData(n)}class D{onClick(e){const t=c.Core.getStore().getters["chats/get"](e);o.sendData({tool:p.im,category:I(t.type),event:l.clickDelete,type:k(t),c_section:h.sidebar,c_sub_section:y.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onCancel(e){const t=c.Core.getStore().getters["chats/get"](e);o.sendData({tool:p.im,category:I(t.type),event:l.cancelDelete,type:k(t),c_section:h.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onConfirm(e){const t=c.Core.getStore().getters["chats/get"](e);o.sendData({tool:p.im,category:I(t.type),event:l.delete,type:k(t),c_section:h.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onChatDeletedNotification(e){const t=c.Core.getStore().getters["chats/get"](e);const a=I(t);o.sendData({tool:p.im,category:d.chatPopup,event:l.view,type:`deleted_${a}`,c_section:h.activeChat,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}}class H{onNotFoundNotification({dialogId:e}){const t=c.Core.getStore().getters["chats/get"](e);if(!t){return}o.sendData({tool:p.im,category:d.chatPopup,event:l.view,type:g.deletedMessage,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onDeletedPostNotification({messageId:e,dialogId:t}){const a=c.Core.getStore().getters["chats/get"](t);const s=c.Core.getStore().getters["messages/comments/getByMessageId"](e);o.sendData({tool:p.im,category:d.chatPopup,event:l.view,type:g.deletedMessage,c_section:h.comments,p1:`chatType_${a.type}`,p4:`parentChatId_${a.chatId}`,p5:`chatId_${s.chatId}`})}}var $=babelHelpers.classPrivateFieldLooseKey("onBannerClick");var O=babelHelpers.classPrivateFieldLooseKey("getSidebarPanelNameForAnalytics");class M{constructor(){Object.defineProperty(this,O,{value:j});Object.defineProperty(this,$,{value:x})}onDialogLimitExceeded({dialogId:e,noMessages:t}){const a=t?h.chatStart:h.chatHistory;const s=c.Core.getStore().getters["chats/get"](e);const i=k(s);const n={tool:p.im,category:d.limitBanner,event:l.view,type:g.limitOfficeChatingHistory,c_section:a,p1:`chatType_${i}`};o.sendData(n)}onSidebarLimitExceeded({dialogId:e,panel:t}){const a=c.Core.getStore().getters["chats/get"](e);const s=k(a);const i={tool:p.im,category:d.limitBanner,event:l.view,type:g.limitOfficeChatingHistory,c_section:h.sidebar,c_element:babelHelpers.classPrivateFieldLooseBase(this,O)[O](t),p1:`chatType_${s}`};o.sendData(i)}onDialogBannerClick({dialogId:e}){const t=h.chatWindow;babelHelpers.classPrivateFieldLooseBase(this,$)[$]({dialogId:e,section:t})}onSidebarBannerClick({dialogId:e,panel:t}){const a=h.sidebar;const s=babelHelpers.classPrivateFieldLooseBase(this,O)[O](t);babelHelpers.classPrivateFieldLooseBase(this,$)[$]({dialogId:e,section:a,element:s})}onGoToContextLimitExceeded({dialogId:e}){const t=h.messageLink;babelHelpers.classPrivateFieldLooseBase(this,$)[$]({dialogId:e,section:t})}}function x({dialogId:e,section:t,element:a}){const s=c.Core.getStore().getters["chats/get"](e);const i=k(s);const n={tool:p.im,category:d.limitBanner,event:l.click,type:g.limitOfficeChatingHistory,c_section:t,p1:`chatType_${i}`};if(a){n.c_element=a}o.sendData(n)}function j(e){switch(e){case i.SidebarDetailBlock.main:return"main";case i.SidebarDetailBlock.file:case i.SidebarDetailBlock.fileUnsorted:case i.SidebarDetailBlock.audio:case i.SidebarDetailBlock.brief:case i.SidebarDetailBlock.document:case i.SidebarDetailBlock.media:return"docs";case i.SidebarDetailBlock.messageSearch:return"message_search";case i.SidebarDetailBlock.favorite:return"favs";case i.SidebarDetailBlock.link:return"links";case i.SidebarDetailBlock.task:return"task";case i.SidebarDetailBlock.meeting:return"event";default:return"unknown"}}const E=Object.freeze({recent:"recent",searchResult:"search_result"});var U=babelHelpers.classPrivateFieldLooseKey("hasSearchedBefore");var R=babelHelpers.classPrivateFieldLooseKey("onSelectUser");var A=babelHelpers.classPrivateFieldLooseKey("onAddUserClick");class W{constructor(){Object.defineProperty(this,A,{value:N});Object.defineProperty(this,R,{value:K});Object.defineProperty(this,U,{writable:true,value:false})}onChatSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,A)[A](e,h.chatSidebar)}onChatHeaderClick(e){babelHelpers.classPrivateFieldLooseBase(this,A)[A](e,h.chatHeader)}onStartSearch({dialogId:e}){if(babelHelpers.classPrivateFieldLooseBase(this,U)[U]){return}babelHelpers.classPrivateFieldLooseBase(this,U)[U]=true;const t=c.Core.getStore().getters["chats/get"](e);o.sendData({tool:p.im,category:I(t.type),event:l.startSearch,c_section:h.userAdd,p1:`chatType_${t.type}`,p2:f()})}onClosePopup(){babelHelpers.classPrivateFieldLooseBase(this,U)[U]=false}onSelectUserFromRecent({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,R)[R]({dialogId:e,position:t,source:E.recent})}onSelectUserFromSearchResult({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,R)[R]({dialogId:e,position:t,source:E.searchResult})}}function K({dialogId:e,position:t,source:a}){const s=c.Core.getStore().getters["chats/get"](e,true);o.sendData({tool:p.im,category:I(s.type),event:l.selectUser,type:a,c_section:h.userAdd,p1:`chatType_${s.type}`,p2:f(),p3:`position_${t}`})}function N(e,t){const a=c.Core.getStore().getters["chats/get"](e,true);const s={tool:p.im,category:I(a.type),event:l.clickAddUser,c_section:t,p2:f(),p5:`chatId_${a.chatId}`};if(a.type===i.ChatType.collab){s.p4=m(a.chatId)}o.sendData(s)}class z{onOpenForm(e){const t=c.Core.getStore().getters["chats/get"](e);const a={tool:p.im,category:I(t.type),event:l.clickEdit,c_section:h.sidebar,c_sub_section:y.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`};if(t.type===i.ChatType.collab){a.p4=m(t.chatId)}o.sendData(a)}onSubmitForm(e){const t=c.Core.getStore().getters["chats/get"](e);const a={tool:p.im,category:I(t.type),c_section:h.editor,event:l.submitEdit,p1:`chatType_${t.type}`,p2:f(),p5:`chatId_${t.chatId}`};if(t.type===i.ChatType.collab){a.p4=m(t.chatId)}o.sendData(a)}}class X{onStartClick(e){const t=c.Core.getStore().getters["application/getLayout"].name;o.sendData({tool:p.im,category:I(e),event:l.clickCreateNew,type:e,c_section:`${t}_tab`,p2:f()})}onCollabEmptyStateCreateClick(){o.sendData({tool:p.im,category:I(i.ChatType.collab),event:l.clickCreateNew,type:i.ChatType.collab,c_section:v.collabEmptyState,p2:f()})}onMenuCreateClick(){const e=c.Core.getStore().getters["application/getLayout"].name;o.sendData({tool:p.im,category:d.messenger,event:l.openCreateMenu,c_section:`${e}_tab`})}}class V{onOpenPriceTable(e){o.sendData({tool:p.infoHelper,category:d.limit,event:l.openPrices,type:e,c_section:h.chat})}onOpenToolsSettings(e){o.sendData({tool:p.infoHelper,category:d.toolOff,event:l.openSettings,type:e,c_section:h.chat})}}class G{onOpenCheckInPopup(){o.sendData({event:l.popupOpen,tool:p.checkin,category:d.shift,c_section:h.chat})}}const J=Object.freeze({create_menu:"create_menu",role_picker:"role_picker"});var Y=babelHelpers.classPrivateFieldLooseKey("sendDataForCopilotCreation");class q{constructor(){Object.defineProperty(this,Y,{value:Q})}onCreateChat(e){o.sendData({event:l.createNewChat,tool:p.ai,category:d.chatOperations,c_section:h.copilotTab,type:g.ai,p3:r.private,p5:`chatId_${e}`})}onCreateDefaultChatInRecent(){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]({c_sub_section:J.create_menu})}onSelectRoleInRecent(){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]({c_sub_section:J.role_picker})}onOpenChat(e){const t=c.Core.getStore().getters["chats/get"](e);const a=t.userCounter<=2?r.private:r.multiuser;o.sendData({event:l.openChat,tool:p.ai,category:d.chatOperations,c_section:h.copilotTab,type:g.ai,p3:a,p5:`chatId_${t.chatId}`})}onOpenTab({isAvailable:e=true}={}){const t={event:l.openTab,tool:p.ai,category:d.chatOperations,c_section:h.copilotTab,status:e?u.success:u.errorTurnedOff};o.sendData(t)}onUseAudioInput(){o.sendData({event:l.audioUse,tool:p.ai,category:d.chatOperations,c_section:h.copilotTab})}}function Q(e){const t=c.Core.getStore().getters["application/getLayout"].name;o.sendData({event:l.clickCreateNew,tool:p.im,category:d.copilot,c_section:`${t}_tab`,type:g.copilot,...e})}class Z{onOpenUploadMenu(e){const t=c.Core.getStore().getters["chats/get"](e);const a=k(t);const s={tool:p.im,category:I(t.type),event:l.clickAttach,c_section:h.chatTextarea,p1:`chatType_${a}`,p2:f(),p5:`chatId_${t.chatId}`};if(t.type===i.ChatType.collab){s.p4=m(t.chatId)}o.sendData(s)}}class ee{getSerializedParams(e){const t=this.getAnalyticsOptions(e);const a=Object.entries(t).map((([e,t])=>`st[${e}]=${encodeURIComponent(t)}`));return a.join("&")}getAnalyticsOptions(e){const t=c.Core.getStore().getters["chats/get"](e,true);const a=t.type;const s={tool:p.im,event:l.clickCreatePoll,category:I(a),p1:`chatType_${a}`,p2:f(),p5:`chatId_${t.chatId}`};if(a===i.ChatType.comment){const e=c.Core.getStore().getters["chats/getByChatId"](t.parentChatId);s.p1=`chatType_${e.type}`;s.p4=`parentChatId_${t.parentChatId}`}if(a===i.ChatType.collab){s.p4=m(t.chatId)}return s}}var te=babelHelpers.classPrivateFieldLooseKey("getEventSpecificParams");class ae{constructor(){Object.defineProperty(this,te,{value:se})}onUnpin({dialogId:e,eventParams:t={}}){this.onSendData({dialogId:e,eventParams:{event:l.unpinMessage,...t}})}onSendData({dialogId:e,eventParams:t}){const a=c.Core.getStore().getters["chats/get"](e,true);const s={tool:p.im,category:I(a.type),p1:`chatType_${k(a)}`,...babelHelpers.classPrivateFieldLooseBase(this,te)[te](t.event,a.chatId),...t};o.sendData(s)}}function se(e,t){const a=c.Core.getStore().getters["messages/pin/getPinned"](t).length;if(e===l.pinMessage){return{p3:`pinnedCount_${a}`,type:a>1?_.multiple:_.single}}if(e===l.unpinMessage){return{type:a>0?_.selected:_.single}}return{}}const oe=Object.freeze({recent:"recent",searchResult:"search_result",notes:"notes"});var ce=babelHelpers.classPrivateFieldLooseKey("hasSearchedBefore");var ie=babelHelpers.classPrivateFieldLooseKey("onSelectRecipient");class ne{constructor(){Object.defineProperty(this,ie,{value:re});Object.defineProperty(this,ce,{writable:true,value:false})}onClickForward(e){const t=c.Core.getStore().getters["chats/get"](e);o.sendData({tool:p.im,category:I(t.type),event:l.clickShare,c_section:h.chatWindow,c_sub_section:y.contextMenu,p1:`chatType_${t.type}`,p2:a.getUserType()})}onStartSearch({dialogId:e}){if(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]){return}babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=true;const t=c.Core.getStore().getters["chats/get"](e);o.sendData({tool:p.im,category:I(t.type),event:l.startSearch,c_section:h.forward,p1:`chatType_${t.type}`,p2:a.getUserType()})}onSelectRecipientFromRecent({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]({dialogId:e,position:t,source:oe.recent})}onSelectRecipientFromSearchResult({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]({dialogId:e,position:t,source:oe.searchResult})}onClosePopup(){babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=false}}function re({dialogId:e,position:t,source:s}){const i=c.Core.getStore().getters["chats/get"](e);const n=P(e)?oe.notes:s;o.sendData({tool:p.im,category:I(i.type),event:l.selectRecipient,type:n,c_section:h.forward,p1:`chatType_${i.type}`,p2:a.getUserType(),p3:`position_${t}`})}var le=babelHelpers.classPrivateFieldLooseKey("buildAnalyticsData");class pe{constructor(){Object.defineProperty(this,le,{value:de})}onShow(){o.sendData(babelHelpers.classPrivateFieldLooseBase(this,le)[le](l.view))}onClickUpdate(){o.sendData(babelHelpers.classPrivateFieldLooseBase(this,le)[le](l.clickUpdate))}onClickMoreInformation(){o.sendData(babelHelpers.classPrivateFieldLooseBase(this,le)[le](l.clickMoreInformation))}onOpenWebVersion(){o.sendData(babelHelpers.classPrivateFieldLooseBase(this,le)[le](l.goToWeb))}}function de(e){return{tool:p.inform,category:d.updateAppPopup,event:e,type:g.may25DesktopRelease}}const ge={single:"files_single",many:"files_all"};const he={...i.FileType,media:"media",any:"any"};var ye=babelHelpers.classPrivateFieldLooseKey("onCopyTextCopilot");var be=babelHelpers.classPrivateFieldLooseKey("getFilesAmountParam");var ue=babelHelpers.classPrivateFieldLooseKey("getAnalyticsFileType");var ve=babelHelpers.classPrivateFieldLooseKey("getBaseParams");class _e{constructor(){Object.defineProperty(this,ve,{value:Ie});Object.defineProperty(this,ue,{value:fe});Object.defineProperty(this,be,{value:Ce});Object.defineProperty(this,ye,{value:me});this.messageForward=new ne;this.messagePins=new ae}onSendFeedback(e){var a;const s=c.Core.getStore().getters["application/getLayout"].name;const i=c.Core.getStore().getters["copilot/chats/getRole"](e);const n=c.Core.getStore().getters["copilot/chats/getAIModel"](e);const r=(a=n.name)!=null?a:n;o.sendData({category:d.copilot,event:l.addFeedback,c_section:`${s}_tab`,p2:`provider_${r}`,p4:`role_${t.Text.toCamelCase(i.code)}`,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onDelete({messageId:e,dialogId:t}){const a=c.Core.getStore().getters["messages/getById"](e);const i=new s.MessageComponentManager(a).getName();o.sendData({category:d.message,event:l.clickDelete,type:i,c_section:h.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](t)})}onCancelDelete({messageId:e,dialogId:t}){const a=c.Core.getStore().getters["messages/getById"](e);const i=new s.MessageComponentManager(a).getName();const n=c.Core.getStore().getters["chats/get"](t);o.sendData({category:d.message,event:l.cancelDelete,type:i,c_section:h.popup,p5:`chatId_${n.chatId}`,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](t)})}onFileDownload({messageId:e,dialogId:t}){const s=c.Core.getStore().getters["chats/get"](t);const n={category:I(s.type),event:l.downloadFile,type:babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](e),c_section:h.chatWindow,p2:a.getUserType(),p3:babelHelpers.classPrivateFieldLooseBase(this,be)[be](e),p5:`chatId_${s.chatId}`,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](t)};if(s.type===i.ChatType.collab){n.p4=a.getCollabId(s.chatId)}o.sendData(n)}onSaveOnDisk({messageId:e,dialogId:t}){const s=c.Core.getStore().getters["chats/get"](t);const n={category:I(s.type),event:l.saveToDisk,type:babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](e),c_section:h.chatWindow,c_element:b.more,p2:a.getUserType(),p3:babelHelpers.classPrivateFieldLooseBase(this,be)[be](e),p5:`chatId_${s.chatId}`,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](t)};if(s.type===i.ChatType.collab){n.p4=a.getCollabId(s.chatId)}o.sendData(n)}onCopyLink(e){const t=c.Core.getStore().getters["chats/get"](e,true);o.sendData({category:I(t.type),event:l.copyLink,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onCopyFile({dialogId:e,fileId:t}){const a=c.Core.getStore().getters["chats/get"](e,true);const s=c.Core.getStore().getters["files/get"](t);o.sendData({category:I(a.type),event:l.copyFile,type:s.type,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onEdit(e){const t=c.Core.getStore().getters["chats/get"](e,true);o.sendData({category:I(t.type),event:l.clickEdit,c_section:h.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onCreateTask(e){const t=c.Core.getStore().getters["chats/get"](e,true);o.sendData({category:I(t.type),event:l.clickCreateTask,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onSelect(e){const t=c.Core.getStore().getters["chats/get"](e,true);o.sendData({category:I(t.type),event:l.select,c_section:h.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onMark(e){const t=c.Core.getStore().getters["chats/get"](e,true);o.sendData({category:I(t.type),event:l.seeLater,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onReply(e){const t=c.Core.getStore().getters["chats/get"](e,true);o.sendData({category:I(t.type),event:l.clickReply,c_section:h.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onAddFavorite({dialogId:e,messageId:t}){const a=c.Core.getStore().getters["chats/get"](e,true);const i=c.Core.getStore().getters["messages/getById"](t);const n=new s.MessageComponentManager(i).getName();o.sendData({category:I(a.type),event:l.addToFav,type:n,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onCreateEvent(e){const t=c.Core.getStore().getters["chats/get"](e,true);o.sendData({category:I(t.type),event:l.clickCreateEvent,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onCopyText({dialogId:e,messageId:t}){const a=c.Core.getStore().getters["chats/get"](e,true);const n=c.Core.getStore().getters["messages/getById"](t);const r=new s.MessageComponentManager(n).getName();if(a.type===i.ChatType.copilot){babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]({dialogId:e,messageId:t});return}o.sendData({category:I(a.type),event:l.copyMessage,type:r,c_section:h.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onPin(e){this.messagePins.onSendData({dialogId:e,eventParams:{event:l.pinMessage,c_section:h.chatWindow}})}onReachingPinsLimit(e){this.messagePins.onSendData({dialogId:e,eventParams:{event:l.pinnedMessageLimitException,c_section:h.chatWindow}})}onUnpin(e){this.messagePins.onUnpin({dialogId:e,eventParams:{c_section:h.chatWindow}})}onForward(e){this.messageForward.onClickForward(e)}}function me({dialogId:e,messageId:a}){var i;const n=c.Core.getStore().getters["copilot/chats/getAIModel"](e);const r=c.Core.getStore().getters["application/getLayout"].name;const p=c.Core.getStore().getters["chats/get"](e,true);const g=c.Core.getStore().getters["messages/getById"](a);const h=c.Core.getStore().getters["copilot/chats/getRole"](e);const y=new s.MessageComponentManager(g).getName();const b=(i=n.name)!=null?i:n;o.sendData({category:d.copilot,event:l.copyMessage,type:y,c_section:`${r}_tab`,p2:`provider_${b}`,p4:`role_${t.Text.toCamelCase(h.code)}`,p5:`chatId_${p.chatId}`,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}function Ce(e){const t=c.Core.getStore().getters["messages/getById"](e);if(t.files.length===1){return ge.single}return ge.many}function fe(e){const t=c.Core.getStore().getters["messages/getById"](e);const a=t.files.map((e=>c.Core.getStore().getters["files/get"](e).type));const s=[...new Set(a)];if(s.length===1){return s[0]}if(s.length===2&&s.includes(i.FileType.image)&&s.includes(i.FileType.video)){return he.media}return he.any}function Ie(e){const t=c.Core.getStore().getters["chats/get"](e,true);return{tool:p.im,c_sub_section:y.contextMenu,p1:`chatType_${t.type}`}}class Pe{getEmptyStateContext(){return h.chatEmptyState}getRecentCreateMenuContext(){return h.chatCreateMenu}}class Se{onPin(e){if(!P(e)){return}const t=c.Core.getStore().getters["chats/get"](e);const a={tool:p.im,category:I(t.type),event:l.pinChat,p1:`chatType_${n}`};o.sendData(a)}}var ke=babelHelpers.classPrivateFieldLooseKey("buildAnalyticsData");class Fe{constructor(){Object.defineProperty(this,ke,{value:Le})}onCopyMembersPanel(e){o.sendData(babelHelpers.classPrivateFieldLooseBase(this,ke)[ke](e,y.membersPanel))}onCopyContextMenu(e){o.sendData(babelHelpers.classPrivateFieldLooseBase(this,ke)[ke](e,y.contextMenu))}}function Le(e,t){const a=c.Core.getStore().getters["chats/get"](e);return{tool:p.im,category:I(a.type),event:l.copyChatLink,c_section:h.sidebar,c_sub_section:t}}var Te=babelHelpers.classPrivateFieldLooseKey("getTypeByChatId");class Be{constructor(){Object.defineProperty(this,Te,{value:we})}onViewTranscription(e,t){const a=babelHelpers.classPrivateFieldLooseBase(this,Te)[Te](e);const s=t.toLowerCase();o.sendData({tool:p.im,category:d.audiomessage,event:l.viewTranscription,status:s,p1:`chatType_${a}`})}onPlay(e){const t=babelHelpers.classPrivateFieldLooseBase(this,Te)[Te](e);o.sendData({tool:p.im,category:d.audiomessage,event:l.play,p1:`chatType_${t}`})}onPause(e){const t=babelHelpers.classPrivateFieldLooseBase(this,Te)[Te](e);o.sendData({tool:p.im,category:d.audiomessage,event:l.pause,p1:`chatType_${t}`})}onChangeRate(e,t){const a=babelHelpers.classPrivateFieldLooseBase(this,Te)[Te](e);o.sendData({tool:p.im,category:d.audiomessage,event:l.changeSpeed,p1:`chatType_${a}`,p2:`speed_${t}`})}}function we(e){const t=c.Core.getStore().getters["chats/getByChatId"](e);return k(t)}var De=babelHelpers.classPrivateFieldLooseKey("excludedChats");var He=babelHelpers.classPrivateFieldLooseKey("chatsWithTyping");var $e=babelHelpers.classPrivateFieldLooseKey("currentTab");var Oe=babelHelpers.classPrivateFieldLooseKey("instance");class Me{constructor(){Object.defineProperty(this,De,{writable:true,value:new Set});Object.defineProperty(this,He,{writable:true,value:new Set});Object.defineProperty(this,$e,{writable:true,value:i.Layout.chat});this.chatCreate=new X;this.chatEdit=new z;this.chatDelete=new D;this.messageDelete=new H;this.historyLimit=new M;this.userAdd=new W;this.collabEntities=new L;this.chatEntities=new B;this.supervisor=new V;this.checkIn=new G;this.copilot=new q;this.attachMenu=new Z;this.vote=new ee;this.messagePins=new ae;this.messageForward=new ne;this.desktopUpdateBanner=new pe;this.messageContextMenu=new _e;this.sliderInvite=new Pe;this.chatPins=new Se;this.chatInviteLink=new Fe;this.audioMessage=new Be}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]){babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]=new this}return babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]}ignoreNextChatOpen(e){babelHelpers.classPrivateFieldLooseBase(this,De)[De].add(e)}onOpenTab(e){const t=[i.Layout.copilot,i.Layout.collab,i.Layout.channel,i.Layout.notification,i.Layout.settings,i.Layout.openlines];if(!t.includes(e)){return}if(babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]===e){return}babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]=e;o.sendData({event:l.openTab,tool:p.im,category:d.messenger,type:e,p2:f()})}onOpenChat(e){if(babelHelpers.classPrivateFieldLooseBase(this,De)[De].has(e.dialogId)){babelHelpers.classPrivateFieldLooseBase(this,De)[De].delete(e.dialogId);return}babelHelpers.classPrivateFieldLooseBase(this,He)[He].delete(e.dialogId);const a=k(e);if(a===i.ChatType.copilot){this.copilot.onOpenChat(e.dialogId)}const s=c.Core.getStore().getters["application/getLayout"].name;const n=e.role===i.UserRole.guest?"N":"Y";const r={tool:p.im,category:I(a),event:l.openExisting,type:a,c_section:`${s}_tab`,p2:f()};if(!P(e.dialogId)){r.p5=`chatId_${e.chatId}`}if(a===i.ChatType.comment){const t=c.Core.getStore().getters["chats/getByChatId"](e.parentChatId);r.p1=`chatType_${t.type}`;r.p4=`parentChatId_${e.parentChatId}`}if(a===i.ChatType.collab){r.p4=m(e.chatId)}if(a!==i.ChatType.copilot){r.p3=`isMember_${n}`}if(a===i.ChatType.copilot){const a=c.Core.getStore().getters["copilot/chats/getRole"](e.dialogId);r.p4=`role_${t.Text.toCamelCase(a.code)}`}o.sendData(r)}onTypeMessage(e){if(!P(e.dialogId)||babelHelpers.classPrivateFieldLooseBase(this,He)[He].has(e.dialogId)){return}babelHelpers.classPrivateFieldLooseBase(this,He)[He].add(e.dialogId);const t=k(e);const a={tool:p.im,category:I(t),event:l.typeMessage,p1:`chatType_${t}`};o.sendData(a)}}Object.defineProperty(Me,Oe,{writable:true,value:void 0});e.Analytics=Me;e.CreateChatContext=v;e.getCollabId=m;e.getUserType=f})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.UI.Analytics,BX.Messenger.v2.Application,BX.Messenger.v2.Const);
//# sourceMappingURL=analytics.bundle.map.js