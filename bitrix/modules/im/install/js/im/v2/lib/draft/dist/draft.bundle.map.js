{"version":3,"file":"draft.bundle.map.js","names":["this","BX","Messenger","v2","exports","main_core","main_core_events","im_v2_lib_logger","im_v2_application_core","im_v2_const","ui_dexie","im_v2_lib_localStorage","DB_NAME","recentDraftLocalStorageKey","copilotDraftLocalStorageKey","IndexedDbManager","getInstance","instance","constructor","db","Dexie","version","stores","drafts","migrateFromLocalStorage","migrationStatus","get","recentDrafts","LocalStorageManager","set","remove","copilotDrafts","setMigrationFinished","key","value","put","result","defaultValue","WRITE_TO_STORAGE_TIMEOUT","SHOW_DRAFT_IN_RECENT_TIMEOUT","STORAGE_KEY","NOT_AVAILABLE_CHAT_TYPES","Set","ChatType","comment","STANDALONE_SECTION_CHAT_TYPES","taskComments","_getChat","babelHelpers","classPrivateFieldLooseKey","DraftManager","Object","defineProperty","_getChat2","inited","EventEmitter","subscribe","EventType","layout","onLayoutChange","bind","initDraftHistory","draftHistory","error","console","fillDraftsFromStorage","Logger","warn","setRecentListDraftText","Type","isPlainObject","entries","forEach","dialogId","draft","setDraftText","text","trim","refreshSaveTimeout","setDraftPanel","panelType","panelContext","setDraftMentions","mentions","getDraft","_this$drafts$dialogId","clearDraft","setRecentItemDraftText","_draft$text","canSetRecentItemDraftText","type","chatType","classPrivateFieldLooseBase","Core","getStore","dispatch","id","addFakeItems","has","event","from","getData","entityId","setTimeout","async","clearTimeout","writeToStorageTimeout","saveToIndexedDb","prepareDrafts","TextareaPanelType","edit","chat","getters","Lib","Event","Application","Const","DexieExport"],"sources":["draft.bundle.js"],"mappings":"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","ignoreList":[]}