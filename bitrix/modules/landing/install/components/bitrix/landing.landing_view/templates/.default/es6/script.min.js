this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};(function(e,t,i,a,n,l,r,s,o,c,d,u,h){"use strict";var v=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"loadMessages",value:function t(i){e.messages=i}},{key:"getMessage",value:function t(i){return e.messages[i]}}]);return e}();var p={defaultDevice:{tablet:"iphone14pro",mobile:"iphone14pro"},devices:{delimiter1:{code:"delimiter",langCode:"LANDING_PREVIEW_DEVICE_MOBILES"},iphone14pro:{name:"iPhone 14 Pro",code:"iphone14pro",className:"--iphone-14-pro",width:393,height:852},iPhoneXR:{name:"iPhone XR",code:"iPhoneXR",className:"--iphone-xr",width:414,height:896},iPhoneSE:{name:"iPhone SE",code:"iPhoneSE",className:"--iphone-se",width:375,height:667},SamsungGalaxyNote10:{name:"Samsung Galaxy Note10",code:"SamsungGalaxyNote10",className:"--samsung-galaxy-note10",width:412,height:896},SamsungGalaxyS8:{name:"Samsung Galaxy S8+",code:"SamsungGalaxyS8",className:"--samsung-galaxy-s8-plus",width:360,height:740},GooglePixel4:{name:"Google Pixel 4",code:"GooglePixel4",className:"--google-pixel-4",width:353,height:745},delimiter2:{code:"delimiter",langCode:"LANDING_PREVIEW_DEVICE_TABLETS"},iPad:{name:"iPad",code:"iPad",className:"--ipad",width:810,height:1080},iPadMini:{name:"iPad Mini",code:"iPadMini",className:"--ipad-mini",width:744,height:1133},SamsungGalaxyTabS8:{name:"Samsung Galaxy Tab S8",code:"SamsungGalaxyTabS8",className:"--samsung-galaxy-tab-s8",width:800,height:1280}}};var b,f,g;var m=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getPreview",value:function t(i){if(i.messages){e.messages=i.messages}if(!localStorage.getItem("deviceOrientation")){localStorage.setItem("deviceOrientation","portrait")}var a=function e(){if(localStorage.getItem("deviceOrientation")==="portrait"){localStorage.setItem("deviceOrientation","landscape")}else{localStorage.setItem("deviceOrientation","portrait")}n.Dom.style(r.wrapper,"width","".concat(r.wrapper.offsetHeight,"px"));n.Dom.style(r.wrapper,"height","".concat(r.wrapper.offsetWidth,"px"));n.Dom.style(r.frame,"width","".concat(r.frame.offsetHeight,"px"));n.Dom.style(r.frame,"height","".concat(r.frame.offsetWidth,"px"));r.wrapper.querySelector('[data-role="device-orientation"]').innerHTML=localStorage.getItem("deviceOrientation")};var l=localStorage.getItem("deviceHidden")==="true";var r={wrapper:null,rotate:n.Tag.render(b||(b=babelHelpers.taggedTemplateLiteral(['<div class="landing-device-rotate" onclick="','" data-role="landing-device-rotate"></div>'])),a),frame:n.Tag.render(f||(f=babelHelpers.taggedTemplateLiteral(['<iframe data-role="landing-device-preview-iframe" src="','"></iframe>'])),i.frameUrl)};r.wrapper=n.Tag.render(g||(g=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-device-wrapper','">\n\t\t\t\t<div class="landing-device-name" onclick="','">\n\t\t\t\t\t<span data-role="device-name">Device</span>\n\t\t\t\t\t<span data-role="device-orientation" class="landing-device-orientation">Orientation</span>\n\t\t\t\t</div>\n\t\t\t\t','\n\t\t\t\t<div class="landing-device-preview" data-role="landing-device-preview">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),l?" landing-device-wrapper-hidden":"",i.clickHandler,r.rotate,r.frame);return r.wrapper}},{key:"openDeviceMenu",value:function i(a,n,l){var r="device_selector";var s=t.MenuManager.getMenuById(r);if(s){s.show();return}var o=[];n.forEach((function(i){if(i.code==="delimiter"){o.push(new t.MenuItem({delimiter:true,text:i.langCode?e.messages[i.langCode]:""}));return}o.push(new t.MenuItem({id:i.className,html:String(i.name),onclick:function e(){t.MenuManager.getMenuById(r).close();l(i)}}))}));var c=a.parentNode||document.body;s=t.MenuManager.create({id:r,bindElement:c,className:"landing-ui-block-actions-popup",items:o,offsetTop:0,offsetLeft:40,minWidth:c.offsetWidth,animation:"fading-slide",events:{onPopupShow:function e(){s.getPopupWindow().setMinWidth(c.offsetWidth)}}});s.show()}}]);return e}();var y;function w(e,t){P(e,t);t.add(e)}function k(e,t,i){P(e,t);t.set(e,i)}function P(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function H(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var C=new WeakMap;var F=new WeakMap;var S=new WeakMap;var G=new WeakMap;var T=new WeakMap;var E=new WeakMap;var I=new WeakMap;var L=new WeakMap;var B=new WeakMap;var _=new WeakMap;var M=new WeakSet;var x=new WeakSet;var N=new WeakSet;var O=new WeakSet;var D=new WeakSet;var W=new WeakSet;var A=new WeakSet;var j=new WeakSet;var X=new WeakSet;var z=new WeakSet;var U=new WeakSet;var R=new WeakSet;var V=new WeakSet;var q=new WeakSet;var K=function e(t){babelHelpers.classCallCheck(this,e);w(this,q);w(this,V);w(this,R);w(this,U);w(this,z);w(this,X);w(this,j);w(this,A);w(this,W);w(this,D);w(this,O);w(this,N);w(this,x);w(this,M);k(this,C,{writable:true,value:void 0});k(this,F,{writable:true,value:void 0});k(this,S,{writable:true,value:void 0});k(this,G,{writable:true,value:void 0});k(this,T,{writable:true,value:void 0});k(this,E,{writable:true,value:void 0});k(this,I,{writable:true,value:null});k(this,L,{writable:true,value:false});k(this,B,{writable:true,value:false});k(this,_,{writable:true,value:["Landing::upBlock","Landing::downBlock","Landing::showBlock","Landing::hideBlock","Landing::markDeletedBlock","Landing::addBlock","Landing::copyBlock","Landing::moveBlock","Block::changeNodeName","Block::updateContent","Block::getContent","Landing\\Block::addCard","Landing\\Block::cloneCard","Landing\\Block::removeCard","Landing\\Block::updateNodes","Landing\\Block::updateStyles","Landing\\Block::saveForm"]});this.target=t.target||document.body;babelHelpers.classPrivateFieldSet(this,F,t.frameUrl);babelHelpers.classPrivateFieldSet(this,S,t.editorFrameWrapper);babelHelpers.classPrivateFieldSet(this,C,t);H(this,M,Y).call(this,t);H(this,U,le).call(this,t);H(this,V,se).call(this);H(this,X,ae).call(this,H(this,D,Z).call(this,"mobile"))};function Y(e){var t=this;BX.addCustomEvent("BX.Landing.Main:editorSizeChange",(function(e){H(t,X,ae).call(t,H(t,D,Z).call(t,e))}));window.addEventListener("message",(function(e){var i=e.data||{};if(i.action==="editorenable"){if(!!i.payload.enable){babelHelpers.classPrivateFieldSet(t,L,true)}else{if(babelHelpers.classPrivateFieldGet(t,B)){H(t,N,J).call(t)}babelHelpers.classPrivateFieldSet(t,L,false);babelHelpers.classPrivateFieldSet(t,B,false)}}else if(i.action==="backendaction"){H(t,x,$).call(t,i.payload)}}))}function $(e){if(babelHelpers.classPrivateFieldGet(this,_).includes(e.action)){if(babelHelpers.classPrivateFieldGet(this,L)){babelHelpers.classPrivateFieldSet(this,B,true)}else{var t,i,a,n;var l=null;if((t=e.data)!==null&&t!==void 0&&t.block){var r;l=(r=e.data)===null||r===void 0?void 0:r.block}if((i=e.data)!==null&&i!==void 0&&(a=i.updateNodes)!==null&&a!==void 0&&(n=a.data)!==null&&n!==void 0&&n.block){var s,o,c;l=(s=e.data)===null||s===void 0?void 0:(o=s.updateNodes)===null||o===void 0?void 0:(c=o.data)===null||c===void 0?void 0:c.block}H(this,N,J).call(this,l)}}}function J(e){if(babelHelpers.classPrivateFieldGet(this,T)){var t="editor";var i=Date.now();babelHelpers.classPrivateFieldGet(this,T).location.href=babelHelpers.classPrivateFieldGet(this,F)+"?ts="+i+"&scrollTo="+t+e}}function Q(e){if(babelHelpers.classPrivateFieldGet(this,T)){var t=babelHelpers.classPrivateFieldGet(this,T).document;var i=Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight);babelHelpers.classPrivateFieldGet(this,T).scroll(0,i*e/100)}}function Z(e){var t;var i=localStorage.getItem("deviceCode");if(i&&p.devices[i]){return p.devices[i]}i=(t=p.defaultDevice)===null||t===void 0?void 0:t[e];if(!i){return}return p.devices[i]}function ee(){if(!babelHelpers.classPrivateFieldGet(this,E)){v.loadMessages(babelHelpers.classPrivateFieldGet(this,C).messages);babelHelpers.classPrivateFieldSet(this,E,n.Tag.render(y||(y=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-device-loader">\n\t\t\t\t\t<div class="landing-device-loader-icon"></div>\n\t\t\t\t\t<div class="landing-device-loader-text">',"</div>\n\t\t\t\t</div>\n\t\t\t"])),v.getMessage("LANDING_TPL_PREVIEW_LOADING")))}return babelHelpers.classPrivateFieldGet(this,E)}function te(e){if(!e){return}n.Dom.append(H(this,W,ee).call(this),e)}function ie(){var e=this;n.Dom.addClass(H(this,W,ee).call(this),"--hide");n.Event.bind(H(this,W,ee).call(this),"transitionend",(function(){n.Dom.remove(H(e,W,ee).call(e))}))}function ae(e){var t=this;if(!e){return}localStorage.setItem("deviceCode",e.code);if(babelHelpers.classPrivateFieldGet(this,I)){n.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,G),babelHelpers.classPrivateFieldGet(this,I).className);babelHelpers.classPrivateFieldGet(this,G).style.removeProperty("top")}babelHelpers.classPrivateFieldSet(this,I,e);babelHelpers.classPrivateFieldGet(this,G).querySelector('[data-role="device-name"]').innerHTML=e.name;babelHelpers.classPrivateFieldGet(this,G).querySelector('[data-role="device-orientation"]').innerHTML=localStorage.getItem("deviceOrientation");var i=babelHelpers.classPrivateFieldGet(this,G).querySelector('[data-role="landing-device-preview-iframe"]');var a=babelHelpers.classPrivateFieldGet(this,G).querySelector('[data-role="landing-device-preview"]');i.onload=function(){return H(t,j,ie).call(t)};if(i&&a&&babelHelpers.classPrivateFieldGet(this,I).width&&babelHelpers.classPrivateFieldGet(this,I).height){var l=window.innerHeight/(babelHelpers.classPrivateFieldGet(this,I).height+300);var r=parseInt(window.getComputedStyle(a).padding);var s=babelHelpers.classPrivateFieldGet(this,I).width;var o=babelHelpers.classPrivateFieldGet(this,I).height;if(localStorage.getItem("deviceOrientation")==="landscape"){s=babelHelpers.classPrivateFieldGet(this,I).height;o=babelHelpers.classPrivateFieldGet(this,I).width}i.style.setProperty("width","".concat(s,"px"));i.style.setProperty("height","".concat(o,"px"));a.style.setProperty("transform","scale(".concat(l,")"));babelHelpers.classPrivateFieldGet(this,G).style.setProperty("width","".concat((s+r*2)*l,"px"));babelHelpers.classPrivateFieldGet(this,G).style.setProperty("height","".concat((o+r*2)*l,"px"))}n.Dom.addClass(babelHelpers.classPrivateFieldGet(this,G),babelHelpers.classPrivateFieldGet(this,I).className)}function ne(){var e=babelHelpers.classPrivateFieldGet(this,S).querySelector("iframe").contentWindow.document;var t=Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight);var i=e.documentElement.scrollTop||e.body.scrollTop;H(this,O,Q).call(this,i/t*100)}function le(e){if(!babelHelpers.classPrivateFieldGet(this,G)){babelHelpers.classPrivateFieldSet(this,G,m.getPreview({frameUrl:e.frameUrl,clickHandler:H(this,R,re).bind(this),messages:e.messages}));n.Dom.hide(babelHelpers.classPrivateFieldGet(this,G));this.target.appendChild(babelHelpers.classPrivateFieldGet(this,G));if(!babelHelpers.classPrivateFieldGet(this,T)){babelHelpers.classPrivateFieldSet(this,T,babelHelpers.classPrivateFieldGet(this,G).querySelector("iframe").contentWindow);var t=babelHelpers.classPrivateFieldGet(this,G).querySelector("iframe").contentWindow.document;n.Dom.removeClass(t.querySelector("html"),"bx-no-touch");n.Dom.addClass(t.querySelector("html"),"bx-touch")}H(this,z,ne).call(this)}}function re(){m.openDeviceMenu(babelHelpers.classPrivateFieldGet(this,G).querySelector('[data-role="device-name"]'),Object.values(p.devices),H(this,X,ae).bind(this))}function se(){n.Dom.show(babelHelpers.classPrivateFieldGet(this,G));H(this,A,te).call(this,babelHelpers.classPrivateFieldGet(this,G))}function oe(e,t){de(e,t);t.add(e)}function ce(e,t,i){de(e,t);t.set(e,i)}function de(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ue(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var he=new WeakMap;var ve=new WeakSet;var pe=function(){function e(t){babelHelpers.classCallCheck(this,e);oe(this,ve);ce(this,he,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,he,t.iframe);if(!n.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,he))){throw new Error("Missed 'frame' option as iFrame Element.")}}babelHelpers.createClass(e,[{key:"onDesignerBlockClick",value:function e(t){ue(this,ve,be).call(this,"onDesignerBlockClick",{blockId:t})}},{key:"onStyleBlockClick",value:function e(t){ue(this,ve,be).call(this,"onStyleBlockClick",{blockId:t})}},{key:"onEditBlockClick",value:function e(t){ue(this,ve,be).call(this,"onEditBlockClick",{blockId:t})}},{key:"onSortDownBlockClick",value:function e(t){ue(this,ve,be).call(this,"onSortDownBlockClick",{blockId:t})}},{key:"onSortUpBlockClick",value:function e(t){ue(this,ve,be).call(this,"onSortUpBlockClick",{blockId:t})}},{key:"onRemoveBlockClick",value:function e(t){ue(this,ve,be).call(this,"onRemoveBlockClick",{blockId:t})}},{key:"onChangeStateBlockClick",value:function e(t){ue(this,ve,be).call(this,"onChangeStateBlockClick",{blockId:t})}},{key:"onCutBlockClick",value:function e(t){ue(this,ve,be).call(this,"onCutBlockClick",{blockId:t})}},{key:"onCopyBlockClick",value:function e(t){ue(this,ve,be).call(this,"onCopyBlockClick",{blockId:t})}},{key:"onPasteBlockClick",value:function e(t){ue(this,ve,be).call(this,"onPasteBlockClick",{blockId:t})}},{key:"onFeedbackClick",value:function e(t){ue(this,ve,be).call(this,"onFeedbackClick",{blockId:t})}},{key:"onSaveInLibraryClick",value:function e(t){ue(this,ve,be).call(this,"onSaveInLibraryClick",{blockId:t})}},{key:"onHideEditorPanel",value:function e(){ue(this,ve,be).call(this,"onHideEditorPanel")}}]);return e}();function be(e,t){babelHelpers.classPrivateFieldGet(this,he).contentWindow.postMessage({action:e,payload:t},window.location.origin)}var fe,ge,me,ye,we,ke,Pe,He,Ce;var Fe=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"setPendingMenuItemValue",value:function t(i,a,n,l){if(!e.pendingMenuItems[i]){e.pendingMenuItems[i]={}}if(!e.pendingMenuItems[i][a]){e.pendingMenuItems[i][a]={}}e.pendingMenuItems[i][a][n]=l}},{key:"getPendingMenuItemValue",value:function t(i,a,n){if(e.pendingMenuItems[i]&&e.pendingMenuItems[i][a]){return e.pendingMenuItems[i][a][n]||null}return null}},{key:"getDesignerBlockButton",value:function e(t){var i=v.getMessage("LANDING_TPL_EXT_BUTTON_DESIGNER_BLOCK");var a=n.Tag.render(fe||(fe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action --separate','" type="button" title="','">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),t?"":" landing-ui-disabled",i,i);if(t){n.Event.bind(a,"click",t)}return a}},{key:"getStyleBlockButton",value:function e(t){var i=v.getMessage("LANDING_TPL_EXT_BUTTON_STYLE_BLOCK");var a=v.getMessage("LANDING_TPL_EXT_BUTTON_STYLE_BLOCK_TITLE");var l=n.Tag.render(ge||(ge=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action --separate','" type="button" title="','">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),t?"":" landing-ui-disabled",a,i);if(t){n.Event.bind(l,"click",t)}return l}},{key:"getEditBlockButton",value:function e(t){var i=v.getMessage("LANDING_TPL_EXT_BUTTON_EDIT_BLOCK");var a=v.getMessage("LANDING_TPL_EXT_BUTTON_EDIT_BLOCK_TITLE");var l=n.Tag.render(me||(me=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action --separate','" type="button" title="','" data-id="content">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),t?"":" landing-ui-disabled",a,i);if(t){n.Event.bind(l,"click",t)}return l}},{key:"getLeftContainer",value:function t(i){return n.Tag.render(ye||(ye=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-external-left-container">\n\t\t\t\t<div class="landing-ui-external-left-top-hr"></div>\n\t\t\t\t<div class="landing-ui-external-body">\n\t\t\t\t\t<div class="landing-ui-external-panel">\n\t\t\t\t\t\t',"\n\t\t\t\t\t\t","\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="landing-ui-external-left-bottom-hr"></div>\n\t\t\t</div>\n\t\t'])),e.getDesignerBlockButton(i.designerBlockClick),e.getStyleBlockButton(i.styleBlockClick),e.getEditBlockButton(i.editBlockClick))}},{key:"getSortDownBlockButton",value:function e(t){var i=v.getMessage("LANDING_TPL_EXT_BUTTON_DOWN_BLOCK");var a=n.Tag.render(we||(we=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action','" type="button" data-id="down" title="','"><span class="landing-ui-button-text">&nbsp;</span></button>\n\t\t'])),t?"":" landing-ui-disabled",i);if(t){n.Event.bind(a,"click",t)}return a}},{key:"getSortUpBlockButton",value:function e(t){var i=v.getMessage("LANDING_TPL_EXT_BUTTON_UP_BLOCK");var a=n.Tag.render(ke||(ke=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action','" type="button" data-id="up" title="','"><span class="landing-ui-button-text">&nbsp;</span></button>\n\t\t'])),t?"":" landing-ui-disabled",i);if(t){n.Event.bind(a,"click",t)}return a}},{key:"getBlockAdditionalMenu",value:function e(i){return t.MenuManager.getMenuById("block_actions_"+i)}},{key:"closeBlockAdditionalMenu",value:function t(i){var a=e.getBlockAdditionalMenu(i);if(a){a.close()}}},{key:"changeStateMenuItem",value:function t(i,a){var n=e.getBlockAdditionalMenu(i);var l=v.getMessage(!a?"LANDING_TPL_EXT_BUTTON_ACTIONS_SHOW":"LANDING_TPL_EXT_BUTTON_ACTIONS_HIDE");if(n){BX.Landing.Utils.setTextContent(n.getMenuItem("show_hide").getLayout()["text"],l)}else{e.setPendingMenuItemValue(i,"show_hide","state",a)}}},{key:"changePasteMenuItem",value:function t(i,a){var n=e.getBlockAdditionalMenu(i);if(n){var l=n.getMenuItem("paste");if(l){if(a){l.enable()}else{l.disable()}}}else{e.setPendingMenuItemValue(i,"paste","disabled",!a)}}},{key:"getActionsList",value:function i(a,l){var r=v.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_BLOCK");var s=v.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_BLOCK_TITLE");var o=n.Tag.render(Pe||(Pe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action" type="button" data-id="actions" title="','">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),s,r);n.Event.bind(o,"click",(function(i){if(l.onOpenAdditionalMenu){l.onOpenAdditionalMenu(a);i.stopPropagation()}var n=e.getBlockAdditionalMenu(a);if(n){n.show();return}t.MenuManager.create({id:"block_actions_"+a,bindElement:o,className:"landing-ui-block-actions-popup",angle:{position:"top",offset:95},offsetTop:-6,offsetLeft:-26,items:[new t.MenuItem({id:"show_hide",disabled:!l.changeStateClick,text:v.getMessage(l.state||e.getPendingMenuItemValue(a,"show_hide","state")?"LANDING_TPL_EXT_BUTTON_ACTIONS_HIDE":"LANDING_TPL_EXT_BUTTON_ACTIONS_SHOW"),onclick:function e(){l.changeStateClick()}}),new t.MenuItem({id:"cut",disabled:!l.cutClick,text:v.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_CUT"),onclick:function e(){l.cutClick()}}),new t.MenuItem({id:"copy",disabled:!l.copyClick,text:v.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_COPY"),onclick:function e(){l.copyClick()}}),new t.MenuItem({id:"paste",disabled:!l.pasteClick||e.getPendingMenuItemValue(a,"paste","disabled"),text:v.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_PASTE"),onclick:function e(){l.pasteClick()}}),new t.MenuItem({id:"feedback",disabled:!l.feedbackClick,text:v.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_FEEDBACK"),onclick:function e(){l.feedbackClick()}}),l.saveInLibrary?new t.MenuItem({delimiter:true}):null,new t.MenuItem({id:"save_in_library",disabled:!l.saveInLibrary,text:v.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_SAVE_IN_LIBRARY"),onclick:function e(){l.saveInLibrary()}})]}).show()}));return o}},{key:"getRemoveBlockButton",value:function e(t){var i=v.getMessage("LANDING_TPL_EXT_BUTTON_REMOVE_BLOCK");var a=n.Tag.render(He||(He=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action','" type="button" data-id="remove" title="','"><span class="landing-ui-button-text">&nbsp;</span></button>\n\t\t'])),t?"":" landing-ui-disabled",i);if(t){n.Event.bind(a,"click",t)}return a}},{key:"getRightContainer",value:function t(i){return n.Tag.render(Ce||(Ce=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-external-right-container">\n\t\t\t\t<div class="landing-ui-external-right-top-hr"></div>\n\t\t\t\t<div class="landing-ui-external-body">\n\t\t\t\t\t<div class="landing-ui-external-panel">\n\t\t\t\t\t\t',"\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="landing-ui-external-right-bottom-hr"></div>\n\t\t\t</div>\n\t\t'])),e.getSortDownBlockButton(i.sortDownBlockClick),e.getSortUpBlockButton(i.sortUpBlockClick),e.getActionsList(i.blockId,i),e.getRemoveBlockButton(i.removeBlockClick))}}]);return e}();babelHelpers.defineProperty(Fe,"pendingMenuItems",{});function Se(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Ge(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(i),!0).forEach((function(t){babelHelpers.defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Se(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Te(e,t){Ie(e,t);t.add(e)}function Ee(e,t,i){Ie(e,t);t.set(e,i)}function Ie(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Le(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Be=new WeakMap;var _e=new WeakMap;var Me=new WeakMap;var xe=new WeakMap;var Ne=new WeakMap;var Oe=new WeakMap;var De=new WeakSet;var We=new WeakSet;var Ae=new WeakSet;var je=new WeakSet;var Xe=new WeakSet;var ze=new WeakSet;var Ue=new WeakSet;var Re=new WeakSet;var Ve=new WeakSet;var qe=new WeakSet;var Ke=function e(t){var i=this;babelHelpers.classCallCheck(this,e);Te(this,qe);Te(this,Ve);Te(this,Re);Te(this,Ue);Te(this,ze);Te(this,Xe);Te(this,je);Te(this,Ae);Te(this,We);Te(this,De);Ee(this,Be,{writable:true,value:void 0});Ee(this,_e,{writable:true,value:void 0});Ee(this,Me,{writable:true,value:void 0});Ee(this,xe,{writable:true,value:void 0});Ee(this,Ne,{writable:true,value:void 0});Ee(this,Oe,{writable:true,value:void 0});t=t||{};babelHelpers.classPrivateFieldSet(this,Me,t.container);babelHelpers.classPrivateFieldSet(this,xe,t.iframeWrapper);if(!n.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,Me))){throw new Error("Missed 'container' option as Dom Node.")}if(!n.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,xe))){throw new Error("Missed 'iframe' option as Dom Node.")}babelHelpers.classPrivateFieldSet(this,_e,new Map);babelHelpers.classPrivateFieldSet(this,Be,new pe({iframe:babelHelpers.classPrivateFieldGet(this,xe).querySelector("iframe")}));v.loadMessages(t.messages);window.addEventListener("message",Le(this,De,Ye).bind(this));babelHelpers.classPrivateFieldGet(this,Me).addEventListener("click",(function(e){babelHelpers.classPrivateFieldGet(i,Be).onHideEditorPanel()}));window.addEventListener("storage",Le(this,We,$e).bind(this))};function Ye(e){var t=e.data||{};if(!t.payload){return}if(t.action==="register"){Le(this,Ae,Je).call(this,t.payload.blocks)}else if(t.action==="showcontrols"){Le(this,Re,it).call(this,t.payload.blockId,t.payload.top,t.payload.height)}else if(t.action==="changestate"){Le(this,ze,et).call(this,t.payload.blockId,t.payload.state)}else if(t.action==="mode"){Le(this,qe,nt).call(this,t.payload)}else if(t.action==="hideall"){Le(this,Ue,tt).call(this)}else if(t.action==="showblockcontrols"){Le(this,Ue,tt).call(this);Le(this,Ve,at).call(this,t.payload.blockId)}}function $e(){var e=babelHelpers.classPrivateFieldGet(this,_e).values();var t=!!window.localStorage.getItem("landingBlockId");for(var i=0,a=babelHelpers.classPrivateFieldGet(this,_e).size;i<a;i++){var n=e.next().value;Fe.changePasteMenuItem(n.id,t);Le(this,Xe,Ze).call(this,n.id,Ge(Ge({},n),{},{permissions:Ge(Ge({},n.permissions),{},{allowPaste:t})}))}}function Je(e){var t=this;e.map((function(e){var i=e.id;e.leftContainer=Fe.getLeftContainer({designerBlockClick:e.permissions.allowDesignBlock?function(){babelHelpers.classPrivateFieldGet(t,Be).onDesignerBlockClick(i)}:null,styleBlockClick:e.permissions.allowModifyStyles?function(){babelHelpers.classPrivateFieldGet(t,Be).onStyleBlockClick(i)}:null,editBlockClick:e.permissions.allowEditContent?function(){babelHelpers.classPrivateFieldGet(t,Be).onEditBlockClick(i)}:null});e.rightContainer=Fe.getRightContainer({blockId:i,state:e.state,sortDownBlockClick:e.permissions.allowSorting?function(){babelHelpers.classPrivateFieldGet(t,Be).onSortDownBlockClick(i);Le(t,Ue,tt).call(t)}:null,sortUpBlockClick:e.permissions.allowSorting?function(){babelHelpers.classPrivateFieldGet(t,Be).onSortUpBlockClick(i);Le(t,Ue,tt).call(t)}:null,removeBlockClick:e.permissions.allowRemove?function(){babelHelpers.classPrivateFieldGet(t,Be).onRemoveBlockClick(i);Le(t,Ue,tt).call(t)}:null,onOpenAdditionalMenu:function e(i){babelHelpers.classPrivateFieldSet(t,Oe,i);setTimeout((function(){babelHelpers.classPrivateFieldGet(t,Be).onHideEditorPanel()}),0)},changeStateClick:e.permissions.allowChangeState?function(){Fe.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(t,Be).onChangeStateBlockClick(i);Le(t,Ve,at).call(t,i)}:null,cutClick:e.permissions.allowRemove?function(){babelHelpers.classPrivateFieldGet(t,Be).onCutBlockClick(i);Le(t,Ue,tt).call(t)}:null,copyClick:function e(){Fe.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(t,Be).onCopyBlockClick(i);Le(t,Ve,at).call(t,i)},pasteClick:function e(){Fe.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(t,Be).onPasteBlockClick(i);Le(t,Ve,at).call(t,i)},feedbackClick:function e(){Fe.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(t,Be).onFeedbackClick(i)},saveInLibrary:e.permissions.allowSaveInLibrary?function(){Fe.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(t,Be).onSaveInLibraryClick(i)}:null});n.Dom.append(e.leftContainer,babelHelpers.classPrivateFieldGet(t,Me));n.Dom.append(e.rightContainer,babelHelpers.classPrivateFieldGet(t,Me));n.Dom.hide(e.leftContainer);n.Dom.hide(e.rightContainer);babelHelpers.classPrivateFieldGet(t,_e).set(i,e)}))}function Qe(e){return babelHelpers.classPrivateFieldGet(this,_e).get(parseInt(e))}function Ze(e,t){babelHelpers.classPrivateFieldGet(this,_e).set(parseInt(e),t)}function et(e,t){var i=Le(this,je,Qe).call(this,e);if(i){Fe.changeStateMenuItem(e,t);Le(this,Xe,Ze).call(this,e,Ge(Ge({},i),{},{state:t}))}}function tt(){if(babelHelpers.classPrivateFieldGet(this,Ne)){var e=babelHelpers.classPrivateFieldGet(this,_e).get(babelHelpers.classPrivateFieldGet(this,Ne));n.Dom.hide(e.leftContainer);n.Dom.hide(e.rightContainer)}else{var t=babelHelpers.classPrivateFieldGet(this,_e).values();for(var i=0,a=babelHelpers.classPrivateFieldGet(this,_e).size;i<a;i++){var l=t.next().value;n.Dom.hide(l.leftContainer);n.Dom.hide(l.rightContainer)}}if(babelHelpers.classPrivateFieldGet(this,Oe)){Fe.closeBlockAdditionalMenu(babelHelpers.classPrivateFieldGet(this,Oe));babelHelpers.classPrivateFieldSet(this,Oe,null)}}function it(e,t,i){var a=Le(this,je,Qe).call(this,e);if(!a){return}var l=babelHelpers.classPrivateFieldGet(this,xe).getBoundingClientRect();Le(this,Ue,tt).call(this);babelHelpers.classPrivateFieldSet(this,Ne,a.id);babelHelpers.classPrivateFieldGet(this,Be).onHideEditorPanel();t=parseInt(t);if(t<0&&i+t>50){i=i+t;t=0;n.Dom.addClass(a.leftContainer,"hide-top");n.Dom.addClass(a.rightContainer,"hide-top")}else{n.Dom.removeClass(a.leftContainer,"hide-top");n.Dom.removeClass(a.rightContainer,"hide-top")}n.Dom.show(a.leftContainer);n.Dom.show(a.rightContainer);a.leftContainer.style.width=l.left+"px";a.leftContainer.style.top=t+"px";a.leftContainer.style.height=i+"px";a.rightContainer.style.width=l.left+"px";a.rightContainer.style.left=l.left+l.width+"px";a.rightContainer.style.top=t+"px";a.rightContainer.style.height=i+"px"}function at(e){var t=this;var i=Le(this,je,Qe).call(this,e);if(i){babelHelpers.classPrivateFieldSet(this,Ne,null);n.Dom.hide(i.leftContainer);n.Dom.hide(i.rightContainer);setTimeout((function(){babelHelpers.classPrivateFieldSet(t,Ne,i.id);n.Dom.show(i.leftContainer);n.Dom.show(i.rightContainer)}),500)}}function nt(e){if(e.type==="internal"){Le(this,Ue,tt).call(this)}}function lt(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=rt(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l=true,r=false,s;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();l=t.done;return t},e:function e(t){r=true;s=t},f:function e(){try{if(!l&&i["return"]!=null)i["return"]()}finally{if(r)throw s}}}}function rt(e,t){if(!e)return;if(typeof e==="string")return st(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return st(e,t)}function st(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function ot(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ot=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,n){var l=t&&t.prototype instanceof h?t:h,r=Object.create(l.prototype),s=new F(n||[]);return a(r,"_invoke",{value:k(e,i,s)}),r}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function h(){}function v(){}function p(){}var b={};o(b,l,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(S([])));g&&g!==t&&i.call(g,l)&&(b=g);var m=p.prototype=h.prototype=Object.create(b);function y(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,l,r,s){var o=d(e[a],e,l);if("throw"!==o.type){var c=o.arg,u=c.value;return u&&"object"==babelHelpers["typeof"](u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(u).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(o.arg)}var l;a(this,"_invoke",{value:function e(i,a){function r(){return new t((function(e,t){n(i,a,e,t)}))}return l=l?l.then(r,r):r()}})}function k(e,t,i){var a="suspendedStart";return function(n,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw l;return G()}for(i.method=n,i.arg=l;;){var r=i.delegate;if(r){var s=P(r,i);if(s){if(s===u)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=d(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===u)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function P(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,P(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),u;var n=d(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var l=n.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,u):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function H(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(H,this),this.reset(!0)}function S(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,n=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:G}}function G(){return{value:undefined,done:!0}}return v.prototype=p,a(m,"constructor",{value:p,configurable:!0}),a(p,"constructor",{value:v,configurable:!0}),v.displayName=o(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(w.prototype),o(w.prototype,r,(function(){return this})),e.AsyncIterator=w,e.async=function(t,i,a,n,l){void 0===l&&(l=Promise);var r=new w(c(t,i,a,n),l);return e.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},y(m),o(m,s,"Generator"),o(m,l,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=S,F.prototype={constructor:F,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(C),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function n(e,i){return s.type="throw",s.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var o=i.call(r,"catchLoc"),c=i.call(r,"finallyLoc");if(o&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function e(t,a){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&i.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=a&&a<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=a,r?(this.method="next",this.next=r.finallyLoc,u):this.complete(s)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),u},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),C(a),u}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var l=n.arg;C(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:S(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),u}},e}function ct(e,t){ut(e,t);t.add(e)}function dt(e,t,i){ut(e,t);t.set(e,i)}function ut(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ht(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var vt=new WeakMap;var pt=new WeakMap;var bt=new WeakMap;var ft=new WeakMap;var gt=new WeakMap;var mt=new WeakMap;var yt=new WeakMap;var wt=new WeakMap;var kt=new WeakMap;var Pt=new WeakMap;var Ht=new WeakMap;var Ct=new WeakMap;var Ft=new WeakMap;var St=new WeakMap;var Gt=new WeakSet;var Tt=new WeakSet;var Et=new WeakSet;var It=function(e){babelHelpers.inherits(t,e);babelHelpers.createClass(t,null,[{key:"create",value:function(){var e=babelHelpers.asyncToGenerator(ot().mark((function e(i){var a;return ot().wrap((function e(n){while(1)switch(n.prev=n.next){case 0:if(!(!i.copilotChat||!i.chatId)){n.next=2;break}return n.abrupt("return",null);case 2:a=new t(i);n.next=5;return a.init();case 5:return n.abrupt("return",a);case 6:case"end":return n.stop()}}),e)})));function i(t){return e.apply(this,arguments)}return i}()}]);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ct(babelHelpers.assertThisInitialized(i),Et);ct(babelHelpers.assertThisInitialized(i),Tt);ct(babelHelpers.assertThisInitialized(i),Gt);dt(babelHelpers.assertThisInitialized(i),vt,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),pt,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),bt,{writable:true,value:null});dt(babelHelpers.assertThisInitialized(i),ft,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),gt,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),mt,{writable:true,value:null});dt(babelHelpers.assertThisInitialized(i),yt,{writable:true,value:false});dt(babelHelpers.assertThisInitialized(i),wt,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),kt,{writable:true,value:false});dt(babelHelpers.assertThisInitialized(i),Pt,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),Ht,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),Ct,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),Ft,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),St,{writable:true,value:void 0});i.setEventNamespace("BX.Landing.View.BlockGenerator");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),wt,new Map);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Pt,null);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ht,false);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ft,(new o.Highlight).setBorder(t.highlightColor,t.highlightWidth).setBackground("transparent").setSingleMode());babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),St,(new o.Highlight).setBorder(t.highlightColor,0).setBackground(t.highlightBackground).setSingleMode());babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),vt,e.chatId);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),pt,e.copilotChat);i.onBlockMouseEnter=i.onBlockMouseEnter.bind(babelHelpers.assertThisInitialized(i));i.onBlockClick=i.onBlockClick.bind(babelHelpers.assertThisInitialized(i));i.onChatMessage=i.onChatMessage.bind(babelHelpers.assertThisInitialized(i));i.onEditorLoad=i.onEditorLoad.bind(babelHelpers.assertThisInitialized(i));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ct,s.PageObject.getEditorWindow());if(!babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),Ct)){console.error("Can not load editor window")}if(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),Ct).document.readyState==="complete"){i.onEditorLoad()}else{n.Event.bind(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),Ct),"load",i.onEditorLoad)}return i}babelHelpers.createClass(t,[{key:"init",value:function(){var e=babelHelpers.asyncToGenerator(ot().mark((function e(){var t;return ot().wrap((function e(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return n.Runtime.loadExtension("landing.copilot.chat");case 2:t=i.sent;babelHelpers.classPrivateFieldSet(this,ft,t.CopilotChatEvents);babelHelpers.classPrivateFieldSet(this,gt,t.CopilotChatMessageType);case 5:case"end":return i.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onEditorLoad",value:function e(){var t=this;var i=s.PageObject.getBlocks();i.forEach((function(e){babelHelpers.classPrivateFieldGet(t,wt).set(e.id,{id:e.id,anchor:e.anchor,content:e.content})}));babelHelpers.classPrivateFieldGet(this,Ct).BX.addCustomEvent(babelHelpers.classPrivateFieldGet(this,Ct),"BX.Landing.Block:init",(function(e){t.onBlockAdd(e.blockId,e.block.id,e.content)}));if(babelHelpers.classPrivateFieldGet(this,kt)){ht(this,Tt,Bt).call(this)}}},{key:"onBlockAdd",value:function e(t,i,a){babelHelpers.classPrivateFieldGet(this,wt).set(t,{id:t,anchor:i,content:a});if(babelHelpers.classPrivateFieldGet(this,kt)){ht(this,Tt,Bt).call(this)}}},{key:"onBlockClick",value:function e(t){var i=this;var a=t.currentTarget;var l=null;var r=lt(babelHelpers.classPrivateFieldGet(this,wt).values()),s;try{for(r.s();!(s=r.n()).done;){var o=s.value;if(a===o.content){l=o}}}catch(e){r.e(e)}finally{r.f()}var c=babelHelpers.classPrivateFieldGet(this,vt);if(l===null){return}if(babelHelpers.classPrivateFieldGet(this,Pt)!==null&&babelHelpers.classPrivateFieldGet(this,Pt).id===l.id){return}babelHelpers.classPrivateFieldSet(this,Pt,l);n.ajax.runAction("landing.api.copilot.checkBlockGeneratable",{data:{blockId:l.id,chatId:c}}).then((function(e){if(e.data){babelHelpers.classPrivateFieldSet(i,Ht,true);babelHelpers.classPrivateFieldGet(i,St).show(babelHelpers.classPrivateFieldGet(i,Pt).content)}else{babelHelpers.classPrivateFieldSet(i,Ht,false);babelHelpers.classPrivateFieldGet(i,St).hide()}}))["catch"]((function(){babelHelpers.classPrivateFieldSet(i,Ht,false);babelHelpers.classPrivateFieldGet(i,St).hide()}))}},{key:"onChatMessage",value:function e(t){var i,a=this;var l=(i=t.getData())===null||i===void 0?void 0:i.message;if(l&&(l.authorId||0)>0&&l.type===babelHelpers.classPrivateFieldGet(this,gt).DEFAULT){if(babelHelpers.classPrivateFieldGet(this,Pt)===null){n.ajax.runAction("landing.api.copilot.sendBlockGenerationNeedSelectMessage",{data:{siteId:d.Env.getInstance().getSiteId()}});return}if(!babelHelpers.classPrivateFieldGet(this,Ht)){n.ajax.runAction("landing.api.copilot.sendBlockGenerationWrongSelectMessage",{data:{siteId:d.Env.getInstance().getSiteId()}});return}var r=Promise.resolve();if(!babelHelpers.classPrivateFieldGet(this,bt)){var o=s.PageObject.getEditorWindow();r=o.BX.Runtime.loadExtension("landing.animation.copilot").then((function(e){babelHelpers.classPrivateFieldSet(a,bt,new e.Copilot);babelHelpers.classPrivateFieldGet(a,bt).subscribe("onBlockFinish",a.onBlockAnimateFinish.bind(a));ht(a,Gt,Lt).call(a)}))}r.then((function(){return n.ajax.runAction("landing.api.copilot.executeBlockGeneration",{data:{siteId:d.Env.getInstance().getSiteId(),blockId:babelHelpers.classPrivateFieldGet(a,Pt).id,wishes:l.content}})})).then((function(e){if(e.status==="success"){babelHelpers.classPrivateFieldSet(a,mt,e.data);babelHelpers.classPrivateFieldGet(a,bt).setBlocksData([{id:babelHelpers.classPrivateFieldGet(a,Pt).id,anchor:babelHelpers.classPrivateFieldGet(a,Pt).anchor,element:babelHelpers.classPrivateFieldGet(a,Pt).content,images:[]}]).disableEditor().showLoader();a.onBlockGenerationStart()}}))["catch"]((function(e){console.error("Error while execute block generation",e)}))}}},{key:"onBlockGenerationStart",value:function e(){var t=this;babelHelpers.classPrivateFieldSet(this,yt,true);setTimeout((function(){if(babelHelpers.classPrivateFieldGet(t,yt)){t.emit("onGenerationStart")}}),3e3)}},{key:"onBlockAnimateFinish",value:function e(){var t=this;babelHelpers.classPrivateFieldSet(this,yt,false);babelHelpers.classPrivateFieldSet(this,Pt,null);babelHelpers.classPrivateFieldGet(this,St).hide();setTimeout((function(){t.emit("onGenerationFinish")}),3e3)}},{key:"setSelectMode",value:function e(){var t=h.StylePanel.getInstance();if(t.isShown()){t.hide()}if(babelHelpers.classPrivateFieldGet(this,kt)){return}babelHelpers.classPrivateFieldSet(this,kt,true);ht(this,Tt,Bt).call(this);if(babelHelpers.classPrivateFieldGet(this,pt)&&babelHelpers.classPrivateFieldGet(this,ft)&&babelHelpers.classPrivateFieldGet(this,gt)){babelHelpers.classPrivateFieldGet(this,pt).subscribe(babelHelpers.classPrivateFieldGet(this,ft).NEW_MESSAGE,this.onChatMessage)}this.disableEditor()}},{key:"disableEditor",value:function e(){n.Dom.addClass(babelHelpers.classPrivateFieldGet(this,Ct).document.body,t.selectModeClass)}},{key:"unsetSelectMode",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,kt)){return}babelHelpers.classPrivateFieldSet(this,kt,false);ht(this,Et,_t).call(this);babelHelpers.classPrivateFieldGet(this,Ft).hide();babelHelpers.classPrivateFieldGet(this,St).hide();if(babelHelpers.classPrivateFieldGet(this,pt)&&babelHelpers.classPrivateFieldGet(this,ft)){babelHelpers.classPrivateFieldGet(this,pt).unsubscribe(babelHelpers.classPrivateFieldGet(this,ft).NEW_MESSAGE,this.onChatMessage)}this.enableEditor()}},{key:"enableEditor",value:function e(){n.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,Ct).document.body,t.selectModeClass)}},{key:"onBlockMouseEnter",value:function e(t){babelHelpers.classPrivateFieldGet(this,Ft).show(t.currentTarget)}}]);return t}(l.EventEmitter);function Lt(){var e=this;r.PULL.subscribe({type:r.PullClient.SubscriptionType.Server,moduleId:"landing",callback:function t(i){if(!babelHelpers.classPrivateFieldGet(e,yt)){return}if(i.params.generationId!==undefined&&babelHelpers.classPrivateFieldGet(e,mt)!==null&&i.params.generationId!==babelHelpers.classPrivateFieldGet(e,mt)){return}var a=i.command;if(a==="LandingCopilotGeneration:onGenerationFinish"){u.History.getInstance().push()}if(a==="LandingCopilotGeneration:onGenerationError"){babelHelpers.classPrivateFieldGet(e,bt).stop();babelHelpers.classPrivateFieldGet(e,bt).hideLoader();babelHelpers.classPrivateFieldGet(e,bt).enableEditor();e.onBlockAnimateFinish()}}})}function Bt(){var e=lt(babelHelpers.classPrivateFieldGet(this,wt).values()),t;try{for(e.s();!(t=e.n()).done;){var i=t.value;var a=i.content;n.Event.bind(a,"mouseenter",this.onBlockMouseEnter);n.Event.bind(a,"click",this.onBlockClick)}}catch(t){e.e(t)}finally{e.f()}}function _t(){var e=lt(babelHelpers.classPrivateFieldGet(this,wt).values()),t;try{for(e.s();!(t=e.n()).done;){var i=t.value;var a=i.content;n.Event.unbind(a,"mouseenter",this.onBlockMouseEnter);n.Event.unbind(a,"click",this.onBlockClick)}}catch(t){e.e(t)}finally{e.f()}}babelHelpers.defineProperty(It,"selectModeClass","landing-copilot-generation");babelHelpers.defineProperty(It,"highlightColor","#8e52ec");babelHelpers.defineProperty(It,"highlightWidth",4);babelHelpers.defineProperty(It,"highlightBackground","rgba(142, 82, 236, 0.4)");var Mt,xt,Nt,Ot,Dt,Wt,At,jt;function Xt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Xt=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,n){var l=t&&t.prototype instanceof h?t:h,r=Object.create(l.prototype),s=new F(n||[]);return a(r,"_invoke",{value:k(e,i,s)}),r}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function h(){}function v(){}function p(){}var b={};o(b,l,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(S([])));g&&g!==t&&i.call(g,l)&&(b=g);var m=p.prototype=h.prototype=Object.create(b);function y(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,l,r,s){var o=d(e[a],e,l);if("throw"!==o.type){var c=o.arg,u=c.value;return u&&"object"==babelHelpers["typeof"](u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(u).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(o.arg)}var l;a(this,"_invoke",{value:function e(i,a){function r(){return new t((function(e,t){n(i,a,e,t)}))}return l=l?l.then(r,r):r()}})}function k(e,t,i){var a="suspendedStart";return function(n,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw l;return G()}for(i.method=n,i.arg=l;;){var r=i.delegate;if(r){var s=P(r,i);if(s){if(s===u)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=d(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===u)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function P(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,P(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),u;var n=d(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var l=n.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,u):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function H(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(H,this),this.reset(!0)}function S(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,n=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:G}}function G(){return{value:undefined,done:!0}}return v.prototype=p,a(m,"constructor",{value:p,configurable:!0}),a(p,"constructor",{value:v,configurable:!0}),v.displayName=o(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(w.prototype),o(w.prototype,r,(function(){return this})),e.AsyncIterator=w,e.async=function(t,i,a,n,l){void 0===l&&(l=Promise);var r=new w(c(t,i,a,n),l);return e.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},y(m),o(m,s,"Generator"),o(m,l,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=S,F.prototype={constructor:F,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(C),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function n(e,i){return s.type="throw",s.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var o=i.call(r,"catchLoc"),c=i.call(r,"finallyLoc");if(o&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function e(t,a){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&i.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=a&&a<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=a,r?(this.method="next",this.next=r.finallyLoc,u):this.complete(s)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),u},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),C(a),u}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var l=n.arg;C(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:S(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),u}},e}function zt(e,t){Rt(e,t);t.add(e)}function Ut(e,t,i){Rt(e,t);t.set(e,i)}function Rt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Vt(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var qt=new WeakMap;var Kt=new WeakMap;var Yt=new WeakMap;var $t=new WeakMap;var Jt=new WeakMap;var Qt=new WeakSet;var Zt=function(){function e(t){babelHelpers.classCallCheck(this,e);zt(this,Qt);Ut(this,qt,{writable:true,value:void 0});Ut(this,Kt,{writable:true,value:void 0});Ut(this,Yt,{writable:true,value:void 0});Ut(this,$t,{writable:true,value:void 0});Ut(this,Jt,{writable:true,value:void 0});this.layout={container:null,pulse:null,close:null,switcherPreview:null,switcherChat:null,chat:null,preview:null};this.switchers=[];babelHelpers.classPrivateFieldSet(this,Kt,t.copilotChatOptions);babelHelpers.classPrivateFieldSet(this,$t,t.siteGenerationId);babelHelpers.classPrivateFieldSet(this,Jt,new i.Metrika(true,"ai"));this.init()}babelHelpers.createClass(e,[{key:"getSwitcherChat",value:function e(){var t=this;if(!this.layout.switcherChat){this.layout.switcherChat=n.Tag.render(Mt||(Mt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel__navigation-item --chat">\n\t\t\t\t\t<div class="ui-icon-set --copilot-ai"></div>\n\t\t\t\t</div>\n\t\t\t'])));this.switchers.push(this.layout.switcherChat);n.Event.bind(this.layout.switcherChat,"click",(function(){t.showChat();t.hidePreview();t.adjustSwitcher(t.layout.switcherChat)}))}return this.layout.switcherChat}},{key:"getSwitcherPreview",value:function e(){var t=this;if(!this.layout.switcherPreview){this.layout.switcherPreview=n.Tag.render(xt||(xt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel__navigation-item --preview">\n\t\t\t\t\t<div class="ui-icon-set --mobile-2"></div>\n\t\t\t\t</div>\n\t\t\t'])));this.switchers.push(this.layout.switcherPreview);n.Event.bind(this.layout.switcherPreview,"click",(function(){t.showPreview();t.hideChat();t.adjustSwitcher(t.layout.switcherPreview)}))}return this.layout.switcherPreview}},{key:"showChat",value:function(){var e=babelHelpers.asyncToGenerator(Xt().mark((function e(){var t=this;var i,a,l;return Xt().wrap((function e(r){while(1)switch(r.prev=r.next){case 0:i=null;if(!babelHelpers.classPrivateFieldGet(this,Kt).isCopilotFeatureEnabled){i=babelHelpers.classPrivateFieldGet(this,Kt).copilotFeatureEnabledSlider}else if(!babelHelpers.classPrivateFieldGet(this,Kt).isCopilotActive){i=babelHelpers.classPrivateFieldGet(this,Kt).copilotUnactiveSlider}if(!i){r.next=5;break}BX.UI.InfoHelper.show(i);return r.abrupt("return");case 5:r.prev=5;if(babelHelpers.classPrivateFieldGet(this,qt)){r.next=14;break}r.t0=babelHelpers;r.t1=this;r.t2=qt;r.next=12;return Vt(this,Qt,ei).call(this);case 12:r.t3=r.sent;r.t0.classPrivateFieldSet.call(r.t0,r.t1,r.t2,r.t3);case 14:if(!(!babelHelpers.classPrivateFieldGet(this,Yt)&&babelHelpers.classPrivateFieldGet(this,qt))){r.next=23;break}r.t4=babelHelpers;r.t5=this;r.t6=Yt;r.next=20;return It.create({chatId:babelHelpers.classPrivateFieldGet(this,Kt).chatId||null,copilotChat:babelHelpers.classPrivateFieldGet(this,qt)});case 20:r.t7=r.sent;r.t4.classPrivateFieldSet.call(r.t4,r.t5,r.t6,r.t7);if(babelHelpers.classPrivateFieldGet(this,Yt)){babelHelpers.classPrivateFieldGet(this,Yt).subscribe("onGenerationStart",(function(){t.hide()}));babelHelpers.classPrivateFieldGet(this,Yt).subscribe("onGenerationFinish",(function(){t.show();t.showChat();t.adjustSwitcher(t.layout.switcherChat)}))}case 23:if(babelHelpers.classPrivateFieldGet(this,qt).isShown()===false){babelHelpers.classPrivateFieldGet(this,qt).show();l=babelHelpers.classPrivateFieldGet(this,$t)?"ai":"manual";babelHelpers.classPrivateFieldGet(this,Jt).sendData({category:"block_edition",event:"open",c_section:"site_editor",p3:["siteType",l]})}(a=babelHelpers.classPrivateFieldGet(this,Yt))===null||a===void 0?void 0:a.setSelectMode();n.Dom.addClass(this.getChatContainer(),"--show");r.next=31;break;case 28:r.prev=28;r.t8=r["catch"](5);console.error(r.t8);case 31:case"end":return r.stop()}}),e,this,[[5,28]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"hideChat",value:function e(){var t,i;(t=babelHelpers.classPrivateFieldGet(this,qt))===null||t===void 0?void 0:t.hide();(i=babelHelpers.classPrivateFieldGet(this,Yt))===null||i===void 0?void 0:i.unsetSelectMode();n.Dom.removeClass(this.getChatContainer(),"--show")}},{key:"showPreview",value:function e(){n.Dom.addClass(this.getPreviewContainer(),"--show")}},{key:"hidePreview",value:function e(){n.Dom.removeClass(this.getPreviewContainer(),"--show")}},{key:"getClose",value:function e(){var t=this;if(!this.layout.close){this.layout.close=n.Tag.render(Nt||(Nt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel__navigation-item --close">\n\t\t\t\t\t<div class="ui-icon-set --cross-45"></div>\n\t\t\t\t</div>\n\t\t\t'])));n.Event.bind(this.layout.close,"click",(function(){return t.hide()}))}return this.layout.close}},{key:"getPulse",value:function e(){var t=this;if(!this.layout.pulse){if(babelHelpers.classPrivateFieldGet(this,Kt).isCopilotFeatureAvailable){this.layout.pulse=n.Tag.render(Ot||(Ot=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="landing-slide-panel__navigation-item --pulse --animate">\n\t\t\t\t\t\t<div class="ui-icon-set --copilot-ai"></div>\n\t\t\t\t\t\t<div class="ui-icon-set --mobile-2"></div>\n\t\t\t\t\t</div>\n\t\t\t\t'])))}else{this.layout.pulse=n.Tag.render(Dt||(Dt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="landing-slide-panel__navigation-item --pulse">\n\t\t\t\t\t\t<div class="ui-icon-set --mobile-2"></div>\n\t\t\t\t\t</div>\n\t\t\t\t'])))}n.Event.bind(this.layout.pulse,"click",(function(){return t.show()}))}return this.layout.pulse}},{key:"getChatContainer",value:function e(){if(!this.layout.chat){this.layout.chat=n.Tag.render(Wt||(Wt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel__container-item --chat"></div>\n\t\t\t'])))}return this.layout.chat}},{key:"getPreviewContainer",value:function e(){if(!this.layout.preview){this.layout.preview=n.Tag.render(At||(At=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel__container-item --preview"></div>\n\t\t\t'])))}return this.layout.preview}},{key:"getContainer",value:function e(){if(!this.layout.container){this.layout.container=n.Tag.render(jt||(jt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel">\n\t\t\t\t\t<div class="landing-slide-panel-inner">\t\t\t\t\t\n\t\t\t\t\t\t<div class="landing-slide-panel__container">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t",'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="landing-slide-panel__navigation">\n\t\t\t\t\t\t \t',"\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"])),this.getChatContainer(),this.getPreviewContainer(),babelHelpers.classPrivateFieldGet(this,Kt).isCopilotFeatureAvailable?this.getSwitcherChat():"",this.getSwitcherPreview(),this.getClose(),this.getPulse())}return this.layout.container}},{key:"adjustSwitcher",value:function e(t){this.switchers.forEach((function(e){return n.Dom.removeClass(e,"--active")}));if(n.Type.isDomNode(t)){n.Dom.addClass(t,"--active")}}},{key:"show",value:function e(){n.Dom.addClass(this.getContainer(),"--open")}},{key:"hide",value:function e(){n.Dom.removeClass(this.getContainer(),"--open");this.hideChat();this.hidePreview();this.adjustSwitcher()}},{key:"init",value:function e(){n.Dom.append(this.getContainer(),document.body)}}]);return e}();function ei(){return ti.apply(this,arguments)}function ti(){ti=babelHelpers.asyncToGenerator(Xt().mark((function e(){var t,i,a,l,r,s,o=this;var c,d,u;return Xt().wrap((function e(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return n.Runtime.loadExtension("landing.copilot.chat");case 2:c=h.sent;d=c.Chat;this.copilotChatEvents=c.CopilotChatEvents;this.copilotChatMessageType=c.CopilotChatMessageType;h.next=8;return d.getCopilotChatInstance({entityId:(t=babelHelpers.classPrivateFieldGet(this,Kt))===null||t===void 0?void 0:t.entityId,chatId:(i=babelHelpers.classPrivateFieldGet(this,Kt))===null||i===void 0?void 0:i.chatId,scenario:"site_with_ai_change_block",showChatButtonElement:(a=this.layout.switcherChat)!==null&&a!==void 0?a:null,isSiteEditChat:((l=babelHelpers.classPrivateFieldGet(this,Kt))===null||l===void 0?void 0:l.isSiteEditChat)===true});case 8:u=h.sent;if(!((r=babelHelpers.classPrivateFieldGet(this,Kt))!==null&&r!==void 0&&r.chatId)&&(s=babelHelpers.classPrivateFieldGet(this,Kt))!==null&&s!==void 0&&s.onChatCreate){u.subscribe(this.copilotChatEvents.INIT_CHAT,(function(e){babelHelpers.classPrivateFieldGet(o,Kt).onChatCreate(e.getData());babelHelpers.classPrivateFieldGet(o,Kt).chatId=e.getData().chatId}))}return h.abrupt("return",u);case 11:case"end":return h.stop()}}),e,this)})));return ti.apply(this,arguments)}e.Device=K;e.ExternalControls=Ke;e.SlidePanel=Zt})(this.BX.Landing.View=this.BX.Landing.View||{},BX.Main,BX.Landing,BX,BX,BX.Event,BX,BX.Landing,BX.Landing.UI,BX.Landing.Animation,BX.Landing,BX.Landing,BX.Landing.UI.Panel);
//# sourceMappingURL=script.map.js