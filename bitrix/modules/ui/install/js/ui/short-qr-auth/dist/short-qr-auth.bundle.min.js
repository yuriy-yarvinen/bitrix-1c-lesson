this.BX=this.BX||{};(function(e,s,a,t,l,i){"use strict";let r=e=>e,o,b,c;var d=babelHelpers.classPrivateFieldLooseKey("cache");var v=babelHelpers.classPrivateFieldLooseKey("intent");var n=babelHelpers.classPrivateFieldLooseKey("ttl");var h=babelHelpers.classPrivateFieldLooseKey("ttlInterval");var u=babelHelpers.classPrivateFieldLooseKey("small");var p=babelHelpers.classPrivateFieldLooseKey("stub");var P=babelHelpers.classPrivateFieldLooseKey("getContainer");var L=babelHelpers.classPrivateFieldLooseKey("getQrNode");var B=babelHelpers.classPrivateFieldLooseKey("getQrStub");var H=babelHelpers.classPrivateFieldLooseKey("getShowQrButton");var F=babelHelpers.classPrivateFieldLooseKey("addQrCodeImage");var y=babelHelpers.classPrivateFieldLooseKey("clean");var f=babelHelpers.classPrivateFieldLooseKey("loading");var m=babelHelpers.classPrivateFieldLooseKey("createQrCodeImage");var _=babelHelpers.classPrivateFieldLooseKey("getQrSize");var g=babelHelpers.classPrivateFieldLooseKey("subscribeEventRefresh");class O{constructor(e={}){Object.defineProperty(this,g,{value:C});Object.defineProperty(this,_,{value:Q});Object.defineProperty(this,m,{value:X});Object.defineProperty(this,f,{value:I});Object.defineProperty(this,y,{value:q});Object.defineProperty(this,F,{value:S});Object.defineProperty(this,H,{value:w});Object.defineProperty(this,B,{value:K});Object.defineProperty(this,L,{value:T});Object.defineProperty(this,P,{value:j});Object.defineProperty(this,d,{writable:true,value:new s.Cache.MemoryCache});Object.defineProperty(this,v,{writable:true,value:void 0});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,h,{writable:true,value:void 0});Object.defineProperty(this,u,{writable:true,value:void 0});Object.defineProperty(this,p,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,v)[v]=s.Type.isString(e.intent)?e.intent:"default";babelHelpers.classPrivateFieldLooseBase(this,u)[u]=s.Type.isBoolean(e.small)?e.small:false;babelHelpers.classPrivateFieldLooseBase(this,n)[n]=s.Type.isNumber(e.ttl)?e.ttl:60;babelHelpers.classPrivateFieldLooseBase(this,p)[p]=s.Type.isBoolean(e.stub)?e.stub:true}render(){return babelHelpers.classPrivateFieldLooseBase(this,P)[P]()}}function j(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].remember("container",(()=>{const e=babelHelpers.classPrivateFieldLooseBase(this,L)[L]();if(!babelHelpers.classPrivateFieldLooseBase(this,p)[p]){babelHelpers.classPrivateFieldLooseBase(this,F)[F]()}return s.Tag.render(o||(o=r`
				<div class="ui-short-qr-auth__container ${0}">
					<div class="ui-short-qr-auth__corner --top-left"></div>
					<div class="ui-short-qr-auth__corner --top-right"></div>
					<div class="ui-short-qr-auth__corner --bottom-left"></div>
					<div class="ui-short-qr-auth__corner --bottom-right"></div>
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,u)[u]?"--small":"",e)}))}function T(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].remember("qrNode",(()=>s.Tag.render(b||(b=r`
				<div class="ui-short-qr-auth__qr">
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,p)[p]?babelHelpers.classPrivateFieldLooseBase(this,B)[B]():null)))}function K(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].remember("qrStub",(()=>s.Tag.render(c||(c=r`
				<div class="ui-short-qr-auth__qr-stub">
					<i class="ui-icon-set --o-qr-code ui-short-qr-auth__qr-stub-icon"></i>
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,H)[H]().render())))}function w(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].remember("showQrButton",(()=>new t.Button({size:t.Button.Size.EXTRA_SMALL,text:s.Loc.getMessage("UI_SHORT_QR_AUTH_BUTTON_TITLE"),useAirDesign:true,maxWidth:117,style:t.AirButtonStyle.TINTED,noCaps:true,wide:true,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,F)[F]()}})))}function S(){babelHelpers.classPrivateFieldLooseBase(this,m)[m]();if(!babelHelpers.classPrivateFieldLooseBase(this,h)[h]){babelHelpers.classPrivateFieldLooseBase(this,h)[h]=setInterval((()=>{babelHelpers.classPrivateFieldLooseBase(this,m)[m]()}),babelHelpers.classPrivateFieldLooseBase(this,n)[n]*1e3)}}function q(){s.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,L)[L]())}function I(){babelHelpers.classPrivateFieldLooseBase(this,y)[y]();new i.Loader({size:60}).show(babelHelpers.classPrivateFieldLooseBase(this,L)[L]())}function X(){babelHelpers.classPrivateFieldLooseBase(this,f)[f]();s.ajax.runAction("mobile.deeplink.get",{data:{intent:babelHelpers.classPrivateFieldLooseBase(this,v)[v],ttl:babelHelpers.classPrivateFieldLooseBase(this,n)[n]}}).then((e=>{var s;const a=(s=e.data)==null?void 0:s.link;if(a){babelHelpers.classPrivateFieldLooseBase(this,y)[y]();new QRCode(babelHelpers.classPrivateFieldLooseBase(this,L)[L](),{text:a,width:babelHelpers.classPrivateFieldLooseBase(this,_)[_](),height:babelHelpers.classPrivateFieldLooseBase(this,_)[_]()});if(!this.isSubscribe){this.isSubscribe=true;babelHelpers.classPrivateFieldLooseBase(this,g)[g]()}}})).catch((()=>{}))}function Q(){return babelHelpers.classPrivateFieldLooseBase(this,u)[u]?98:151}function C(){if(l.PULL){l.PULL.subscribe({type:"BX.PullClient.SubscriptionType.Server",moduleId:"mobile",command:"onDeeplinkShouldRefresh",callback:()=>{babelHelpers.classPrivateFieldLooseBase(this,m)[m]()}})}}e.ShortQrAuth=O})(this.BX.UI=this.BX.UI||{},BX,BX,BX.UI,BX,BX);
//# sourceMappingURL=short-qr-auth.bundle.map.js