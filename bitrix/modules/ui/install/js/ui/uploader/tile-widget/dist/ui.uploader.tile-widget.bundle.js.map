{"version":3,"file":"ui.uploader.tile-widget.bundle.js","sources":["../src/mixins/drag-over-mixin.js","../src/components/settings-button.js","../src/components/drop-area.js","../src/components/error-popup.js","../src/components/file-icon.js","../src/components/insert-into-text-button.js","../src/components/upload-loader.js","../src/components/tile-item.js","../src/components/tile-more-item.js","../src/components/tile-list.js","../src/components/tile-widget-component.js","../src/tile-widget.js","../src/tile-widget-slot.js"],"sourcesContent":["import { Event } from 'main.core';\nimport { hasDataTransferOnlyFiles } from 'ui.uploader.core';\n/**\n * @memberof BX.UI.Uploader\n */\nexport const DragOverMixin = {\n\tdirectives: {\n\t\tdrop: {\n\t\t\tbeforeMount(el, binding, vnode): void\n\t\t\t{\n\t\t\t\tif (binding.value === false)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfunction addClass(): void\n\t\t\t\t{\n\t\t\t\t\tbinding.instance.dragOver = true;\n\t\t\t\t\tel.classList.add('--drag-over');\n\t\t\t\t}\n\n\t\t\t\tfunction removeClass(): void\n\t\t\t\t{\n\t\t\t\t\tbinding.instance.dragOver = false;\n\t\t\t\t\tel.classList.remove('--drag-over');\n\t\t\t\t}\n\n\t\t\t\tlet lastEnterTarget = null;\n\t\t\t\tEvent.bind(el, 'dragenter', (event: DragEvent): void => {\n\t\t\t\t\thasDataTransferOnlyFiles(event.dataTransfer, false)\n\t\t\t\t\t\t.then((success): void => {\n\t\t\t\t\t\t\tif (success)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\t\t\t\tlastEnterTarget = event.target;\n\t\t\t\t\t\t\t\taddClass();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t// no-op\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t});\n\n\t\t\t\tEvent.bind(el, 'dragleave', (event: DragEvent): void => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\tif (lastEnterTarget === event.target)\n\t\t\t\t\t{\n\t\t\t\t\t\tremoveClass();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tEvent.bind(el, 'drop', (event: DragEvent): void => {\n\t\t\t\t\tremoveClass();\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tunmounted(el, binding, vnode)\n\t\t\t{\n\t\t\t\tif (binding.value === false)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tbinding.instance.dragOver = false;\n\t\t\t\tEvent.unbindAll(el, 'dragenter');\n\t\t\t\tEvent.unbindAll(el, 'dragleave');\n\t\t\t\tEvent.unbindAll(el, 'drop');\n\t\t\t},\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tdragOver: false,\n\t\t};\n\t},\n};\n","import type { BitrixVueComponentProps } from 'ui.vue3';\n\nexport const SettingsButton: BitrixVueComponentProps = {\n\tinject: ['widgetOptions', 'emitter'],\n\tdata: () => ({\n\t\tselected: false,\n\t}),\n\tmethods: {\n\t\thandleSettingsClick(): void\n\t\t{\n\t\t\tthis.emitter.emit(\n\t\t\t\t'SettingsButton:onClick',\n\t\t\t\t{\n\t\t\t\t\tcontainer: this.$refs['container'],\n\t\t\t\t\tbutton: this,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\tgetContainer(): HTMLElement\n\t\t{\n\t\t\treturn this.$refs['container'];\n\t\t},\n\n\t\tselect(): void\n\t\t{\n\t\t\tthis.selected = true;\n\t\t},\n\n\t\tdeselect(): void\n\t\t{\n\t\t\tthis.selected = false;\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div \n\t\t\tclass=\"ui-tile-uploader-settings\" \n\t\t\t:class=\"{ '--selected': this.selected }\" \n\t\t\t@click=\"handleSettingsClick\" \n\t\t\tref=\"container\"\n\t\t></div>\n\t`\n};\n","import { Loc } from 'main.core';\n\nimport { SettingsButton } from './settings-button';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\nexport const DropArea: BitrixVueComponentProps = {\n\tinject: ['uploader', 'widgetOptions', 'emitter'],\n\tcomponents: {\n\t\tSettingsButton,\n\t},\n\tmounted(): void\n\t{\n\t\tthis.uploader.assignBrowse(this.$refs.dropArea);\n\t},\n\tcomputed: {\n\t\tdropLabel(): string\n\t\t{\n\t\t\treturn Loc.getMessage('TILE_UPLOADER_DROP_FILES_HERE');\n\t\t},\n\t},\n\tmethods: {\n\t\thandleSettingsClick()\n\t\t{\n\t\t\tthis.emitter.emit('onSettingsButtonClick', { button: this.$refs['ui-tile-uploader-settings'] });\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-tile-uploader-drop-area\">\n\t\t\t<div class=\"ui-tile-uploader-drop-box\">\n\t\t\t\t<label class=\"ui-tile-uploader-drop-label\" ref=\"dropArea\">{{dropLabel}}</label>\n\t\t\t\t<SettingsButton v-if=\"widgetOptions.showSettingsButton\" />\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Popup } from 'main.popup';\nimport { Type } from 'main.core';\n\nimport type { UploaderError } from 'ui.uploader.core';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\n/**\n * @memberof BX.UI.Uploader\n */\nexport const ErrorPopup: BitrixVueComponentProps = {\n\tprops: {\n\t\terror: {\n\t\t\ttype: [Object, String],\n\t\t},\n\t\talignArrow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tpopupOptions: {\n\t\t\ttype: Object,\n\t\t\tdefault(): {}\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t},\n\t\t},\n\t},\n\temits: ['onDestroy'],\n\twatch: {\n\t\terror(newValue): void\n\t\t{\n\t\t\tif (this.errorPopup)\n\t\t\t{\n\t\t\t\tthis.errorPopup.destroy();\n\t\t\t}\n\n\t\t\tthis.errorPopup = this.createPopup(newValue);\n\t\t\tthis.errorPopup.show();\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.errorPopup = null;\n\t},\n\tmounted(): void\n\t{\n\t\tif (this.error)\n\t\t{\n\t\t\tthis.errorPopup = this.createPopup(this.error);\n\t\t\tthis.errorPopup.show();\n\t\t}\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tif (this.errorPopup)\n\t\t{\n\t\t\tthis.errorPopup.destroy();\n\t\t\tthis.errorPopup = null;\n\t\t}\n\t},\n\tmethods: {\n\t\tcreateContent(error: UploaderError | string): string\n\t\t{\n\t\t\tif (Type.isStringFilled(error))\n\t\t\t{\n\t\t\t\treturn error;\n\t\t\t}\n\t\t\telse if (Type.isObject(error))\n\t\t\t{\n\t\t\t\treturn error.message + '<br>' + error.description;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\n\t\tcreatePopup(error: UploaderError | string): Popup\n\t\t{\n\t\t\tconst content = this.createContent(error);\n\t\t\tlet defaultOptions;\n\t\t\tif (this.alignArrow && Type.isElementNode(this.popupOptions.bindElement))\n\t\t\t{\n\t\t\t\tconst targetNode = this.popupOptions.bindElement;\n\t\t\t\tconst targetNodeWidth = targetNode.offsetWidth;\n\n\t\t\t\tdefaultOptions = {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\tcontent,\n\t\t\t\t\t// minWidth: 300,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonDestroy: () => {\n\t\t\t\t\t\t\tthis.$emit('onDestroy', error);\n\t\t\t\t\t\t\tthis.errorPopup = null;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonShow: function(event) {\n\t\t\t\t\t\t\tconst popup = event.getTarget();\n\t\t\t\t\t\t\tpopup.getPopupContainer().style.display = 'block';\n\n\t\t\t\t\t\t\tconst popupWidth = popup.getPopupContainer().offsetWidth;\n\t\t\t\t\t\t\tconst offsetLeft = (targetNodeWidth / 2) - (popupWidth / 2);\n\t\t\t\t\t\t\tconst angleShift = Popup.getOption('angleLeftOffset') - Popup.getOption('angleMinTop');\n\n\t\t\t\t\t\t\tpopup.setAngle({ offset: popupWidth / 2 - angleShift });\n\t\t\t\t\t\t\tpopup.setOffset({ offsetLeft: offsetLeft + Popup.getOption('angleLeftOffset') });\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdefaultOptions = {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\tcontent,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonDestroy: () => {\n\t\t\t\t\t\t\tthis.$emit('onDestroy', error);\n\t\t\t\t\t\t\tthis.errorPopup = null;\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst options = Object.assign({}, defaultOptions, this.popupOptions);\n\n\t\t\treturn new Popup(options);\n\t\t},\n\t},\n\ttemplate: '<span></span>',\n};\n","import { FileIcon } from 'ui.icons.generator';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n/**\n * @memberof BX.UI.Uploader\n */\nexport const FileIconComponent: BitrixVueComponentProps = {\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 36,\n\t\t},\n\t\talign: {\n\t\t\ttype: String,\n\t\t\tdefault: 'center',\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tthis.render();\n\t},\n\tupdated(): void\n\t{\n\t\tthis.render();\n\t},\n\tmethods: {\n\t\trender(): void\n\t\t{\n\t\t\tthis.$el.innerHTML = '';\n\n\t\t\tconst icon = new FileIcon({\n\t\t\t\tname: this.name,\n\t\t\t\tfileType: this.type,\n\t\t\t\tcolor: this.color,\n\t\t\t\tsize: this.size,\n\t\t\t\talign: this.align,\n\t\t\t});\n\n\t\t\ticon.renderTo(this.$el);\n\t\t},\n\t},\n\ttemplate: '<span></span>',\n};\n","import { Loc } from 'main.core';\nimport { Popup } from 'main.popup';\nimport type { BaseEvent } from 'main.core.events';\n\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\nimport '../css/insert-into-text-button.css';\n\n// @vue/component\nexport const InsertIntoTextButton: BitrixVueComponentProps = {\n\tname: 'InsertIntoTextButton',\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tinject: ['emitter'],\n\tprops: {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\tisInserted(): boolean\n\t\t{\n\t\t\treturn this.item.customData?.tileSelected === true;\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tthis.emitter.emit('onInsertIntoText', { item: this.item });\n\t\t},\n\t\thandleMouseEnter(event: MouseEvent): void\n\t\t{\n\t\t\tif (this.hintPopup)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst targetNode: HTMLElement = event.currentTarget;\n\t\t\tconst targetNodeWidth: number = targetNode.offsetWidth;\n\n\t\t\tthis.hintPopup = new Popup({\n\t\t\t\tcontent: Loc.getMessage('TILE_UPLOADER_INSERT_INTO_THE_TEXT'),\n\t\t\t\tcacheable: false,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tbindElement: targetNode,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\toffsetTop: 0,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t},\n\t\t\t\tdarkMode: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: (): void => {\n\t\t\t\t\t\tthis.hintPopup.destroy();\n\t\t\t\t\t\tthis.hintPopup = null;\n\t\t\t\t\t},\n\t\t\t\t\tonShow: (baseEvent: BaseEvent): void => {\n\t\t\t\t\t\tconst popup = baseEvent.getTarget();\n\t\t\t\t\t\tconst popupWidth = popup.getPopupContainer().offsetWidth;\n\t\t\t\t\t\tconst offsetLeft: number = (targetNodeWidth / 2) - (popupWidth / 2);\n\t\t\t\t\t\tconst angleShift: number = Popup.getOption('angleLeftOffset') - Popup.getOption('angleMinTop');\n\n\t\t\t\t\t\tpopup.setAngle({ offset: popupWidth / 2 - angleShift });\n\t\t\t\t\t\tpopup.setOffset({ offsetLeft: offsetLeft + Popup.getOption('angleLeftOffset') });\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.hintPopup.show();\n\t\t},\n\t\thandleMouseLeave(): void\n\t\t{\n\t\t\tif (this.hintPopup)\n\t\t\t{\n\t\t\t\tthis.hintPopup.close();\n\t\t\t\tthis.hintPopup = null;\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BIcon\n\t\t\tclass=\"ui-tile-uploader-insert-into-text-button\"\n\t\t\t:class=\"{ '--inserted': isInserted }\"\n\t\t\t:name=\"Outline.PROMPT_VAR\"\n\t\t\t@click=\"handleClick\"\n\t\t\t@mouseenter=\"handleMouseEnter\"\n\t\t\t@mouseleave=\"handleMouseLeave\"\n\t\t/>\n\t`,\n};\n","import { ProgressRound } from 'ui.progressround';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\n/**\n * @memberof BX.UI.Uploader\n */\nexport const UploadLoader: BitrixVueComponentProps = {\n\tprops: {\n\t\tprogress: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\twidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 45,\n\t\t},\n\t\tlineSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 3,\n\t\t},\n\t\tcolorTrack: {\n\t\t\ttype: String,\n\t\t\tdefault: '#eeeff0',\n\t\t},\n\t\tcolorBar: {\n\t\t\ttype: String,\n\t\t\tdefault: '#2fc6f6',\n\t\t},\n\t\trotation: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.createProgressbar();\n\t},\n\twatch: {\n\t\tprogress()\n\t\t{\n\t\t\tthis.updateProgressbar();\n\t\t},\n\t},\n\tmethods: {\n\t\tcreateProgressbar()\n\t\t{\n\t\t\tthis.loader = new ProgressRound({\n\t\t\t\twidth: this.width,\n\t\t\t\tlineSize: this.lineSize,\n\t\t\t\tcolorBar: this.colorBar,\n\t\t\t\tcolorTrack: this.colorTrack,\n\t\t\t\trotation: this.rotation,\n\t\t\t\tvalue: this.progress,\n\t\t\t\tcolor: ProgressRound.Color.SUCCESS,\n\t\t\t});\n\n\t\t\tthis.loader.renderTo(this.$refs.container);\n\t\t},\n\t\tupdateProgressbar()\n\t\t{\n\t\t\tif (!this.loader)\n\t\t\t{\n\t\t\t\tthis.createProgressbar();\n\t\t\t}\n\n\t\t\tthis.loader.update(this.progress);\n\t\t},\n\t},\n\ttemplate: '<span ref=\"container\"></span>',\n};\n","import { Dom, Loc, Text, Type } from 'main.core';\nimport { MenuManager, type PopupOptions } from 'main.popup';\n\nimport { FileOrigin, FileStatus } from 'ui.uploader.core';\nimport { TileWidgetSlot } from 'ui.uploader.tile-widget';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Actions, Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.actions';\nimport 'ui.icon-set.outline';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\nimport { ErrorPopup } from './error-popup';\nimport { FileIconComponent } from './file-icon';\nimport { InsertIntoTextButton } from './insert-into-text-button';\nimport { UploadLoader } from './upload-loader';\n\n// @vue/component\nexport const TileItem: BitrixVueComponentProps = {\n\tcomponents: {\n\t\tBIcon,\n\t\tUploadLoader,\n\t\tErrorPopup,\n\t\tFileIconComponent,\n\t},\n\tinject: ['uploader', 'adapter', 'widgetOptions', 'emitter'],\n\tprops: {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tviewerGroupBy: {\n\t\t\ttype: [String, null],\n\t\t\tdefault: null,\n\t\t},\n\t\tremoveFromServer: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tforceDisableSelection: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tActions,\n\t\t\tOutline,\n\t\t\tFileStatus,\n\t\t\tmenuId: `ui-tile-uploader-item-menu-${Text.getRandom().toLowerCase()}`,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tshowError: false,\n\t\t\tisMenuShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tstatus(): string\n\t\t{\n\t\t\tif (this.item.status === FileStatus.UPLOADING)\n\t\t\t{\n\t\t\t\treturn `${this.item.progress}%`;\n\t\t\t}\n\n\t\t\tif (this.item.status === FileStatus.LOAD_FAILED || this.item.status === FileStatus.UPLOAD_FAILED)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('TILE_UPLOADER_ERROR_STATUS');\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('TILE_UPLOADER_WAITING_STATUS');\n\t\t},\n\t\tfileSize(): string\n\t\t{\n\t\t\tif (\n\t\t\t\t[FileStatus.LOADING, FileStatus.LOAD_FAILED].includes(this.item.status)\n\t\t\t\t&& this.item.origin === FileOrigin.SERVER\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.item.sizeFormatted;\n\t\t},\n\t\terrorPopupOptions(): PopupOptions\n\t\t{\n\t\t\tconst targetNode = this.$refs.container;\n\t\t\tconst targetNodeWidth = targetNode.offsetWidth;\n\n\t\t\treturn {\n\t\t\t\tbindElement: targetNode,\n\t\t\t\tdarkMode: true,\n\t\t\t\toffsetTop: 6,\n\t\t\t\tminWidth: targetNodeWidth,\n\t\t\t\tmaxWidth: 500,\n\t\t\t};\n\t\t},\n\t\tclampedFileName(): string\n\t\t{\n\t\t\tconst nameParts = this.item.name.split('.');\n\t\t\tif (nameParts.length > 1)\n\t\t\t{\n\t\t\t\tnameParts.pop();\n\t\t\t}\n\n\t\t\tconst nameWithoutExtension = nameParts.join('.');\n\t\t\tconst maxLength = this.widgetOptions.compact ? 22 : 27;\n\t\t\tif (nameWithoutExtension.length > maxLength)\n\t\t\t{\n\t\t\t\treturn `${nameWithoutExtension.slice(0, maxLength - 10)}...${nameWithoutExtension.slice(-5)}`;\n\t\t\t}\n\n\t\t\treturn nameWithoutExtension;\n\t\t},\n\t\tshowItemMenuButton(): boolean\n\t\t{\n\t\t\tif (Type.isBoolean(this.widgetOptions.showItemMenuButton))\n\t\t\t{\n\t\t\t\treturn this.widgetOptions.showItemMenuButton;\n\t\t\t}\n\n\t\t\treturn this.menuItems.length > 0;\n\t\t},\n\t\tmenuItems(): Array\n\t\t{\n\t\t\tconst items = [];\n\t\t\titems.push(\n\t\t\t\t{\n\t\t\t\t\tid: 'filesize',\n\t\t\t\t\ttext: Loc.getMessage('TILE_UPLOADER_FILE_SIZE', { '#filesize#': this.item.sizeFormatted }),\n\t\t\t\t\tdisabled: true,\n\t\t\t\t},\n\t\t\t\t{ delimiter: true },\n\t\t\t);\n\n\t\t\tif (this.widgetOptions.insertIntoText === true)\n\t\t\t{\n\t\t\t\titems.push({\n\t\t\t\t\tid: 'insert-into-text',\n\t\t\t\t\ttext: Loc.getMessage('TILE_UPLOADER_INSERT_INTO_THE_TEXT'),\n\t\t\t\t\tonclick: (): void => {\n\t\t\t\t\t\tif (this.menu)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.menu.close();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.emitter.emit('onInsertIntoText', { item: this.item });\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Type.isStringFilled(this.item.downloadUrl))\n\t\t\t{\n\t\t\t\titems.push(\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'download',\n\t\t\t\t\t\ttext: Loc.getMessage('TILE_UPLOADER_MENU_DOWNLOAD'),\n\t\t\t\t\t\thref: this.item.downloadUrl,\n\t\t\t\t\t\tonclick: (): void => this.menu?.close(),\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (!this.readonly)\n\t\t\t{\n\t\t\t\tconst removeItem = {\n\t\t\t\t\tid: 'remove',\n\t\t\t\t\ttext: Loc.getMessage('TILE_UPLOADER_MENU_REMOVE'),\n\t\t\t\t\tonclick: this.remove,\n\t\t\t\t};\n\n\t\t\t\titems.push(removeItem);\n\t\t\t}\n\n\t\t\treturn items;\n\t\t},\n\t\textraAction(): ?BitrixVueComponentProps\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.widgetOptions.slots && this.widgetOptions.slots[TileWidgetSlot.ITEM_EXTRA_ACTION]\n\t\t\t\t\t? this.widgetOptions.slots[TileWidgetSlot.ITEM_EXTRA_ACTION]\n\t\t\t\t\t: (this.widgetOptions.insertIntoText === true ? InsertIntoTextButton : null)\n\t\t\t);\n\t\t},\n\t\tisSelected(): boolean\n\t\t{\n\t\t\tif (this.forceDisableSelection)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.item.customData.tileSelected === true;\n\t\t},\n\t\tfileIconSize(): number\n\t\t{\n\t\t\treturn this.widgetOptions.compact ? 24 : 36;\n\t\t},\n\t\tviewerAttrs(): Object\n\t\t{\n\t\t\tconst { viewerAttrs, previewUrl } = this.item;\n\n\t\t\tif (!viewerAttrs)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tconst params = {};\n\n\t\t\tfor (const [key, value] of Object.entries(viewerAttrs))\n\t\t\t{\n\t\t\t\tparams[`data-${Text.toKebabCase(key)}`] = value;\n\t\t\t}\n\n\t\t\tparams['data-viewer'] = true;\n\n\t\t\tif (previewUrl)\n\t\t\t{\n\t\t\t\tparams['data-viewer-preview'] = previewUrl;\n\t\t\t}\n\n\t\t\tif (this.viewerGroupBy && Type.isUndefined(viewerAttrs.viewerSeparateItem))\n\t\t\t{\n\t\t\t\tparams['data-viewer-group-by'] = this.viewerGroupBy;\n\t\t\t}\n\n\t\t\treturn params;\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.menu = null;\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tif (this.menu)\n\t\t{\n\t\t\tthis.menu.destroy();\n\t\t\tthis.menu = null;\n\t\t}\n\t},\n\tmethods: {\n\t\tremove(): void\n\t\t{\n\t\t\tif (this.readonly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.uploader.removeFile(this.item.id, { removeFromServer: this.removeFromServer });\n\t\t},\n\n\t\thandleMouseEnter(item): void\n\t\t{\n\t\t\tif (item.error)\n\t\t\t{\n\t\t\t\tthis.showError = true;\n\t\t\t}\n\t\t},\n\t\thandleMouseLeave(): void\n\t\t{\n\t\t\tthis.showError = false;\n\t\t},\n\t\ttoggleMenu(): void\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (this.menu)\n\t\t\t\t{\n\t\t\t\t\tif (this.menu.getPopupWindow().isShown())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.menu.close();\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.menu.destroy();\n\t\t\t\t}\n\n\t\t\t\tthis.menu = MenuManager.create({\n\t\t\t\t\tid: this.menuId,\n\t\t\t\t\tbindElement: this.$refs.menu.$el,\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t\tangle: true,\n\t\t\t\t\toffsetLeft: 13,\n\t\t\t\t\tminWidth: 100,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\titems: this.menuItems,\n\t\t\t\t\tbindOptions: {\n\t\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\t},\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonShow: (): void => {\n\t\t\t\t\t\t\tthis.isMenuShown = true;\n\t\t\t\t\t\t\tthis.adapter.getItem(this.item.id).isMenuShown = true;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonClose: (): void => {\n\t\t\t\t\t\t\tthis.isMenuShown = false;\n\t\t\t\t\t\t\tthis.adapter.getItem(this.item.id).isMenuShown = false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDestroy: (): void => {\n\t\t\t\t\t\t\tthis.menu = null;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tconst downloadItem = this.menu.getMenuItem('download');\n\t\t\t\tif (downloadItem)\n\t\t\t\t{\n\t\t\t\t\tDom.attr(downloadItem.getContainer(), 'download', true);\n\t\t\t\t}\n\n\t\t\t\tthis.emitter.emit('TileItem:onMenuCreate', {\n\t\t\t\t\tmenu: this.menu,\n\t\t\t\t\titem: this.item,\n\t\t\t\t});\n\n\t\t\t\tthis.menu.show();\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"ui-tile-uploader-item\"\n\t\t\t:class=\"[\n\t\t\t\t'ui-tile-uploader-item--' + item.status,\n\t\t\t\t{\n\t\t\t\t\t'--image': item.isImage,\n\t\t\t\t\t'--selected': (isMenuShown && widgetOptions.compact) || isSelected,\n\t\t\t\t},\n\t\t\t]\"\n\t\t\tref=\"container\"\n\t\t>\n\t\t\t<ErrorPopup v-if=\"item.error && showError\" :error=\"item.error\" :popup-options=\"errorPopupOptions\"/>\n\t\t\t<div\n\t\t\t\tclass=\"ui-tile-uploader-item-content\"\n\t\t\t\t@mouseenter=\"handleMouseEnter(item)\"\n\t\t\t\t@mouseleave=\"handleMouseLeave\"\n\t\t\t>\n\t\t\t\t<div v-if=\"item.status !== FileStatus.COMPLETE\" class=\"ui-tile-uploader-item-state\">\n\t\t\t\t\t<div class=\"ui-tile-uploader-item-loader\" v-if=\"item.status === FileStatus.UPLOADING\">\n\t\t\t\t\t\t<UploadLoader :progress=\"item.progress\" :width=\"20\" colorTrack=\"#73d8f8\" colorBar=\"#fff\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else class=\"ui-tile-uploader-item-state-icon\"></div>\n\t\t\t\t\t<div class=\"ui-tile-uploader-item-status\">\n\t\t\t\t\t\t<div class=\"ui-tile-uploader-item-status-name\">{{status}}</div>\n\t\t\t\t\t\t<div v-if=\"fileSize\" class=\"ui-tile-uploader-item-state-desc\">{{fileSize}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"!readonly\" class=\"ui-tile-uploader-item-state-remove\" @click=\"remove\" key=\"aaa\"></div>\n\t\t\t\t</div>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div v-if=\"!readonly\" class=\"ui-tile-uploader-item-remove\" key=\"remove\" @click=\"remove\">\n\t\t\t\t\t\t<BIcon :name=\"Outline.CROSS_L\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-tile-uploader-item-actions\" key=\"actions\">\n\t\t\t\t\t\t<div class=\"ui-tile-uploader-item-actions-pad\">\n\t\t\t\t\t\t\t<div v-if=\"extraAction\" class=\"ui-tile-uploader-item-extra-actions\">\n\t\t\t\t\t\t\t\t<component :is=\"extraAction\" :item=\"item\"></component>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<BIcon\n\t\t\t\t\t\t\t\tv-if=\"showItemMenuButton\"\n\t\t\t\t\t\t\t\tclass=\"ui-tile-uploader-item-menu\"\n\t\t\t\t\t\t\t\t:name=\"Actions.MORE\"\n\t\t\t\t\t\t\t\tref=\"menu\"\n\t\t\t\t\t\t\t\t@click=\"toggleMenu\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div class=\"ui-tile-uploader-item-preview-content\" v-bind=\"viewerAttrs\">\n\t\t\t\t\t<div class=\"ui-tile-uploader-item-preview\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"item.previewUrl\"\n\t\t\t\t\t\t\tclass=\"ui-tile-uploader-item-image\"\n\t\t\t\t\t\t\t:class=\"{ 'ui-tile-uploader-item-image-default': item.previewUrl === null }\"\n\t\t\t\t\t\t\t:style=\"{ backgroundImage: item.previewUrl !== null ? 'url(' + item.previewUrl + ')' : '' }\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<FileIconComponent v-else :name=\"item.extension || '...'\" :size=\"fileIconSize\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"item.name\"\n\t\t\t\t\t\tclass=\"ui-tile-uploader-item-name-box\"\n\t\t\t\t\t\t:title=\"item.name\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"ui-tile-uploader-item-name\">\n\t\t\t\t\t\t\t<span class=\"ui-tile-uploader-item-name-title\">{{clampedFileName}}</span>\n\t\t\t\t\t\t\t<span v-if=\"item.extension\" class=\"ui-tile-uploader-item-name-extension\">.{{item.extension}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Actions } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.actions';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\n// @vue/component\nexport const TileMoreItem: BitrixVueComponentProps = {\n\tcomponents: {\n\t\tBIcon,\n\t},\n\temit: ['onClick'],\n\tprops: {\n\t\thiddenFilesCount: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tActions,\n\t\t};\n\t},\n\tcomputed: {\n\t\tmoreButtonCaption(): string\n\t\t{\n\t\t\treturn Loc.getMessage('TILE_UPLOADER_MORE_BUTTON_CAPTION', {\n\t\t\t\t'#COUNT#': `<span class=\"ui-tile-uploader-item-more-count\">${this.hiddenFilesCount}</span>`,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-tile-uploader-item\" @click=\"$emit('onClick')\">\n\t\t\t<div class=\"ui-tile-uploader-item-more\">\n\t\t\t\t<BIcon class=\"ui-tile-uploader-item-more-icon\" :name=\"Actions.MORE\"/>\n\t\t\t\t<div class=\"ui-tile-uploader-item-more-label\" v-html=\"moreButtonCaption\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Text } from 'main.core';\nimport { TileItem } from './tile-item';\nimport { TileMoreItem } from './tile-more-item';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\nimport type { TileWidgetItem } from '../tile-widget-item';\n\n/**\n * @memberof BX.UI.Uploader\n */\nexport const TileList: BitrixVueComponentProps = {\n\tcomponents: {\n\t\tTileItem,\n\t\tTileMoreItem,\n\t},\n\temits: ['onUnmount'],\n\tprops: {\n\t\tautoCollapse: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\tdefault: [],\n\t\t},\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tremoveFromServer: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tforceDisableSelection: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata: (): Object => ({\n\t\tpageSize: 5,\n\t\tfirstHiddenItem: null,\n\t\tlastHiddenItem: null,\n\t}),\n\tcreated(): void\n\t{\n\t\tthis.moreItemBlocked = false;\n\n\t\tif (!this.autoCollapse)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.items.length > this.pageSize)\n\t\t{\n\t\t\tthis.firstHiddenItem = this.items[this.pageSize];\n\t\t\tthis.lastHiddenItem = this.items[this.items.length - 1];\n\t\t}\n\t},\n\tunmounted(): void\n\t{\n\t\tthis.$emit('onUnmount');\n\t},\n\tcomputed: {\n\t\tvisibleItems(): TileWidgetItem[]\n\t\t{\n\t\t\tif (this.firstHiddenItem === null)\n\t\t\t{\n\t\t\t\treturn this.items;\n\t\t\t}\n\n\t\t\tconst index = this.items.indexOf(this.firstHiddenItem);\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.resetMoreItem();\n\n\t\t\t\treturn this.items;\n\t\t\t}\n\n\t\t\treturn this.items.slice(0, index);\n\t\t},\n\n\t\trealtimeItems(): TileWidgetItem[]\n\t\t{\n\t\t\tif (this.lastHiddenItem === null)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst index = this.items.indexOf(this.lastHiddenItem);\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.resetMoreItem();\n\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn this.items.slice(index + 1);\n\t\t},\n\n\t\thiddenFilesCount(): number\n\t\t{\n\t\t\tif (this.lastHiddenItem === null)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tconst firstIndex = this.items.indexOf(this.firstHiddenItem);\n\t\t\tconst lastIndex = this.items.indexOf(this.lastHiddenItem);\n\n\t\t\tif (firstIndex === -1 || lastIndex === -1)\n\t\t\t{\n\t\t\t\tthis.resetMoreItem();\n\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn lastIndex - firstIndex + 1;\n\t\t},\n\t\tgroupBy(): string\n\t\t{\n\t\t\treturn Text.getRandom(16);\n\t\t},\n\t},\n\tmethods: {\n\t\tgetMore(): void\n\t\t{\n\t\t\tif (this.moreItemBlocked)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.pageSize = Math.min(this.pageSize + 5, 30);\n\n\t\t\tconst currentFirstIndex = this.items.indexOf(this.firstHiddenItem);\n\t\t\tconst lastIndex = this.items.indexOf(this.lastHiddenItem);\n\n\t\t\tconst newFirstIndex: number = currentFirstIndex + this.pageSize;\n\t\t\tconst nextFirstIndex: number = newFirstIndex > lastIndex ? lastIndex + 1 : newFirstIndex;\n\t\t\tlet itemsToShow: number = nextFirstIndex - currentFirstIndex;\n\n\t\t\tfor (let i = currentFirstIndex, delay = 0; i < nextFirstIndex; i++, delay++)\n\t\t\t{\n\t\t\t\tthis.moreItemBlocked = true;\n\t\t\t\tsetTimeout((): void => {\n\t\t\t\t\tif (i === lastIndex)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.resetMoreItem();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.firstHiddenItem = this.items[i + 1];\n\t\t\t\t\t}\n\n\t\t\t\t\titemsToShow--;\n\t\t\t\t\tif (itemsToShow === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.moreItemBlocked = false;\n\t\t\t\t\t}\n\t\t\t\t}, 100 * delay);\n\t\t\t}\n\t\t},\n\t\tresetMoreItem(): void\n\t\t{\n\t\t\tthis.firstHiddenItem = null;\n\t\t\tthis.lastHiddenItem = null;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-tile-uploader-items\">\n\t\t\t<transition-group name=\"ui-tile-uploader-item\" type=\"animation\">\n\t\t\t\t<TileItem\n\t\t\t\t\tv-for=\"item in visibleItems\"\n\t\t\t\t\t:key=\"item.id\" :item=\"item\"\n\t\t\t\t\t:readonly=\"readonly\"\n\t\t\t\t\t:viewerGroupBy=\"groupBy\"\n\t\t\t\t\t:removeFromServer=\"removeFromServer\"\n\t\t\t\t\t:forceDisableSelection=\"forceDisableSelection\"\n\t\t\t\t/>\n\t\t\t</transition-group>\n\t\t\t<transition name=\"ui-tile-uploader-item\" type=\"animation\">\n\t\t\t\t<TileMoreItem\n\t\t\t\t\tv-if=\"hiddenFilesCount > 0\"\n\t\t\t\t\t:hiddenFilesCount=\"hiddenFilesCount\"\n\t\t\t\t\t@onClick=\"getMore\"\n\t\t\t\t/>\n\t\t\t</transition>\n\t\t\t<transition-group name=\"ui-tile-uploader-item\" type=\"animation\">\n\t\t\t\t<TileItem\n\t\t\t\t\tv-for=\"item in realtimeItems\"\n\t\t\t\t\t:key=\"item.id\"\n\t\t\t\t\t:item=\"item\"\n\t\t\t\t\t:readonly=\"readonly\"\n\t\t\t\t\t:viewerGroupBy=\"groupBy\"\n\t\t\t\t\t:removeFromServer=\"removeFromServer\"\n\t\t\t\t\t:forceDisableSelection=\"forceDisableSelection\"\n\t\t\t\t/>\n\t\t\t</transition-group>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\nimport type { PopupOptions } from 'main.popup';\n\nimport { VueUploaderComponent } from 'ui.uploader.vue';\nimport { TileWidgetSlot } from 'ui.uploader.tile-widget';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\nimport { DragOverMixin } from '../mixins/drag-over-mixin';\nimport { DropArea } from './drop-area';\nimport { TileList } from './tile-list';\nimport { ErrorPopup } from './error-popup';\n\n/**\n * @memberof BX.UI.Uploader\n * @vue/component\n */\n// @vue/component\nexport const TileWidgetComponent: BitrixVueComponentProps = {\n\tname: 'TileWidget',\n\tcomponents: {\n\t\tDropArea,\n\t\tTileList,\n\t\tErrorPopup,\n\t},\n\textends: VueUploaderComponent,\n\tmixins: [\n\t\tDragOverMixin,\n\t],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMounted: false,\n\t\t\tautoCollapse: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\terrorPopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tbindElement: this.$refs.container,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tpadding: 20,\n\t\t\t\toffsetLeft: 45,\n\t\t\t\tangle: true,\n\t\t\t\tdarkMode: true,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t\tforceTop: true,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tTileWidgetSlot: () => TileWidgetSlot,\n\t\tslots(): TileWidgetSlot\n\t\t{\n\t\t\tconst slots = Type.isPlainObject(this.widgetOptions.slots) ? this.widgetOptions.slots : {};\n\n\t\t\treturn {\n\t\t\t\t[TileWidgetSlot.BEFORE_TILE_LIST]: slots[TileWidgetSlot.BEFORE_TILE_LIST],\n\t\t\t\t[TileWidgetSlot.AFTER_TILE_LIST]: slots[TileWidgetSlot.AFTER_TILE_LIST],\n\t\t\t\t[TileWidgetSlot.BEFORE_DROP_AREA]: slots[TileWidgetSlot.BEFORE_DROP_AREA],\n\t\t\t\t[TileWidgetSlot.AFTER_DROP_AREA]: slots[TileWidgetSlot.AFTER_DROP_AREA],\n\t\t\t};\n\t\t},\n\t\tenableDropzone(): boolean\n\t\t{\n\t\t\treturn this.widgetOptions.enableDropzone !== false;\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.autoCollapse = (\n\t\t\tType.isBoolean(this.widgetOptions.autoCollapse)\n\t\t\t\t? this.widgetOptions.autoCollapse\n\t\t\t\t: this.items.length > 0\n\t\t);\n\n\t\tthis.adapter.subscribe('Item:onAdd', this.clearError);\n\t\tthis.adapter.subscribe('Item:onRemove', this.clearError);\n\t},\n\tmounted(): void\n\t{\n\t\tif (this.enableDropzone)\n\t\t{\n\t\t\tthis.uploader.assignDropzone(this.$refs.container);\n\t\t}\n\n\t\tthis.isMounted = true;\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tthis.adapter.unsubscribe('Item:onAdd', this.clearError);\n\t\tthis.adapter.unsubscribe('Item:onRemove', this.clearError);\n\t},\n\tmethods: {\n\t\tenableAutoCollapse(): void\n\t\t{\n\t\t\tthis.autoCollapse = true;\n\t\t},\n\t\tdisableAutoCollapse(): void\n\t\t{\n\t\t\tthis.autoCollapse = false;\n\t\t},\n\t\thandlePopupDestroy(error): void\n\t\t{\n\t\t\tif (this.uploaderError === error)\n\t\t\t{\n\t\t\t\tthis.uploaderError = null;\n\t\t\t}\n\t\t},\n\t\tclearError(): void\n\t\t{\n\t\t\tthis.uploaderError = null;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"ui-tile-uploader\"\n\t\t\t:class=\"[\n\t\t\t\twidgetOptions.contextClass ?? '--ui-context-content-light',\n\t\t\t\t{\n\t\t\t\t\t'--compact': widgetOptions.compact,\n\t\t\t\t},\n\t\t\t]\"\n\t\t\tref=\"container\"\n\t\t\tv-drop=\"enableDropzone\"\n\t\t>\n\t\t\t<component :is=\"slots[TileWidgetSlot.BEFORE_TILE_LIST]\"></component>\n\t\t\t<TileList \n\t\t\t\tv-if=\"items.length !== 0\"\n\t\t\t\t:items=\"items\"\n\t\t\t\t:autoCollapse=\"autoCollapse\"\n\t\t\t\t:readonly=\"widgetOptions.readonly\"\n\t\t\t\t:removeFromServer=\"widgetOptions.removeFromServer\"\n\t\t\t\t:forceDisableSelection=\"widgetOptions.forceDisableSelection\"\n\t\t\t\t@onUnmount=\"autoCollapse = false\"\n\t\t\t/>\n\t\t\t<component :is=\"slots[TileWidgetSlot.AFTER_TILE_LIST]\"></component>\n\t\t\t<component :is=\"slots[TileWidgetSlot.BEFORE_DROP_AREA]\"></component>\n\t\t\t<DropArea v-if=\"!widgetOptions.hideDropArea\"/>\n\t\t\t<component :is=\"slots[TileWidgetSlot.AFTER_DROP_AREA]\"></component>\n\t\t</div>\n\t\t<ErrorPopup\n\t\t\tv-if=\"uploaderError && isMounted\"\n\t\t\t:alignArrow=\"false\"\n\t\t\t:error=\"uploaderError\"\n\t\t\t:popupOptions=\"errorPopupOptions\"\n\t\t\t@onDestroy=\"handlePopupDestroy\"\n\t\t/>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { VueUploaderWidget } from 'ui.uploader.vue';\n\nimport { TileWidgetComponent } from './components/tile-widget-component';\n\nimport type { UploaderOptions } from 'ui.uploader.core';\nimport type { TileWidgetOptions } from './tile-widget-options';\n\n/**\n * @memberof BX.UI.Uploader\n */\nexport default class TileWidget extends VueUploaderWidget\n{\n\tconstructor(uploaderOptions: UploaderOptions, tileWidgetOptions: TileWidgetOptions)\n\t{\n\t\tconst widgetOptions = Type.isPlainObject(tileWidgetOptions) ? Object.assign({}, tileWidgetOptions) : {};\n\t\tsuper(uploaderOptions, widgetOptions);\n\t}\n\n\tdefineComponent(): ?Function\n\t{\n\t\treturn TileWidgetComponent;\n\t}\n}\n","export const TileWidgetSlot: Object<string, string> = {\n\tBEFORE_TILE_LIST: 'beforeTileList',\n\tAFTER_TILE_LIST: 'afterTileList',\n\tBEFORE_DROP_AREA: 'beforeDropArea',\n\tAFTER_DROP_AREA: 'afterDropArea',\n\tITEM_EXTRA_ACTION: 'Item:extraAction',\n};"],"names":["DragOverMixin","directives","drop","beforeMount","el","binding","vnode","value","addClass","instance","dragOver","classList","add","removeClass","remove","lastEnterTarget","Event","bind","event","hasDataTransferOnlyFiles","dataTransfer","then","success","preventDefault","stopPropagation","target","catch","unmounted","unbindAll","data","SettingsButton","inject","selected","methods","handleSettingsClick","emitter","emit","container","$refs","button","getContainer","select","deselect","template","DropArea","components","mounted","uploader","assignBrowse","dropArea","computed","dropLabel","Loc","getMessage","ErrorPopup","props","error","type","Object","String","alignArrow","Boolean","default","popupOptions","emits","watch","newValue","errorPopup","destroy","createPopup","show","created","beforeUnmount","createContent","Type","isStringFilled","isObject","message","description","content","defaultOptions","isElementNode","bindElement","targetNode","targetNodeWidth","offsetWidth","cacheable","animation","events","onDestroy","$emit","onShow","popup","getTarget","getPopupContainer","style","display","popupWidth","offsetLeft","angleShift","Popup","getOption","setAngle","offset","setOffset","options","assign","FileIconComponent","name","color","size","Number","align","render","updated","$el","innerHTML","icon","FileIcon","fileType","renderTo","InsertIntoTextButton","BIcon","item","setup","Outline","isInserted","customData","tileSelected","handleClick","handleMouseEnter","hintPopup","currentTarget","targetContainer","document","body","offsetTop","bindOptions","position","forceBindPosition","darkMode","onClose","baseEvent","handleMouseLeave","close","UploadLoader","progress","width","lineSize","colorTrack","colorBar","rotation","createProgressbar","updateProgressbar","loader","ProgressRound","Color","SUCCESS","update","TileItem","readonly","viewerGroupBy","removeFromServer","forceDisableSelection","Actions","FileStatus","menuId","Text","getRandom","toLowerCase","showError","isMenuShown","status","UPLOADING","LOAD_FAILED","UPLOAD_FAILED","fileSize","LOADING","includes","origin","FileOrigin","SERVER","sizeFormatted","errorPopupOptions","minWidth","maxWidth","clampedFileName","nameParts","split","length","pop","nameWithoutExtension","join","maxLength","widgetOptions","compact","slice","showItemMenuButton","isBoolean","menuItems","items","push","id","text","disabled","delimiter","insertIntoText","onclick","menu","downloadUrl","href","removeItem","extraAction","slots","TileWidgetSlot","ITEM_EXTRA_ACTION","isSelected","fileIconSize","viewerAttrs","previewUrl","params","key","entries","toKebabCase","isUndefined","viewerSeparateItem","removeFile","toggleMenu","setTimeout","getPopupWindow","isShown","MenuManager","create","angle","adapter","getItem","downloadItem","getMenuItem","Dom","attr","TileMoreItem","hiddenFilesCount","moreButtonCaption","TileList","autoCollapse","Array","pageSize","firstHiddenItem","lastHiddenItem","moreItemBlocked","visibleItems","index","indexOf","resetMoreItem","realtimeItems","firstIndex","lastIndex","groupBy","getMore","Math","min","currentFirstIndex","newFirstIndex","nextFirstIndex","itemsToShow","i","delay","TileWidgetComponent","extends","VueUploaderComponent","mixins","isMounted","closeIcon","padding","forceTop","isPlainObject","BEFORE_TILE_LIST","AFTER_TILE_LIST","BEFORE_DROP_AREA","AFTER_DROP_AREA","enableDropzone","subscribe","clearError","assignDropzone","unsubscribe","enableAutoCollapse","disableAutoCollapse","handlePopupDestroy","uploaderError","TileWidget","VueUploaderWidget","constructor","uploaderOptions","tileWidgetOptions","defineComponent"],"mappings":"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"}