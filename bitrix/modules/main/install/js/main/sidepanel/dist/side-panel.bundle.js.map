{"version":3,"file":"side-panel.bundle.js","sources":["../src/dictionary.js","../src/label.js","../src/slider-event.js","../src/message-event.js","../src/slider.js","../src/toolbar-item.js","../src/get-instance.js","../src/toolbar.js","../src/slider-manager.js","../src/index.js"],"sourcesContent":["import { Type, type JsonObject, type JsonValue } from 'main.core';\n\nexport class Dictionary\n{\n\t#data: JsonObject = null;\n\n\tconstructor(data: JsonObject)\n\t{\n\t\tif (!Type.isPlainObject(data))\n\t\t{\n\t\t\tthrow new TypeError('The argument must be a plain object.');\n\t\t}\n\n\t\tthis.#data = data;\n\t}\n\n\tset(key: string, value: JsonValue): void\n\t{\n\t\tif (!Type.isStringFilled(key))\n\t\t{\n\t\t\tthrow new Error('The \\'key\\' must be a string.');\n\t\t}\n\n\t\tthis.#data[key] = value;\n\t}\n\n\tget(key: string): JsonValue | undefined\n\t{\n\t\treturn this.#data[key];\n\t}\n\n\tdelete(key: string): void\n\t{\n\t\tdelete this.#data[key];\n\t}\n\n\thas(key: string): boolean\n\t{\n\t\treturn key in this.#data;\n\t}\n\n\tclear(): void\n\t{\n\t\tthis.#data = {};\n\t}\n\n\tentries(): JsonObject\n\t{\n\t\treturn this.#data;\n\t}\n}\n","import { Type, Cache, Dom } from 'main.core';\n\nimport { type Slider } from './slider';\nimport { type LabelOptions } from './types/label-options';\n\nexport class Label\n{\n\tstatic MIN_LEFT_OFFSET = 25;\n\tstatic MIN_TOP_OFFSET = 17;\n\tstatic INTERVAL_TOP_OFFSET = 50;\n\n\tslider: Slider = null;\n\tcolor = null;\n\tbgColor = null;\n\tclassName = '';\n\ticonClass = '';\n\ticonTitle = '';\n\tonclick = null;\n\ttext = null;\n\thidden: boolean = false;\n\tvisible: boolean = true;\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(slider: Slider, labelOptions: LabelOptions)\n\t{\n\t\tthis.slider = slider;\n\t\tconst options = Type.isPlainObject(labelOptions) ? labelOptions : {};\n\n\t\tthis.hidden = Type.isBoolean(options.hidden) ? options.hidden : this.hidden;\n\t\tthis.visible = Type.isBoolean(options.visible) ? options.visible : this.visible;\n\n\t\tthis.setColor(options.color);\n\t\tthis.setBgColor(options.bgColor);\n\t\tthis.setText(options.text);\n\t\tthis.setClassName(options.className);\n\t\tthis.setIconClass(options.iconClass);\n\t\tthis.setIconTitle(options.iconTitle);\n\t\tthis.setOnclick(options.onclick);\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('container', () => {\n\t\t\tconst classes = ['side-panel-label'];\n\t\t\tif (this.getClassName())\n\t\t\t{\n\t\t\t\tclasses.push(this.getClassName());\n\t\t\t}\n\n\t\t\tif (this.isHidden())\n\t\t\t{\n\t\t\t\tclasses.push('--hidden');\n\t\t\t}\n\n\t\t\tif (this.isVisible())\n\t\t\t{\n\t\t\t\tclasses.push('--visible');\n\t\t\t}\n\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: classes.join(' '),\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.getIconBox(),\n\t\t\t\t\tthis.getTextContainer(),\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\tclick: this.#handleClick.bind(this),\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tadjustLayout(): void\n\t{\n\t\tconst overlayRect = this.getSlider().getOverlay().getBoundingClientRect();\n\t\tconst containerRect = this.getSlider().getContainer().getBoundingClientRect();\n\t\tconst maxWidth = containerRect.left - overlayRect.left;\n\n\t\tif (maxWidth <= this.getSlider().getMinLeftBoundary())\n\t\t{\n\t\t\tthis.hideText();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showText();\n\t\t}\n\n\t\tDom.style(this.getContainer(), 'max-width', `${maxWidth - this.constructor.MIN_LEFT_OFFSET}px`);\n\t}\n\n\tgetIconBox(): HTMLElement\n\t{\n\t\treturn this.cache.remember('icon-box', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-label-icon-box',\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.getIconContainer(),\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetIconContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('icon-container', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: `side-panel-label-icon ${this.getIconClass()}`,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t#handleClick(event: MouseEvent): void\n\t{\n\t\tevent.stopPropagation();\n\n\t\tconst fn = this.getOnclick();\n\t\tif (fn)\n\t\t{\n\t\t\tfn(this, this.getSlider());\n\t\t}\n\t}\n\n\tshowIcon(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'side-panel-label-icon--hide');\n\t}\n\n\thideIcon(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'side-panel-label-icon--hide');\n\t}\n\n\tdarkenIcon(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'side-panel-label-icon--darken');\n\t}\n\n\tlightenIcon(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'side-panel-label-icon--darken');\n\t}\n\n\thideText(): void\n\t{\n\t\tDom.addClass(this.getTextContainer(), 'side-panel-label-text-hidden');\n\t}\n\n\tshowText(): void\n\t{\n\t\tDom.removeClass(this.getTextContainer(), 'side-panel-label-text-hidden');\n\t}\n\n\tisTextHidden(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getTextContainer(), 'side-panel-label-text-hidden');\n\t}\n\n\tgetTextContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('text-container', () => {\n\t\t\treturn Dom.create('span', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-label-text',\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tsetColor(color: string): void\n\t{\n\t\tif (Type.isStringFilled(color) || color === null)\n\t\t{\n\t\t\tthis.color = color;\n\n\t\t\tDom.style(this.getTextContainer(), 'color', this.color);\n\t\t\tDom.style(this.getIconContainer(), '--ui-icon-set__icon-color', this.color);\n\t\t}\n\t}\n\n\tgetColor(): string | null\n\t{\n\t\treturn this.color;\n\t}\n\n\tsetBgColor(color: string | [string, number], opacity: number): void\n\t{\n\t\tlet bgColor: string = Type.isArray(color) ? color[0] : color;\n\t\tlet alfa: number = Type.isArray(color) ? color[1] : opacity;\n\n\t\tif (Type.isStringFilled(bgColor))\n\t\t{\n\t\t\tconst matches = bgColor.match(/^#([\\dA-Fa-f]{6}|[\\dA-Fa-f]{3})$/);\n\t\t\tif (matches)\n\t\t\t{\n\t\t\t\tlet hex = matches[1];\n\t\t\t\tif (hex.length === 3)\n\t\t\t\t{\n\t\t\t\t\thex = hex.replaceAll(/([\\da-f])/gi, '$1$1');\n\t\t\t\t}\n\n\t\t\t\talfa = Type.isNumber(alfa) && alfa >= 0 && alfa <= 100 ? alfa : 95;\n\t\t\t\tconst alfaHex = `0${Math.round(255 * (alfa / 100)).toString(16)}`.slice(-2).toUpperCase();\n\n\t\t\t\tbgColor = `#${hex}${alfaHex}`;\n\t\t\t}\n\n\t\t\tthis.bgColor = bgColor;\n\t\t\tDom.style(this.getContainer(), '--ui-color', bgColor);\n\n\t\t\tif (this.getColor() === null)\n\t\t\t{\n\t\t\t\tDom.style(this.getIconContainer(), '--ui-icon-set__icon-color', '#fff');\n\t\t\t}\n\t\t}\n\t\telse if (bgColor === null)\n\t\t{\n\t\t\tthis.bgColor = null;\n\t\t\tDom.style(this.getContainer(), '--ui-color', null);\n\t\t\tDom.style(this.getIconContainer(), '--ui-icon-set__icon-color', null);\n\t\t}\n\t}\n\n\tgetBgColor(): string | null\n\t{\n\t\treturn this.bgColor;\n\t}\n\n\tsetText(text: string | null): void\n\t{\n\t\tif (Type.isStringFilled(text))\n\t\t{\n\t\t\tthis.text = text;\n\t\t\tthis.getTextContainer().textContent = text;\n\t\t}\n\t\telse if (text === null)\n\t\t{\n\t\t\tthis.text = text;\n\t\t\tthis.getTextContainer().textContent = '';\n\t\t}\n\t}\n\n\tgetText(): string | null\n\t{\n\t\treturn this.text;\n\t}\n\n\tsetClassName(className: string | null): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), this.className);\n\t\t\tthis.className = className;\n\t\t\tDom.addClass(this.getContainer(), this.className);\n\t\t}\n\t\telse if (className === null)\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), this.className);\n\t\t\tthis.className = className;\n\t\t}\n\t}\n\n\tgetClassName(): string\n\t{\n\t\treturn this.className;\n\t}\n\n\tsetIconClass(iconClass: string | null): void\n\t{\n\t\tif (Type.isStringFilled(iconClass))\n\t\t{\n\t\t\tDom.removeClass(this.getIconContainer(), this.iconClass);\n\t\t\tthis.iconClass = iconClass;\n\t\t\tDom.addClass(this.getIconContainer(), this.iconClass);\n\t\t}\n\t\telse if (iconClass === null)\n\t\t{\n\t\t\tDom.removeClass(this.getIconContainer(), this.iconClass);\n\t\t\tthis.iconClass = iconClass;\n\t\t}\n\t}\n\n\tgetIconClass(): string\n\t{\n\t\treturn this.iconClass;\n\t}\n\n\tsetIconTitle(iconTitle: string | null): void\n\t{\n\t\tif (Type.isStringFilled(iconTitle) || iconTitle === null)\n\t\t{\n\t\t\tDom.attr(this.getIconBox(), 'title', iconTitle);\n\t\t\tthis.iconTitle = iconTitle;\n\t\t}\n\t}\n\n\tgetIconTitle(): void\n\t{\n\t\treturn this.iconTitle;\n\t}\n\n\tisHidden(): boolean\n\t{\n\t\treturn this.hidden;\n\t}\n\n\thide(): void\n\t{\n\t\tthis.hidden = true;\n\t\tDom.addClass(this.getContainer(), '--hidden');\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.hidden = false;\n\t\tDom.removeClass(this.getContainer(), '--hidden');\n\t}\n\n\tisVisible(): boolean\n\t{\n\t\treturn this.visible;\n\t}\n\n\tsetVisible(isVisible: boolean = true): void\n\t{\n\t\tDom.toggleClass(this.getContainer(), '--visible', isVisible);\n\t}\n\n\tsetOnclick(fn: Function): void\n\t{\n\t\tif (Type.isFunction(fn) || fn === null)\n\t\t{\n\t\t\tthis.onclick = fn;\n\t\t}\n\t}\n\n\tgetOnclick(): string | null\n\t{\n\t\treturn this.onclick;\n\t}\n\n\tgetSlider(): Slider\n\t{\n\t\treturn this.slider;\n\t}\n\n\tmoveAt(position: number): void\n\t{\n\t\tif (Type.isNumber(position) && position >= 0)\n\t\t{\n\t\t\tDom.style(\n\t\t\t\tthis.getSlider().getLabelsContainer(),\n\t\t\t\t'top',\n\t\t\t\t`${this.constructor.MIN_TOP_OFFSET + (position * this.constructor.INTERVAL_TOP_OFFSET)}px`,\n\t\t\t);\n\t\t}\n\t}\n}\n","import { Type } from 'main.core';\nimport { Slider } from './slider';\n\nexport class SliderEvent\n{\n\tconstructor()\n\t{\n\t\tthis.slider = null;\n\t\tthis.action = true;\n\t\tthis.name = null;\n\t}\n\n\tallowAction(): void\n\t{\n\t\tthis.action = true;\n\t}\n\n\tdenyAction(): void\n\t{\n\t\tthis.action = false;\n\t}\n\n\tisActionAllowed(): boolean\n\t{\n\t\treturn this.action;\n\t}\n\n\t/**\n\t * @deprecated use getSlider method\n\t */\n\tgetSliderPage(): Slider\n\t{\n\t\treturn this.slider;\n\t}\n\n\tgetSlider(): Slider\n\t{\n\t\treturn this.slider;\n\t}\n\n\tsetSlider(slider: Slider): void\n\t{\n\t\tif (slider instanceof Slider)\n\t\t{\n\t\t\tthis.slider = slider;\n\t\t}\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.name;\n\t}\n\n\tsetName(name: string): void\n\t{\n\t\tif (Type.isStringFilled(name))\n\t\t{\n\t\t\tthis.name = name;\n\t\t}\n\t}\n\n\tgetFullName(): string\n\t{\n\t\treturn Slider.getEventFullName(this.getName());\n\t}\n}\n","import { Type, type JsonObject } from 'main.core';\n\nimport { Slider } from './slider';\nimport { SliderEvent } from './slider-event';\n\nexport class MessageEvent extends SliderEvent\n{\n\tconstructor(eventOptions)\n\t{\n\t\tsuper();\n\n\t\tconst options = Type.isPlainObject(eventOptions) ? eventOptions : {};\n\n\t\tif (!(options.sender instanceof Slider))\n\t\t{\n\t\t\tthrow new TypeError('\\'sender\\' is not an instance of BX.SidePanel.Slider');\n\t\t}\n\n\t\tthis.setName('onMessage');\n\t\tthis.setSlider(options.slider);\n\n\t\tthis.sender = options.sender;\n\t\tthis.data = 'data' in options ? options.data : null;\n\t\tthis.eventId = Type.isStringFilled(options.eventId) ? options.eventId : null;\n\t}\n\n\tgetSlider(): Slider | null\n\t{\n\t\treturn this.slider;\n\t}\n\n\tgetSender(): Slider\n\t{\n\t\treturn this.sender;\n\t}\n\n\tgetData(): JsonObject\n\t{\n\t\treturn this.data;\n\t}\n\n\tgetEventId(): string | null\n\t{\n\t\treturn this.eventId;\n\t}\n}\n","import { Type, Loc, Dom, Event, Runtime, Text, Browser, Uri, Tag, type JsonObject } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MemoryCache, type BaseCache } from 'main.core.cache';\nimport { ZIndexManager, type ZIndexComponent } from 'main.core.z-index-manager';\nimport type { Popup } from 'main.popup';\n\nimport { Dictionary } from './dictionary';\nimport { Label } from './label';\nimport { MessageEvent } from './message-event';\nimport { SliderEvent } from './slider-event';\n\nimport type { SliderOptions, SliderEvents } from './types/slider-options';\nimport { type MinimizeOptions } from './types/minimize-options';\nimport { type OuterBoundary } from './types/outer-boundary';\n\nexport class Slider\n{\n\t#refs: BaseCache<HTMLElement> = new MemoryCache();\n\n\t#startPosition: 'right' | 'bottom' | 'top' = 'right';\n\t#startAnimationState: JsonObject = null;\n\t#endAnimationState: JsonObject = null;\n\t#currentAnimationState: JsonObject = null;\n\t#outerBoundary: OuterBoundary = {};\n\t#hideToolbarOnOpen: boolean = false;\n\t#designSystemContext: string = '--ui-context-content-light';\n\t#zIndexComponent: ZIndexComponent = null;\n\t#autoOffset: boolean = true;\n\n\tconstructor(url: string, sliderOptions: SliderOptions)\n\t{\n\t\tconst options: SliderOptions = Type.isPlainObject(sliderOptions) ? sliderOptions : {};\n\n\t\tthis.contentCallback = Type.isFunction(options.contentCallback) ? options.contentCallback : null;\n\t\tthis.contentCallbackInvoved = false;\n\t\tthis.contentClassName = Type.isStringFilled(options.contentClassName) ? options.contentClassName : null;\n\t\tthis.containerClassName = Type.isStringFilled(options.containerClassName) ? options.containerClassName : null;\n\t\tthis.overlayClassName = Type.isStringFilled(options.overlayClassName) ? options.overlayClassName : null;\n\n\t\tthis.url = this.contentCallback ? url : this.refineUrl(url);\n\n\t\tthis.offset = null;\n\t\tthis.hideControls = options.hideControls === true;\n\t\tthis.width = Type.isNumber(options.width) ? options.width : null;\n\t\tthis.cacheable = options.cacheable !== false;\n\t\tthis.autoFocus = options.autoFocus !== false;\n\t\tthis.printable = options.printable === true;\n\t\tthis.allowChangeHistory = Type.isBoolean(options.allowChangeHistory) ? options.allowChangeHistory : null;\n\t\tthis.allowChangeTitle = Type.isBoolean(options.allowChangeTitle) ? options.allowChangeTitle : null;\n\t\tthis.allowCrossOrigin = options.allowCrossOrigin === true;\n\t\tthis.data = new Dictionary(Type.isPlainObject(options.data) ? options.data : {});\n\n\t\tthis.customLeftBoundary = null;\n\t\tthis.customRightBoundary = null;\n\t\tthis.setCustomLeftBoundary(options.customLeftBoundary);\n\t\tthis.setCustomRightBoundary(options.customRightBoundary);\n\n\t\tthis.title = null;\n\t\tthis.setTitle(options.title);\n\t\t/**\n\t\t *\n\t\t * @type {HTMLIFrameElement}\n\t\t */\n\t\tthis.iframe = null;\n\t\tthis.iframeSrc = null;\n\t\tthis.iframeId = null;\n\t\tthis.requestMethod = (\n\t\t\tType.isStringFilled(options.requestMethod) && options.requestMethod.toLowerCase() === 'post'\n\t\t\t\t? 'post'\n\t\t\t\t: 'get'\n\t\t);\n\t\tthis.requestParams = Type.isPlainObject(options.requestParams) ? options.requestParams : {};\n\n\t\tthis.opened = false;\n\t\tthis.hidden = false;\n\t\tthis.destroyed = false;\n\t\tthis.loaded = false;\n\t\tthis.loadedCnt = 0;\n\n\t\tthis.minimizing = false;\n\t\tthis.maximizing = false;\n\n\t\tthis.handleFrameKeyDown = this.handleFrameKeyDown.bind(this);\n\t\tthis.handleFrameFocus = this.handleFrameFocus.bind(this);\n\t\tthis.handleFrameUnload = this.handleFrameUnload.bind(this);\n\t\tthis.handlePopupInit = this.handlePopupInit.bind(this);\n\t\tthis.handleCrossOriginWindowMessage = this.handleCrossOriginWindowMessage.bind(this);\n\n\t\tthis.layout = {\n\t\t\toverlay: null,\n\t\t\tcontainer: null,\n\t\t\tloader: null,\n\t\t\tcontent: null,\n\t\t};\n\n\t\tthis.loader = (\n\t\t\tType.isStringFilled(options.loader) || Type.isElementNode(options.loader)\n\t\t\t\t? options.loader\n\t\t\t\t: (Type.isStringFilled(options.typeLoader) ? options.typeLoader : 'default-loader')\n\t\t);\n\n\t\tthis.animation = null;\n\t\tthis.animationDuration = Type.isNumber(options.animationDuration) ? options.animationDuration : 200;\n\t\tthis.overlayBgColor = (\n\t\t\tType.isStringFilled(options.overlayBgColor) && /^#[\\dA-Za-f]{6}$/.test(options.overlayBgColor)\n\t\t\t\t? options.overlayBgColor\n\t\t\t\t: '#000000'\n\t\t);\n\t\tthis.overlayOpacity = (\n\t\t\tType.isNumber(options.overlayOpacity)\n\t\t\t\t? Math.min(Math.max(options.overlayOpacity, 0), 100)\n\t\t\t\t: 40\n\t\t);\n\n\t\tthis.overlayBgCallback = Type.isFunction(options.overlayBgCallback) ? options.overlayBgCallback : null;\n\n\t\tthis.#startPosition = (\n\t\t\t['right', 'bottom', 'top'].includes(options.startPosition)\n\t\t\t\t? options.startPosition\n\t\t\t\t: this.#startPosition\n\t\t);\n\t\tthis.#outerBoundary = Type.isPlainObject(options.outerBoundary) ? options.outerBoundary : {};\n\t\tthis.#startAnimationState = this.#getAnimationState('start');\n\t\tthis.#endAnimationState = this.#getAnimationState('end');\n\t\tthis.#currentAnimationState = null;\n\n\t\tthis.overlayAnimation = false;\n\t\tthis.animationName = 'sliding';\n\t\tthis.animationOptions = {};\n\n\t\tthis.minimizeOptions = null;\n\t\tthis.setMinimizeOptions(options.minimizeOptions);\n\t\tthis.setToolbarOnOpen(options.hideToolbarOnOpen);\n\t\tthis.setDesignSystemContext(options.designSystemContext);\n\t\tthis.setAutoOffset(options.autoOffset);\n\n\t\tthis.label = new Label(this, {\n\t\t\tclassName: '--close-label --ui-hoverable',\n\t\t\ticonClass: 'side-panel-label-icon-close ui-icon-set --cross-l',\n\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_CLOSE'),\n\t\t\tonclick(label, slider)\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t},\n\t\t});\n\n\t\tconst labelOptions = Type.isPlainObject(options.label) ? options.label : {};\n\t\tthis.label.setText(labelOptions.text);\n\t\tthis.label.setColor(labelOptions.color);\n\t\tthis.label.setBgColor(labelOptions.bgColor, labelOptions.opacity);\n\n\t\tthis.minimizeLabel = new Label(this, {\n\t\t\tclassName: '--ui-hoverable',\n\t\t\ticonClass: 'side-panel-label-icon-minimize ui-icon-set --o-minimize',\n\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_MINIMIZE'),\n\t\t\tonclick: (label, slider) => {\n\t\t\t\tif (this.isLoaded())\n\t\t\t\t{\n\t\t\t\t\tthis.minimize();\n\t\t\t\t}\n\t\t\t},\n\t\t\tvisible: this.areMinimizeOptionsValid(this.minimizeOptions),\n\t\t});\n\t\tthis.newWindowLabel = null;\n\t\tthis.copyLinkLabel = null;\n\t\tthis.printLabel = null;\n\n\t\tif (options.newWindowLabel === true && (this.canChangeHistory() || Type.isStringFilled(options.newWindowUrl)))\n\t\t{\n\t\t\tthis.newWindowLabel = new Label(this, {\n\t\t\t\tclassName: '--ui-hoverable',\n\t\t\t\ticonClass: 'side-panel-label-icon-new-window ui-icon-set --go-to-l',\n\t\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_NEW_WINDOW'),\n\t\t\t\tonclick(label, slider)\n\t\t\t\t{\n\t\t\t\t\tconst newWindowUrl = Type.isStringFilled(options.newWindowUrl) ? options.newWindowUrl : slider.getUrl();\n\t\t\t\t\tObject.assign(document.createElement('a'), {\n\t\t\t\t\t\ttarget: '_blank',\n\t\t\t\t\t\thref: newWindowUrl,\n\t\t\t\t\t}).click();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (options.copyLinkLabel === true && (this.canChangeHistory() || Type.isStringFilled(options.newWindowUrl)))\n\t\t{\n\t\t\tthis.copyLinkLabel = new Label(this, {\n\t\t\t\tclassName: '--ui-hoverable',\n\t\t\t\ticonClass: 'side-panel-label-icon-copy-link ui-icon-set --o-link',\n\t\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_COPY_LINK'),\n\t\t\t});\n\n\t\t\tBX.clipboard.bindCopyClick(\n\t\t\t\tthis.copyLinkLabel.getIconBox(),\n\t\t\t\t{\n\t\t\t\t\ttext: () => {\n\t\t\t\t\t\tconst link = document.createElement('a');\n\t\t\t\t\t\tlink.href = Type.isStringFilled(options.newWindowUrl) ? options.newWindowUrl : this.getUrl();\n\n\t\t\t\t\t\treturn link.href;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tthis.printLabel = new Label(this, {\n\t\t\thidden: !this.isPrintable(),\n\t\t\tclassName: '--side-panel-label-print --ui-hoverable',\n\t\t\ticonClass: 'side-panel-label-icon-print ui-icon-set --o-printer',\n\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_PRINT'),\n\t\t\tonclick: this.handlePrintBtnClick.bind(this),\n\t\t});\n\n\t\t// Compatibility\n\t\tif (\n\t\t\tthis.url.includes('crm.activity.planner/slider.php')\n\t\t\t&& options.events\n\t\t\t&& Type.isFunction(options.events.onOpen)\n\t\t\t&& options.events.compatibleEvents !== false\n\t\t)\n\t\t{\n\t\t\tconst onOpen = options.events.onOpen;\n\t\t\tdelete options.events.onOpen;\n\t\t\toptions.events.onLoad = function(event) {\n\t\t\t\tonOpen(event.getSlider());\n\t\t\t};\n\t\t}\n\n\t\t[options.events].flat().forEach((events: SliderEvents) => this.#subscribeEvents(events));\n\t}\n\n\t#subscribeEvents(events: SliderEvents): void\n\t{\n\t\tif (Type.isPlainObject(events))\n\t\t{\n\t\t\tfor (const [eventName, fn] of Object.entries(events))\n\t\t\t{\n\t\t\t\tif (Type.isFunction(fn))\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.subscribe(this, Slider.getEventFullName(eventName), fn, { compatMode: true });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getEventFullName(eventName: string): string\n\t{\n\t\treturn `SidePanel.Slider:${eventName}`;\n\t}\n\n\topen(): boolean\n\t{\n\t\tif (this.isOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.canOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.isDestroyed())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.maximizing)\n\t\t{\n\t\t\tthis.fireEvent('onMaximizeStart');\n\t\t}\n\n\t\tthis.createLayout();\n\n\t\tDom.removeClass(this.getOverlay(), '--closing');\n\t\tDom.addClass(this.getOverlay(), '--opening');\n\n\t\tthis.adjustLayout();\n\n\t\tZIndexManager.bringToFront(this.getOverlay());\n\n\t\tthis.opened = true;\n\n\t\tthis.fireEvent('onOpenStart');\n\n\t\tthis.animateOpening();\n\n\t\treturn true;\n\t}\n\n\tclose(immediately: boolean, callback: Function): boolean\n\t{\n\t\tif (!this.isOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.canClose())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.minimizing)\n\t\t{\n\t\t\tthis.fireEvent('onMinimizeStart');\n\t\t}\n\n\t\tthis.fireEvent('onCloseStart');\n\n\t\tthis.opened = false;\n\n\t\tif (this.isDestroyed())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.animation)\n\t\t{\n\t\t\tthis.animation.stop();\n\t\t}\n\n\t\tDom.removeClass(this.getOverlay(), '--opening');\n\t\tDom.addClass(this.getOverlay(), '--closing');\n\n\t\tthis.fireEvent('onClosing');\n\n\t\tif (immediately === true || Browser.isMobile())\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#startAnimationState;\n\t\t\tthis.completeAnimation(callback);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.animation = new BX.easing({\n\t\t\t\tduration: this.animationDuration,\n\t\t\t\tstart: this.#currentAnimationState,\n\t\t\t\tfinish: this.#startAnimationState,\n\t\t\t\tstep: (state) => {\n\t\t\t\t\tthis.#currentAnimationState = state;\n\t\t\t\t\tthis.animateStep(state);\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tthis.completeAnimation(callback);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Chrome rendering bug\n\t\t\tDom.style(this.getContainer(), 'opacity', 0.96);\n\n\t\t\tif (this.animationName === 'scale' && Type.isStringFilled(this.animationOptions.origin))\n\t\t\t{\n\t\t\t\tDom.style(this.getContainer(), 'transform-origin', this.animationOptions.origin);\n\t\t\t}\n\n\t\t\tthis.animation.animate();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tminimize(immediately, callback): boolean\n\t{\n\t\tthis.minimizing = true;\n\n\t\tconst success = this.close(immediately, callback);\n\t\tif (!success)\n\t\t{\n\t\t\tthis.minimizing = false;\n\t\t}\n\n\t\treturn success;\n\t}\n\n\tisMinimizing(): boolean\n\t{\n\t\treturn this.minimizing;\n\t}\n\n\tmaximize(): boolean\n\t{\n\t\tthis.maximizing = true;\n\t\tconst success = this.open();\n\t\tif (!success)\n\t\t{\n\t\t\tthis.maximizing = false;\n\t\t}\n\n\t\treturn success;\n\t}\n\n\tisMaximizing(): boolean\n\t{\n\t\treturn this.maximizing;\n\t}\n\n\tsetAnimation(type, options): void\n\t{\n\t\tthis.animationName = type === 'scale' ? type : 'sliding';\n\t\tthis.animationOptions = Type.isPlainObject(options) ? options : {};\n\t}\n\n\tsetMinimizeOptions(minimizeOptions: MinimizeOptions | null): void\n\t{\n\t\tconst showMinimizeLabel = this.areMinimizeOptionsValid(minimizeOptions);\n\n\t\tthis.minimizeOptions = minimizeOptions;\n\t\tthis.minimizeLabel?.setVisible(showMinimizeLabel);\n\t}\n\n\tareMinimizeOptionsValid(minimizeOptions: ?MinimizeOptions): boolean\n\t{\n\t\treturn Type.isPlainObject(minimizeOptions)\n\t\t\t&& Type.isStringFilled(minimizeOptions.entityType)\n\t\t\t&& (Type.isStringFilled(minimizeOptions.entityId) || Type.isNumber(minimizeOptions.entityId))\n\t\t\t&& Type.isStringFilled(minimizeOptions.url)\n\t\t;\n\t}\n\n\tgetMinimizeOptions(): MinimizeOptions | null\n\t{\n\t\treturn this.minimizeOptions;\n\t}\n\n\tsetToolbarOnOpen(flag: boolean): void\n\t{\n\t\tif (Type.isBoolean(flag))\n\t\t{\n\t\t\tthis.#hideToolbarOnOpen = flag;\n\t\t}\n\t}\n\n\tshouldHideToolbarOnOpen(): boolean\n\t{\n\t\treturn this.#hideToolbarOnOpen;\n\t}\n\n\t#getAnimationState(mode: 'start' | 'end'): JsonObject\n\t{\n\t\tconst states = {\n\t\t\tright: {\n\t\t\t\tstart: {\n\t\t\t\t\ttranslateX: 100,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tscale: 0,\n\t\t\t\t\tprogress: 0,\n\t\t\t\t\tintensity: 0,\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: this.overlayOpacity,\n\t\t\t\t\tscale: 100,\n\t\t\t\t\tprogress: 100,\n\t\t\t\t\tintensity: 255,\n\t\t\t\t},\n\t\t\t},\n\t\t\tbottom: {\n\t\t\t\tstart: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 100,\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tscale: 0,\n\t\t\t\t\tprogress: 0,\n\t\t\t\t\tintensity: 0,\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: this.overlayOpacity,\n\t\t\t\t\tscale: 100,\n\t\t\t\t\tprogress: 100,\n\t\t\t\t\tintensity: 255,\n\t\t\t\t},\n\t\t\t},\n\t\t\ttop: {\n\t\t\t\tstart: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: -100,\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tscale: 0,\n\t\t\t\t\tprogress: 0,\n\t\t\t\t\tintensity: 0,\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: this.overlayOpacity,\n\t\t\t\t\tscale: 100,\n\t\t\t\t\tprogress: 100,\n\t\t\t\t\tintensity: 255,\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn states[this.#startPosition][mode];\n\t}\n\n\tgetDesignSystemContext(): string\n\t{\n\t\treturn this.#designSystemContext;\n\t}\n\n\tsetDesignSystemContext(context: string): void\n\t{\n\t\tif (Type.isString(context))\n\t\t{\n\t\t\tif (this.layout.container !== null)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.layout.container, this.#designSystemContext);\n\t\t\t\tDom.addClass(this.layout.container, context);\n\t\t\t}\n\n\t\t\tthis.#designSystemContext = context;\n\t\t}\n\t}\n\n\tgetUrl(): string\n\t{\n\t\treturn this.url;\n\t}\n\n\tsetUrl(url: string): void\n\t{\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\tthis.url = url;\n\t\t}\n\t}\n\n\tfocus(): void\n\t{\n\t\tthis.getWindow().focus();\n\n\t\t// if (this.isSelfContained())\n\t\t// {\n\t\t// \tthis.getContentContainer().setAttribute(\"tabindex\", \"0\");\n\t\t// \tthis.getContentContainer().focus();\n\t\t// }\n\t}\n\n\tisOpen(): boolean\n\t{\n\t\treturn this.opened;\n\t}\n\n\tgetStartPosition(): 'right' | 'bottom' | 'top'\n\t{\n\t\treturn this.#startPosition;\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\tsetZindex(zIndex: number): void\n\t{}\n\n\t/**\n\t * @public\n\t * @returns {number}\n\t */\n\tgetZindex(): number\n\t{\n\t\treturn this.getZIndexComponent().getZIndex();\n\t}\n\n\tgetZIndexComponent(): ZIndexComponent | null\n\t{\n\t\treturn this.#zIndexComponent;\n\t}\n\n\tsetOffset(offset: number | null): void\n\t{\n\t\tif (Type.isNumber(offset) || offset === null)\n\t\t{\n\t\t\tthis.offset = offset;\n\t\t}\n\t}\n\n\tgetOffset(): number | null\n\t{\n\t\treturn this.offset;\n\t}\n\n\tsetAutoOffset(autoOffset: boolean): void\n\t{\n\t\tif (Type.isBoolean(autoOffset))\n\t\t{\n\t\t\tthis.#autoOffset = autoOffset;\n\t\t}\n\t}\n\n\tshouldUseAutoOffset(): boolean\n\t{\n\t\treturn this.#autoOffset;\n\t}\n\n\tsetWidth(width: number): void\n\t{\n\t\tif (Type.isNumber(width))\n\t\t{\n\t\t\tthis.width = width;\n\t\t}\n\t}\n\n\tgetWidth(): number\n\t{\n\t\treturn this.width;\n\t}\n\n\tsetTitle(title: string): void\n\t{\n\t\tif (Type.isStringFilled(title))\n\t\t{\n\t\t\tthis.title = title;\n\t\t}\n\t}\n\n\tgetTitle(): string | null\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetData(): Dictionary\n\t{\n\t\treturn this.data;\n\t}\n\n\tisSelfContained(): boolean\n\t{\n\t\treturn this.contentCallback !== null;\n\t}\n\n\tisPostMethod(): boolean\n\t{\n\t\treturn this.requestMethod === 'post';\n\t}\n\n\tgetRequestParams(): JsonObject\n\t{\n\t\treturn this.requestParams;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetFrameId(): string\n\t{\n\t\tif (this.iframeId === null)\n\t\t{\n\t\t\tthis.iframeId = `iframe_${Text.getRandom(10).toLowerCase()}`;\n\t\t}\n\n\t\treturn this.iframeId;\n\t}\n\n\tgetWindow(): Window\n\t{\n\t\treturn this.iframe ? this.iframe.contentWindow : window;\n\t}\n\n\tgetFrameWindow(): Window | null\n\t{\n\t\treturn this.iframe ? this.iframe.contentWindow : null;\n\t}\n\n\tisHidden(): boolean\n\t{\n\t\treturn this.hidden;\n\t}\n\n\tisCacheable(): boolean\n\t{\n\t\treturn this.cacheable;\n\t}\n\n\tisFocusable(): boolean\n\t{\n\t\treturn this.autoFocus;\n\t}\n\n\tisPrintable(): boolean\n\t{\n\t\treturn this.printable;\n\t}\n\n\tisDestroyed(): boolean\n\t{\n\t\treturn this.destroyed;\n\t}\n\n\tisLoaded(): boolean\n\t{\n\t\treturn this.loaded;\n\t}\n\n\tcanChangeHistory(): boolean\n\t{\n\t\tif (this.allowCrossOrigin || /^\\/bitrix\\/(components|tools)\\//i.test(this.getUrl()))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.allowChangeHistory === null)\n\t\t{\n\t\t\treturn !this.isSelfContained();\n\t\t}\n\n\t\treturn this.allowChangeHistory;\n\t}\n\n\tcanChangeTitle(): boolean\n\t{\n\t\tif (this.allowChangeTitle === null)\n\t\t{\n\t\t\tif (this.getTitle() !== null)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn this.canChangeHistory();\n\t\t}\n\n\t\treturn this.allowChangeTitle;\n\t}\n\n\tsetCacheable(cacheable: boolean = true): void\n\t{\n\t\tthis.cacheable = cacheable !== false;\n\t}\n\n\tsetAutoFocus(autoFocus: boolean = true): void\n\t{\n\t\tthis.autoFocus = autoFocus !== false;\n\t}\n\n\t/**\n\t * @public\n\t * @param {boolean} printable\n\t */\n\tsetPrintable(printable: boolean = true): void\n\t{\n\t\tthis.printable = printable !== false;\n\t\tif (this.printable)\n\t\t{\n\t\t\tthis.showPrintBtn();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hidePrintBtn();\n\t\t}\n\t}\n\n\tgetLoader(): string\n\t{\n\t\treturn this.loader;\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tconst loader = this.getLoader();\n\t\tif (!this.layout.loader)\n\t\t{\n\t\t\tthis.createLoader(loader);\n\t\t}\n\n\t\tDom.style(this.layout.loader, { opacity: 1, display: 'block' });\n\t}\n\n\tcloseLoader(): void\n\t{\n\t\tif (this.layout.loader)\n\t\t{\n\t\t\tDom.style(this.layout.loader, { opacity: 0, display: 'none' });\n\t\t}\n\t}\n\n\tshowCloseBtn(): void\n\t{\n\t\tthis.getLabel().show();\n\t}\n\n\thideCloseBtn(): void\n\t{\n\t\tthis.getLabel().hide();\n\t}\n\n\tshowOrLightenCloseBtn(): void\n\t{\n\t\tif (Type.isStringFilled(this.getLabel().getText()))\n\t\t{\n\t\t\tthis.getLabel().showIcon();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getLabel().lightenIcon();\n\t\t}\n\t}\n\n\thideOrDarkenCloseBtn(): void\n\t{\n\t\tif (Type.isStringFilled(this.getLabel().getText()))\n\t\t{\n\t\t\tthis.getLabel().hideIcon();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getLabel().darkenIcon();\n\t\t}\n\t}\n\n\tshowPrintBtn(): void\n\t{\n\t\tif (this.printLabel !== null)\n\t\t{\n\t\t\tthis.printLabel.show();\n\t\t}\n\t}\n\n\thidePrintBtn(): void\n\t{\n\t\tif (this.printLabel !== null)\n\t\t{\n\t\t\tthis.printLabel.hide();\n\t\t}\n\t}\n\n\tshowExtraLabels(): void\n\t{\n\t\tDom.removeClass(this.getExtraLabelsContainer(), '--hidden');\n\t}\n\n\thideExtraLabels(): void\n\t{\n\t\tDom.addClass(this.getExtraLabelsContainer(), '--hidden');\n\t}\n\n\tsetContentClass(className: string): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tthis.removeContentClass();\n\t\t\tthis.contentClassName = className;\n\t\t\tDom.addClass(this.getContentContainer(), className);\n\t\t}\n\t}\n\n\tremoveContentClass(): void\n\t{\n\t\tif (this.contentClassName !== null)\n\t\t{\n\t\t\tDom.removeClass(this.getContentContainer(), this.contentClassName);\n\t\t\tthis.contentClassName = null;\n\t\t}\n\t}\n\n\tsetContainerClass(className: string): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tthis.removeContainerClass();\n\t\t\tthis.containerClassName = className;\n\t\t\tDom.addClass(this.getContainer(), className);\n\t\t}\n\t}\n\n\tremoveContainerClass(): void\n\t{\n\t\tif (this.containerClassName !== null)\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), this.containerClassName);\n\t\t\tthis.containerClassName = null;\n\t\t}\n\t}\n\n\tsetOverlayClass(className: string): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tthis.removeOverlayClass();\n\t\t\tthis.overlayClassName = className;\n\t\t\tDom.addClass(this.getOverlay(), className);\n\t\t}\n\t}\n\n\tremoveOverlayClass(): void\n\t{\n\t\tif (this.overlayClassName !== null)\n\t\t{\n\t\t\tDom.removeClass(this.getOverlay(), this.overlayClassName);\n\t\t\tthis.overlayClassName = null;\n\t\t}\n\t}\n\n\tapplyHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tapplyPostHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tresetHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tresetPostHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tgetTopBoundary(): number\n\t{\n\t\treturn 0;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\tcalculateLeftBoundary(): number\n\t{\n\t\tconst customLeftBoundary = this.getCustomLeftBoundary();\n\t\tif (customLeftBoundary !== null)\n\t\t{\n\t\t\treturn customLeftBoundary;\n\t\t}\n\n\t\treturn this.getLeftBoundary();\n\t}\n\n\tgetLeftBoundary(): number\n\t{\n\t\tconst windowWidth = Browser.isMobile() ? window.innerWidth : document.documentElement.clientWidth;\n\n\t\treturn windowWidth < 1160 ? this.getMinLeftBoundary() : 300;\n\t}\n\n\tgetMinLeftBoundary(): number\n\t{\n\t\treturn this.hideControls && this.getCustomLeftBoundary() !== null ? 0 : 65;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tgetLeftBoundaryOffset(): number\n\t{\n\t\tconst offset = this.getOffset() === null ? 0 : this.getOffset();\n\n\t\treturn Math.max(this.calculateLeftBoundary(), this.getMinLeftBoundary()) + offset;\n\t}\n\n\tsetCustomLeftBoundary(boundary: number | null): void\n\t{\n\t\tif (Type.isNumber(boundary) || boundary === null)\n\t\t{\n\t\t\tthis.customLeftBoundary = boundary;\n\t\t}\n\t}\n\n\tgetCustomLeftBoundary(): number\n\t{\n\t\treturn this.customLeftBoundary;\n\t}\n\n\tsetCustomRightBoundary(boundary: number | null): void\n\t{\n\t\tif (Type.isNumber(boundary) || boundary === null)\n\t\t{\n\t\t\tthis.customRightBoundary = boundary;\n\t\t}\n\t}\n\n\tgetCustomRightBoundary(): number\n\t{\n\t\treturn this.customRightBoundary;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\tcalculateRightBoundary(): number\n\t{\n\t\tconst customRightBoundary = this.getCustomRightBoundary();\n\t\tif (customRightBoundary !== null)\n\t\t{\n\t\t\treturn -window.pageXOffset + customRightBoundary;\n\t\t}\n\n\t\treturn this.getRightBoundary();\n\t}\n\n\tgetRightBoundary(): number\n\t{\n\t\treturn -window.pageXOffset;\n\t}\n\n\tgetOuterBoundary(): OuterBoundary\n\t{\n\t\treturn this.#outerBoundary;\n\t}\n\n\tcalculateOuterBoundary(): OuterBoundary\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\t#calculateOuterBoundary(): OuterBoundary\n\t{\n\t\tconst outerBoundary = this.calculateOuterBoundary();\n\n\t\treturn Runtime.merge(Type.isPlainObject(outerBoundary) ? outerBoundary : {}, this.getOuterBoundary());\n\t}\n\n\tdestroy(): boolean\n\t{\n\t\tif (this.isDestroyed())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.firePageEvent('onDestroy');\n\t\tthis.fireFrameEvent('onDestroy');\n\n\t\tconst frameWindow = this.getFrameWindow();\n\t\tif (frameWindow && !this.allowCrossOrigin)\n\t\t{\n\t\t\tEvent.unbind(frameWindow, 'keydown', this.handleFrameKeyDown);\n\t\t\tEvent.unbind(frameWindow, 'focus', this.handleFrameFocus);\n\t\t\tEvent.unbind(frameWindow, 'unload', this.handleFrameUnload);\n\t\t}\n\t\telse if (this.allowCrossOrigin)\n\t\t{\n\t\t\tEvent.unbind(window, 'message', this.handleCrossOriginWindowMessage);\n\t\t}\n\n\t\tEventEmitter.unsubscribe('BX.Main.Popup:onInit', this.handlePopupInit);\n\t\tZIndexManager.unregister(this.layout.overlay);\n\t\tthis.#zIndexComponent = null;\n\n\t\tDom.remove(this.layout.overlay);\n\n\t\tthis.layout.container = null;\n\t\tthis.layout.overlay = null;\n\t\tthis.layout.content = null;\n\t\tthis.layout.closeBtn = null;\n\t\tthis.layout.loader = null;\n\n\t\tthis.#refs = null;\n\n\t\tthis.iframe = null;\n\t\tthis.destroyed = true;\n\n\t\tEventEmitter.unsubscribeAll(this);\n\n\t\tthis.firePageEvent('onDestroyComplete');\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\thide(): void\n\t{\n\t\tthis.hidden = true;\n\n\t\tDom.style(this.getContainer(), 'display', 'none');\n\t\tDom.style(this.getOverlay(), 'display', 'none');\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tunhide(): void\n\t{\n\t\tthis.hidden = false;\n\n\t\tDom.style(this.getContainer(), 'display', null);\n\t\tDom.style(this.getOverlay(), 'display', null);\n\t}\n\n\t/**\n\t * @public\n\t */\n\treload(): void\n\t{\n\t\tthis.loaded = false;\n\t\tif (this.isSelfContained())\n\t\t{\n\t\t\tthis.contentCallbackInvoved = false;\n\t\t\tthis.showLoader();\n\t\t\tthis.setContent();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showLoader();\n\t\t\tthis.getFrameWindow().location.reload();\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t */\n\tadjustLayout(): void\n\t{\n\t\tconst scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\t\tconst windowHeight = Browser.isMobile() ? window.innerHeight : document.documentElement.clientHeight;\n\n\t\tlet topBoundary = this.getTopBoundary();\n\t\tconst isTopBoundaryVisible = topBoundary - scrollTop > 0;\n\t\ttopBoundary = isTopBoundaryVisible ? topBoundary : scrollTop;\n\n\t\tconst height = isTopBoundaryVisible > 0 ? windowHeight - topBoundary + scrollTop : windowHeight;\n\t\tconst leftBoundary = this.getLeftBoundaryOffset();\n\t\tconst rightBoundary = this.calculateRightBoundary();\n\n\t\tDom.style(\n\t\t\tthis.getOverlay(),\n\t\t\t{\n\t\t\t\tleft: `${window.pageXOffset}px`,\n\t\t\t\ttop: `${topBoundary}px`,\n\t\t\t\tright: `${rightBoundary}px`,\n\t\t\t\theight: `${height}px`,\n\t\t\t},\n\t\t);\n\n\t\tconst { right = null, top = null, bottom = null } = this.#calculateOuterBoundary();\n\n\t\tDom.style(\n\t\t\tthis.getContainer(),\n\t\t\t{\n\t\t\t\twidth: `calc(100% - ${leftBoundary + (right === null ? 0 : right)}px)`,\n\t\t\t\tmaxWidth: this.getWidth() === null ? null : `${this.getWidth()}px`,\n\t\t\t\tright: right === null ? null : `${right}px`,\n\t\t\t\ttop: top === null ? null : `${top}px`,\n\t\t\t\tbottom: bottom === null ? null : `${bottom}px`,\n\t\t\t\t// height: `${height}px`, // height: '100%',\n\t\t\t},\n\t\t);\n\n\t\tthis.getLabel().adjustLayout();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateLayout()\n\t{\n\t\tif (this.layout.overlay !== null && this.layout.overlay.parentNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isSelfContained())\n\t\t{\n\t\t\tDom.addClass(this.getOverlay(), '--self-contained');\n\t\t\tDom.append(this.getOverlay(), document.body);\n\n\t\t\tthis.setContent();\n\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onInit', this.handlePopupInit);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.append(this.getFrame(), this.getContentContainer());\n\t\t\tDom.append(this.getOverlay(), document.body);\n\t\t\tthis.setFrameSrc(); // setFrameSrc must be below than appendChild, otherwise POST method fails.\n\t\t}\n\n\t\tthis.#zIndexComponent = ZIndexManager.register(this.getOverlay());\n\t}\n\n\tgetFrame(): HTMLIFrameElement\n\t{\n\t\tif (this.iframe !== null)\n\t\t{\n\t\t\treturn this.iframe;\n\t\t}\n\n\t\tthis.iframe = Dom.create('iframe', {\n\t\t\tattrs: {\n\t\t\t\treferrerpolicy: this.allowCrossOrigin ? 'strict-origin' : false,\n\t\t\t\tsrc: 'about:blank',\n\t\t\t\tframeborder: '0',\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tclassName: 'side-panel-iframe',\n\t\t\t\tname: this.getFrameId(),\n\t\t\t\tid: this.getFrameId(),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tload: this.handleFrameLoad.bind(this),\n\t\t\t},\n\t\t});\n\n\t\treturn this.iframe;\n\t}\n\n\tgetOverlay(): HTMLElement\n\t{\n\t\tif (this.layout.overlay !== null)\n\t\t{\n\t\t\treturn this.layout.overlay;\n\t\t}\n\n\t\tconst overlayClass = this.overlayClassName === null ? '' : ` ${this.overlayClassName}`;\n\n\t\tthis.layout.overlay = Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: `side-panel side-panel-overlay${overlayClass}`,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tmousedown: this.handleOverlayClick.bind(this),\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tthis.getContainer(),\n\t\t\t],\n\t\t});\n\n\t\treturn this.layout.overlay;\n\t}\n\n\tunhideOverlay(): void\n\t{\n\t\tDom.removeClass(this.getOverlay(), '--hidden');\n\t}\n\n\thideOverlay(): void\n\t{\n\t\tDom.addClass(this.getOverlay(), '--hidden');\n\t}\n\n\thideShadow(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'side-panel-show-shadow');\n\t}\n\n\tshowShadow(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'side-panel-show-shadow');\n\t}\n\n\tsetOverlayBackground(): void\n\t{\n\t\tif (this.overlayBgCallback === null)\n\t\t{\n\t\t\tconst opacity = parseInt(this.overlayOpacity / 100 * 255, 10).toString(16).padStart(2, 0);\n\t\t\tDom.style(this.getOverlay(), 'background-color', `${this.overlayBgColor}${opacity}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst state = this.#getAnimationState('end');\n\t\t\tDom.style(this.getOverlay(), 'background', this.overlayBgCallback(state, this));\n\t\t}\n\t}\n\n\tsetOverlayAnimation(animate: boolean): void\n\t{\n\t\tif (Type.isBoolean(animate))\n\t\t{\n\t\t\tthis.overlayAnimation = animate;\n\t\t}\n\t}\n\n\tgetOverlayAnimation(): boolean\n\t{\n\t\treturn this.overlayAnimation;\n\t}\n\n\tgetOverlayBgColor(): string\n\t{\n\t\treturn this.overlayBgColor;\n\t}\n\n\tgetOverlayOpacity(): number\n\t{\n\t\treturn this.overlayOpacity;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (this.layout.container !== null)\n\t\t{\n\t\t\treturn this.layout.container;\n\t\t}\n\n\t\tconst content = Tag.render`\n\t\t\t<div class=\"side-panel-content-wrapper\">${this.getContentContainer()}</div>\n\t\t`;\n\n\t\tthis.layout.container = Tag.render`\n\t\t\t<div class=\"side-panel side-panel-container\">\n\t\t\t\t${\n\t\t\t\t\tthis.hideControls\n\t\t\t\t\t\t? content\n\t\t\t\t\t\t: [content, this.getLabelsContainer()]\n\t\t\t\t}\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.addClass(this.layout.container, this.getDesignSystemContext());\n\t\tDom.addClass(this.layout.container, this.containerClassName);\n\n\t\treturn this.layout.container;\n\t}\n\n\tgetContentContainer(): HTMLElement\n\t{\n\t\tif (this.layout.content !== null)\n\t\t{\n\t\t\treturn this.layout.content;\n\t\t}\n\n\t\tconst contentClass = this.contentClassName === null ? '' : ` ${this.contentClassName}`;\n\n\t\tthis.layout.content = Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: `side-panel-content-container${contentClass}`,\n\t\t\t},\n\t\t});\n\n\t\treturn this.layout.content;\n\t}\n\n\tgetLabelsContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('labels-container', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-labels',\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.getLabel().getContainer(),\n\t\t\t\t\tthis.getExtraLabelsContainer(),\n\t\t\t\t],\n\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\tgetExtraLabelsContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('icon-labels', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-extra-labels',\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.minimizeLabel.getContainer(),\n\t\t\t\t\tthis.newWindowLabel ? this.newWindowLabel.getContainer() : null,\n\t\t\t\t\tthis.copyLinkLabel ? this.copyLinkLabel.getContainer() : null,\n\t\t\t\t\tthis.printLabel ? this.printLabel.getContainer() : null,\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetCloseBtn(): HTMLElement\n\t{\n\t\treturn this.getLabel().getIconBox();\n\t}\n\n\tgetLabel(): Label\n\t{\n\t\treturn this.label;\n\t}\n\n\tgetNewWindowLabel(): Label | null\n\t{\n\t\treturn this.newWindowLabel;\n\t}\n\n\tgetCopyLinkLabel(): Label | null\n\t{\n\t\treturn this.copyLinkLabel;\n\t}\n\n\tgetMinimizeLabel(): Label | null\n\t{\n\t\treturn this.minimizeLabel;\n\t}\n\n\tgetPrintLabel(): Label | null\n\t{\n\t\treturn this.printLabel;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetContent(): void\n\t{\n\t\tif (this.contentCallbackInvoved)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.contentCallbackInvoved = true;\n\n\t\tDom.clean(this.getContentContainer());\n\n\t\tlet promise = this.contentCallback(this);\n\t\tconst isPromiseReturned = (\n\t\t\tpromise\n\t\t\t&& (\n\t\t\t\tObject.prototype.toString.call(promise) === '[object Promise]'\n\t\t\t\t|| promise.toString() === '[object BX.Promise]'\n\t\t\t)\n\t\t);\n\n\t\tif (!isPromiseReturned)\n\t\t{\n\t\t\tpromise = Promise.resolve(promise);\n\t\t}\n\n\t\tpromise\n\t\t\t.then((result) => {\n\t\t\t\tif (this.isDestroyed())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isPlainObject(result) && Type.isStringFilled(result.html))\n\t\t\t\t{\n\t\t\t\t\tRuntime.html(this.getContentContainer(), result.html)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.removeLoader();\n\t\t\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\t\t\tthis.firePageEvent('onLoad');\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((reason) => {\n\t\t\t\t\t\t\tthis.removeLoader();\n\t\t\t\t\t\t\tthis.getContentContainer().innerHTML = reason;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (Type.isDomNode(result))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.append(result, this.getContentContainer());\n\t\t\t\t\t}\n\t\t\t\t\telse if (Type.isStringFilled(result))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getContentContainer().innerHTML = result;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.removeLoader();\n\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\tthis.firePageEvent('onLoad');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((reason) => {\n\t\t\t\tthis.removeLoader();\n\t\t\t\tthis.getContentContainer().innerHTML = reason;\n\t\t\t})\n\t\t;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetFrameSrc(): void\n\t{\n\t\tif (this.iframeSrc === this.getUrl())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst url = Uri.addParam(this.getUrl(), { IFRAME: 'Y', IFRAME_TYPE: 'SIDE_SLIDER' });\n\t\tif (this.isPostMethod())\n\t\t{\n\t\t\tconst form = document.createElement('form');\n\t\t\tform.method = 'POST';\n\t\t\tform.action = url;\n\t\t\tform.target = this.getFrameId();\n\t\t\tDom.style(form, 'display', 'none');\n\n\t\t\tBX.util.addObjectToForm(this.getRequestParams(), form);\n\n\t\t\tDom.append(form, document.body);\n\n\t\t\tform.submit();\n\n\t\t\tDom.remove(form);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.iframeSrc = this.getUrl();\n\t\t\tthis.iframe.src = url;\n\t\t}\n\n\t\tthis.loaded = false;\n\t\tthis.listenIframeLoading();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateLoader(sliderLoader: string | HTMLElement): void\n\t{\n\t\tDom.remove(this.layout.loader);\n\n\t\tconst loader = (\n\t\t\tType.isStringFilled(sliderLoader) || Type.isElementNode(sliderLoader)\n\t\t\t\t? sliderLoader\n\t\t\t\t: 'default-loader'\n\t\t);\n\n\t\tconst oldLoaders = [\n\t\t\t'task-new-loader',\n\t\t\t'task-edit-loader',\n\t\t\t'task-view-loader',\n\t\t\t'crm-entity-details-loader',\n\t\t\t'crm-button-view-loader',\n\t\t\t'crm-webform-view-loader',\n\t\t\t'create-mail-loader',\n\t\t\t'view-mail-loader',\n\t\t];\n\n\t\tif (Type.isElementNode(loader))\n\t\t{\n\t\t\tthis.layout.loader = this.createHTMLLoader(loader);\n\t\t}\n\t\telse if (oldLoaders.includes(loader) && this.loaderExists(loader))\n\t\t{\n\t\t\tthis.layout.loader = this.createOldLoader(loader);\n\t\t}\n\t\telse if (loader.charAt(0) === '/')\n\t\t{\n\t\t\tthis.layout.loader = this.createSvgLoader(loader);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst matches = loader.match(/^([\\w.-]+):([\\w.-]+)$/i);\n\t\t\tif (matches)\n\t\t\t{\n\t\t\t\tconst moduleId = matches[1];\n\t\t\t\tconst svgName = matches[2];\n\t\t\t\tconst svg = `/bitrix/images/${moduleId}/slider/${svgName}.svg`;\n\t\t\t\tthis.layout.loader = this.createSvgLoader(svg);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.layout.loader = this.createDefaultLoader();\n\t\t\t}\n\t\t}\n\n\t\tDom.append(this.layout.loader, this.getContainer());\n\t}\n\n\tcreateSvgLoader(svg): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'side-panel-loader',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-loader-container',\n\t\t\t\t\t},\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tbackgroundImage: `url(\"${svg}\")`,\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tcreateDefaultLoader(): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'side-panel-loader',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-default-loader-container',\n\t\t\t\t\t},\n\t\t\t\t\thtml:\n\t\t\t\t\t\t'<svg class=\"side-panel-default-loader-circular\" viewBox=\"25 25 50 50\">'\n\t\t\t\t\t\t+ '<circle '\n\t\t\t\t\t\t\t+ 'class=\"side-panel-default-loader-path\" '\n\t\t\t\t\t\t\t+ 'cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"'\n\t\t\t\t\t\t+ '/>'\n\t\t\t\t\t\t+ '</svg>',\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateOldLoader(loader: string): HTMLElement\n\t{\n\t\tif (loader === 'crm-entity-details-loader')\n\t\t{\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: `side-panel-loader ${loader}`,\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tDom.create('img', {\n\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1BMVEX'\n\t\t\t\t\t\t\t\t+ '///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'side-panel-loader-mask top',\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'side-panel-loader-bg left',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tDom.create('img', {\n\t\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1B'\n\t\t\t\t\t\t\t\t\t\t+ 'MVEX///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tclassName: 'side-panel-loader-mask left',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t}),\n\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'side-panel-loader-bg right',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tDom.create('img', {\n\t\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1BM'\n\t\t\t\t\t\t\t\t\t\t+ 'VEX///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tclassName: 'side-panel-loader-mask right',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: `side-panel-loader ${loader}`,\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('img', {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1BMVEX'\n\t\t\t\t\t\t\t+ '///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t},\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-loader-mask left',\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tDom.create('img', {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA'\n\t\t\t\t\t\t\t+ '1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t},\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-loader-mask right',\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateHTMLLoader(loader: HTMLElement): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tchildren: [\n\t\t\t\tloader,\n\t\t\t],\n\t\t});\n\t}\n\n\tloaderExists(loader): boolean\n\t{\n\t\tif (!Type.isStringFilled(loader))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let i = 0; i < document.styleSheets.length; i++)\n\t\t{\n\t\t\tconst style = document.styleSheets[i];\n\t\t\tif (!Type.isStringFilled(style.href) || !style.href.includes('sidepanel'))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet rules = null;\n\t\t\ttry\n\t\t\t{\n\t\t\t\trules = style.rules || style.cssRules;\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\trules = style.cssRules;\n\t\t\t\t}\n\t\t\t\tcatch\n\t\t\t\t{\n\t\t\t\t\trules = [];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const rule of rules)\n\t\t\t{\n\t\t\t\tif (Type.isStringFilled(rule.selectorText) && rule.selectorText.includes(loader))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tremoveLoader()\n\t{\n\t\tDom.remove(this.layout.loader);\n\t\tthis.layout.loader = null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tanimateOpening()\n\t{\n\t\tif (this.animation)\n\t\t{\n\t\t\tthis.animation.stop();\n\t\t}\n\n\t\tthis.fireEvent('onOpening');\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#endAnimationState;\n\t\t\tthis.animateStep(this.#currentAnimationState);\n\t\t\tthis.completeAnimation();\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#currentAnimationState = (\n\t\t\tthis.#currentAnimationState === null\n\t\t\t\t? this.#startAnimationState\n\t\t\t\t: this.#currentAnimationState\n\t\t);\n\n\t\tthis.animation = new BX.easing({\n\t\t\tduration: this.animationDuration,\n\t\t\tstart: this.#currentAnimationState,\n\t\t\tfinish: this.#endAnimationState,\n\t\t\tstep: (state) => {\n\t\t\t\tthis.#currentAnimationState = state;\n\t\t\t\tthis.animateStep(state);\n\t\t\t},\n\t\t\tcomplete: () => {\n\t\t\t\tthis.completeAnimation();\n\t\t\t},\n\t\t});\n\n\t\tif (this.animationName === 'scale' && Type.isStringFilled(this.animationOptions.origin))\n\t\t{\n\t\t\tDom.style(this.getContainer(), 'transform-origin', this.animationOptions.origin);\n\t\t}\n\n\t\tthis.animation.animate();\n\t}\n\n\t/**\n\t * @private\n\t * @param {object} state\n\t */\n\tanimateStep(state)\n\t{\n\t\tif (this.animationName === 'scale')\n\t\t{\n\t\t\tDom.style(this.getContainer(), 'transform', `scale(${state.scale / 100})`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(this.getContainer(), 'transform', `translate(${state.translateX}%, ${state.translateY}%)`);\n\t\t}\n\n\t\tif (this.getOverlayAnimation())\n\t\t{\n\t\t\tif (this.overlayBgCallback === null)\n\t\t\t{\n\t\t\t\tconst opacity = parseInt(state.opacity / 100 * 255, 10).toString(16).padStart(2, 0);\n\t\t\t\tDom.style(this.getOverlay(), 'background-color', `${this.overlayBgColor}${opacity}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.style(this.getOverlay(), 'background', this.overlayBgCallback(state, this));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param callback\n\t */\n\tcompleteAnimation(callback)\n\t{\n\t\tthis.animation = null;\n\t\tif (this.isOpen())\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#endAnimationState;\n\t\t\tthis.maximizing = false;\n\n\t\t\tDom.removeClass(this.getOverlay(), '--opening');\n\t\t\tDom.addClass(this.getOverlay(), '--open');\n\t\t\tif (this.animationName === 'scale')\n\t\t\t{\n\t\t\t\tconst state = this.#getAnimationState('end');\n\t\t\t\tDom.style(\n\t\t\t\t\tthis.getContainer(),\n\t\t\t\t\t{\n\t\t\t\t\t\t'transform-origin': null,\n\t\t\t\t\t\ttransform: `translate(${state.translateX}%, ${state.translateY}%)`,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.firePageEvent('onBeforeOpenComplete');\n\t\t\tthis.fireFrameEvent('onBeforeOpenComplete');\n\n\t\t\tthis.firePageEvent('onOpenComplete');\n\t\t\tthis.fireFrameEvent('onOpenComplete');\n\n\t\t\tif (!this.isLoaded())\n\t\t\t{\n\t\t\t\tthis.showLoader();\n\t\t\t}\n\n\t\t\tif (this.isFocusable())\n\t\t\t{\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#startAnimationState;\n\t\t\tthis.minimizing = false;\n\n\t\t\tDom.removeClass(this.getOverlay(), '--open --opening --closing');\n\t\t\tif (this.animationName === 'scale')\n\t\t\t{\n\t\t\t\tconst state = this.#getAnimationState('start');\n\t\t\t\tDom.style(\n\t\t\t\t\tthis.getContainer(),\n\t\t\t\t\t{\n\t\t\t\t\t\t'transform-origin': null,\n\t\t\t\t\t\ttransform: `translate(${state.translateX}%, ${state.translateY}%)`,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tDom.style(\n\t\t\t\tthis.getContainer(),\n\t\t\t\t{\n\t\t\t\t\twidth: null,\n\t\t\t\t\tright: null,\n\t\t\t\t\topacity: null,\n\t\t\t\t\t'max-width': null,\n\t\t\t\t\t'min-width': null,\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tDom.style(this.getCloseBtn(), 'opacity', null);\n\n\t\t\tthis.firePageEvent('onBeforeCloseComplete');\n\t\t\tthis.fireFrameEvent('onBeforeCloseComplete');\n\n\t\t\tthis.firePageEvent('onCloseComplete');\n\t\t\tthis.fireFrameEvent('onCloseComplete');\n\n\t\t\tif (Type.isFunction(callback))\n\t\t\t{\n\t\t\t\tcallback(this);\n\t\t\t}\n\n\t\t\tif (!this.isCacheable())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tfirePageEvent(eventName: string): SliderEvent\n\t{\n\t\tconst sliderEvent = this.getEvent(eventName);\n\t\tif (sliderEvent === null)\n\t\t{\n\t\t\tthrow new Error('\\'eventName\\' is invalid.');\n\t\t}\n\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tsliderEvent.getFullName().toLowerCase(),\n\t\t\tnew BaseEvent({ data: [sliderEvent], compatData: [sliderEvent] }),\n\t\t);\n\n\t\t// Events for compatibility\n\t\tif (['onClose', 'onOpen'].includes(eventName))\n\t\t{\n\t\t\tEventEmitter.emit(`BX.Bitrix24.PageSlider:${eventName}`, new BaseEvent({ data: [this], compatData: [this] }));\n\t\t\tEventEmitter.emit(`Bitrix24.Slider:${eventName}`, new BaseEvent({ data: [this], compatData: [this] }));\n\t\t}\n\n\t\treturn sliderEvent;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tfireFrameEvent(eventName): SliderEvent\n\t{\n\t\tconst sliderEvent = this.getEvent(eventName);\n\t\tif (sliderEvent === null)\n\t\t{\n\t\t\tthrow new Error('\\'eventName\\' is invalid.');\n\t\t}\n\n\t\tif (this.allowCrossOrigin)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst frameWindow = this.getFrameWindow();\n\t\tif (frameWindow && frameWindow.BX && frameWindow.BX.onCustomEvent)\n\t\t{\n\t\t\tframeWindow.BX.onCustomEvent(this, sliderEvent.getFullName(), [sliderEvent]);\n\n\t\t\t// Events for compatibility\n\t\t\tif (['onClose', 'onOpen'].includes(eventName))\n\t\t\t{\n\t\t\t\tframeWindow.BX.onCustomEvent(`BX.Bitrix24.PageSlider:${eventName}`, [this]);\n\t\t\t\tframeWindow.BX.onCustomEvent(`Bitrix24.Slider:${eventName}`, [this]); // Compatibility\n\t\t\t}\n\t\t}\n\n\t\treturn sliderEvent;\n\t}\n\n\tfireEvent(eventName)\n\t{\n\t\tthis.firePageEvent(eventName);\n\t\tthis.fireFrameEvent(eventName);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetEvent(eventName: string | SliderEvent): SliderEvent | null\n\t{\n\t\tlet event = null;\n\t\tif (Type.isStringFilled(eventName))\n\t\t{\n\t\t\tevent = new SliderEvent();\n\t\t\tevent.setSlider(this);\n\t\t\tevent.setName(eventName);\n\t\t}\n\t\telse if (eventName instanceof SliderEvent)\n\t\t{\n\t\t\tevent = eventName;\n\t\t}\n\n\t\treturn event;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcanOpen(): boolean\n\t{\n\t\treturn this.canAction('open');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcanClose(): boolean\n\t{\n\t\treturn this.canAction('close');\n\t}\n\n\t/**\n\t * @package\n\t * @returns {boolean}\n\t */\n\tcanCloseByEsc(): boolean\n\t{\n\t\treturn this.canAction('closeByEsc');\n\t}\n\n\t/**\n\t * @private\n\t * @param {string} action\n\t * @returns {boolean}\n\t */\n\tcanAction(action: string): boolean\n\t{\n\t\tif (!Type.isStringFilled(action))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst eventName = `on${action.charAt(0).toUpperCase()}${action.slice(1)}`;\n\n\t\tconst pageEvent = this.firePageEvent(eventName);\n\t\tconst frameEvent = this.fireFrameEvent(eventName);\n\n\t\treturn pageEvent.isActionAllowed() && (!frameEvent || frameEvent.isActionAllowed());\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleCrossOriginWindowMessage(event: MessageEvent)\n\t{\n\t\tconst frameUrl = new URL(this.url);\n\t\tconst eventUrl = new URL(event.origin);\n\t\tif (eventUrl.origin !== frameUrl.origin)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = { type: '', data: undefined };\n\t\tif (Type.isString(event.data))\n\t\t{\n\t\t\tmessage.type = event.data;\n\t\t}\n\t\telse if (Type.isPlainObject(event.data))\n\t\t{\n\t\t\tmessage.type = event.data.type;\n\t\t\tmessage.data = event.data.data;\n\t\t}\n\n\t\tswitch (message.type)\n\t\t{\n\t\t\tcase 'BX:SidePanel:close':\n\t\t\t{\n\t\t\t\tthis.close();\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'BX:SidePanel:load:force':\n\t\t\t{\n\t\t\t\tif (!this.isLoaded() && !this.isDestroyed())\n\t\t\t\t{\n\t\t\t\t\tthis.handleFrameLoad();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'BX:SidePanel:data:send':\n\t\t\t{\n\t\t\t\tconst pageEvent = new MessageEvent({ sender: this, data: message.data });\n\t\t\t\tpageEvent.setName('onXDomainMessage');\n\t\t\t\tthis.firePageEvent(pageEvent);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\t// No default\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameLoad(event)\n\t{\n\t\tif (this.loaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst frameWindow = this.iframe.contentWindow;\n\t\tconst iframeLocation = frameWindow.location;\n\n\t\tif (this.allowCrossOrigin)\n\t\t{\n\t\t\tEvent.bind(window, 'message', this.handleCrossOriginWindowMessage);\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tif (iframeLocation.toString() === 'about:blank')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tif (this.allowCrossOrigin)\n\t\t\t{\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis.closeLoader();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn('SidePanel: Try to use \"allowCrossOrigin: true\" option.');\n\n\t\t\tthrow e;\n\t\t}\n\n\t\tEvent.bind(frameWindow, 'keydown', this.handleFrameKeyDown);\n\t\tEvent.bind(frameWindow, 'focus', this.handleFrameFocus);\n\t\tEvent.bind(frameWindow, 'unload', this.handleFrameUnload);\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tframeWindow.document.body.style.paddingBottom = `${window.innerHeight * 2 / 3}px`;\n\t\t}\n\n\t\tconst iframeUrl = iframeLocation.pathname + iframeLocation.search + iframeLocation.hash;\n\t\tthis.iframeSrc = this.refineUrl(iframeUrl);\n\t\tthis.url = this.iframeSrc;\n\n\t\tif (this.isPrintable())\n\t\t{\n\t\t\tthis.injectPrintStyles();\n\t\t}\n\n\t\tthis.loaded = true;\n\t\tthis.loadedCnt++;\n\n\t\tif (this.loadedCnt > 1)\n\t\t{\n\t\t\tthis.firePageEvent('onLoad');\n\t\t\tthis.fireFrameEvent('onLoad');\n\n\t\t\tthis.firePageEvent('onReload');\n\t\t\tthis.fireFrameEvent('onReload');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.firePageEvent('onLoad');\n\t\t\tthis.fireFrameEvent('onLoad');\n\t\t}\n\n\t\tif (this.isFocusable())\n\t\t{\n\t\t\tthis.focus();\n\t\t}\n\n\t\tthis.closeLoader();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tlistenIframeLoading()\n\t{\n\t\tif (this.allowCrossOrigin)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst isLoaded = setInterval(() => {\n\t\t\tif (this.isLoaded() || this.isDestroyed())\n\t\t\t{\n\t\t\t\tclearInterval(isLoaded);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.iframe.contentWindow.location.toString() === 'about:blank')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.iframe.contentWindow.document.readyState === 'complete'\n\t\t\t\t|| this.iframe.contentWindow.document.readyState === 'interactive'\n\t\t\t)\n\t\t\t{\n\t\t\t\tclearInterval(isLoaded);\n\t\t\t\tthis.handleFrameLoad();\n\t\t\t}\n\t\t}, 200);\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameUnload(event)\n\t{\n\t\tthis.loaded = false;\n\t\tthis.listenIframeLoading();\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameKeyDown(event)\n\t{\n\t\tif (event.keyCode !== 27)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst framePopupManager = this.getWindow().BX?.Main?.PopupManager;\n\t\tif (framePopupManager)\n\t\t{\n\t\t\tconst popups = framePopupManager.getPopups();\n\t\t\tfor (const popup of popups)\n\t\t\t{\n\t\t\t\tif (popup.isShown())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst centerX = this.getWindow().document.documentElement.clientWidth / 2;\n\t\tconst centerY = this.getWindow().document.documentElement.clientHeight / 2;\n\t\tconst element = this.getWindow().document.elementFromPoint(centerX, centerY);\n\n\t\tif (Dom.hasClass(element, 'bx-core-dialog-overlay') || Dom.hasClass(element, 'bx-core-window'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (element.closest('.bx-core-window'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.firePageEvent('onEscapePress');\n\t\tthis.fireFrameEvent('onEscapePress');\n\t}\n\n\tisOnTopOfPopup(popup: Popup): boolean\n\t{\n\t\tconst sameStack = this.getZIndexComponent().getStack() === popup.getZIndexComponent().getStack();\n\t\tconst popupOnTop = sameStack && popup.getZindex() > this.getZindex();\n\t\tlet popupInside = this.getContainer().contains(popup.getPopupContainer());\n\t\tif (this.getFrameWindow())\n\t\t{\n\t\t\tpopupInside = this.getFrameWindow().document.contains(popup.getPopupContainer());\n\t\t}\n\n\t\treturn !(popup.isShown() && (popupOnTop || popupInside));\n\t}\n\n\t/**\n\t * @private\n\t * @param {BaseEvent} event\n\t */\n\thandlePopupInit(event)\n\t{\n\t\tconst data = event.getCompatData();\n\t\tconst bindElement = data[1];\n\t\tconst params = data[2];\n\n\t\tif (\n\t\t\t!Type.isElementNode(params.targetContainer)\n\t\t\t&& Type.isElementNode(bindElement)\n\t\t\t&& this.getContentContainer().contains(bindElement)\n\t\t)\n\t\t{\n\t\t\tparams.targetContainer = this.getContentContainer();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameFocus(event)\n\t{\n\t\tthis.firePageEvent('onFrameFocus');\n\t}\n\n\t/**\n\t * @private\n\t * @param {MouseEvent} event\n\t */\n\thandleOverlayClick(event)\n\t{\n\t\tif (event.target === this.getOverlay())\n\t\t{\n\t\t\tif (this.animation === null)\n\t\t\t{\n\t\t\t\tthis.close();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {MouseEvent} event\n\t */\n\thandlePrintBtnClick(event)\n\t{\n\t\tif (this.isSelfContained())\n\t\t{\n\t\t\tconst frame = document.createElement('iframe');\n\t\t\tframe.src = 'about:blank';\n\t\t\tframe.name = 'sidepanel-print-frame';\n\n\t\t\tDom.style(frame, 'display', 'none');\n\t\t\tDom.append(frame, document.body);\n\n\t\t\tconst frameWindow = frame.contentWindow;\n\t\t\tconst frameDoc = frameWindow.document;\n\t\t\tframeDoc.open();\n\t\t\tframeDoc.write('<html><head>');\n\n\t\t\tlet headTags = '';\n\t\t\tconst links = document.head.querySelectorAll('link, style');\n\t\t\tfor (const link of links)\n\t\t\t{\n\t\t\t\theadTags += link.outerHTML;\n\t\t\t}\n\n\t\t\theadTags += '<style>html, body { background: #fff !important; height: 100%; }</style>';\n\n\t\t\tframeDoc.write(headTags);\n\n\t\t\tframeDoc.write('</head><body>');\n\t\t\tframeDoc.write(this.getContentContainer().innerHTML);\n\t\t\tframeDoc.write('</body></html>');\n\t\t\tframeDoc.close();\n\n\t\t\tframeWindow.focus();\n\t\t\tframeWindow.print();\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.remove(frame);\n\t\t\t\twindow.focus();\n\t\t\t}, 1000);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.focus();\n\t\t\tthis.getFrameWindow().print();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tinjectPrintStyles()\n\t{\n\t\tconst frameDocument = this.getFrameWindow().document;\n\n\t\tlet bodyClass = '';\n\n\t\tconst classList = frameDocument.body.classList;\n\t\tfor (const className of classList)\n\t\t{\n\t\t\tbodyClass += `.${className}`;\n\t\t}\n\n\t\tconst bodyStyle = `@media print { body${bodyClass} { `\n\t\t\t+ 'background: #fff !important; '\n\t\t\t+ '-webkit-print-color-adjust: exact;'\n\t\t\t+ 'color-adjust: exact; '\n\t\t\t+ '} }';\n\n\t\tconst style = frameDocument.createElement('style');\n\t\tstyle.type = 'text/css';\n\t\tif (style.styleSheet)\n\t\t{\n\t\t\tstyle.styleSheet.cssText = bodyStyle;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstyle.appendChild(frameDocument.createTextNode(bodyStyle));\n\t\t}\n\n\t\tframeDocument.head.appendChild(style);\n\t}\n\n\trefineUrl(url: string): string\n\t{\n\t\tif (Type.isStringFilled(url) && /IFRAME/.test(url))\n\t\t{\n\t\t\treturn Uri.removeParam(url, ['IFRAME', 'IFRAME_TYPE']);\n\t\t}\n\n\t\treturn url;\n\t}\n}\n","import { Type, Cache, Text, Tag, Dom, type JsonObject } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PopupManager, Popup } from 'main.popup';\n\nimport { type ToolbarItemOptions } from './types/toolbar-item-options';\n\nexport class ToolbarItem extends EventEmitter\n{\n\tconstructor(itemOptions: ToolbarItemOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Main.SidePanel.ToolbarItem');\n\n\t\tconst options = Type.isPlainObject(itemOptions) ? itemOptions : {};\n\n\t\tthis.id = Type.isStringFilled(options.id) ? options.id : `toolbar-item-${Text.getRandom().toLowerCase()}`;\n\t\tthis.title = '';\n\t\tthis.url = '';\n\t\tthis.entityType = '';\n\t\tthis.entityId = '0';\n\t\tthis.entityName = '';\n\n\t\tthis.refs = new Cache.MemoryCache();\n\t\tthis.rendered = false;\n\n\t\tthis.setTitle(options.title);\n\t\tthis.setUrl(options.url);\n\t\tthis.setEntityType(options.entityType);\n\t\tthis.setEntityId(options.entityId);\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetUrl(): string\n\t{\n\t\treturn this.url;\n\t}\n\n\tsetUrl(url): void\n\t{\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\tthis.url = url;\n\t\t\tif (this.rendered)\n\t\t\t{\n\t\t\t\tthis.getContainer().href = url;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.title;\n\t}\n\n\tsetTitle(title): void\n\t{\n\t\tif (Type.isStringFilled(title))\n\t\t{\n\t\t\tthis.title = title;\n\t\t\tif (this.rendered)\n\t\t\t{\n\t\t\t\tthis.getTitleContainer().textContent = title;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetEntityType(): string\n\t{\n\t\treturn this.entityType;\n\t}\n\n\tsetEntityType(entityType): void\n\t{\n\t\tif (Type.isStringFilled(entityType))\n\t\t{\n\t\t\tthis.entityType = entityType;\n\t\t}\n\t}\n\n\tgetEntityId(): string | number\n\t{\n\t\treturn this.entityId;\n\t}\n\n\tsetEntityId(entityId: string | number): void\n\t{\n\t\tif (Type.isNumber(entityId) || Type.isStringFilled(entityId))\n\t\t{\n\t\t\tthis.entityId = String(entityId);\n\t\t}\n\t}\n\n\tgetEntityName(): string\n\t{\n\t\treturn this.entityName;\n\t}\n\n\tsetEntityName(entityName): void\n\t{\n\t\tif (Type.isStringFilled(entityName))\n\t\t{\n\t\t\tthis.entityName = entityName;\n\t\t}\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('container', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"side-panel-toolbar-item\"\n\t\t\t\t\tonmouseenter=\"${this.handleMouseEnter.bind(this)}\"\n\t\t\t\t\tonmouseleave=\"${this.handleMouseLeave.bind(this)}\"\n\t\t\t\t>\n\t\t\t\t\t${this.getTitleContainer()}\n\t\t\t\t\t<div class=\"side-panel-toolbar-item-remove-btn\" onclick=\"${this.handleRemoveBtnClick.bind(this)}\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --cross-20\" style=\"--ui-icon-set__icon-size: 100%;\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tisRendered(): boolean\n\t{\n\t\treturn this.rendered;\n\t}\n\n\tgetTitleContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<a \n\t\t\t\t\tclass=\"side-panel-toolbar-item-title\"\n\t\t\t\t\thref=\"${encodeURI(this.getUrl())}\"\n\t\t\t\t\tdata-slider-maximize=\"true\"\n\t\t\t\t>${Text.encode(this.getTitle())}</a>\n\t\t\t`;\n\t\t});\n\t}\n\n\tprependTo(node)\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.prepend(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tappendTo(node): void\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.append(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tinsertBefore(node): void\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.insertBefore(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tinsertAfter(node): void\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.insertAfter(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tremove(): void\n\t{\n\t\tDom.remove(this.getContainer());\n\t\tthis.rendered = false;\n\t}\n\n\tshowTooltip(): void\n\t{\n\t\tconst targetNode = this.getContainer();\n\t\tconst rect = targetNode.getBoundingClientRect();\n\t\tconst targetNodeWidth = rect.width;\n\t\tconst popupWidth = Math.min(Math.max(100, this.getTitleContainer().scrollWidth + 20), 300);\n\n\t\tconst hint = PopupManager.create({\n\t\t\tid: 'sidepanel-toolbar-item-hint',\n\t\t\tcacheable: false,\n\t\t\tbindElement: rect,\n\t\t\tbindOptions: {\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tforceTop: true,\n\t\t\t\tposition: 'top',\n\t\t\t},\n\t\t\twidth: popupWidth,\n\t\t\tcontent: Tag.render`\n\t\t\t\t<div class=\"sidepanel-toolbar-item-hint\">\n\t\t\t\t\t<div class=\"sidepanel-toolbar-item-hint-title\">${Text.encode(this.getEntityName())}</div>\n\t\t\t\t\t<div class=\"sidepanel-toolbar-item-hint-content\">${Text.encode(this.getTitle())}</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tdarkMode: true,\n\t\t\tfixed: true,\n\t\t\toffsetTop: 0,\n\t\t\tevents: {\n\t\t\t\tonShow: (event) => {\n\t\t\t\t\tconst popup = event.getTarget();\n\t\t\t\t\tconst offsetLeft = (targetNodeWidth / 2) - (popupWidth / 2);\n\t\t\t\t\tconst angleShift = Popup.getOption('angleLeftOffset') - Popup.getOption('angleMinTop');\n\n\t\t\t\t\tpopup.setAngle({ offset: popupWidth / 2 - angleShift });\n\t\t\t\t\tpopup.setOffset({ offsetLeft: offsetLeft + Popup.getOption('angleLeftOffset') });\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\thint.show();\n\t\thint.adjustPosition();\n\t}\n\n\thideTooltip()\n\t{\n\t\tconst hint: Popup = PopupManager.getPopupById('sidepanel-toolbar-item-hint');\n\t\tif (hint)\n\t\t{\n\t\t\thint.close();\n\t\t}\n\t}\n\n\thandleMouseEnter(): void\n\t{\n\t\tthis.showTooltip();\n\t}\n\n\thandleMouseLeave(): void\n\t{\n\t\tthis.hideTooltip();\n\t}\n\n\thandleRemoveBtnClick(event): void\n\t{\n\t\tevent.stopPropagation();\n\t\tthis.emit('onRemove');\n\t}\n\n\ttoJSON(): JsonObject\n\t{\n\t\treturn {\n\t\t\ttitle: this.getTitle(),\n\t\t\turl: this.getUrl(),\n\t\t\tentityType: this.getEntityType(),\n\t\t\tentityId: this.getEntityId(),\n\t\t};\n\t}\n}\n","import { SliderManager } from './slider-manager';\nimport { PageObject } from 'main.pageobject';\n\nlet instance = null;\n\nexport function getInstance(): SliderManager\n{\n\tconst topWindow = PageObject.getRootWindow();\n\tif (topWindow !== window)\n\t{\n\t\treturn topWindow.BX.SidePanel.Instance;\n\t}\n\n\tif (instance === null)\n\t{\n\t\tinstance = new SliderManager();\n\t}\n\n\treturn instance;\n}\n","import {\n\tType,\n\tTag,\n\tText,\n\tCache,\n\tLoc,\n\tDom,\n\tRuntime,\n\tZIndexManager,\n\tEvent,\n\tReflection,\n\tajax as Ajax,\n\ttype JsonObject,\n} from 'main.core';\n\nimport { EventEmitter } from 'main.core.events';\nimport { MenuManager, PopupManager, Popup, type Menu } from 'main.popup';\n\nimport { ToolbarItem } from './toolbar-item';\nimport { getInstance } from './get-instance';\n\nimport { type ToolbarItemOptions } from './types/toolbar-item-options';\nimport { type ToolbarOptions } from './types/toolbar-options';\n\nexport class Toolbar extends EventEmitter\n{\n\tconstructor(toolbarOptions: ToolbarOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Main.SidePanel.Toolbar');\n\n\t\tconst options = Type.isPlainObject(toolbarOptions) ? toolbarOptions : {};\n\t\tif (!Type.isStringFilled(options.context))\n\t\t{\n\t\t\tthrow new Error('BX.Main.SidePanel.Toolbar: \"context\" parameter is required.');\n\t\t}\n\n\t\tthis.context = options.context;\n\t\tthis.items = [];\n\t\tthis.rendered = false;\n\t\tthis.refs = new Cache.MemoryCache();\n\t\tthis.container = null;\n\t\tthis.lsKey = 'bx.sidepanel.toolbar.item';\n\n\t\tthis.initialPosition = { right: '5px', bottom: '20px' };\n\t\tthis.shiftedPosition = { right: '5px', bottom: '20px' };\n\t\tif (Type.isPlainObject(options.position))\n\t\t{\n\t\t\tthis.initialPosition = options.position;\n\t\t}\n\n\t\tif (Type.isPlainObject(options.shiftedPosition))\n\t\t{\n\t\t\tthis.shiftedPosition = options.shiftedPosition;\n\t\t}\n\n\t\tthis.collapsed = options.collapsed !== false;\n\t\tthis.muted = false;\n\t\tthis.shifted = false;\n\n\t\tthis.maxVisibleItems = Type.isNumber(options.maxVisibleItems) ? Math.max(options.maxVisibleItems, 1) : 5;\n\n\t\tthis.addItems(options.items);\n\n\t\tconst item = this.restoreItemFromLocalStorage();\n\t\tif (item !== null)\n\t\t{\n\t\t\tconst { entityType, entityId } = item;\n\t\t\tif (this.getItem(entityType, entityId))\n\t\t\t{\n\t\t\t\tthis.clearLocalStorage();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.minimizeItem(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tshow(): void\n\t{\n\t\tDom.addClass(this.getContainer(), '--show');\n\t}\n\n\tisShown(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getContainer(), '--show');\n\t}\n\n\thide(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), '--show');\n\t}\n\n\tmute(): boolean\n\t{\n\t\tif (this.muted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.muted = true;\n\t\tDom.addClass(this.getContainer(), '--muted');\n\n\t\treturn true;\n\t}\n\n\tunmute(): boolean\n\t{\n\t\tif (!this.muted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.muted = false;\n\t\tDom.removeClass(this.getContainer(), '--muted');\n\n\t\treturn true;\n\t}\n\n\tisMuted(): boolean\n\t{\n\t\treturn this.muted;\n\t}\n\n\ttoggleMuteness(): boolean\n\t{\n\t\tif (this.canShowOnTop())\n\t\t{\n\t\t\treturn this.unmute();\n\t\t}\n\n\t\treturn this.mute();\n\t}\n\n\tshift(): boolean\n\t{\n\t\tif (this.shifted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.shifted = true;\n\t\tDom.addClass(this.getContainer(), '--shifted');\n\t\tDom.style(document.body, '--side-panel-toolbar-shifted', 1);\n\t\tthis.setPosition(this.getContainer(), this.shiftedPosition);\n\n\t\treturn true;\n\t}\n\n\tunshift(): boolean\n\t{\n\t\tif (!this.shifted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.shifted = false;\n\t\tDom.removeClass(this.getContainer(), '--shifted');\n\t\tDom.style(document.body, '--side-panel-toolbar-shifted', null);\n\t\tthis.setPosition(this.getContainer(), this.initialPosition);\n\n\t\treturn true;\n\t}\n\n\tisShifted(): boolean\n\t{\n\t\treturn this.shifted;\n\t}\n\n\ttoggleShift(): boolean\n\t{\n\t\tconst sliders = getInstance().getOpenSliders();\n\t\tif (sliders.length === 0 || (sliders.length === 1 && !sliders[0].isOpen()))\n\t\t{\n\t\t\treturn this.unshift();\n\t\t}\n\n\t\treturn this.shift();\n\t}\n\n\tsetPosition(container: HTMLElement, position): boolean\n\t{\n\t\tfor (const prop of ['top', 'right', 'bottom', 'left'])\n\t\t{\n\t\t\tDom.style(container, prop, null);\n\t\t\tif (Type.isStringFilled(position[prop]))\n\t\t\t{\n\t\t\t\tDom.style(container, prop, position[prop]);\n\t\t\t}\n\t\t}\n\t}\n\n\tcollapse(immediately: boolean = false): void\n\t{\n\t\tif (this.collapsed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (immediately === true)\n\t\t{\n\t\t\tDom.addClass(this.getContainer(), '--collapsed');\n\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst width = this.getContentContainer().scrollWidth;\n\t\t\tDom.style(this.getContentContainer(), 'width', `${width}px`);\n\n\t\t\tEvent.unbindAll(this.getContentContainer(), 'transitionend');\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tDom.style(this.getContentContainer(), 'width', 0);\n\t\t\t\t\tEvent.bindOnce(this.getContentContainer(), 'transitionend', () => {\n\t\t\t\t\t\tDom.addClass(this.getContainer(), '--collapsed');\n\t\t\t\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tthis.collapsed = true;\n\t}\n\n\texpand(immediately: boolean = false): void\n\t{\n\t\tif (!this.collapsed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (immediately === true)\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), '--collapsed');\n\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), '--collapsed');\n\t\t\tconst width = this.getContentContainer().scrollWidth;\n\t\t\tDom.style(this.getContentContainer(), 'width', 0);\n\n\t\t\tEvent.unbindAll(this.getContentContainer(), 'transitionend');\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tDom.style(this.getContentContainer(), 'width', `${width}px`);\n\t\t\t\t\tEvent.bindOnce(this.getContentContainer(), 'transitionend', () => {\n\t\t\t\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tthis.collapsed = false;\n\t}\n\n\ttoggle(): void\n\t{\n\t\tif (this.collapsed)\n\t\t{\n\t\t\tthis.request('expand');\n\t\t\tthis.expand();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.request('collapse');\n\t\t\tthis.collapse();\n\t\t}\n\t}\n\n\tisCollapsed(): boolean\n\t{\n\t\treturn this.collapsed;\n\t}\n\n\tgetItems(): ToolbarItem[]\n\t{\n\t\treturn this.items;\n\t}\n\n\tgetItemsCount(): number\n\t{\n\t\treturn this.items.length;\n\t}\n\n\taddItems(itemsOptions)\n\t{\n\t\tif (Type.isArrayFilled(itemsOptions))\n\t\t{\n\t\t\titemsOptions.forEach((itemOptions) => {\n\t\t\t\tthis.addItem(itemOptions);\n\t\t\t});\n\t\t}\n\t}\n\n\taddItem(itemOptions: ToolbarItemOptions): ToolbarItem | null\n\t{\n\t\tconst item = this.createItem(itemOptions);\n\t\tif (item === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.items.push(item);\n\n\t\tif (this.rendered)\n\t\t{\n\t\t\tthis.redraw();\n\t\t}\n\n\t\treturn item;\n\t}\n\n\t/**\n\t *\n\t * @param itemOptions\n\t * @returns {ToolbarItem|null}\n\t */\n\tprependItem(itemOptions): ToolbarItem | null\n\t{\n\t\tconst item = this.createItem(itemOptions);\n\t\tif (item === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.items.unshift(item);\n\n\t\tif (this.rendered)\n\t\t{\n\t\t\tthis.redraw();\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tcreateItem(itemOptions: ToolbarItemOptions): ToolbarItem | null\n\t{\n\t\tconst options = Type.isPlainObject(itemOptions) ? itemOptions : {};\n\n\t\tif (\n\t\t\t!Type.isStringFilled(options.entityType)\n\t\t\t|| !(Type.isStringFilled(options.entityId) || Type.isNumber(options.entityId))\n\t\t\t|| !Type.isStringFilled(options.title)\n\t\t\t|| !Type.isStringFilled(options.url)\n\t\t)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst item = new ToolbarItem(options);\n\t\tif (!Type.isStringFilled(item.getEntityName()))\n\t\t{\n\t\t\tconst minimizeOptions = getInstance().getMinimizeOptions(item.getUrl());\n\t\t\tif (Type.isPlainObject(minimizeOptions) && Type.isStringFilled(minimizeOptions.entityName))\n\t\t\t{\n\t\t\t\titem.setEntityName(minimizeOptions.entityName);\n\t\t\t}\n\t\t}\n\n\t\titem.subscribe('onRemove', this.handleItemRemove.bind(this));\n\n\t\treturn item;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tminimizeItem(itemOptions: ToolbarItemOptions): ToolbarItem | null\n\t{\n\t\tconst { entityType, entityId } = itemOptions;\n\t\tlet item = this.getItem(entityType, entityId);\n\t\tconst itemExists = item !== null;\n\t\tif (!itemExists)\n\t\t{\n\t\t\titem = this.prependItem(itemOptions);\n\t\t}\n\n\t\tif (item !== null)\n\t\t{\n\t\t\tif (!itemExists)\n\t\t\t{\n\t\t\t\tthis.saveItemToLocalStorage(item);\n\t\t\t}\n\n\t\t\tthis.request('minimize', item)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response.status === 'success')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.clearLocalStorage();\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.clearLocalStorage();\n\t\t\t\t\tthis.removeItem(item);\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tsaveItemToLocalStorage(item): void\n\t{\n\t\tconst cache = { item, ttl: Date.now() };\n\t\tlocalStorage.setItem(this.lsKey, JSON.stringify(cache));\n\t}\n\n\trestoreItemFromLocalStorage(): JsonObject | null\n\t{\n\t\tconst data = localStorage.getItem(this.lsKey);\n\t\tif (Type.isStringFilled(data))\n\t\t{\n\t\t\tconst { item, ttl } = JSON.parse(data);\n\t\t\tif ((Date.now() - ttl) > 10000)\n\t\t\t{\n\t\t\t\tthis.clearLocalStorage();\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(item))\n\t\t\t{\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tclearLocalStorage(): void\n\t{\n\t\tlocalStorage.removeItem(this.lsKey);\n\t}\n\n\tgetContext(): string\n\t{\n\t\treturn this.context;\n\t}\n\n\trequest(action, item, data): Promise\n\t{\n\t\tconst additional = Type.isPlainObject(data) ? data : {};\n\n\t\treturn Ajax.runAction(`main.api.sidepanel.toolbar.${action}`, {\n\t\t\tjson: {\n\t\t\t\ttoolbar: {\n\t\t\t\t\tcontext: this.getContext(),\n\t\t\t\t},\n\t\t\t\titem: item ? item.toJSON() : null,\n\t\t\t\t...additional,\n\t\t\t},\n\t\t});\n\t}\n\n\thandleItemRemove(event): void\n\t{\n\t\tconst item = event.getTarget();\n\t\titem.hideTooltip();\n\t\tthis.removeItem(item);\n\t}\n\n\thandleMenuItemRemove(event): void\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst itemId = event.currentTarget.dataset.menuItemId;\n\t\tconst itemToRemove = this.getItemById(itemId);\n\t\tif (itemToRemove)\n\t\t{\n\t\t\tthis.removeItem(itemToRemove);\n\t\t}\n\n\t\tconst menu = this.getMenu();\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.removeMenuItem(itemId);\n\n\t\t\tconst invisibleItemsCount = this.getItems().reduce((count, item) => {\n\t\t\t\treturn item.isRendered() ? count : count + 1;\n\t\t\t}, 0);\n\n\t\t\tif (invisibleItemsCount > 0)\n\t\t\t{\n\t\t\t\tmenu.getPopupWindow().adjustPosition();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmenu.close();\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveItem(itemToRemove): void\n\t{\n\t\titemToRemove.remove();\n\t\tthis.items = this.items.filter((item) => {\n\t\t\treturn item !== itemToRemove;\n\t\t});\n\n\t\tconst restored = this.restoreItemFromLocalStorage();\n\t\tif (restored !== null)\n\t\t{\n\t\t\tconst { entityType, entityId } = restored;\n\t\t\tif (itemToRemove.getEntityType() === entityType && itemToRemove.getEntityId() === entityId)\n\t\t\t{\n\t\t\t\tthis.clearLocalStorage();\n\t\t\t}\n\t\t}\n\n\t\tif (this.rendered)\n\t\t{\n\t\t\tthis.redraw();\n\t\t\tthis.request('remove', itemToRemove);\n\n\t\t\tif (this.getItemsCount() === 0)\n\t\t\t{\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tredraw(): void\n\t{\n\t\tlet visibleItemsCount = 0;\n\t\tfor (let i = 0; i < this.getItems().length; i++)\n\t\t{\n\t\t\tconst item = this.getItems()[i];\n\t\t\tif (visibleItemsCount >= this.maxVisibleItems)\n\t\t\t{\n\t\t\t\tif (item.isRendered())\n\t\t\t\t{\n\t\t\t\t\titem.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!item.isRendered())\n\t\t\t\t{\n\t\t\t\t\tconst previousItem = this.getItems()[i - 1] || null;\n\t\t\t\t\tconst nextItem = this.getItems()[i + 1] || null;\n\t\t\t\t\tif (previousItem)\n\t\t\t\t\t{\n\t\t\t\t\t\titem.insertAfter(previousItem.getContainer());\n\t\t\t\t\t}\n\t\t\t\t\telse if (nextItem)\n\t\t\t\t\t{\n\t\t\t\t\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-native-dom-methods\n\t\t\t\t\t\titem.insertBefore(nextItem.getContainer());\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\titem.appendTo(this.getItemsContainer());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvisibleItemsCount++;\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveAll(): void\n\t{\n\t\tthis.getItemsContainer().innerHTML = '';\n\t\tthis.items = [];\n\t\tthis.clearLocalStorage();\n\t}\n\n\tgetItem(entityType: string, entityId: string | number): ToolbarItem | null\n\t{\n\t\treturn this.items.find((item) => {\n\t\t\treturn item.getEntityType() === entityType && item.getEntityId() === String(entityId);\n\t\t}) || null;\n\t}\n\n\tgetItemByUrl(url: string): ToolbarItem | null\n\t{\n\t\treturn this.items.find((item) => item.getUrl() === url) || null;\n\t}\n\n\tgetItemById(id: string): ToolbarItem | null\n\t{\n\t\treturn this.items.find((item) => item.getId() === id) || null;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('container', () => {\n\t\t\tconst classes = [];\n\t\t\tif (this.collapsed)\n\t\t\t{\n\t\t\t\tclasses.push('--collapsed');\n\t\t\t}\n\n\t\t\tconst container = Tag.render`\n\t\t\t\t<div class=\"side-panel-toolbar ${classes.join(' ')}\">\n\t\t\t\t\t${this.getContentContainer()}\n\t\t\t\t\t<div class=\"side-panel-toolbar-toggle\" onclick=\"${this.handleToggleClick.bind(this)}\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.setPosition(container, this.initialPosition);\n\t\t\tDom.append(container, document.body);\n\t\t\tZIndexManager.register(container, { alwaysOnTop: true });\n\t\t\tthis.rendered = true;\n\n\t\t\tconst toggleMuteness = Runtime.debounce(this.toggleMuteness, 50, this);\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onShow', toggleMuteness);\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onClose', toggleMuteness);\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onDestroy', toggleMuteness);\n\t\t\tEventEmitter.subscribe('onWindowClose', toggleMuteness);\n\t\t\tEventEmitter.subscribe('onWindowRegister', toggleMuteness);\n\n\t\t\tlet forceCollapsed = false;\n\t\t\tconst onSliderClose = () => {\n\t\t\t\tthis.toggleMuteness();\n\t\t\t\tif (this.isMuted())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.toggleShift();\n\t\t\t\tif (!this.isShifted() && forceCollapsed)\n\t\t\t\t{\n\t\t\t\t\tforceCollapsed = false;\n\t\t\t\t\tthis.expand();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onClosing', onSliderClose);\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onCloseComplete', onSliderClose);\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onDestroyComplete', onSliderClose);\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onOpening', () => {\n\t\t\t\tthis.toggleMuteness();\n\t\t\t\tif (this.isMuted())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this.isCollapsed())\n\t\t\t\t{\n\t\t\t\t\tforceCollapsed = true;\n\t\t\t\t\tthis.collapse();\n\t\t\t\t}\n\n\t\t\t\tthis.toggleShift();\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe('BX.UI.Viewer.Controller:onBeforeShow', toggleMuteness);\n\t\t\tEventEmitter.subscribe(\n\t\t\t\t'BX.UI.Viewer.Controller:onClose',\n\t\t\t\tRuntime.debounce(this.toggleMuteness, 500, this),\n\t\t\t);\n\n\t\t\tEvent.bind(window, 'resize', Runtime.throttle(() => {\n\t\t\t\tconst menu = this.getMenu();\n\t\t\t\tif (menu !== null)\n\t\t\t\t{\n\t\t\t\t\tmenu.close();\n\t\t\t\t}\n\t\t\t}, 300));\n\n\t\t\treturn container;\n\t\t});\n\t}\n\n\tgetContentContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('content-container', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"side-panel-toolbar-content\">\n\t\t\t\t\t<div class=\"side-panel-toolbar-collapse-btn\" onclick=\"${this.handleToggleClick.bind(this)}\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --chevron-right\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getItemsContainer()}\n\t\t\t\t\t${this.getMoreButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetItemsContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('items-container', () => {\n\t\t\tconst container = Tag.render`<div class=\"side-panel-toolbar-items\"></div>`;\n\t\t\t[...this.items].slice(0, this.maxVisibleItems).forEach((item) => {\n\t\t\t\titem.appendTo(container);\n\t\t\t});\n\n\t\t\treturn container;\n\t\t});\n\t}\n\n\tgetMoreButton(): HTMLElement\n\t{\n\t\treturn this.refs.remember('more-button', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"side-panel-toolbar-more-btn\" onclick=\"${this.handleMoreBtnClick.bind(this)}\">\n\t\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\thandleMoreBtnClick(event): void\n\t{\n\t\tconst targetNode = this.getMoreButton();\n\t\tconst rect = targetNode.getBoundingClientRect();\n\t\tconst targetNodeWidth = rect.width;\n\n\t\tconst items = [...this.items].filter((item) => !item.isRendered()).map((item) => {\n\t\t\tconst title = (\n\t\t\t\tType.isStringFilled(item.getEntityName())\n\t\t\t\t\t? `${item.getEntityName()}\\n${item.getTitle()}`\n\t\t\t\t\t: item.getTitle()\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tid: item.getId(),\n\t\t\t\thtml: this.createMenuItemText(item),\n\t\t\t\ttitle,\n\t\t\t\thref: item.getUrl(),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tmenu.close();\n\t\t\t\t},\n\t\t\t};\n\t\t});\n\n\t\tif (items.length > 0)\n\t\t{\n\t\t\titems.push({\n\t\t\t\tdelimiter: true,\n\t\t\t});\n\t\t}\n\n\t\titems.push({\n\t\t\ttext: Loc.getMessage('MAIN_SIDEPANEL_REMOVE_ALL'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.removeAll();\n\t\t\t\tthis.hide();\n\t\t\t\tmenu.close();\n\n\t\t\t\tthis.request('removeAll');\n\t\t\t},\n\t\t});\n\n\t\tconst menu = MenuManager.create({\n\t\t\tid: 'sidepanel-toolbar-more-btn',\n\t\t\tcacheable: false,\n\t\t\tbindElement: rect,\n\t\t\tbindOptions: {\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tforceTop: true,\n\t\t\t\tposition: 'top',\n\t\t\t},\n\t\t\tmaxWidth: 260,\n\t\t\tfixed: true,\n\t\t\toffsetTop: 0,\n\t\t\tmaxHeight: 305,\n\t\t\titems,\n\t\t\tevents: {\n\t\t\t\tonShow: (event) => {\n\t\t\t\t\tconst popup = event.getTarget();\n\t\t\t\t\tconst popupWidth = popup.getPopupContainer().offsetWidth;\n\t\t\t\t\tconst offsetLeft = (targetNodeWidth / 2) - (popupWidth / 2);\n\t\t\t\t\tconst angleShift = Popup.getOption('angleLeftOffset') - Popup.getOption('angleMinTop');\n\n\t\t\t\t\tpopup.setAngle({ offset: popupWidth / 2 - angleShift });\n\t\t\t\t\tpopup.setOffset({ offsetLeft: offsetLeft + Popup.getOption('angleLeftOffset') });\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tmenu.show();\n\t}\n\n\tcanShowOnTop(): boolean\n\t{\n\t\tconst popups = PopupManager.getPopups();\n\t\tfor (const popup of popups)\n\t\t{\n\t\t\tif (!popup.isShown())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tpopup.getId().startsWith('timeman_weekly_report_popup_')\n\t\t\t\t|| popup.getId().startsWith('timeman_daily_report_popup_')\n\t\t\t\t|| Dom.hasClass(popup.getPopupContainer(), 'b24-whatsnew__popup')\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (Reflection.getClass('BX.UI.Viewer.Instance') && BX.UI.Viewer.Instance.isOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst sliders = getInstance().getOpenSliders();\n\t\tfor (const slider of sliders)\n\t\t{\n\t\t\tconst sliderId = slider.getUrl().toString();\n\t\t\tif (\n\t\t\t\tslider.shouldHideToolbarOnOpen()\n\t\t\t\t|| sliderId.startsWith('im:slider')\n\t\t\t\t|| sliderId.startsWith('release-slider')\n\t\t\t\t|| sliderId.startsWith('main:helper')\n\t\t\t\t|| sliderId.startsWith('ui:info_helper')\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tconst stack = ZIndexManager.getStack(document.body);\n\t\tconst components = stack === null ? [] : stack.getComponents();\n\t\tfor (const component of components)\n\t\t{\n\t\t\tif (component.getOverlay() !== null && component.getOverlay().offsetWidth > 0)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetMenu(): Menu | null\n\t{\n\t\treturn MenuManager.getMenuById('sidepanel-toolbar-more-btn');\n\t}\n\n\tcreateMenuItemText(item): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"side-panel-toolbar-menu-item\">${[\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"side-panel-toolbar-menu-item-title\">${Text.encode(item.getTitle())}</span>\n\t\t\t\t`,\n\t\t\t\tTag.render`\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"side-panel-toolbar-menu-item-remove\"\n\t\t\t\t\t\tdata-slider-ignore-autobinding=\"true\"\n\t\t\t\t\t\tdata-menu-item-id=\"${item.getId()}\"\n\t\t\t\t\t\tonclick=\"${this.handleMenuItemRemove.bind(this)}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"ui-icon-set --cross-20\" data-slider-ignore-autobinding=\"true\"></span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t]}</span>\n\t\t`;\n\t}\n\n\thandleToggleClick(): void\n\t{\n\t\tthis.toggle();\n\t}\n}\n","import type { JsonObject } from 'main.core';\nimport { Type, Dom, Event, Runtime, Reflection, Browser, ajax as Ajax, Uri } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { PopupManager } from 'main.popup';\n\nimport { Slider } from './slider';\nimport type { SliderEvent } from './slider-event';\nimport { Toolbar } from './toolbar';\nimport { MessageEvent } from './message-event';\nimport type { ToolbarItem } from './toolbar-item';\nimport type { LinkOptions } from './types/link-options';\nimport type { MinimizeOptions } from './types/minimize-options';\nimport type { RuleOptions } from './types/rule-options';\n\nimport { type SliderOptions } from './types/slider-options';\n\nlet sliderClassName = null;\nlet sliderDefaultOptions: SliderOptions = null;\nlet sliderPriorityOptions: SliderOptions = null;\n\n/**\n * @namespace BX.SidePanel\n * @alias Manager\n */\nexport class SliderManager\n{\n\tconstructor()\n\t{\n\t\tthis.anchorRules = [];\n\t\tthis.anchorBinding = true;\n\n\t\tthis.openSliders = [];\n\t\tthis.lastOpenSlider = null;\n\n\t\tthis.opened = false;\n\t\tthis.hidden = false;\n\t\tthis.hacksApplied = false;\n\n\t\tthis.pageUrl = this.getCurrentUrl();\n\t\tthis.pageTitle = this.getCurrentTitle();\n\t\tthis.titleChanged = false;\n\n\t\tthis.toolbar = null;\n\n\t\tthis.fullScreenSlider = null;\n\n\t\tthis.handleAnchorClick = this.handleAnchorClick.bind(this);\n\t\tthis.handleDocumentKeyDown = this.handleDocumentKeyDown.bind(this);\n\t\tthis.handleWindowResize = Runtime.throttle(this.handleWindowResize, 300, this);\n\t\tthis.handleWindowScroll = this.handleWindowScroll.bind(this);\n\t\tthis.handleTouchMove = this.handleTouchMove.bind(this);\n\n\t\tthis.handleSliderOpenStart = this.handleSliderOpenStart.bind(this);\n\t\tthis.handleSliderOpenComplete = this.handleSliderOpenComplete.bind(this);\n\t\tthis.handleSliderMaximizeStart = this.handleSliderMaximizeStart.bind(this);\n\t\tthis.handleSliderCloseStart = this.handleSliderCloseStart.bind(this);\n\t\tthis.handleSliderCloseComplete = this.handleSliderCloseComplete.bind(this);\n\t\tthis.handleSliderMinimizeStart = this.handleSliderMinimizeStart.bind(this);\n\t\tthis.handleSliderLoad = this.handleSliderLoad.bind(this);\n\t\tthis.handleSliderDestroy = this.handleSliderDestroy.bind(this);\n\t\tthis.handleEscapePress = this.handleEscapePress.bind(this);\n\t\tthis.handleFullScreenChange = this.handleFullScreenChange.bind(this);\n\n\t\tEventEmitter.subscribe('SidePanel:open', this.open.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:close', this.close.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:closeAll', this.closeAll.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:destroy', this.destroy.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:hide', this.hide.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:unhide', this.unhide.bind(this), { compatMode: true });\n\n\t\tEventEmitter.subscribe('SidePanel:postMessage', this.postMessage.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:postMessageAll', this.postMessageAll.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:postMessageTop', this.postMessageTop.bind(this), { compatMode: true });\n\n\t\t// Compatibility\n\t\tEventEmitter.subscribe('BX.Bitrix24.PageSlider:close', this.close.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('Bitrix24.Slider:postMessage', this.handlePostMessageCompatible.bind(this), { compatMode: true });\n\t}\n\n\tstatic registerSliderClass(\n\t\tclassName: string,\n\t\tdefaultOptions: SliderOptions = null,\n\t\tpriorityOptions: SliderOptions = null,\n\t): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tsliderClassName = className;\n\t\t}\n\n\t\tif (Type.isPlainObject(defaultOptions))\n\t\t{\n\t\t\tsliderDefaultOptions = defaultOptions;\n\t\t}\n\n\t\tif (Type.isPlainObject(priorityOptions))\n\t\t{\n\t\t\tsliderPriorityOptions = priorityOptions;\n\t\t}\n\t}\n\n\tstatic getSliderClass(): Slider\n\t{\n\t\tconst sliderClass = sliderClassName === null ? null : Reflection.getClass(sliderClassName);\n\n\t\treturn sliderClass === null ? Slider : sliderClass;\n\t}\n\n\tstatic getSliderDefaultOptions(): SliderOptions\n\t{\n\t\treturn sliderDefaultOptions === null ? {} : sliderDefaultOptions;\n\t}\n\n\tstatic getSliderPriorityOptions(): SliderOptions\n\t{\n\t\treturn sliderPriorityOptions === null ? {} : sliderPriorityOptions;\n\t}\n\n\topen(url: string, options: SliderOptions): boolean\n\t{\n\t\tconst slider = this.#createSlider(url, options);\n\t\tif (slider === null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.tryApplyHacks(\n\t\t\tslider,\n\t\t\t() => slider.open(),\n\t\t);\n\t}\n\n\t#createSlider(sliderUrl: string, sliderOptions: SliderOptions): Slider | null\n\t{\n\t\tif (!Type.isStringFilled(sliderUrl))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst url = this.refineUrl(sliderUrl);\n\n\t\tif (this.isHidden())\n\t\t{\n\t\t\tthis.unhide();\n\t\t}\n\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider && topSlider.isOpen() && topSlider.getUrl() === url)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.getLastOpenSlider() && this.getLastOpenSlider().getUrl() === url)\n\t\t{\n\t\t\treturn this.getLastOpenSlider();\n\t\t}\n\n\t\tconst rule = this.getUrlRule(url);\n\t\tconst ruleOptions = rule !== null && Type.isPlainObject(rule.options) ? rule.options : {};\n\n\t\tconst useGlobalOptions = sliderOptions?.useGlobalOptions ?? ruleOptions.useGlobalOptions ?? true;\n\t\tconst useRuleOptions = sliderOptions !== ruleOptions && useGlobalOptions;\n\t\tconst options: SliderOptions = {\n\t\t\t...(useRuleOptions ? ruleOptions : {}),\n\t\t\t...sliderOptions,\n\t\t\tevents: [useRuleOptions && ruleOptions.events, sliderOptions?.events],\n\t\t};\n\n\t\tconst defaultOptions = SliderManager.getSliderDefaultOptions();\n\t\tconst priorityOptions = SliderManager.getSliderPriorityOptions();\n\n\t\tconst SliderClass = SliderManager.getSliderClass();\n\t\tconst slider: Slider = new SliderClass(url, Runtime.merge(defaultOptions, options, priorityOptions));\n\n\t\tlet offset = null;\n\t\tif (slider.shouldUseAutoOffset() && slider.getWidth() === null && slider.getCustomLeftBoundary() === null)\n\t\t{\n\t\t\toffset = 0;\n\t\t\tconst lastOffset = this.#getLastOffset();\n\t\t\tif (topSlider && lastOffset !== null)\n\t\t\t{\n\t\t\t\toffset = Math.min(lastOffset + this.#getMinOffset(), this.#getMaxOffset());\n\t\t\t}\n\t\t}\n\n\t\tslider.setOffset(offset);\n\n\t\tif (topSlider && topSlider.getCustomRightBoundary() !== null)\n\t\t{\n\t\t\tconst rightBoundary = slider.calculateRightBoundary();\n\t\t\tif (rightBoundary > topSlider.getCustomRightBoundary())\n\t\t\t{\n\t\t\t\tslider.setCustomRightBoundary(topSlider.getCustomRightBoundary());\n\t\t\t}\n\t\t}\n\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onOpenStart', this.handleSliderOpenStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onBeforeOpenComplete', this.handleSliderOpenComplete, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onMaximizeStart', this.handleSliderMaximizeStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onCloseStart', this.handleSliderCloseStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onBeforeCloseComplete', this.handleSliderCloseComplete, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onMinimizeStart', this.handleSliderMinimizeStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onLoad', this.handleSliderLoad, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onDestroy', this.handleSliderDestroy, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onEscapePress', this.handleEscapePress, { compatMode: true });\n\n\t\treturn slider;\n\t}\n\n\tgetMinimizeOptions(url: string): MinimizeOptions | null\n\t{\n\t\tconst rule = this.getUrlRule(url);\n\t\tconst ruleOptions = rule !== null && Type.isPlainObject(rule.options) ? rule.options : {};\n\n\t\treturn Type.isPlainObject(ruleOptions.minimizeOptions) ? ruleOptions.minimizeOptions : null;\n\t}\n\n\tmaximize(url, options: SliderOptions): boolean\n\t{\n\t\tconst slider = this.#createSlider(url, options);\n\t\tif (slider === null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.tryApplyHacks(\n\t\t\tslider,\n\t\t\t() => slider.maximize(),\n\t\t);\n\t}\n\n\ttryApplyHacks(slider, cb: Function): boolean\n\t{\n\t\tif (!this.isOpen())\n\t\t{\n\t\t\tthis.applyHacks(slider);\n\t\t}\n\n\t\tconst success = cb();\n\t\tif (!success)\n\t\t{\n\t\t\tthis.resetHacks(slider);\n\t\t}\n\n\t\treturn success;\n\t}\n\n\tisOpen(): boolean\n\t{\n\t\treturn this.opened;\n\t}\n\n\tclose(immediately: boolean, callback: Function): void\n\t{\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider)\n\t\t{\n\t\t\ttopSlider.close(immediately, callback);\n\t\t}\n\t}\n\n\tcloseAll(immediately: boolean): void\n\t{\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tconst success = slider.close(immediately);\n\t\t\tif (!success)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tminimize(immediately: boolean, callback: Function): void\n\t{\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider)\n\t\t{\n\t\t\ttopSlider.minimize(immediately, callback);\n\t\t}\n\t}\n\n\thide(): boolean\n\t{\n\t\tif (this.hidden)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst topSlider = this.getTopSlider();\n\n\t\tthis.getOpenSliders().forEach((slider: Slider) => {\n\t\t\tslider.hide();\n\t\t});\n\n\t\tthis.hidden = true;\n\n\t\tthis.resetHacks(topSlider);\n\n\t\treturn true;\n\t}\n\n\tunhide(): boolean\n\t{\n\t\tif (!this.hidden)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.getOpenSliders().forEach((slider) => {\n\t\t\tslider.unhide();\n\t\t});\n\n\t\tthis.hidden = false;\n\n\t\tsetTimeout(() => {\n\t\t\tthis.applyHacks(this.getTopSlider());\n\t\t}, 0);\n\n\t\treturn true;\n\t}\n\n\tisHidden(): boolean\n\t{\n\t\treturn this.hidden;\n\t}\n\n\tdestroy(sliderUrl: string)\n\t{\n\t\tif (!Type.isStringFilled(sliderUrl))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst url = this.refineUrl(sliderUrl);\n\t\tconst sliderToDestroy = this.getSlider(url);\n\n\t\tif (this.getLastOpenSlider() && (sliderToDestroy || this.getLastOpenSlider().getUrl() === url))\n\t\t{\n\t\t\tthis.getLastOpenSlider().destroy();\n\t\t}\n\n\t\tif (sliderToDestroy !== null)\n\t\t{\n\t\t\tconst openSliders = this.getOpenSliders();\n\t\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t\t{\n\t\t\t\tconst slider = openSliders[i];\n\t\t\t\tslider.destroy();\n\n\t\t\t\tif (slider === sliderToDestroy)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treload(): void\n\t{\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider)\n\t\t{\n\t\t\ttopSlider.reload();\n\t\t}\n\t}\n\n\tgetTopSlider(): Slider | null\n\t{\n\t\tconst count = this.openSliders.length;\n\n\t\treturn this.openSliders[count - 1] || null;\n\t}\n\n\tgetPreviousSlider(currentSlider?: Slider): Slider | null\n\t{\n\t\tlet previousSlider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tcurrentSlider = currentSlider || this.getTopSlider();\n\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider === currentSlider)\n\t\t\t{\n\t\t\t\tpreviousSlider = openSliders[i - 1] || null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn previousSlider;\n\t}\n\n\tgetSlider(sliderUrl: string): Slider | null\n\t{\n\t\tconst url = this.refineUrl(sliderUrl);\n\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (const slider of openSliders)\n\t\t{\n\t\t\tif (slider.getUrl() === url)\n\t\t\t{\n\t\t\t\treturn slider;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetSliderByWindow(window: Window): Slider | null\n\t{\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (const slider of openSliders)\n\t\t{\n\t\t\tif (slider.getFrameWindow() === window)\n\t\t\t{\n\t\t\t\treturn slider;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetOpenSliders(): Slider[]\n\t{\n\t\treturn this.openSliders;\n\t}\n\n\tgetOpenSlidersCount(): number\n\t{\n\t\treturn this.openSliders.length;\n\t}\n\n\t/**\n\t * @private\n\t */\n\t#addOpenSlider(slider: Slider): void\n\t{\n\t\tif (!(slider instanceof Slider))\n\t\t{\n\t\t\tthrow new TypeError('Slider is not an instance of BX.SidePanel.Slider');\n\t\t}\n\n\t\tthis.openSliders.push(slider);\n\t}\n\n\t/**\n\t * @private\n\t */\n\t#removeOpenSlider(slider): boolean\n\t{\n\t\tconst openSliders = [...this.getOpenSliders()];\n\t\tfor (const [i, openSlider] of openSliders.entries())\n\t\t{\n\t\t\tif (openSlider === slider)\n\t\t\t{\n\t\t\t\tthis.openSliders.splice(i, 1);\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetLastOpenSlider(): Slider | null\n\t{\n\t\treturn this.lastOpenSlider;\n\t}\n\n\t#setLastOpenSlider(slider: Slider): void\n\t{\n\t\tif (this.lastOpenSlider !== slider)\n\t\t{\n\t\t\tif (this.lastOpenSlider)\n\t\t\t{\n\t\t\t\tthis.lastOpenSlider.destroy();\n\t\t\t}\n\n\t\t\tthis.lastOpenSlider = slider;\n\t\t}\n\t}\n\n\t#resetLastOpenSlider(): void\n\t{\n\t\tif (this.lastOpenSlider && this.getTopSlider() !== this.lastOpenSlider)\n\t\t{\n\t\t\tthis.lastOpenSlider.destroy();\n\t\t}\n\n\t\tthis.lastOpenSlider = null;\n\t}\n\n\tadjustLayout(): void\n\t{\n\t\tthis.getOpenSliders().forEach((slider: Slider) => {\n\t\t\tslider.adjustLayout();\n\t\t});\n\t}\n\n\tcreateToolbar(options): Toolbar\n\t{\n\t\tif (this.toolbar === null)\n\t\t{\n\t\t\tthis.toolbar = new Toolbar(options);\n\t\t}\n\n\t\treturn this.toolbar;\n\t}\n\n\tgetToolbar(): Toolbar\n\t{\n\t\treturn this.toolbar;\n\t}\n\n\t#getLastOffset(): number | null\n\t{\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider.getOffset() !== null)\n\t\t\t{\n\t\t\t\treturn slider.getOffset();\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trefineUrl(url: string): string\n\t{\n\t\tif (Type.isStringFilled(url) && /IFRAME/.test(url))\n\t\t{\n\t\t\treturn Uri.removeParam(url, ['IFRAME', 'IFRAME_TYPE']);\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tgetPageUrl(): string\n\t{\n\t\treturn this.pageUrl;\n\t}\n\n\tgetCurrentUrl(): string\n\t{\n\t\treturn window.location.pathname + window.location.search + window.location.hash;\n\t}\n\n\tgetPageTitle(): string\n\t{\n\t\treturn this.pageTitle;\n\t}\n\n\tgetCurrentTitle(): string\n\t{\n\t\tlet title = document.title;\n\t\tif (!Type.isUndefined(window.BXIM))\n\t\t{\n\t\t\ttitle = title.replace(/^\\(\\d+\\) /, ''); // replace a messenger counter.\n\t\t}\n\n\t\treturn title;\n\t}\n\n\tenterFullScreen()\n\t{\n\t\tif (!this.getTopSlider() || this.getFullScreenSlider())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst container = document.body;\n\t\tif (container.requestFullscreen)\n\t\t{\n\t\t\tEvent.bind(document, 'fullscreenchange', this.handleFullScreenChange);\n\t\t\tcontainer.requestFullscreen();\n\t\t}\n\t\telse if (container.webkitRequestFullScreen)\n\t\t{\n\t\t\tEvent.bind(document, 'webkitfullscreenchange', this.handleFullScreenChange);\n\t\t\tcontainer.webkitRequestFullScreen();\n\t\t}\n\t\telse if (container.msRequestFullscreen)\n\t\t{\n\t\t\tEvent.bind(document, 'MSFullscreenChange', this.handleFullScreenChange);\n\t\t\tcontainer.msRequestFullscreen();\n\t\t}\n\t\telse if (container.mozRequestFullScreen)\n\t\t{\n\t\t\tEvent.bind(document, 'mozfullscreenchange', this.handleFullScreenChange);\n\t\t\tcontainer.mozRequestFullScreen();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.log('Slider: Full Screen mode is not supported.');\n\t\t}\n\t}\n\n\texitFullScreen()\n\t{\n\t\tif (!this.getFullScreenSlider())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.exitFullscreen)\n\t\t{\n\t\t\tdocument.exitFullscreen();\n\t\t}\n\t\telse if (document.webkitExitFullscreen)\n\t\t{\n\t\t\tdocument.webkitExitFullscreen();\n\t\t}\n\t\telse if (document.msExitFullscreen)\n\t\t{\n\t\t\tdocument.msExitFullscreen();\n\t\t}\n\t\telse if (document.mozCancelFullScreen)\n\t\t{\n\t\t\tdocument.mozCancelFullScreen();\n\t\t}\n\t}\n\n\tgetFullScreenElement(): HTMLElement\n\t{\n\t\treturn (\n\t\t\tdocument.fullscreenElement\n\t\t\t|| document.webkitFullscreenElement\n\t\t\t|| document.mozFullScreenElement\n\t\t\t|| document.msFullscreenElement\n\t\t\t|| null\n\t\t);\n\t}\n\n\tgetFullScreenSlider(): Slider | null\n\t{\n\t\treturn this.fullScreenSlider;\n\t}\n\n\thandleFullScreenChange(event): void\n\t{\n\t\tif (this.getFullScreenElement())\n\t\t{\n\t\t\tthis.fullScreenSlider = this.getTopSlider();\n\t\t\tDom.addClass(this.fullScreenSlider.getOverlay(), 'side-panel-fullscreen');\n\n\t\t\tthis.fullScreenSlider.fireEvent('onFullScreenEnter');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.getFullScreenSlider())\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getFullScreenSlider().getOverlay(), 'side-panel-fullscreen');\n\t\t\t\tthis.fullScreenSlider.fireEvent('onFullScreenExit');\n\t\t\t\tthis.fullScreenSlider = null;\n\t\t\t}\n\n\t\t\tEvent.unbind(document, event.type, this.handleFullScreenChange);\n\t\t\twindow.scrollTo(0, this.pageScrollTop);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.adjustLayout();\n\t\t\t\tconst resizeEvent = document.createEvent('Event');\n\t\t\t\tresizeEvent.initEvent('resize', true, true);\n\t\t\t\twindow.dispatchEvent(resizeEvent);\n\t\t\t}, 1000);\n\t\t}\n\t}\n\n\tpostMessage(source: string | Window | Slider, eventId: string, data: JsonObject): void\n\t{\n\t\tconst sender = this.getSliderFromSource(source);\n\t\tif (!sender)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet previousSlider: Slider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider === sender)\n\t\t\t{\n\t\t\t\tpreviousSlider = openSliders[i - 1] || null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst sliderWindow = previousSlider ? previousSlider.getWindow() : window;\n\t\tsliderWindow.BX.onCustomEvent('Bitrix24.Slider:onMessage', [sender, data]); // Compatibility\n\n\t\tconst event = new MessageEvent({\n\t\t\tsender,\n\t\t\tslider: previousSlider || null,\n\t\t\tdata,\n\t\t\teventId,\n\t\t});\n\n\t\tif (previousSlider)\n\t\t{\n\t\t\tpreviousSlider.firePageEvent(event);\n\t\t\tpreviousSlider.fireFrameEvent(event);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEventEmitter.emit(event.getFullName().toLowerCase(), new BaseEvent({ data: [event], compatData: [event] }));\n\t\t}\n\t}\n\n\tpostMessageAll(source: string | Window | Slider, eventId: string, data: JsonObject): void\n\t{\n\t\tconst sender = this.getSliderFromSource(source);\n\t\tif (!sender)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet event = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider === sender)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tevent = new MessageEvent({ sender, slider, data, eventId });\n\t\t\tslider.firePageEvent(event);\n\t\t\tslider.fireFrameEvent(event);\n\t\t}\n\n\t\tevent = new MessageEvent({ sender, slider: null, data, eventId });\n\n\t\tEventEmitter.emit(event.getFullName().toLowerCase(), new BaseEvent({ data: [event], compatData: [event] }));\n\t}\n\n\tpostMessageTop(source: string | Window | Slider, eventId: string, data: JsonObject): void\n\t{\n\t\tconst sender = this.getSliderFromSource(source);\n\t\tif (!sender)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst event = new MessageEvent({ sender, slider: null, data, eventId });\n\n\t\tEventEmitter.emit(event.getFullName().toLowerCase(), new BaseEvent({ data: [event], compatData: [event] }));\n\t}\n\n\t#getMinOffset(): number\n\t{\n\t\treturn 63;\n\t}\n\n\t#getMaxOffset(): number\n\t{\n\t\treturn this.#getMinOffset() * 3;\n\t}\n\n\tbindAnchors(parameters: { rules: RuleOptions[] })\n\t{\n\t\tif (!Type.isPlainObject(parameters) || !Type.isArray(parameters.rules) || parameters.rules.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.anchorRules.length === 0)\n\t\t{\n\t\t\tthis.registerAnchorListener(window.document);\n\t\t}\n\n\t\tif (!(parameters.rules instanceof Object))\n\t\t{\n\t\t\tconsole.error(\n\t\t\t\t'BX.SitePanel: anchor rules were created in a different context. ' +\n\t\t\t\t'This might be a reason for a memory leak.',\n\t\t\t);\n\n\t\t\tconsole.trace();\n\t\t}\n\n\t\tparameters.rules.forEach((rule) => {\n\t\t\tif (Type.isArray(rule.condition))\n\t\t\t{\n\t\t\t\tfor (let m = 0; m < rule.condition.length; m++)\n\t\t\t\t{\n\t\t\t\t\tif (Type.isString(rule.condition[m]))\n\t\t\t\t\t{\n\t\t\t\t\t\trule.condition[m] = new RegExp(rule.condition[m], 'i');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trule.options ??= {};\n\n\t\t\tthis.anchorRules.push(rule);\n\t\t});\n\t}\n\n\tisAnchorBinding(): boolean\n\t{\n\t\treturn this.anchorBinding;\n\t}\n\n\tenableAnchorBinding(): void\n\t{\n\t\tthis.anchorBinding = true;\n\t}\n\n\tdisableAnchorBinding(): void\n\t{\n\t\tthis.anchorBinding = false;\n\t}\n\n\tregisterAnchorListener(targetDocument)\n\t{\n\t\tEvent.bind(targetDocument, 'click', this.handleAnchorClick, true);\n\t}\n\n\tunregisterAnchorListener(targetDocument)\n\t{\n\t\tEvent.unbind(targetDocument, 'click', this.handleAnchorClick, true);\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderOpenStart(event: SliderEvent)\n\t{\n\t\tif (!event.isActionAllowed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst slider = event.getSlider();\n\t\tif (slider.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.getTopSlider())\n\t\t{\n\t\t\tthis.exitFullScreen();\n\n\t\t\tthis.getTopSlider().hideOverlay();\n\t\t\tslider.setOverlayBackground();\n\n\t\t\tconst sameWidth = (\n\t\t\t\tthis.getTopSlider().getOffset() === slider.getOffset()\n\t\t\t\t&& this.getTopSlider().getWidth() === slider.getWidth()\n\t\t\t\t&& this.getTopSlider().getCustomLeftBoundary() === slider.getCustomLeftBoundary()\n\t\t\t);\n\n\t\t\tif (!sameWidth)\n\t\t\t{\n\t\t\t\tthis.getTopSlider().showShadow();\n\t\t\t}\n\n\t\t\tthis.getTopSlider().hideCloseBtn();\n\t\t\tthis.getTopSlider().hideExtraLabels();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tslider.setOverlayAnimation(true);\n\t\t}\n\n\t\tthis.#addOpenSlider(slider);\n\n\t\t// this.getOpenSliders().forEach((currentSlider: Slider, index: number, openSliders: Slider[]) => {\n\t\t// \tcurrentSlider.getLabel().moveAt(openSliders.length - index - 1); // move down\n\t\t// });\n\n\t\tthis.losePageFocus();\n\n\t\tif (!this.opened)\n\t\t{\n\t\t\tthis.pageUrl = this.getCurrentUrl();\n\t\t\tthis.pageTitle = this.getCurrentTitle();\n\t\t}\n\n\t\tthis.opened = true;\n\n\t\tthis.#resetLastOpenSlider();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderOpenComplete(event: SliderEvent)\n\t{\n\t\tthis.setBrowserHistory(event.getSlider());\n\t\tthis.updateBrowserTitle();\n\t\tevent.getSlider().setAnimation('sliding');\n\n\t\tconst openSliders = this.getOpenSliders();\n\t\tconst topSlider = event.getSlider();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (topSlider === slider)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (topSlider.getContainer().offsetLeft <= slider.getContainer().offsetLeft)\n\t\t\t{\n\t\t\t\tDom.addClass(slider.getOverlay(), '--invisible');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderCloseStart(event: SliderEvent)\n\t{\n\t\tif (!event.isActionAllowed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.getSlider() && event.getSlider().isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst previousSlider = this.getPreviousSlider();\n\t\tconst topSlider = this.getTopSlider();\n\n\t\tthis.exitFullScreen();\n\n\t\t// this.getOpenSliders().forEach((slider, index, openSliders) => {\n\t\t// \tslider.getLabel().moveAt(openSliders.length - index - 2); // move up\n\t\t// });\n\n\t\tlet visibleSlider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (event.getSlider() === slider)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (visibleSlider === null || slider.getContainer().offsetLeft < visibleSlider.getContainer().offsetLeft)\n\t\t\t{\n\t\t\t\tDom.removeClass(slider.getOverlay(), '--invisible');\n\t\t\t\tvisibleSlider = slider;\n\t\t\t}\n\t\t}\n\n\t\tif (previousSlider)\n\t\t{\n\t\t\tpreviousSlider.unhideOverlay();\n\t\t\tpreviousSlider.hideShadow();\n\t\t\tpreviousSlider.showCloseBtn();\n\t\t\tpreviousSlider.showExtraLabels();\n\n\t\t\tif (topSlider)\n\t\t\t{\n\t\t\t\ttopSlider.hideOverlay();\n\t\t\t\ttopSlider.hideShadow();\n\t\t\t}\n\t\t}\n\t}\n\n\thandleSliderMaximizeStart(event)\n\t{\n\t\tif (!event.isActionAllowed() || this.getToolbar() === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst slider = event.getSlider();\n\t\tif (slider && slider.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst { entityType, entityId } = slider.getMinimizeOptions() || {};\n\t\tconst item = this.getToolbar().getItem(entityType, entityId);\n\n\t\tthis.getToolbar().request('maximize', item);\n\n\t\tconst origin = this.#getItemOrigin(slider, item);\n\t\tslider.setAnimation('scale', { origin });\n\t}\n\n\thandleSliderMinimizeStart(event)\n\t{\n\t\tif (!event.isActionAllowed() || this.getToolbar() === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst slider = event.getSlider();\n\t\tif (slider && slider.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.getToolbar().isShown())\n\t\t{\n\t\t\tthis.getToolbar().show();\n\t\t}\n\n\t\tlet title = slider.getTitle();\n\t\tif (!title)\n\t\t{\n\t\t\ttitle = slider.getFrameWindow() ? slider.getFrameWindow().document.title : null;\n\t\t}\n\n\t\tthis.getToolbar().expand(true);\n\n\t\tconst minimizeOptions = this.getMinimizeOptions(slider.getUrl());\n\t\tconst { entityType, entityId, url } = slider.getMinimizeOptions() || minimizeOptions || {};\n\n\t\tconst item = this.getToolbar().minimizeItem({\n\t\t\ttitle,\n\t\t\turl: Type.isStringFilled(url) ? url : slider.getUrl(),\n\t\t\tentityType,\n\t\t\tentityId,\n\t\t});\n\n\t\tconst origin = this.#getItemOrigin(slider, item);\n\t\tslider.setAnimation('scale', { origin });\n\t}\n\n\t#getItemOrigin(slider: Slider, item: ToolbarItem): void\n\t{\n\t\tif (item && item.getContainer().offsetWidth > 0)\n\t\t{\n\t\t\tconst rect = item.getContainer().getBoundingClientRect();\n\t\t\tconst offset = slider.getContainer().getBoundingClientRect().left;\n\t\t\tconst left = rect.left - offset + rect.width / 2;\n\n\t\t\treturn `${left}px ${rect.top}px`;\n\t\t}\n\n\t\treturn '50% 100%';\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderCloseComplete(event: SliderEvent)\n\t{\n\t\tconst slider = event.getSlider();\n\t\tif (slider === this.getTopSlider())\n\t\t{\n\t\t\tthis.#setLastOpenSlider(slider);\n\t\t}\n\n\t\tevent.getSlider().setAnimation('sliding');\n\n\t\tthis.cleanUpClosedSlider(slider);\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderDestroy(event: SliderEvent)\n\t{\n\t\tconst slider = event.getSlider();\n\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onOpenStart', this.handleSliderOpenStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onBeforeOpenComplete', this.handleSliderOpenComplete);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onMaximizeStart', this.handleSliderMaximizeStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onCloseStart', this.handleSliderCloseStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onBeforeCloseComplete', this.handleSliderCloseComplete);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onMinimizeStart', this.handleSliderMinimizeStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onLoad', this.handleSliderLoad);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onDestroy', this.handleSliderDestroy);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onEscapePress', this.handleEscapePress);\n\n\t\tconst frameWindow = event.getSlider().getFrameWindow();\n\t\tif (frameWindow && !event.getSlider().allowCrossOrigin)\n\t\t{\n\t\t\tthis.unregisterAnchorListener(frameWindow.document);\n\t\t}\n\n\t\tif (slider === this.getLastOpenSlider())\n\t\t{\n\t\t\tthis.lastOpenSlider = null;\n\t\t}\n\n\t\tthis.cleanUpClosedSlider(slider);\n\t}\n\n\thandleEscapePress(event)\n\t{\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider?.canCloseByEsc() && this.isOnTop(topSlider))\n\t\t{\n\t\t\ttopSlider.close();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcleanUpClosedSlider(slider: Slider)\n\t{\n\t\tthis.#removeOpenSlider(slider);\n\n\t\tslider.unhideOverlay();\n\t\tslider.hideShadow();\n\n\t\t// this.getOpenSliders().forEach((slider, index, openSliders) => {\n\t\t// \tslider.getLabel().moveAt(openSliders.length - index - 1); //update position\n\t\t// });\n\n\t\tif (this.getTopSlider())\n\t\t{\n\t\t\tthis.getTopSlider().unhideOverlay();\n\t\t\tthis.getTopSlider().hideShadow();\n\t\t\tthis.getTopSlider().showCloseBtn();\n\t\t\tthis.getTopSlider().showExtraLabels();\n\t\t\tthis.getTopSlider().focus();\n\t\t}\n\t\telse\n\t\t{\n\t\t\twindow.focus();\n\t\t}\n\n\t\tif (!this.getOpenSlidersCount())\n\t\t{\n\t\t\tthis.resetHacks(slider);\n\t\t\tthis.opened = false;\n\t\t}\n\n\t\tthis.resetBrowserHistory();\n\t\tthis.updateBrowserTitle();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderLoad(event: SliderEvent)\n\t{\n\t\tconst frameWindow = event.getSlider().getFrameWindow();\n\t\tif (frameWindow)\n\t\t{\n\t\t\tthis.registerAnchorListener(frameWindow.document);\n\t\t}\n\n\t\tthis.setBrowserHistory(event.getSlider());\n\t\tthis.updateBrowserTitle();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandlePostMessageCompatible(source: string | Window | Slider, data: JsonObject)\n\t{\n\t\tthis.postMessage(source, '', data);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetSliderFromSource(source: string | Window | Slider)\n\t{\n\t\tif (source instanceof Slider)\n\t\t{\n\t\t\treturn source;\n\t\t}\n\n\t\tif (Type.isStringFilled(source))\n\t\t{\n\t\t\treturn this.getSlider(source);\n\t\t}\n\n\t\tif (source !== null && source === source.window && window !== source)\n\t\t{\n\t\t\treturn this.getSliderByWindow(source);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tapplyHacks(slider: Slider): boolean\n\t{\n\t\tif (this.hacksApplied)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.applyHacks();\n\t\t}\n\n\t\tthis.disablePageScrollbar();\n\t\tthis.bindEvents();\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.applyPostHacks();\n\t\t}\n\n\t\tthis.hacksApplied = true;\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tresetHacks(slider: Slider): boolean\n\t{\n\t\tif (!this.hacksApplied)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.resetPostHacks();\n\t\t}\n\n\t\tthis.enablePageScrollbar();\n\t\tthis.unbindEvents();\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.resetHacks();\n\t\t}\n\n\t\tthis.hacksApplied = false;\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tbindEvents(): boolean\n\t{\n\t\tEvent.bind(document, 'keydown', this.handleDocumentKeyDown);\n\t\tEvent.bind(window, 'resize', this.handleWindowResize);\n\t\tEvent.bind(window, 'scroll', this.handleWindowScroll); // Live Comments can change scrollTop\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tEvent.bind(document.body, 'touchmove', this.handleTouchMove);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tunbindEvents()\n\t{\n\t\tEvent.unbind(document, 'keydown', this.handleDocumentKeyDown);\n\t\tEvent.unbind(window, 'resize', this.handleWindowResize);\n\t\tEvent.unbind(window, 'scroll', this.handleWindowScroll);\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tEvent.unbind(document.body, 'touchmove', this.handleTouchMove);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tdisablePageScrollbar(): void\n\t{\n\t\tconst scrollWidth = window.innerWidth - document.documentElement.clientWidth;\n\t\tdocument.body.style.paddingRight = scrollWidth + 'px';\n\t\tDom.style(document.body, '--scroll-shift-width', `${scrollWidth}px`);\n\t\tDom.addClass(document.body, 'side-panel-disable-scrollbar');\n\t\tthis.pageScrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tenablePageScrollbar()\n\t{\n\t\tdocument.body.style.removeProperty('padding-right');\n\t\tDom.style(document.body, '--scroll-shift-width', null);\n\t\tDom.removeClass(document.body, 'side-panel-disable-scrollbar');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tlosePageFocus()\n\t{\n\t\tif (Type.isDomNode(document.activeElement))\n\t\t{\n\t\t\tdocument.activeElement.blur();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleDocumentKeyDown(event: KeyboardEvent)\n\t{\n\t\tif (event.keyCode !== 27)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault(); // otherwise an iframe loading can be cancelled by a browser\n\n\t\tthis.handleEscapePress();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleWindowResize()\n\t{\n\t\tthis.adjustLayout();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleWindowScroll()\n\t{\n\t\twindow.scrollTo(0, this.pageScrollTop);\n\t\tthis.adjustLayout();\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleTouchMove(event)\n\t{\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tisOnTop(slider: Slider): boolean\n\t{\n\t\tif (slider)\n\t\t{\n\t\t\tconst popups = PopupManager.getPopups();\n\t\t\tconst isOnTopOfAllPopups = popups.every((popup) => slider.isOnTopOfPopup(popup));\n\t\t\tif (!isOnTopOfAllPopups)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Photo Slider or something else can cover Side Panel.\n\t\tconst centerX = document.documentElement.clientWidth / 2;\n\t\tconst centerY = document.documentElement.clientHeight / 2;\n\t\tconst element = document.elementFromPoint(centerX, centerY);\n\n\t\treturn Dom.hasClass(element, 'side-panel') || element.closest('.side-panel') !== null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\textractLinkFromEvent(event: MouseEvent): LinkOptions | null\n\t{\n\t\tconst target: HTMLElement = event.target;\n\n\t\tif (event.which !== 1 || !Type.isDomNode(target) || event.ctrlKey || event.metaKey)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet a = target;\n\t\tif (target.nodeName !== 'A' && Type.isElementNode(target))\n\t\t{\n\t\t\ta = target.closest('a');\n\t\t}\n\n\t\tif (!Type.isDomNode(a))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// do not use a.href here, the code will fail on links like <a href=\"#SG13\"></a>\n\t\tconst href = a.getAttribute('href');\n\t\tif (href)\n\t\t{\n\t\t\treturn {\n\t\t\t\turl: href,\n\t\t\t\tanchor: a,\n\t\t\t\ttarget: a.getAttribute('target'),\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @private\n\t * @param {MouseEvent} event\n\t */\n\thandleAnchorClick(event)\n\t{\n\t\tif (!this.isAnchorBinding())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst link = this.extractLinkFromEvent(event);\n\n\t\tif (!link || Dom.attr(link.anchor, 'data-slider-ignore-autobinding') !== null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Dom.attr(event.target, 'data-slider-ignore-autobinding') !== null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst rule = this.getUrlRule(link.url, link);\n\n\t\tif (!this.isValidLink(rule, link))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isFunction(rule.handler))\n\t\t{\n\t\t\trule.handler(event, link);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tif (Dom.attr(event.target, 'data-slider-maximize') === null)\n\t\t\t{\n\t\t\t\tthis.open(link.url, rule.options);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.maximize(link.url, rule.options);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @param {string} url\n\t */\n\temulateAnchorClick(url)\n\t{\n\t\tconst link = {\n\t\t\turl,\n\t\t\tanchor: null,\n\t\t\ttarget: null,\n\t\t};\n\n\t\tconst rule = this.getUrlRule(url, link);\n\n\t\tif (!this.isValidLink(rule, link))\n\t\t{\n\t\t\tBX.reload(url);\n\t\t}\n\t\telse if (Type.isFunction(rule.handler))\n\t\t{\n\t\t\trule.handler(\n\t\t\t\tnew MouseEvent(\n\t\t\t\t\t'slider',\n\t\t\t\t\t{\n\t\t\t\t\t\tbubbles: false,\n\t\t\t\t\t\tcancelable: true,\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t\tlink,\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.open(link.url, rule.options);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetUrlRule(href: string, link: LinkOptions): RuleOptions | null\n\t{\n\t\tif (!Type.isStringFilled(href))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!Type.isPlainObject(link))\n\t\t{\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = href;\n\n\t\t\tlink = { url: href, anchor: a, target: '' };\n\t\t}\n\n\t\tfor (let k = 0; k < this.anchorRules.length; k++)\n\t\t{\n\t\t\tconst rule = this.anchorRules[k];\n\n\t\t\tif (!Type.isArray(rule.condition))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (let m = 0; m < rule.condition.length; m++)\n\t\t\t{\n\t\t\t\tconst matches = href.match(rule.condition[m]);\n\t\t\t\tif (matches && !this.hasStopParams(href, rule.stopParameters))\n\t\t\t\t{\n\t\t\t\t\tlink.matches = matches;\n\n\t\t\t\t\tlet options = Type.isFunction(rule.options) ? rule.options(link) : rule.options;\n\t\t\t\t\tconst minimizeOptions = Type.isFunction(rule.minimizeOptions) ? rule.minimizeOptions(link) : null;\n\t\t\t\t\tif (Type.isPlainObject(minimizeOptions))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Type.isPlainObject(options))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toptions.minimizeOptions = minimizeOptions;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toptions = { minimizeOptions };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isStringFilled(rule.loader) && !Type.isStringFilled(options.loader))\n\t\t\t\t\t{\n\t\t\t\t\t\toptions.loader = rule.loader;\n\t\t\t\t\t\tdelete rule.loader;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn { ...rule, options };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tisValidLink(rule: RuleOptions, link: LinkOptions): boolean\n\t{\n\t\tif (!rule)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (rule.allowCrossDomain !== true && Ajax.isCrossDomain(link.url))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (rule.mobileFriendly !== true && Browser.isMobile())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !Type.isFunction(rule.validate) || rule.validate(link);\n\t}\n\n\t/**\n\t * @private\n\t * @param {BX.SidePanel.Slider} slider\n\t */\n\tsetBrowserHistory(slider)\n\t{\n\t\tif (!(slider instanceof Slider))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (slider.canChangeHistory() && slider.isOpen() && slider.isLoaded())\n\t\t{\n\t\t\twindow.history.replaceState({}, '', slider.getUrl());\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tresetBrowserHistory()\n\t{\n\t\tlet topSlider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider.canChangeHistory() && slider.isOpen() && slider.isLoaded())\n\t\t\t{\n\t\t\t\ttopSlider = slider;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst url = topSlider ? topSlider.getUrl() : this.getPageUrl();\n\t\tif (url)\n\t\t{\n\t\t\twindow.history.replaceState({}, '', url);\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t */\n\tupdateBrowserTitle()\n\t{\n\t\tlet title = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\ttitle = this.getBrowserTitle(openSliders[i]);\n\t\t\tif (Type.isStringFilled(title))\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isStringFilled(title))\n\t\t{\n\t\t\tdocument.title = title;\n\t\t\tthis.titleChanged = true;\n\t\t}\n\t\telse if (this.titleChanged)\n\t\t{\n\t\t\tdocument.title = this.getPageTitle();\n\t\t\tthis.titleChanged = false;\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetBrowserTitle(slider: Slider): string | null\n\t{\n\t\tif (!slider || !slider.canChangeTitle() || !slider.isOpen() || !slider.isLoaded())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet title = slider.getTitle();\n\t\tif (!title && !slider.isSelfContained())\n\t\t{\n\t\t\ttitle = slider.getFrameWindow() ? slider.getFrameWindow().document.title : null;\n\t\t}\n\n\t\treturn Type.isStringFilled(title) ? title : null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\thasStopParams(url: string, params: string[]): boolean\n\t{\n\t\tif (!params || !Type.isArray(params) || !Type.isStringFilled(url))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst questionPos = url.indexOf('?');\n\t\tif (questionPos === -1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst query = url.slice(Math.max(0, questionPos));\n\t\tfor (const param of params)\n\t\t{\n\t\t\tif (new RegExp(`[?&]${param}=`, 'i').test(query))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @deprecated use getLastOpenSlider method\n\t */\n\tgetLastOpenPage(): Slider | null\n\t{\n\t\treturn this.getLastOpenSlider();\n\t}\n\n\t/**\n\t * @deprecated use getTopSlider method\n\t */\n\tgetCurrentPage(): Slider | null\n\t{\n\t\treturn this.getTopSlider();\n\t}\n}\n","import { Reflection } from 'main.core';\n\nimport { Slider } from './slider';\nimport { SliderManager } from './slider-manager';\nimport { MessageEvent } from './message-event';\nimport { Toolbar } from './toolbar';\nimport { ToolbarItem } from './toolbar-item';\nimport { Label } from './label';\nimport { Dictionary } from './dictionary';\nimport { SliderEvent } from './slider-event';\nimport { getInstance } from './get-instance';\n\nimport { type LabelOptions} from './types/label-options';\nimport { type LinkOptions } from './types/link-options';\nimport { type RuleOptions } from './types/rule-options';\nimport { type MinimizeOptions } from './types/minimize-options';\nimport { type SliderOptions } from './types/slider-options';\nimport { type ToolbarOptions } from './types/toolbar-options';\nimport { type ToolbarItemOptions } from './types/toolbar-item-options';\nimport { type OuterBoundary } from './types/outer-boundary';\n\nimport './css/sidepanel.css';\n\nconst SidePanel = {};\nObject.defineProperty(SidePanel, 'Instance', {\n\tenumerable: false,\n\tget: getInstance,\n});\n\nconst namespace = Reflection.namespace('BX.SidePanel');\n\nObject.defineProperty(namespace, 'Instance', {\n\tenumerable: false,\n\tget: getInstance,\n});\n\nexport {\n\tSidePanel,\n\tSlider,\n\tSliderManager,\n\tSliderManager as Manager,\n\tSliderEvent,\n\tSliderEvent as Event,\n\tMessageEvent,\n\tToolbar,\n\tToolbarItem,\n\tLabel,\n\tDictionary,\n};\n\nexport type {\n\tLabelOptions,\n\tLinkOptions,\n\tRuleOptions,\n\tMinimizeOptions,\n\tSliderOptions,\n\tToolbarOptions,\n\tToolbarItemOptions,\n\tOuterBoundary,\n};\n"],"names":["Dictionary","data","Type","isPlainObject","TypeError","key","value","isStringFilled","Error","Label","slider","labelOptions","Cache","MemoryCache","options","hidden","isBoolean","visible","setColor","color","setBgColor","bgColor","setText","text","setClassName","className","setIconClass","iconClass","setIconTitle","iconTitle","setOnclick","onclick","cache","remember","classes","getClassName","push","isHidden","isVisible","Dom","create","props","join","children","getIconBox","getTextContainer","events","click","bind","overlayRect","getSlider","getOverlay","getBoundingClientRect","containerRect","getContainer","maxWidth","left","getMinLeftBoundary","hideText","showText","style","constructor","MIN_LEFT_OFFSET","getIconContainer","getIconClass","removeClass","addClass","hasClass","opacity","isArray","alfa","matches","match","hex","length","replaceAll","isNumber","alfaHex","Math","round","toString","slice","toUpperCase","getColor","textContent","attr","toggleClass","fn","isFunction","position","getLabelsContainer","MIN_TOP_OFFSET","INTERVAL_TOP_OFFSET","event","stopPropagation","getOnclick","SliderEvent","action","name","Slider","getEventFullName","getName","MessageEvent","eventOptions","sender","setName","setSlider","eventId","url","sliderOptions","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","contentCallback","contentCallbackInvoved","contentClassName","containerClassName","overlayClassName","refineUrl","offset","hideControls","width","cacheable","autoFocus","printable","allowChangeHistory","allowChangeTitle","allowCrossOrigin","customLeftBoundary","customRightBoundary","setCustomLeftBoundary","setCustomRightBoundary","title","setTitle","iframe","iframeSrc","iframeId","requestMethod","toLowerCase","requestParams","opened","destroyed","loaded","loadedCnt","minimizing","maximizing","handleFrameKeyDown","handleFrameFocus","handleFrameUnload","handlePopupInit","handleCrossOriginWindowMessage","layout","overlay","container","loader","content","isElementNode","typeLoader","animation","animationDuration","overlayBgColor","test","overlayOpacity","min","max","overlayBgCallback","includes","startPosition","outerBoundary","overlayAnimation","animationName","animationOptions","minimizeOptions","setMinimizeOptions","setToolbarOnOpen","hideToolbarOnOpen","setDesignSystemContext","designSystemContext","setAutoOffset","autoOffset","label","Loc","getMessage","close","minimizeLabel","isLoaded","minimize","areMinimizeOptionsValid","newWindowLabel","copyLinkLabel","printLabel","canChangeHistory","newWindowUrl","getUrl","Object","assign","document","createElement","target","href","BX","clipboard","bindCopyClick","link","isPrintable","handlePrintBtnClick","onOpen","compatibleEvents","onLoad","flat","forEach","isOpen","canOpen","isDestroyed","fireEvent","createLayout","adjustLayout","ZIndexManager","bringToFront","animateOpening","immediately","callback","canClose","stop","Browser","isMobile","completeAnimation","easing","duration","start","finish","step","state","animateStep","complete","origin","animate","success","open","type","showMinimizeLabel","setVisible","entityType","entityId","flag","context","isString","getWindow","focus","zIndex","getZIndexComponent","getZIndex","Text","getRandom","contentWindow","window","isSelfContained","getTitle","showPrintBtn","hidePrintBtn","getLoader","createLoader","display","getLabel","show","hide","getText","showIcon","lightenIcon","hideIcon","darkenIcon","getExtraLabelsContainer","removeContentClass","getContentContainer","removeContainerClass","removeOverlayClass","getCustomLeftBoundary","getLeftBoundary","windowWidth","innerWidth","documentElement","clientWidth","getOffset","calculateLeftBoundary","boundary","getCustomRightBoundary","pageXOffset","getRightBoundary","firePageEvent","fireFrameEvent","frameWindow","getFrameWindow","Event","unbind","EventEmitter","unsubscribe","unregister","remove","closeBtn","unsubscribeAll","showLoader","setContent","location","reload","scrollTop","pageYOffset","windowHeight","innerHeight","clientHeight","topBoundary","getTopBoundary","isTopBoundaryVisible","height","leftBoundary","getLeftBoundaryOffset","rightBoundary","calculateRightBoundary","top","right","bottom","getWidth","parentNode","append","body","subscribe","getFrame","setFrameSrc","register","attrs","referrerpolicy","src","frameborder","getFrameId","id","load","handleFrameLoad","overlayClass","mousedown","handleOverlayClick","parseInt","padStart","Tag","render","getDesignSystemContext","contentClass","clean","promise","isPromiseReturned","prototype","call","Promise","resolve","then","result","html","Runtime","removeLoader","catch","reason","innerHTML","isDomNode","Uri","addParam","IFRAME","IFRAME_TYPE","isPostMethod","form","method","util","addObjectToForm","getRequestParams","submit","listenIframeLoading","sliderLoader","oldLoaders","createHTMLLoader","loaderExists","createOldLoader","charAt","createSvgLoader","moduleId","svgName","svg","createDefaultLoader","backgroundImage","i","styleSheets","rules","cssRules","rule","selectorText","scale","translateX","translateY","getOverlayAnimation","transform","isFocusable","getCloseBtn","isCacheable","destroy","eventName","sliderEvent","getEvent","emit","getFullName","BaseEvent","compatData","onCustomEvent","canAction","pageEvent","frameEvent","isActionAllowed","frameUrl","URL","eventUrl","message","undefined","iframeLocation","e","closeLoader","console","warn","paddingBottom","iframeUrl","pathname","search","hash","injectPrintStyles","setInterval","clearInterval","readyState","keyCode","framePopupManager","Main","PopupManager","popups","getPopups","popup","isShown","centerX","centerY","element","elementFromPoint","closest","sameStack","getStack","popupOnTop","getZindex","popupInside","contains","getPopupContainer","getCompatData","bindElement","params","targetContainer","preventDefault","frame","frameDoc","write","headTags","links","head","querySelectorAll","outerHTML","print","setTimeout","frameDocument","bodyClass","classList","bodyStyle","styleSheet","cssText","appendChild","createTextNode","removeParam","entries","compatMode","mode","states","progress","intensity","end","calculateOuterBoundary","merge","getOuterBoundary","ToolbarItem","itemOptions","setEventNamespace","entityName","refs","rendered","setUrl","setEntityType","setEntityId","getTitleContainer","String","handleMouseEnter","handleMouseLeave","handleRemoveBtnClick","encodeURI","encode","node","prepend","insertBefore","insertAfter","targetNode","rect","targetNodeWidth","popupWidth","scrollWidth","hint","bindOptions","forceBindPosition","forceTop","getEntityName","darkMode","fixed","offsetTop","onShow","getTarget","offsetLeft","angleShift","Popup","getOption","setAngle","setOffset","adjustPosition","getPopupById","showTooltip","hideTooltip","getEntityType","getEntityId","instance","getInstance","topWindow","PageObject","getRootWindow","SidePanel","Instance","SliderManager","Toolbar","toolbarOptions","items","lsKey","initialPosition","shiftedPosition","collapsed","muted","shifted","maxVisibleItems","addItems","item","restoreItemFromLocalStorage","getItem","clearLocalStorage","minimizeItem","canShowOnTop","unmute","mute","setPosition","sliders","getOpenSliders","unshift","shift","prop","unbindAll","requestAnimationFrame","bindOnce","request","expand","collapse","itemsOptions","isArrayFilled","addItem","createItem","redraw","getMinimizeOptions","setEntityName","handleItemRemove","itemExists","prependItem","saveItemToLocalStorage","response","status","removeItem","ttl","Date","now","localStorage","setItem","JSON","stringify","parse","additional","Ajax","runAction","json","toolbar","getContext","toJSON","itemId","currentTarget","dataset","menuItemId","itemToRemove","getItemById","menu","getMenu","removeMenuItem","invisibleItemsCount","getItems","reduce","count","isRendered","getPopupWindow","filter","restored","getItemsCount","visibleItemsCount","previousItem","nextItem","appendTo","getItemsContainer","find","getId","handleToggleClick","alwaysOnTop","toggleMuteness","debounce","forceCollapsed","onSliderClose","isMuted","toggleShift","isShifted","isCollapsed","throttle","getMoreButton","handleMoreBtnClick","map","createMenuItemText","delimiter","removeAll","MenuManager","maxHeight","offsetWidth","startsWith","Reflection","getClass","UI","Viewer","sliderId","shouldHideToolbarOnOpen","stack","components","getComponents","component","getMenuById","handleMenuItemRemove","toggle","sliderClassName","sliderDefaultOptions","sliderPriorityOptions","anchorRules","anchorBinding","openSliders","lastOpenSlider","hacksApplied","pageUrl","getCurrentUrl","pageTitle","getCurrentTitle","titleChanged","fullScreenSlider","handleAnchorClick","handleDocumentKeyDown","handleWindowResize","handleWindowScroll","handleTouchMove","handleSliderOpenStart","handleSliderOpenComplete","handleSliderMaximizeStart","handleSliderCloseStart","handleSliderCloseComplete","handleSliderMinimizeStart","handleSliderLoad","handleSliderDestroy","handleEscapePress","handleFullScreenChange","closeAll","unhide","postMessage","postMessageAll","postMessageTop","handlePostMessageCompatible","tryApplyHacks","getUrlRule","ruleOptions","maximize","cb","applyHacks","resetHacks","topSlider","getTopSlider","sliderUrl","sliderToDestroy","getLastOpenSlider","currentSlider","previousSlider","isUndefined","BXIM","replace","getFullScreenSlider","requestFullscreen","webkitRequestFullScreen","msRequestFullscreen","mozRequestFullScreen","log","exitFullscreen","webkitExitFullscreen","msExitFullscreen","mozCancelFullScreen","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","getFullScreenElement","scrollTo","pageScrollTop","resizeEvent","createEvent","initEvent","dispatchEvent","source","getSliderFromSource","sliderWindow","parameters","registerAnchorListener","error","trace","condition","m","RegExp","targetDocument","exitFullScreen","hideOverlay","setOverlayBackground","sameWidth","showShadow","hideCloseBtn","hideExtraLabels","setOverlayAnimation","_classPrivateMethodGet","losePageFocus","setBrowserHistory","updateBrowserTitle","setAnimation","getPreviousSlider","visibleSlider","unhideOverlay","hideShadow","showCloseBtn","showExtraLabels","getToolbar","cleanUpClosedSlider","unregisterAnchorListener","canCloseByEsc","isOnTop","getOpenSlidersCount","resetBrowserHistory","getSliderByWindow","disablePageScrollbar","bindEvents","applyPostHacks","resetPostHacks","enablePageScrollbar","unbindEvents","paddingRight","removeProperty","activeElement","blur","isOnTopOfAllPopups","every","isOnTopOfPopup","which","ctrlKey","metaKey","a","nodeName","getAttribute","anchor","isAnchorBinding","extractLinkFromEvent","isValidLink","handler","MouseEvent","bubbles","cancelable","k","hasStopParams","stopParameters","allowCrossDomain","isCrossDomain","mobileFriendly","validate","history","replaceState","getPageUrl","getBrowserTitle","getPageTitle","canChangeTitle","questionPos","indexOf","query","param","defaultOptions","priorityOptions","sliderClass","useGlobalOptions","useRuleOptions","getSliderDefaultOptions","getSliderPriorityOptions","SliderClass","getSliderClass","shouldUseAutoOffset","lastOffset","openSlider","splice","defineProperty","enumerable","get","namespace"],"mappings":"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"}