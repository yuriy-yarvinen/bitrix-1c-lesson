<? namespace Bitrix\Main;$GLOBALS['____1896061902']= array(base64_decode('Zm'.'lsZ'.'V9leGlzdH'.'M='),base64_decode('c'.'3'.'Ryd'.'G'.'91cHBl'.'cg=='),base64_decode(''.'bWQ'.'1'),base64_decode('bWQ1'),base64_decode('aW5'.'fYXJyY'.'Xk='),base64_decode('aW5fYXJyYXk='),base64_decode('Z'.'GVmaW'.'5lZA=='),base64_decode('Z'.'GVmaW5'.'lZ'.'A='.'='),base64_decode('ZGV'.'ma'.'W5l'.'ZA=='),base64_decode('ZmlsZ'.'V9le'.'G'.'l'.'zdHM='),base64_decode('ZmlsZ'.'V9leG'.'lzdHM='),base64_decode('Z'.'mlsZ'.'V9l'.'eGlzd'.'HM='),base64_decode('Z'.'m'.'ls'.'ZV'.'9leGl'.'zdH'.'M='),base64_decode('ZXhwbG9k'.'ZQ='.'='));if(!function_exists(__NAMESPACE__.'\\___1297763075')){function ___1297763075($_1970728434){static $_1380618978= false; if($_1380618978 == false) $_1380618978=array('L2J'.'pdHJp'.'eC9saW'.'NlbnN'.'lX2t'.'le'.'S5waHA=','','','RE'.'V'.'NTw='.'=','REV'.'N'.'T'.'w='.'=',''.'Qkl'.'UU'.'klY',''.'TElDRU5D'.'RQ'.'==',''.'RE'.'VNTw==','L2t'.'leV91c'.'GRhdG'.'Uuc'.'GhwP'.'2xpY2Vuc'.'2'.'V'.'fa2V5PQ==','JnRvY'.'m'.'F'.'za2V0PXkm'.'bGF'.'uZz0=','aH'.'R0'.'cHM6Ly9'.'kZXYuMW'.'MtYm'.'l0cml'.'4'.'LnJ'.'1L2xlYX'.'Ju'.'aW5nL2NvdXJzZS9'.'pbmRleC5w'.'aHA'.'/Q09VUlNFX0'.'lE'.'PT'.'EzNSZ'.'MRV'.'NTT05f'.'S'.'UQ9'.'M'.'jU3'.'MjA=',''.'aHR0cH'.'M6L'.'y'.'90'.'cmFpb'.'m'.'lu'.'Zy5iaXR'.'yaX'.'gyN'.'C5jb20vc3VwcG9yd'.'C90c'.'mFpbmluZy9jb'.'3Vyc2U'.'v'.'aW5'.'kZXgucGhwP'.'0'.'NPVV'.'JTRV9JRD0'.'xNzgmTEVT'.'U'.'09OX0lEPTI1O'.'TM'.'yJkxFU1N'.'PTl9'.'Q'.'QVRIPTE3'.'N'.'T'.'I'.'wLj'.'E'.'3NTYyLjI1OT'.'MwLj'.'I1OTMy','cnU'.'=','Yn'.'k=','a'.'3'.'o=',''.'Z'.'G'.'U=',''.'ZXU=','Z'.'nI=','cGw=','aXQ'.'=',''.'dWs=','Z'.'XU=','Y29t','ZW4=','RE'.'VNTw='.'=','WQ==','VE'.'l'.'NRUxJT'.'UlUX'.'0VE'.'S'.'VRJT'.'04=','WQ==','RU5'.'DT0'.'R'.'F','WQ==','U2'.'l'.'0ZU'.'V4c'.'Gl'.'y'.'ZUR'.'hdGU=','bWFp'.'bg='.'=','fnN'.'1cHBvcnRf'.'Z'.'mluaXNoX2RhdGU=','W'.'S'.'1tL'.'WQ=','WS1t'.'LWQ=','Yml0'.'cm'.'l'.'4MjQ=',''.'bWFpbg==','f'.'lBBUkFNX0NM'.'SUV'.'OVF9MQ'.'U5H','','a'.'W'.'5'.'0'.'cmFuZXQ=','ZW4=',''.'cn'.'U=','bWFpbg='.'=',''.'dmVuZG9y','Ym'.'l'.'0'.'cml4X3BvcnRh'.'bA='.'=','Y'.'ml0cml4','ZW4'.'=','MWN'.'fYml0c'.'ml4X'.'3BvcnRh'.'b'.'A==','MW'.'NfYml'.'0cm'.'l4','c'.'n'.'U=','L2'.'JpdHJpe'.'C'.'9t'.'b2R1bG'.'VzL21'.'haW'.'4'.'vbGFuZy'.'91'.'Y'.'Q==','d'.'WE'.'=','L2JpdHJ'.'peC9t'.'b2R1bGVzL2'.'1haW4vbGFuZy9ieQ==','Ynk'.'=',''.'L2Jp'.'d'.'HJpe'.'C9tb2R1bGV'.'zL21ha'.'W4vbGF'.'uZy9r'.'eg'.'='.'=','a3o=',''.'L2Jpd'.'HJpeC9'.'tb2R'.'1bG'.'Vz'.'L21haW4vbG'.'FuZ'.'y9ydQ='.'=','cn'.'U=','bWF'.'pbg'.'==',''.'f'.'lBB'.'UkFNX1BBU'.'lRORVJfSUQ=',''.'bWFpbg'.'==','UE'.'F'.'SQU1fTUFYX'.'1VT'.'RVJT','b'.'WFp'.'b'.'g='.'=',''.'f'.'kNP'.'VU5U'.'X0VYVFJB','Tg==','W'.'Q==','Z'.'Xh0cmF'.'uZ'.'XQ=','QU'.'5EI'.'FUuTEFTV'.'F9M'.'T0d'.'JTiA+IA==',''.'QU5EIFUu'.'TEF'.'TVF9MT0dJTiBJ'.'UyB'.'OT1QgTlV'.'MTA='.'=','aW50cmFuZXQ'.'=','ZXh0c'.'mFuZXQ=','ZX'.'h0c'.'mFuZXRfZ3JvdX'.'A=','b'.'WFpbg==','f'.'mxpY2Vuc2VfbmFtZQ'.'==','bW'.'Fpbg'.'==','fmxpY2Vuc2'.'V'.'fY29'.'k'.'Z'.'XM'.'=','','LA'.'==');return base64_decode($_1380618978[$_1970728434]);}}; use Bitrix\Main\Config\Option; use Bitrix\Main\Type\Date; final class License{ private?string $_1239548570= null; private?string $_2083236859= null; private const DOMAINS_STORE_LICENSE=[ 'ru' => 'https://util.1c-bitrix.ru', 'en' => 'https://util.bitrixsoft.com', 'kz' => 'https://util.1c-bitrix.kz', 'by' => 'https://util.1c-bitrix.by',]; public const URL_BUS_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_bus.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_bus.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_bus.pdf',]; public const URL_CP_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_cp.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_cp.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_cp.pdf', 'en' => 'https://www.bitrix24.com/eula/', 'br' => 'https://www.bitrix24.com.br/eula/', 'fr' => 'https://www.bitrix24.fr/eula/', 'pl' => 'https://www.bitrix24.pl/eula/', 'it' => 'https://www.bitrix24.it/eula/', 'la' => 'https://www.bitrix24.es/eula/',]; public const URL_RENEWAL_LICENSE=[ 'com' => 'https://store.bitrix24.com/profile/license-keys.php', 'eu' => 'https://store.bitrix24.eu/profile/license-keys.php', 'de' => 'https://store.bitrix24.de/profile/license-keys.php', 'ru' => 'https://www.1c-bitrix.ru/buy/products/b24.php#tab-section-2', 'by' => 'https://www.1c-bitrix.by/buy/products/b24.php#tab-section-2', 'kz' => 'https://www.1c-bitrix.kz/buy/products/b24.php#tab-section-2',]; private const CIS=['ru' => 1, 'by' => 1, 'kz' => 1, 'uz' => 1, 'kg' => 1, 'am' => 1, 'az' => 1, 'ge' => 1]; public function getKey(): string{ if($this->_1239548570 === null){ $_1706750402= Loader::getDocumentRoot(). ___1297763075(0); $LICENSE_KEY= ___1297763075(1); if($GLOBALS['____1896061902'][0]($_1706750402)){ include($_1706750402);} $this->_1239548570=($LICENSE_KEY == ___1297763075(2) || $GLOBALS['____1896061902'][1]($LICENSE_KEY) == ___1297763075(3)? ___1297763075(4): $LICENSE_KEY);} return $this->_1239548570;} public function getHashLicenseKey(): string{ return $GLOBALS['____1896061902'][2]($this->getKey());} public function getPublicHashKey(): string{ return $GLOBALS['____1896061902'][3](___1297763075(5). $this->getKey(). ___1297763075(6));} public function isDemoKey(): bool{ return $this->getKey() == ___1297763075(7);} public function getBuyLink(): string{ return $this->getDomainStoreLicense(). ___1297763075(8). $this->getHashLicenseKey(). ___1297763075(9). LANGUAGE_ID;} public function getDocumentationLink(): string{ if($this->isCis()){ return ___1297763075(10);} return ___1297763075(11);} public function getRenewalLink(): string{ $_2083236859= $this->getRegion(); if($GLOBALS['____1896061902'][4]($_2083236859,[___1297763075(12), ___1297763075(13), ___1297763075(14), ___1297763075(15)])){ return self::URL_RENEWAL_LICENSE[$_2083236859];} if($GLOBALS['____1896061902'][5]($_2083236859,[___1297763075(16), ___1297763075(17), ___1297763075(18), ___1297763075(19), ___1297763075(20)])){ return self::URL_RENEWAL_LICENSE[___1297763075(21)];} return self::URL_RENEWAL_LICENSE[___1297763075(22)];} public function getDomainStoreLicense(): string{ return self::DOMAINS_STORE_LICENSE[$this->getRegion()] ?? self::DOMAINS_STORE_LICENSE[___1297763075(23)];} public function isDemo(): bool{ return $GLOBALS['____1896061902'][6](___1297763075(24)) && DEMO === ___1297763075(25);} public function isTimeBound(): bool{ return $GLOBALS['____1896061902'][7](___1297763075(26)) && TIMELIMIT_EDITION === ___1297763075(27);} public function isEncoded(): bool{ return $GLOBALS['____1896061902'][8](___1297763075(28)) && ENCODE === ___1297763075(29);} public function getExpireDate():?Date{ $_633056209= (int)($GLOBALS[___1297763075(30)] ?? min(114,0,38)); if($_633056209>(1372/2-686)){ return Date::createFromTimestamp($_633056209);} return null;} public function getSupportExpireDate():?Date{ $_633056209= Option::get(___1297763075(31), ___1297763075(32)); if(Date::isCorrect($_633056209, ___1297763075(33))){ return new Date($_633056209, ___1297763075(34));} return null;} public function isCis(): bool{ return isset(self::CIS[$this->getRegion()]);} public function getRegion():?string{ if($this->_2083236859 === null){ if(Loader::includeModule(___1297763075(35))){ $this->_2083236859= \CBitrix24::getPortalZone();} else{ $_2083236859= Option::get(___1297763075(36), ___1297763075(37)); if(empty($_2083236859)){ $_2083236859= $this->__1677480362(); if(empty($_2083236859)){ $_2083236859= $this->__1155802333();}} $this->_2083236859= $_2083236859 ?? ___1297763075(38);}} return $this->_2083236859?: null;} public function getEulaLink(): string{ if(ModuleManager::isModuleInstalled(___1297763075(39))){ return self::URL_CP_EULA[$this->getRegion()] ?? self::URL_CP_EULA[___1297763075(40)];} return self::URL_BUS_EULA[$this->getRegion()] ?? self::URL_BUS_EULA[___1297763075(41)];} private function __1677480362():?string{ $_1162147940= Option::get(___1297763075(42), ___1297763075(43)); if($_1162147940 === ___1297763075(44) || $_1162147940 === ___1297763075(45)){ return ___1297763075(46);} if($_1162147940 === ___1297763075(47) || $_1162147940 === ___1297763075(48)){ return ___1297763075(49);} return null;} private function __1155802333():?string{ $_43142646= Application::getDocumentRoot(); if($GLOBALS['____1896061902'][9]($_43142646. ___1297763075(50))){ return ___1297763075(51);} if($GLOBALS['____1896061902'][10]($_43142646. ___1297763075(52))){ return ___1297763075(53);} if($GLOBALS['____1896061902'][11]($_43142646. ___1297763075(54))){ return ___1297763075(55);} if($GLOBALS['____1896061902'][12]($_43142646. ___1297763075(56))){ return ___1297763075(57);} return null;} public function getPartnerId(): int{ return (int)Option::get(___1297763075(58), ___1297763075(59),(127*2-254));} public function getMaxUsers(): int{ return (int)Option::get(___1297763075(60), ___1297763075(61), min(126,0,42));} public function isExtraCountable(): bool{ return Option::get(___1297763075(62), ___1297763075(63), ___1297763075(64)) === ___1297763075(65) && ModuleManager::isModuleInstalled(___1297763075(66));} public function getActiveUsersCount(Date $_931140675= null): int{ $_1623342744= Application::getConnection(); $_693496486= min(196,0,65.333333333333); if($_931140675 !== null){  $_197908838= ___1297763075(67).$_1623342744->getSqlHelper()->convertToDbDate($_931140675);} else{  $_197908838= ___1297763075(68);} if(ModuleManager::isModuleInstalled(___1297763075(69))){ $_545836131="
				SELECT COUNT(DISTINCT U.ID)
				FROM
					b_user U
					INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
					INNER JOIN b_utm_user UF ON
						UF.FIELD_ID = F.ID
						AND UF.VALUE_ID = U.ID
						AND UF.VALUE_INT > 0
				WHERE U.ACTIVE = 'Y'
					{$_197908838}
			"; $_693496486= (int)$_1623342744->queryScalar($_545836131); $_1342786395= (int)Option::get(___1297763075(70), ___1297763075(71)); if($_1342786395>(786-2*393) && $this->isExtraCountable()){ $_545836131="
						SELECT COUNT(1)
						FROM
							b_user U
							INNER JOIN b_extranet_user EU ON EU.USER_ID = U.ID AND EU.CHARGEABLE = 'Y'
							INNER JOIN b_user_group UG ON UG.USER_ID = U.ID AND UG.GROUP_ID = {$_1342786395}
							LEFT JOIN (
								SELECT UF.VALUE_ID 
								FROM 
									b_user_field F
									INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_INT > 0
								WHERE F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
							) D ON D.VALUE_ID = U.ID
						WHERE U.ACTIVE = 'Y'
							{$_197908838}
							AND D.VALUE_ID IS NULL
					"; $_693496486 += (int)$_1623342744->queryScalar($_545836131);}} return $_693496486;}  public function getName(): string{ return Option::get(___1297763075(72), ___1297763075(73));}  public function getCodes(): array{ $_265471389= Option::get(___1297763075(74), ___1297763075(75)); if($_265471389 != ___1297763075(76)){ return $GLOBALS['____1896061902'][13](___1297763075(77), $_265471389);} return[];}}?>