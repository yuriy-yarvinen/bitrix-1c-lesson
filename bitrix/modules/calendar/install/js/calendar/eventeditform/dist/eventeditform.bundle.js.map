{"version":3,"file":"eventeditform.bundle.js","sources":["../src/sliderdatetimecontrol.js","../src/eventeditform.js"],"sourcesContent":["'use strict';\n\nimport { Loc, Dom, Tag, Type } from 'main.core';\nimport { DateTimeControl, TimeSelector } from 'calendar.controls';\nimport { Util } from 'calendar.util';\n\nexport class SliderDateTimeControl extends DateTimeControl\n{\n\tcreate()\n\t{\n\t\tthis.DOM.dateTimeWrap = this.DOM.outerContent.querySelector(`#${this.UID}_datetime_container`);\n\t\tthis.DOM.editor = this.DOM.outerContent.querySelector(`#${this.UID}_datetime_editor`);\n\t\tthis.DOM.fromDate = this.DOM.outerContent.querySelector(`#${this.UID}_date_from`);\n\t\tthis.DOM.toDate = this.DOM.outerContent.querySelector(`#${this.UID}_date_to`);\n\t\tthis.DOM.fromTime = this.DOM.outerContent.querySelector(`#${this.UID}_time_from`);\n\t\tthis.DOM.toTime = this.DOM.outerContent.querySelector(`#${this.UID}_time_to`);\n\n\t\tthis.fromTimeControl = new TimeSelector({\n\t\t\tinput: this.DOM.fromTime,\n\t\t\tonChangeCallback: this.handleTimeFromChange.bind(this),\n\t\t});\n\n\t\tthis.toTimeControl = new TimeSelector({\n\t\t\tinput: this.DOM.toTime,\n\t\t\tonChangeCallback: this.handleTimeToChange.bind(this),\n\t\t});\n\n\t\tthis.DOM.fullDay = this.DOM.outerContent.querySelector(`#${this.UID}_date_full_day`);\n\t\tthis.DOM.defTimezoneWrap = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_default_wrap`);\n\t\tthis.DOM.defTimezone = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_default`);\n\n\t\tthis.DOM.fromTz = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_from`);\n\t\tthis.DOM.toTz = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_to`);\n\t\tthis.DOM.tzButton = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_btn`);\n\t\tthis.DOM.tzOuterCont = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_wrap`);\n\t\tthis.DOM.tzCont = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_inner_wrap`);\n\n\t\tthis.DOM.outerContent.querySelector(`#${this.UID}_timezone_hint`).title = Loc.getMessage('EC_EVENT_TZ_HINT');\n\t\tthis.DOM.outerContent.querySelector(`#${this.UID}_timezone_default_hint`).title = Loc.getMessage('EC_EVENT_TZ_DEF_HINT');\n\n\t\tthis.prepareModel();\n\t\tthis.bindEventHandlers();\n\n\t\tif (BX.isAmPmMode())\n\t\t{\n\t\t\tthis.DOM.fromTime.style.minWidth = '8em';\n\t\t\tthis.DOM.toTime.style.minWidth = '8em';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.fromTime.style.minWidth = '6em';\n\t\t\tthis.DOM.toTime.style.minWidth = '6em';\n\t\t}\n\t}\n\n\tprepareModel()\n\t{\n\t\tDom.adjust(this.DOM.fromDate, { props: { autocomplete: 'off' } });\n\t\tDom.adjust(this.DOM.toDate, { props: { autocomplete: 'off' } });\n\t\tDom.adjust(this.DOM.fromTime, { props: { autocomplete: 'off' } });\n\t\tDom.adjust(this.DOM.toTime, { props: { autocomplete: 'off' } });\n\t}\n\n\tsetReadonly(timezoneHint)\n\t{\n\t\tconst value = this.getValue();\n\t\tlet result = '';\n\t\tconst dateFrom = Util.formatDateUsable(value.from, true, true);\n\t\tconst dateTo = Util.formatDateUsable(value.to, true, true);\n\t\tconst timeFrom = this.DOM.fromTime.value;\n\t\tconst timeTo = this.DOM.toTime.value;\n\t\tresult += `${dateFrom}, `;\n\n\t\tif (value.fullDay)\n\t\t{\n\t\t\tif (dateFrom === dateTo)\n\t\t\t{\n\t\t\t\tresult += Loc.getMessage('EC_ALL_DAY');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult += ' - ';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult += `${timeFrom} - ${timeTo}`;\n\t\t}\n\n\t\tif (!value.fullDay && dateFrom !== dateTo)\n\t\t{\n\t\t\tresult += `, ${dateTo}`;\n\t\t}\n\n\t\tlet timezoneIcon = '';\n\t\tif (Type.isStringFilled(timezoneHint))\n\t\t{\n\t\t\ttimezoneIcon = Tag.render`\n\t\t\t\t<div class=\"calendar-date-selector-readonly-timezone\" title=\"${timezoneHint}\">\n\t\t\t\t\t<div class=\"calendar-date-selector-readonly-timezone-icon\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tDom.style(this.DOM.editor, 'display', 'none');\n\t\tconst readonlyElement = Tag.render`\n\t\t\t<div class=\"calendar-options-item-column-right\">\n\t\t\t\t<div class=\"calendar-field calendar-date-selector-readonly\">\n\t\t\t\t\t${result}\n\t\t\t\t\t${timezoneIcon}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tDom.append(readonlyElement, this.DOM.dateTimeWrap);\n\t}\n}\n","'use strict';\n\nimport {\n\tAccessibilitySelector,\n\tBusyUsersDialog,\n\tColorSelector,\n\tLocation,\n\tReminder,\n\tRepeatSelector,\n\tSectionSelector,\n} from 'calendar.controls';\nimport { Entry, EntryManager } from 'calendar.entry';\nimport { Planner } from 'calendar.planner';\nimport { RoomsManager } from 'calendar.roomsmanager';\nimport { CalendarSection, SectionManager } from 'calendar.sectionmanager';\nimport { Util } from 'calendar.util';\nimport { Dom, Event, Loc, Runtime, Tag, Type } from 'main.core';\nimport { DateTimeFormat } from 'main.date'; // need for planner.js\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { TagSelector as EntityTagSelector } from 'ui.entity-selector';\nimport { SliderDateTimeControl } from './sliderdatetimecontrol.js';\n\nexport class EventEditForm\n{\n\tDOM = {};\n\tuid = null;\n\tsliderId = 'calendar:edit-entry-slider';\n\tzIndex = 3100;\n\tdenyClose = false;\n\tformType = 'slider_main';\n\tSTATE = { READY: 1, REQUEST: 2, ERROR: 3 };\n\tsections = [];\n\tsectionIndex = {};\n\ttrackingUsersList = [];\n\tuserSettings = {};\n\tprevUserList = [];\n\tloadedAccessibilityData = {};\n\teventOptions = {};\n\n\tconstructor(options = {})\n\t{\n\t\tthis.name = options.name || 'eventeditform';\n\t\tthis.type = options.type || 'user';\n\t\tthis.isLocationCalendar = options.isLocationCalendar || false;\n\t\tthis.locationAccess = options.locationAccess || false;\n\t\tthis.isProjectFeatureEnabled = Util.isProjectFeatureEnabled() || false;\n\t\tthis.locationCapacity = options.locationCapacity || 0;\n\t\tthis.roomsManager = options.roomsManager || null;\n\t\tthis.userId = options.userId || parseInt(Loc.getMessage('USER_ID'));\n\t\tthis.ownerId = options.ownerId;\n\t\tthis.entryId = parseInt(options.entryId) || null;\n\t\tthis.entry = options.entry || null;\n\t\tthis.eventOptions = this.entry?.data?.OPTIONS || {};\n\t\tthis.formDataValue = options.formDataValue || {};\n\t\tthis.emitter = new EventEmitter();\n\t\tthis.emitter.setEventNamespace('BX.Calendar.EventEditForm');\n\t\tthis.BX = Util.getBX();\n\t\tthis.isCollabUser = options.calendarContext?.isCollabUser || false;\n\t\tthis.analyticsChatId = options.createChatId || null;\n\t\tthis.analyticsSubSection = options.analyticsSubSection || this.getFormAnalyticsContext();\n\n\t\tif (this.isCollabUser)\n\t\t{\n\t\t\tUtil.setCalendarContext(options.calendarContext);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.context = Util.getCalendarContext() ?? options.calendarContext;\n\n\t\t\tif (!Util.getCalendarContext())\n\t\t\t{\n\t\t\t\tUtil.setCalendarContext(this.context);\n\t\t\t}\n\t\t}\n\n\t\tthis.isOpenEvent = (this.entry?.data.CAL_TYPE || this.type) === 'open_event';\n\t\t// TODO: remove this check, planner enabled always\n\t\tthis.plannerEnabled = true;\n\t\tthis.sectionSelectorEnabled = !this.isOpenEvent;\n\t\tthis.attendeesControlEnabled = !this.isOpenEvent;\n\n\t\tthis.formSettings = {\n\t\t\tpinnedFields: {},\n\t\t};\n\t\tif (!this.ownerId && this.type === 'user')\n\t\t{\n\t\t\tthis.ownerId = this.userId;\n\t\t}\n\n\t\tif (Type.isDate(options.entryDateFrom) && !this.formDataValue.from)\n\t\t{\n\t\t\tthis.formDataValue.from = options.entryDateFrom;\n\t\t\tthis.formDataValue.to = new Date(options.entryDateFrom.getTime() + 3600);\n\t\t}\n\n\t\tthis.participantsEntityList = Type.isArray(options.participantsEntityList)\n\t\t\t? options.participantsEntityList\n\t\t\t: [];\n\n\t\tthis.participantsSelectorEntityList = Type.isArray(options.participantsSelectorEntityList)\n\t\t\t? options.participantsSelectorEntityList\n\t\t\t: [];\n\n\t\tif (options.entryName && !this.entryId)\n\t\t{\n\t\t\tthis.formDataValue.name = options.entryName;\n\t\t}\n\n\t\tif (options.entryDescription && !this.entryId)\n\t\t{\n\t\t\tthis.formDataValue.description = options.entryDescription;\n\t\t}\n\n\t\tif (options.jumpToControl)\n\t\t{\n\t\t\tthis.jumpToControl = options.jumpToControl;\n\t\t}\n\n\t\tif (this.plannerEnabled)\n\t\t{\n\t\t\tthis.refreshPlanner = Runtime.debounce(this.refreshPlannerState, 100, this);\n\t\t}\n\t\tthis.state = this.STATE.READY;\n\t\tthis.doShowConfirmPopup = true;\n\t\tthis.sliderOnClose = this.hideWithConfirm.bind(this);\n\t\tthis.handlePullBind = this.handlePull.bind(this);\n\t\tthis.keyHandlerBind = this.keyHandler.bind(this);\n\n\t\tthis.lastUsedSaveOptions = {};\n\t\tthis.timezoneHint = '';\n\t\tthis.isAvailable = true;\n\t}\n\n\tgetFormAnalyticsContext()\n\t{\n\t\tif (this.analyticsChatId)\n\t\t{\n\t\t\treturn 'chat_textarea';\n\t\t}\n\n\t\tif (this.type === 'group')\n\t\t{\n\t\t\treturn 'calendar_collab';\n\t\t}\n\n\t\treturn 'calendar_personal';\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.sliderId = slider.getUrl();\n\t\tthis.BX.addCustomEvent(slider, 'SidePanel.Slider:onLoad', this.onLoadSlider.bind(this));\n\t\tthis.BX.addCustomEvent(slider, 'SidePanel.Slider:onClose', this.sliderOnClose);\n\t\tthis.BX.addCustomEvent(slider, 'SidePanel.Slider:onBeforeCloseComplete', this.destroy.bind(this));\n\t\tthis.setCurrentEntry(this.entry || null);\n\n\t\tthis.createContent(slider).then((html) => {\n\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t{\n\t\t\t\tpromiseResolve(html);\n\t\t\t}\n\t\t});\n\n\t\tthis.opened = true;\n\t\tthis.bindEventHandlers();\n\t}\n\n\tcanEdit()\n\t{\n\t\tif (Type.isBoolean(this.entry.permissions?.edit))\n\t\t{\n\t\t\treturn this.entry.permissions.edit;\n\t\t}\n\n\t\tif (this.entry.isMeeting() && this.entry.sectionId !== this.getCurrentSectionId())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.entry.isResourcebooking())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn new CalendarSection(this.getCurrentSection()).canDo('edit');\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.setCurrentEntry(params.entry);\n\t\tif (params.formType)\n\t\t{\n\t\t\tthis.formType = params.formType;\n\t\t}\n\n\t\tthis.BX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.createContent.bind(this),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('CALENDAR_EVENT'),\n\t\t\t\tbgColor: '#55D0E0',\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonClose: this.sliderOnClose,\n\t\t\t\tonCloseComplete: this.destroy.bind(this),\n\t\t\t\tonLoad: this.onLoadSlider.bind(this),\n\t\t\t},\n\t\t});\n\n\t\tthis.opened = true;\n\t\tthis.bindEventHandlers();\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.opened;\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBind);\n\t\tEventEmitter.subscribe('onPullEvent-calendar', this.handlePullBind);\n\n\t\t// region 'protection from closing slider by accident'\n\t\tthis.mouseUpNodeCheck = null;\n\n\t\tEvent.bind(document, 'mousedown', (e) => {\n\t\t\tthis.mousedownTarget = e.target || e.srcElement;\n\t\t});\n\t\tEvent.bind(document, 'mouseup', (e) => {\n\t\t\tconst target = e.target || e.srcElement;\n\t\t\tif (this.mousedownTarget !== target)\n\t\t\t{\n\t\t\t\tthis.mouseUpNodeCheck = false;\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.mouseUpNodeCheck = null;\n\t\t\t}, 0);\n\t\t});\n\t\t// endregion\n\n\t\tEventEmitter.subscribe('Calendar.LocationControl.onValueChange', () => {\n\t\t\tif (this.locationBusyAlert)\n\t\t\t{\n\t\t\t\tDom.remove(this.locationBusyAlert);\n\t\t\t\tthis.locationBusyAlert = null;\n\t\t\t}\n\t\t});\n\n\t\tthis.BX.addCustomEvent(window, 'onCalendarControlChildPopupShown', this.BX.proxy(this.denySliderClose, this));\n\t\tthis.BX.addCustomEvent(window, 'onCalendarControlChildPopupClosed', this.BX.proxy(this.allowSliderClose, this));\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tthis.slider = event.getSlider();\n\t\tthis.DOM.content = this.slider.layout.content;\n\t\tthis.sliderId = this.slider.getUrl();\n\n\t\tif (!this.isAvailable)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.notLoaded)\n\t\t{\n\t\t\tBX.SidePanel.Instance.close();\n\n\t\t\tlocation.reload();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Used to execute javasctipt and attach CSS from ajax responce\n\t\tthis.BX.html(this.slider.layout.content, this.slider.getData().get('sliderContent'));\n\t\tthis.initControls(this.uid);\n\t\tthis.setFormValues();\n\t\tif (Type.isStringFilled(this.jumpToControl))\n\t\t{\n\t\t\tif (this.jumpToControl === 'userSelector')\n\t\t\t{\n\t\t\t\tconst attendeesSelectorWrap = this.DOM.content.querySelector(`#${this.uid}_attendees_selector`);\n\t\t\t\tDom.style(attendeesSelectorWrap, 'transition', '300ms background ease');\n\t\t\t\tsetTimeout(() => this.highlightField(attendeesSelectorWrap), 900);\n\t\t\t}\n\n\t\t\tif (this.jumpToControl === 'location')\n\t\t\t{\n\t\t\t\tconst fieldWrap = document.querySelector(`[data-bx-block-placeholer=${this.jumpToControl}]`);\n\t\t\t\tDom.style(fieldWrap, 'transition', '300ms background ease');\n\t\t\t\tsetTimeout(() => this.highlightField(fieldWrap), 900);\n\t\t\t}\n\t\t}\n\n\t\tEvent.bind(this.DOM.content, 'wheel', () => this.highlightFieldScrollAnimation?.stop());\n\t}\n\n\tclose()\n\t{\n\t\tif (!this.checkDenyClose())\n\t\t{\n\t\t\tthis.state = this.STATE.READY;\n\t\t\tthis.BX.SidePanel.Instance.close();\n\t\t}\n\t}\n\n\tsave(options = {})\n\t{\n\t\tif (\n\t\t\tthis.state === this.STATE.REQUEST\n\t\t\t|| this.DOM.locationRepeatBusyErrorPopup\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\t\tconst formDataChanges = this.getFormDataChanges();\n\t\tif (this.isEditForm() && formDataChanges.length === 0)\n\t\t{\n\t\t\tthis.BX.SidePanel.Instance.close();\n\n\t\t\treturn true;\n\t\t}\n\n\t\tif (\n\t\t\t!this.userSettings.sendFromEmail\n\t\t\t&& this.hasExternalEmailUsers()\n\t\t\t&& this.canEdit()\n\t\t\t&& !options.emailConfirmDialogShown\n\t\t)\n\t\t{\n\t\t\tEntryManager.showConfirmedEmailDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (params.sendFromEmail)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userSettings.sendFromEmail = params.sendFromEmail;\n\t\t\t\t\t}\n\t\t\t\t\toptions.emailConfirmDialogShown = true;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\tthis.entry.id\n\t\t\t&& this.entry.isRecursive()\n\t\t\t&& !options.confirmed\n\t\t\t&& this.getFormDataChanges(['section']).length > 0\n\t\t)\n\t\t{\n\t\t\tEntryManager.showConfirmEditDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.recursionMode =\t(this.entry.isFirstInstance() && params.recursionMode === 'next')\n\t\t\t\t\t\t? 'all'\n\t\t\t\t\t\t: params.recursionMode\n\t\t\t\t\t;\n\t\t\t\t\toptions.confirmed = true;\n\t\t\t\t\tthis.lastUsedSaveOptions = options;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t},\n\t\t\t\tcanEditOnlyThis: this.canEditOnlyThis(),\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\tthis.entry.id\n\t\t\t&& this.entry.isMeeting()\n\t\t\t&& options.sendInvitesAgain === undefined\n\t\t\t&& formDataChanges.includes('date&time')\n\t\t\t&& this.entry.getAttendees().find((item) => {return item.STATUS === 'N';})\n\t\t)\n\t\t{\n\t\t\tEntryManager.showReInviteUsersDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.sendInvitesAgain = params.sendInvitesAgain;\n\t\t\t\t\tthis.lastUsedSaveOptions = options;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\tthis.entry.id\n\t\t\t&& this.entry.isRecursive()\n\t\t\t&& !options.confirmed\n\t\t\t&& formDataChanges.includes('section')\n\t\t)\n\t\t{\n\t\t\toptions.recursionMode = this.entry.isFirstInstance() ? 'all' : 'next';\n\t\t}\n\n\t\tDom.addClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\t\tDom.addClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\t\tthis.state = this.STATE.REQUEST;\n\n\t\tthis.DOM.form.id.value = this.entry.id || 0;\n\n\t\t// Location\n\t\tthis.DOM.form.location.value = this.locationSelector.getTextValue();\n\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.SaveContent();\n\t\t}\n\n\t\tconst section = this.getCurrentSection();\n\t\tif (section && section.COLOR.toLowerCase() !== this.colorSelector.getValue().toLowerCase())\n\t\t{\n\t\t\t// Color\n\t\t\tthis.DOM.form.color.value = this.colorSelector.getValue();\n\t\t}\n\n\t\tif (options.recursionMode)\n\t\t{\n\t\t\tthis.DOM.form.current_date_from.value = Util.formatDate(this.entry.from);\n\t\t\tthis.DOM.form.rec_edit_mode.value = options.recursionMode;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.form.current_date_from.value = null;\n\t\t\tthis.DOM.form.rec_edit_mode.value = null;\n\t\t}\n\n\t\tif (options.sendInvitesAgain !== undefined)\n\t\t{\n\t\t\tthis.DOM.form.appendChild(Tag.render`<input name=\"sendInvitesAgain\" type=\"hidden\" value=\"${options.sendInvitesAgain ? 'Y' : 'N'}\">`);\n\t\t}\n\n\t\tif (!this.DOM.form.requestUid)\n\t\t{\n\t\t\tthis.DOM.requestUid = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input name=\"requestUid\" type=\"hidden\">`,\n\t\t\t);\n\t\t}\n\n\t\tif (!this.DOM.form.meeting_host)\n\t\t{\n\t\t\tthis.DOM.meeting_host = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input type=\"hidden\" name=\"meeting_host\" value=\"${this.entry.data.MEETING_HOST || '0'}\">`,\n\t\t\t);\n\t\t}\n\n\t\tif (!this.DOM.form.chat_id)\n\t\t{\n\t\t\tthis.DOM.chat_id = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input type=\"hidden\" name=\"chat_id\" value=\"${this.entry.data.MEETING ? this.entry.data.MEETING.CHAT_ID : 0}\">`\n\t\t\t);\n\t\t}\n\n\t\tthis.DOM.requestUid.value = Util.registerRequestId();\n\n\t\tlet attendeesEntityList;\n\t\tif (this.attendeesControlEnabled)\n\t\t{\n\t\t\t// Save attendees from userSelector\n\t\t\tattendeesEntityList = this.getUserSelectorEntityList();\n\t\t\tDom.clean(this.DOM.userSelectorValueWarp);\n\t\t\tattendeesEntityList.forEach((entity, index) => {\n\t\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t<input type=\"hidden\" name=\"attendeesEntityList[${index}][entityId]\" value=\"${entity.entityId}\">\n\t\t\t`);\n\t\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t<input type=\"hidden\" name=\"attendeesEntityList[${index}][id]\" value=\"${entity.id}\">\n\t\t\t`);\n\t\t\t});\n\t\t}\n\n\t\tlet checkCurrentUsersAccessibility = !this.entry.id || this.checkCurrentUsersAccessibility();\n\t\tif (\n\t\t\t!checkCurrentUsersAccessibility\n\t\t\t&& formDataChanges.includes('codes')\n\t\t)\n\t\t{\n\t\t\tconst previousAttendeesList = this.entry.getAttendeesEntityList();\n\t\t\tattendeesEntityList.forEach((entity) => {\n\t\t\t\tif (!previousAttendeesList.find((item) => {\n\t\t\t\t\treturn entity.entityId === item.entityId\n\t\t\t\t\t\t&& Number(entity.id) === Number(item.id);\n\t\t\t\t}))\n\t\t\t\t{\n\t\t\t\t\tif (entity.entityId === 'user')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"newAttendeesList[]\" value=\"${parseInt(entity.id)}\">\n\t\t\t\t\t\t`);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcheckCurrentUsersAccessibility = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.attendeesControlEnabled)\n\t\t{\n\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t<input type=\"hidden\" name=\"checkCurrentUsersAccessibility\" value=\"${checkCurrentUsersAccessibility ? 'Y' : 'N'}\">\n\t\t\t`);\n\t\t}\n\n\t\tif (this.isOpenEvent)\n\t\t{\n\t\t\tconst selectedCategories = this.categoryTagSelector.getDialog().getSelectedItems();\n\t\t\tconst selectedCategory = selectedCategories[0].id;\n\t\t\tthis.DOM.form.appendChild(\n\t\t\t\tTag.render`<input type=\"hidden\" name=\"category\" value=\"${selectedCategory}\">`\n\t\t\t);\n\t\t}\n\n\t\tif (this.analyticsSubSection)\n\t\t{\n\t\t\tthis.DOM.form.appendChild(\n\t\t\t\tTag.render`<input type=\"hidden\" name=\"analyticsSubSection\" value=\"${this.analyticsSubSection}\">`,\n\t\t\t);\n\t\t}\n\n\t\tif (this.analyticsChatId)\n\t\t{\n\t\t\tthis.DOM.form.appendChild(\n\t\t\t\tTag.render`<input type=\"hidden\" name=\"analyticsChatId\" value=\"${this.analyticsChatId}\">`,\n\t\t\t);\n\t\t}\n\n\t\tthis.DOM.form.doCheckOccupancy.value = options.doCheckOccupancy || 'Y';\n\n\t\tconst data = new FormData(this.DOM.form);\n\n\t\tconst rruleType = this.DOM.content.querySelector(`#${this.uid}_rrule_type`);\n\t\tif (rruleType)\n\t\t{\n\t\t\tdata.append('EVENT_RRULE[FREQ]', rruleType.dataset.value);\n\t\t}\n\n\t\tconst accessibility = this.DOM.content.querySelector(`#${this.uid}_accessibility`);\n\t\tif (accessibility)\n\t\t{\n\t\t\tdata.append('accessibility', accessibility.dataset.value);\n\t\t}\n\n\t\tif (this.DOM.form.tz_from)\n\t\t{\n\t\t\tdata.append('tz_from', this.DOM.form.tz_from.dataset.value);\n\t\t}\n\n\t\tif (this.DOM.form.tz_to)\n\t\t{\n\t\t\tdata.append('tz_to', this.DOM.form.tz_to.dataset.value);\n\t\t}\n\n\t\tthis.BX.ajax.runAction('calendar.api.calendarentryajax.editEntry', {\n\t\t\tdata,\n\t\t}).then(\n\t\t\tasync (response) => {\n\t\t\t\tif (this.canEditOnlyThis() && formDataChanges.includes('color'))\n\t\t\t\t{\n\t\t\t\t\tconst newChildEvent = response.data?.eventList?.find((event) =>\n\t\t\t\t\t\tevent.DATE_FROM.includes(data.get('date_from'))\n\t\t\t\t\t\t&& parseInt(event.OWNER_ID, 10) === parseInt(this.ownerId, 10)\n\t\t\t\t\t);\n\t\t\t\t\tconst colorEntryId = newChildEvent?.ID ?? this.entryId;\n\n\t\t\t\t\tawait this.BX.ajax.runAction('calendar.api.calendarajax.updateColor', {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tentryId: colorEntryId,\n\t\t\t\t\t\t\tcolor: this.colorSelector.getValue().toLowerCase(),\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (this.isLocationCalendar)\n\t\t\t\t{\n\t\t\t\t\tthis.roomsManager.unsetHiddenRoom(\n\t\t\t\t\t\tLocation.parseStringValue(this.DOM.form.location.value).room_id,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// unset section from hidden\n\t\t\t\tconst section = this.getCurrentSection();\n\t\t\t\tif (section && this.context && this.context.sectionManager)\n\t\t\t\t{\n\t\t\t\t\tthis.unsetHiddenSection(section, this.context.sectionManager);\n\t\t\t\t}\n\n\t\t\t\tthis.state = this.STATE.READY;\n\t\t\t\tthis.allowSliderClose();\n\t\t\t\tthis.doShowConfirmPopup = false;\n\t\t\t\tthis.close();\n\n\t\t\t\tDom.removeClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\t\t\t\tDom.removeClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\n\t\t\t\tif (response.data.entryId)\n\t\t\t\t{\n\t\t\t\t\tif (this.entry.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.showEditEntryNotification(response.data.entryId);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.showNewEntryNotification(response.data.entryId);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tType.isArray(response.data.eventList)\n\t\t\t\t\t&& response.data.eventList.length > 0\n\t\t\t\t\t&& response.data.eventList[0].REMIND\n\t\t\t\t\t&& response.data.eventList[0].REMIND.length > 0\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tEntryManager.setNewEntryReminders(\n\t\t\t\t\t\tresponse.data.eventList[0].DT_SKIP_TIME === 'Y' ? 'fullDay' : 'withTime',\n\t\t\t\t\t\tresponse.data.eventList[0].REMIND,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.emitter.emit('onSave', new BaseEvent({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tresponseData: response.data,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t},\n\t\t\t\t}));\n\n\t\t\t\tEventEmitter.emit('BX.Calendar:onEntrySave', new BaseEvent({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsliderId: this.sliderId,\n\t\t\t\t\t\tresponseData: response.data,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t},\n\t\t\t\t}));\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\tDom.removeClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\t\t\t\tDom.removeClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\n\t\t\t\tif (response.data && Type.isPlainObject(response.data.busyUsersList))\n\t\t\t\t{\n\t\t\t\t\tthis.handleBusyUsersError(response.data.busyUsersList);\n\n\t\t\t\t\tconst errors = [];\n\t\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\t\tif (error.code !== 'edit_entry_user_busy')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terrors.push(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tresponse.errors = errors;\n\t\t\t\t}\n\n\t\t\t\tif (response.errors && response.errors.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.showError(response.errors);\n\t\t\t\t}\n\n\t\t\t\tthis.state = this.STATE.ERROR;\n\t\t\t},\n\t\t);\n\n\t\treturn true;\n\t}\n\n\tcanEditOnlyThis()\n\t{\n\t\tconst permissions = this.entry.permissions;\n\t\tif (!permissions)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn permissions.edit_attendees && permissions.edit_location && !permissions.edit;\n\t}\n\n\thandleBusyUsersError(busyUsers)\n\t{\n\t\tconst users = [];\n\t\tconst userIds = [];\n\n\t\tfor (const id in busyUsers)\n\t\t{\n\t\t\tif (busyUsers.hasOwnProperty(id))\n\t\t\t{\n\t\t\t\tusers.push(busyUsers[id]);\n\t\t\t\tuserIds.push(id);\n\t\t\t}\n\t\t}\n\n\t\tthis.busyUsersDialog = new BusyUsersDialog();\n\t\tthis.busyUsersDialog.subscribe('onSaveWithout', () => {\n\t\t\tthis.DOM.form.exclude_users.value = userIds.join(',');\n\t\t\tthis.save();\n\t\t});\n\n\t\tthis.busyUsersDialog.show({ users });\n\t}\n\n\thideWithConfirm(event)\n\t{\n\t\tif (!(event && event.getSlider && event.getSlider().getUrl() === this.sliderId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.isAvailable)\n\t\t{\n\t\t\tthis.BX.removeCustomEvent('SidePanel.Slider:onClose', this.sliderOnClose);\n\n\t\t\treturn;\n\t\t}\n\n\t\tUtil.closeAllPopups();\n\n\t\tif (this.checkDenyClose())\n\t\t{\n\t\t\tevent.denyAction();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.needToShowConfirmPopup())\n\t\t{\n\t\t\tevent.denyAction();\n\t\t\tconst message = this.isCreateForm() ? Loc.getMessage('EC_CLOSE_CREATE_FORM_CONFIRM_QUESTION') : Loc.getMessage('EC_CLOSE_EDIT_FORM_CONFIRM_QUESTION');\n\t\t\tUtil.showConfirmPopup(this.hide.bind(this), message, {\n\t\t\t\tokCaption: Loc.getMessage('EC_CLOSE_EDIT_FORM_CONFIRM_OK'),\n\t\t\t\tminWidth: 350,\n\t\t\t\tmaxWidth: 350,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.removeCustomEvent('SidePanel.Slider:onClose', this.sliderOnClose);\n\t\t}\n\t}\n\n\thide()\n\t{\n\t\tthis.doShowConfirmPopup = false;\n\t\tthis.slider.close();\n\t}\n\n\tdestroy(event)\n\t{\n\t\tif (event && event.getSlider() && event.getSlider().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.BX.onCustomEvent('OnCalendarPlannerDoUninstall', [{ plannerId: this.plannerId }]);\n\t\t\tEvent.unbind(document, 'keydown', this.keyHandlerBind);\n\t\t\tEventEmitter.unsubscribe('onPullEvent-calendar', this.handlePullBind);\n\t\t\tthis.BX.SidePanel.Instance.destroy(this.sliderId);\n\t\t\tif (Location)\n\t\t\t{\n\t\t\t\tLocation.setCurrentCapacity(0);\n\t\t\t}\n\t\t\tUtil.closeAllPopups();\n\t\t\tthis.planner = null;\n\t\t\tthis.opened = false;\n\t\t\tUtil.clearPlannerWatches();\n\t\t}\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\tconst promise = new this.BX.Promise();\n\n\t\tlet entry = this.getCurrentEntry();\n\n\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getEditEventSlider', {\n\t\t\tdata: {\n\t\t\t\tevent_id: this.entryId || entry.id,\n\t\t\t\tdate_from: entry ? Util.formatDate(entry.from) : '',\n\t\t\t\tform_type: this.formType,\n\t\t\t\ttype: entry.data.CAL_TYPE ?? this.type,\n\t\t\t\townerId: entry.data.OWNER_ID ?? this.ownerId,\n\t\t\t\tentityList: this.participantsEntityList,\n\t\t\t},\n\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif ((Type.isFunction(slider.isOpen) && slider.isOpen()) || slider.isOpen === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst html = this.BX.util.trim(response.data.html);\n\t\t\t\t\t\tslider.getData().set('sliderContent', html);\n\n\t\t\t\t\t\tconst params = response.data.additionalParams;\n\n\t\t\t\t\t\tthis.updateEntryData(params.entry, {\n\t\t\t\t\t\t\tuserSettings: this.userSettings,\n\t\t\t\t\t\t\tmeetSection: params.meetSection,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tentry = this.getCurrentEntry();\n\n\t\t\t\t\t\tthis.uid = params.uniqueId;\n\t\t\t\t\t\tthis.editorId = params.editorId;\n\t\t\t\t\t\tthis.formSettings = this.getSettings(params.formSettings || []);\n\t\t\t\t\t\tthis.isCollabUser = params.isCollabUser;\n\n\t\t\t\t\t\tlet attendeesEntityList = this.formDataValue.attendeesEntityList\n\t\t\t\t\t\t\t|| params.attendeesEntityList\n\t\t\t\t\t\t\t|| [];\n\n\t\t\t\t\t\tif (!entry.id && this.participantsEntityList.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattendeesEntityList = this.participantsEntityList;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isArray(attendeesEntityList))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattendeesEntityList.forEach((item) => {\n\t\t\t\t\t\t\t\tif (item.entityId === 'user' && params.userIndex[item.id])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (params.userIndex[item.id].EMAIL_USER)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\titem.entityType = 'email';\n\t\t\t\t\t\t\t\t\t\titem.title = params.userIndex[item.id].DISPLAY_NAME;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (params.userIndex[item.id].SHARING_USER)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\titem.entityType = 'sharing';\n\t\t\t\t\t\t\t\t\t\titem.title = params.userIndex[item.id].DISPLAY_NAME;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\titem.entityType = 'employee';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setUserSelectorEntityList(attendeesEntityList);\n\n\t\t\t\t\t\tthis.attendeesPreselectedItems = this.getUserSelectorEntityList().map((item) => {\n\t\t\t\t\t\t\treturn [item.entityId, item.id];\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.setUserSettings(params.userSettings);\n\t\t\t\t\t\tUtil.setEventWithEmailGuestEnabled(params.eventWithEmailGuestEnabled);\n\t\t\t\t\t\tUtil.setTimezoneList(params.timezoneList);\n\t\t\t\t\t\tUtil.setAbsenceAvailable(params.absenceAvailable);\n\t\t\t\t\t\tthis.handleSections(params.sections, params.trackingUsersList);\n\t\t\t\t\t\tthis.handleLocationData(params.locationFeatureEnabled, params.locationList, params.iblockMeetingRoomList);\n\t\t\t\t\t\tthis.locationAccess = params.locationAccess;\n\t\t\t\t\t\tthis.plannerFeatureEnabled = Boolean(params.plannerFeatureEnabled);\n\t\t\t\t\t\tthis.isProjectFeatureEnabled = params.projectFeatureEnabled;\n\t\t\t\t\t\tif (this.planner && !this.plannerFeatureEnabled)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.planner.lock();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!entry.id && !entry.sectionId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setCurrentEntry();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.userSettings.meetSection && this.type === 'user')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tSectionManager.setNewEntrySectionId(this.userSettings.meetSection);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.isOpenEvent)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst categoryId = this.formDataValue?.category || this.eventOptions?.CATEGORY_ID;\n\t\t\t\t\t\t\tconst preSelectedCategoryId = categoryId || params.defaultCategoryId;\n\t\t\t\t\t\t\tthis.preSelectedCategory = preSelectedCategoryId\n\t\t\t\t\t\t\t\t? ['event-category', preSelectedCategoryId]\n\t\t\t\t\t\t\t\t: null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.timezoneHint = params.timezoneHint;\n\t\t\t\t\t\tpromise.fulfill(html);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.notLoaded = true;\n\n\t\t\t\t\tif (response.data && !Type.isNil(response.data.isAvailable) && !response.data.isAvailable)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isAvailable = false;\n\t\t\t\t\t\tconst showHelperCallback = () => {\n\t\t\t\t\t\t\ttop.BX.UI.InfoHelper.show('limit_office_calendar_off', {\n\t\t\t\t\t\t\t\tisLimit: true,\n\t\t\t\t\t\t\t\tlimitAnalyticsLabels: {\n\t\t\t\t\t\t\t\t\tmodule: 'calendar',\n\t\t\t\t\t\t\t\t\tsource: 'eventEditForm',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst sliderInstance = BX.SidePanel.Instance.getSlider(this.sliderId);\n\n\t\t\t\t\t\tif (sliderInstance)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.BX.removeCustomEvent('SidePanel.Slider:onClose', this.sliderOnClose);\n\t\t\t\t\t\t\tsliderInstance.close(true, showHelperCallback);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tshowHelperCallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst html = this.BX.util.trim('<div></div>');\n\t\t\t\t\tslider.getData().set('sliderContent', html);\n\t\t\t\t\tpromise.fulfill(html);\n\t\t\t\t},\n\t\t\t);\n\n\t\treturn promise;\n\t}\n\n\tinitControls(uid)\n\t{\n\t\tthis.DOM.title = this.DOM.content.querySelector(`#${uid}_title`);\n\t\tthis.DOM.formWrap = this.DOM.content.querySelector(`#${uid}_form_wrap`);\n\t\tthis.DOM.form = this.DOM.content.querySelector(`#${uid}_form`);\n\t\tthis.DOM.buttonsWrap = this.DOM.content.querySelector('.calendar-form-buttons-fixed');\n\t\tthis.DOM.saveBtn = this.DOM.buttonsWrap.querySelector(`#${uid}_save`);\n\t\tthis.DOM.closeBtn = this.DOM.buttonsWrap.querySelector(`#${uid}_close`);\n\t\tEvent.bind(this.DOM.saveBtn, 'click', this.save.bind(this));\n\t\tEvent.bind(this.DOM.closeBtn, 'click', this.close.bind(this));\n\n\t\tthis.initFormFieldManager(uid);\n\t\tthis.initDateTimeControl(uid);\n\t\tthis.initNameControl(uid);\n\t\tthis.initEditorControl(uid);\n\t\tthis.initAttendeesControl();\n\t\tif (this.plannerEnabled)\n\t\t{\n\t\t\tthis.initPlanner(uid);\n\t\t}\n\t\tthis.initReminderControl(uid);\n\t\tif (this.sectionSelectorEnabled)\n\t\t{\n\t\t\tthis.initSectionSelector(uid);\n\t\t}\n\t\tthis.initLocationControl(uid);\n\t\tthis.initRepeatRuleControl(uid);\n\t\tthis.initColorControl(uid);\n\t\tthis.initCrmUfControl(uid);\n\t\tthis.initAccessibilityControl(uid);\n\t\tthis.initAdditionalControls(uid);\n\n\t\tthis.checkLastItemBorder();\n\t\tif (this.isOpenEvent)\n\t\t{\n\t\t\tthis.initCategoryControl();\n\t\t}\n\n\t\tif (this.DOM.buttonsWrap)\n\t\t{\n\t\t\tBX.ZIndexManager.register(this.DOM.buttonsWrap);\n\t\t}\n\t}\n\n\tupdateEntryData(entryData, options = {})\n\t{\n\t\tif (this.entry instanceof Entry)\n\t\t{\n\t\t\tconst userSettings = options.userSettings || {};\n\n\t\t\tif (Type.isPlainObject(entryData))\n\t\t\t{\n\t\t\t\tthis.entry.prepareData(entryData);\n\t\t\t}\n\t\t\telse\n\t\t\t\tif (!this.entry.getTimezoneFrom() || this.entry.getTimezoneTo())\n\t\t\t\t{\n\t\t\t\t\tthis.entry.setTimezone(userSettings.timezoneName || userSettings.timezoneDefaultName || null);\n\t\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!this.entry.id\n\t\t\t\t&& options.meetSection\n\t\t\t\t&& this.type === Entry.CAL_TYPES.user\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.entry.setSectionId(options.meetSection);\n\t\t\t}\n\t\t}\n\t}\n\n\thandleSections(sections, trackingUsersList)\n\t{\n\t\tthis.sections = Util.filterSectionsByContext(sections, {\n\t\t\tisCollabUser: this.isCollabUser,\n\t\t\tcalendarType: this.type,\n\t\t\tcalendarOwnerId: this.ownerId,\n\t\t});\n\t\tthis.sectionIndex = {};\n\t\tthis.trackingUsersList = trackingUsersList || [];\n\n\t\tif (Type.isArray(this.sections))\n\t\t{\n\t\t\tthis.sections.forEach((value, ind) => {\n\t\t\t\tthis.sectionIndex[parseInt(value.ID, 10)] = ind;\n\t\t\t});\n\t\t}\n\n\t\tconst section = this.getCurrentSection();\n\t\tif (this.entry.id)\n\t\t{\n\t\t\tthis.getSectionsForEditEvent(this.sections, section);\n\t\t}\n\t}\n\n\thandleLocationData(locationFeatureEnabled, locationList, iblockMeetingRoomList)\n\t{\n\t\tthis.locationFeatureEnabled = Boolean(locationFeatureEnabled);\n\t\tthis.locationList = Type.isArray(locationList)\n\t\t\t? locationList.filter((locationItem) => {\n\t\t\t\treturn locationItem.PERM.view_full;\n\t\t\t})\n\t\t\t: [];\n\t\tthis.iblockMeetingRoomList = iblockMeetingRoomList || [];\n\n\t\tLocation.setLocationList(locationList);\n\t\tLocation.setMeetingRoomList(iblockMeetingRoomList);\n\t}\n\n\tsetUserSettings(userSettings)\n\t{\n\t\tthis.userSettings = userSettings;\n\t\tUtil.setUserSettings(userSettings);\n\t}\n\n\tsetFormValues()\n\t{\n\t\tconst entry = this.entry;\n\n\t\t// Date time\n\t\tthis.dateTimeControl.setValue({\n\t\t\tfrom: this.formDataValue.from || entry.from,\n\t\t\tto: this.formDataValue.to || entry.to,\n\t\t\tfullDay: Type.isBoolean(this.formDataValue.fullDay) ? this.formDataValue.fullDay : entry.fullDay,\n\t\t\ttimezoneFrom: entry.getTimezoneFrom() || '',\n\t\t\ttimezoneTo: entry.getTimezoneTo() || '',\n\t\t\ttimezoneName: this.userSettings.timezoneName,\n\t\t});\n\t\tthis.initialTimezoneFrom = entry.getTimezoneFrom();\n\t\tthis.initialTimezoneTo = entry.getTimezoneTo();\n\n\t\tif (entry.isSharingEvent() || !this.canEdit())\n\t\t{\n\t\t\tthis.dateTimeControl.setReadonly(this.timezoneHint);\n\t\t}\n\n\t\tif (!this.canEdit())\n\t\t{\n\t\t\tDom.attr(this.DOM.entryName, 'readonly', 'readonly');\n\t\t\tDom.style(this.DOM.entryName, 'pointer-events', 'none');\n\t\t}\n\n\t\tconst entryName = this.formDataValue.name || entry.getName();\n\t\tthis.DOM.entryName.value = entryName;\n\t\tthis.DOM.entryName.title = entryName;\n\t\tEvent.bind(this.DOM.entryName, 'keyup', this.updateEventNameInputTitle.bind(this));\n\t\tEvent.bind(this.DOM.entryName, 'change', this.updateEventNameInputTitle.bind(this));\n\n\t\t// Section\n\t\tconst section = this.getCurrentSection();\n\t\tthis.initialSectionId = this.getCurrentSectionId();\n\t\tif (this.sectionSelectorEnabled)\n\t\t{\n\t\t\tif (this.formDataValue.section)\n\t\t\t{\n\t\t\t\tentry.sectionId = Number(this.formDataValue.section);\n\t\t\t}\n\t\t\tthis.DOM.sectionInput.value = this.getCurrentSectionId();\n\t\t\tthis.initialSectionId = this.getCurrentSectionId();\n\t\t\tthis.sectionSelector.updateValue();\n\n\t\t\tif (\n\t\t\t\t!this.fieldIsPinned('section')\n\t\t\t\t&& (\n\t\t\t\t\t(section.CAL_TYPE !== this.type || section.CAL_TYPE === this.type)\n\t\t\t\t\t&& parseInt(section.OWNER_ID, 10) !== this.ownerId\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.pinField('section');\n\t\t\t}\n\n\t\t\tif (((this.isSyncSection(section) || entry.isSharingEvent()) && entry.id) || !this.canEdit())\n\t\t\t{\n\t\t\t\tthis.sectionSelector.setViewMode(true);\n\t\t\t}\n\t\t}\n\n\t\t// Color\n\t\tif (this.formDataValue.color)\n\t\t{\n\t\t\tentry.data.COLOR = this.formDataValue.color;\n\t\t}\n\n\t\tthis.colorSelector.setValue(entry.getColor() || section.COLOR);\n\n\t\t// Reminders\n\t\tthis.remindersControl.setValue(\n\t\t\tthis.formDataValue.reminder || entry.getReminders(),\n\t\t\ttrue,\n\t\t\tfalse,\n\t\t);\n\n\t\t// Recursion\n\t\tthis.repeatSelector?.setValue(this.formDataValue.rrule || entry.getRrule());\n\t\tthis.initialRrule = this.getFormRrule();\n\t\tif ((entry.id && entry.isSharingEvent()) || !this.canEdit())\n\t\t{\n\t\t\tthis.repeatSelector?.setViewMode(entry.getRRuleDescription());\n\t\t}\n\n\t\tif (entry.hasRecurrenceId())\n\t\t{\n\t\t\tthis.repeatSelector?.setViewMode(entry.getRRuleDescription());\n\t\t}\n\n\t\t// accessibility\n\t\tif (this.DOM.accessibilityInput)\n\t\t{\n\t\t\tthis?.accessibilitySelector?.setValue(entry.accessibility);\n\t\t}\n\n\t\t// Location\n\t\tif (this.locationSelector)\n\t\t{\n\t\t\tthis.locationSelector.setValue(this.formDataValue.location\n\t\t\t\t|| this.locationSelector.default || entry.getLocation(), false);\n\n\t\t\tthis.locationSelector.checkLocationAccessibility({\n\t\t\t\tfrom: this.formDataValue.from || entry.from,\n\t\t\t\tto: this.formDataValue.to || entry.to,\n\t\t\t\ttimezone: this.entry.getTimezoneFrom(),\n\t\t\t\tfullDay: Type.isBoolean(this.formDataValue.fullDay)\n\t\t\t\t\t? this.formDataValue.fullDay\n\t\t\t\t\t: entry.fullDay,\n\t\t\t\tcurrentEventId: this.entry.id,\n\t\t\t});\n\t\t}\n\n\t\t//max attendees\n\t\tif (this.DOM.form.max_attendees)\n\t\t{\n\t\t\tconst optionsJson = entry?.data?.OPTIONS?.OPTIONS ?? null;\n\t\t\tthis.DOM.form.max_attendees.value = JSON.parse(optionsJson)?.max_attendees || '';\n\t\t}\n\n\t\t// Private\n\t\tif (this.DOM.privateEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.privateEventCheckbox.checked = entry.private;\n\t\t}\n\n\t\t// Importance\n\t\tif (this.DOM.importantEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.importantEventCheckbox.checked = entry.important;\n\t\t}\n\n\t\tif (this.DOM.form.meeting_notify)\n\t\t{\n\t\t\tif (this.formDataValue.meetingNotify !== undefined)\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = this.formDataValue.meetingNotify;\n\t\t\t}\n\n\t\t\tif (this.entry.data && this.entry.data.MEETING)\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = this.entry.data.MEETING.NOTIFY;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = true; // default value\n\t\t\t}\n\t\t}\n\n\t\tif (this.DOM.form.hide_guests)\n\t\t{\n\t\t\tif (this.formDataValue.hideGuests !== undefined)\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = this.formDataValue.hideGuests === 'Y';\n\t\t\t}\n\t\t\telse if (this.entry.data && this.entry.data.MEETING)\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = this.entry.data.MEETING.HIDE_GUESTS;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = true; // default value\n\t\t\t}\n\t\t}\n\n\t\tif (this.DOM.form.allow_invite)\n\t\t{\n\t\t\tif (this.entry.data)\n\t\t\t{\n\t\t\t\tthis.DOM.form.allow_invite.checked = this.entry.data.MEETING && this.entry.data.MEETING.ALLOW_INVITE;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.allow_invite.checked = this.entry.allowInvite;\n\t\t\t}\n\t\t}\n\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\n\t\tif (this.plannerEnabled)\n\t\t{\n\t\t\tthis.planner.updateSelector(\n\t\t\t\tdateTime.from,\n\t\t\t\tdateTime.to,\n\t\t\t\tdateTime.fullDay,\n\t\t\t\t{\n\t\t\t\t\tfocus: true,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tif (entry.isSharingEvent() || !this.canEdit())\n\t\t{\n\t\t\tthis.planner.setReadonly();\n\t\t\tthis.planner.setSolid();\n\t\t\tthis.planner.setShowWorkTimeNotice();\n\t\t}\n\n\t\tif (!this.canEdit())\n\t\t{\n\t\t\tconst [placeHolders, placeHoldersAdditional] = this.getPlaceholders();\n\t\t\tfor (const fieldEditableOnlyByPermission of this.getFieldsEditableOnlyByPermission())\n\t\t\t{\n\t\t\t\tDom.style(placeHolders[fieldEditableOnlyByPermission], 'display', 'none');\n\t\t\t\tDom.style(placeHoldersAdditional[fieldEditableOnlyByPermission], 'display', 'none');\n\t\t\t}\n\n\t\t\tDom.style(this.DOM.importantEventCheckbox, 'display', 'none');\n\t\t\tDom.style(this.DOM.importantEventCheckboxContainer, 'display', 'none');\n\t\t\tDom.style(this.DOM.moreSettings, 'display', 'none');\n\n\t\t\tDom.style(this.DOM.accessibilityInput, 'display', 'none');\n\t\t\tconst accessibilityText = Tag.render`\n\t\t\t\t<span class=\"calendar-field calendar-repeat-selector-readonly\">\n\t\t\t\t\t${this.DOM.accessibilityInput.value}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t\tthis.DOM.accessibilityInput.after(accessibilityText);\n\t\t}\n\n\t\tif (this.plannerEnabled)\n\t\t{\n\t\t\tthis.loadPlannerData({\n\t\t\t\tentityList: this.getUserSelectorEntityList(),\n\t\t\t\tfrom: Util.formatDate(entry.from.getTime() - Util.getDayLength() * 3),\n\t\t\t\tto: Util.formatDate(entry.to.getTime() + Util.getDayLength() * 10),\n\t\t\t\ttimezone: entry.getTimezoneFrom(),\n\t\t\t\tlocation: this.locationSelector.getTextValue(),\n\t\t\t});\n\t\t}\n\t}\n\n\tinitCategoryControl(): void\n\t{\n\t\tthis.DOM.categorySelectorWrap = this.DOM.content.querySelector('.calendar-category-selector-wrap');\n\t\tthis.DOM.categorySelectorValueWarp = this.DOM.categorySelectorWrap.appendChild(Tag.render`<div></div>`);\n\n\t\tthis.categoryTagSelector = new EntityTagSelector({\n\t\t\tmultiple: false,\n\t\t\tdialogOptions: {\n\t\t\t\tcontext: 'calendar',\n\t\t\t\tpreselectedItems: this.preSelectedCategory ? [this.preSelectedCategory] : [],\n\t\t\t\tpreload: true,\n\t\t\t\tzIndex: this.slider.zIndex,\n\t\t\t\tmultiple: false,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'event-category',\n\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\t'onLoad': (): void => {\n\t\t\t\t\t\tthis.categoryTagSelector.getDialog().getItems().forEach(item => item.setDeselectable(false));\n\t\t\t\t\t\tthis.categoryTagSelector.getTags().forEach(tag => tag.render());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\n\t\tthis.categoryTagSelector.renderTo(this.DOM.categorySelectorWrap);\n\t}\n\n\tupdateEventNameInputTitle()\n\t{\n\t\tif (this.isTitleOverflowing())\n\t\t{\n\t\t\tthis.DOM.entryName.title = this.DOM.entryName.value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.entryName.title = '';\n\t\t}\n\t}\n\n\tisTitleOverflowing()\n\t{\n\t\tconst el = this.DOM.entryName;\n\n\t\treturn el.clientWidth < el.scrollWidth || el.clientHeight < el.scrollHeight;\n\t}\n\n\tswitchFullDay(value)\n\t{\n\t\tvalue = Boolean(this.DOM.fullDay.checked);\n\t\tif (value && Type.isString(this.userSettings.timezoneName)\n\t\t\t&& (!this.DOM.fromTz.value || !this.DOM.toTz.value))\n\t\t{\n\t\t\tthis.DOM.fromTz.value = this.userSettings.timezoneName;\n\t\t\tthis.DOM.toTz.value = this.userSettings.timezoneName;\n\t\t\tthis.DOM.defTimezone.value = this.userSettings.timezoneName;\n\t\t}\n\n\t\tif (value)\n\t\t{\n\t\t\tDom.addClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\n\t\tif (this.remindersControl)\n\t\t{\n\t\t\tthis.remindersControl.setFullDayMode(value);\n\t\t}\n\n\t\tthis.refreshPlanner();\n\t}\n\n\tswitchTimezone()\n\t{\n\t\tif (Dom.hasClass(this.DOM.tzCont, 'calendar-options-timezone-collapse'))\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t}\n\t}\n\n\tinitFormFieldManager(uid)\n\t{\n\t\tthis.DOM.mainBlock = this.DOM.content.querySelector(`#${uid}_main_block_wrap`);\n\t\tthis.DOM.additionalBlockWrap = this.DOM.content.querySelector(`#${uid}_additional_block_wrap`);\n\t\tthis.DOM.additionalBlock = this.DOM.content.querySelector(`#${uid}_additional_block`);\n\t\tthis.DOM.pinnedNamesWrap = this.DOM.content.querySelector(`#${uid}_additional_pinned_names`);\n\t\tthis.DOM.additionalSwitch = this.DOM.content.querySelector(`#${uid}_additional_switch`);\n\n\t\tif (this.isLocationCalendar && !this.fieldIsPinned('location'))\n\t\t{\n\t\t\tthis.pinField('location');\n\t\t}\n\n\t\tEvent.bind(this.DOM.additionalSwitch, 'click', () => {\n\t\t\tDom.toggleClass(this.DOM.additionalSwitch, 'opened');\n\t\t\tDom.toggleClass(this.DOM.additionalBlock, 'invisible');\n\t\t});\n\n\t\tEvent.bind(this.DOM.formWrap, 'click', (e) => {\n\t\t\tconst target = e.target || e.srcElement;\n\t\t\tif (target && target.getAttribute && target.getAttribute('data-bx-fixfield'))\n\t\t\t{\n\t\t\t\tconst fieldName = target.getAttribute('data-bx-fixfield');\n\t\t\t\tif (this.fieldIsPinned(fieldName))\n\t\t\t\t{\n\t\t\t\t\tthis.unPinField(fieldName);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.pinField(fieldName);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst fieldButtons = document.querySelectorAll('[data-bx-field-id]');\n\t\tthis.bindAdditionalFieldButtons(fieldButtons);\n\t}\n\n\tinitDateTimeControl(uid)\n\t{\n\t\tthis.dateTimeControl = new SliderDateTimeControl(uid, {\n\t\t\tshowTimezone: true,\n\t\t\touterContent: this.DOM.content,\n\t\t});\n\n\t\tthis.dateTimeControl.subscribe('onChange', (event) => {\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tconst value = event.getData().value;\n\n\t\t\t\tthis.entry.setTimezone(value.timezoneFrom);\n\n\t\t\t\tif (this.remindersControl)\n\t\t\t\t{\n\t\t\t\t\tthis.remindersControl.setFullDayMode(value.fullDay);\n\n\t\t\t\t\tif (!this.entry.id && !this.remindersControl.wasChangedByUser())\n\t\t\t\t\t{\n\t\t\t\t\t\tconst defaultReminders = EntryManager.getNewEntryReminders(\n\t\t\t\t\t\t\tvalue.fullDay ? 'fullDay' : 'withTime',\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis.remindersControl.setValue(\n\t\t\t\t\t\t\tdefaultReminders,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.planner)\n\t\t\t\t{\n\t\t\t\t\tthis.planner.updateSelector(value.from, value.to, value.fullDay);\n\t\t\t\t\tthis.planner.updateTimezone(value.timezoneFrom);\n\t\t\t\t}\n\n\t\t\t\tif (this.locationSelector)\n\t\t\t\t{\n\t\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfrom: value.from,\n\t\t\t\t\t\t\tto: value.to,\n\t\t\t\t\t\t\ttimezone: this.entry.getTimezoneFrom(),\n\t\t\t\t\t\t\tfullDay: value.fullDay,\n\t\t\t\t\t\t\tcurrentEventId: this.entry.id,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitNameControl(uid)\n\t{\n\t\tthis.DOM.entryName = this.DOM.content.querySelector(`#${uid}_entry_name`);\n\t\tif (this.canEdit())\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.DOM.entryName.focus();\n\t\t\t\tthis.DOM.entryName.select();\n\t\t\t}, 500);\n\t\t}\n\n\t\tlet isInputFocus = false;\n\n\t\tEvent.bind(this.DOM.entryName, 'focusout', () => {\n\t\t\tif (this.DOM.entryName.scrollWidth > this.DOM.entryName.offsetWidth)\n\t\t\t{\n\t\t\t\tthis.getTitleFade(uid).classList.add('--show');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getTitleFade(uid).classList.remove('--show');\n\t\t\t}\n\t\t\tisInputFocus = false;\n\t\t});\n\n\t\tEvent.bind(this.DOM.entryName, 'focus', () => {\n\t\t\tthis.getTitleFade(uid).classList.remove('--show');\n\t\t\tisInputFocus = true;\n\t\t});\n\n\t\tEvent.bind(this.DOM.entryName, 'scroll', () => {\n\t\t\tif (\n\t\t\t\tthis.DOM.entryName.scrollWidth > this.DOM.entryName.offsetWidth\n\t\t\t\t&& Math.ceil(this.DOM.entryName.offsetWidth + this.DOM.entryName.scrollLeft) < this.DOM.entryName.scrollWidth\n\t\t\t\t&& !isInputFocus\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.getTitleFade(uid).classList.add('--show');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getTitleFade(uid).classList.remove('--show');\n\t\t\t}\n\t\t});\n\t}\n\n\tgetTitleFade(uid)\n\t{\n\t\tif (!this.DOM.entryNameFade)\n\t\t{\n\t\t\tthis.DOM.entryNameFade = this.DOM.content.querySelector(`#${uid}_input_fade`);\n\t\t}\n\n\t\treturn this.DOM.entryNameFade;\n\t}\n\n\tinitReminderControl(uid)\n\t{\n\t\tconst reminderWrap = this.DOM.content.querySelector(`#${uid}_reminder`);\n\t\tif (!reminderWrap)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.reminderValues = [];\n\t\tthis.DOM.reminderWrap = reminderWrap;\n\t\tthis.DOM.reminderInputsWrap = this.DOM.reminderWrap.appendChild(Tag.render`<span></span>`);\n\n\t\tthis.remindersControl = new Reminder({\n\t\t\twrap: this.DOM.reminderWrap,\n\t\t\tzIndex: this.zIndex,\n\t\t});\n\n\t\tthis.remindersControl.subscribe('onChange', (event) => {\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\tDom.clean(this.DOM.reminderInputsWrap);\n\t\t\t\tthis.reminderValues.forEach((value) => {\n\t\t\t\t\tthis.DOM.reminderInputsWrap.appendChild(Tag.render`\n\t\t\t\t\t\t<input value=\"${value}\" name=\"reminder[]\" type=\"hidden\">\n\t\t\t\t\t`);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tinitSectionSelector(uid)\n\t{\n\t\tthis.DOM.sectionInput = this.DOM.content.querySelector(`#${uid}_section`);\n\t\tthis.sectionSelector = new SectionSelector({\n\t\t\touterWrap: this.DOM.content.querySelector(`#${uid}_section_wrap`),\n\t\t\tdefaultCalendarType: this.type,\n\t\t\tdefaultOwnerId: this.ownerId,\n\t\t\tsectionList: this.sections,\n\t\t\tsectionGroupList: SectionManager.getSectionGroupList({\n\t\t\t\ttype: this.type || 'user',\n\t\t\t\townerId: this.ownerId || this.userId,\n\t\t\t\tuserId: this.userId,\n\t\t\t\ttrackingUsersList: this.trackingUsersList,\n\t\t\t\tisCollabUser: this.isCollabUser,\n\t\t\t\tisCollabContext: this.isCollabContext(),\n\t\t\t}),\n\t\t\tmode: 'full',\n\t\t\tzIndex: this.zIndex,\n\t\t\tgetCurrentSection: () => {\n\t\t\t\tconst section = this.getCurrentSection();\n\t\t\t\tif (section)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: section.ID,\n\t\t\t\t\t\tname: section.NAME,\n\t\t\t\t\t\tcolor: section.COLOR,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tselectCallback: (sectionValue) => {\n\t\t\t\tif (sectionValue)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.sectionInput.value = sectionValue.id;\n\t\t\t\t\tif (this.colorSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.colorSelector.setValue(sectionValue.color);\n\t\t\t\t\t}\n\t\t\t\t\tthis.entry.setSectionId(sectionValue.id);\n\n\t\t\t\t\tSectionManager.saveDefaultSectionId(\n\t\t\t\t\t\tsectionValue.id,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcalendarType: this.type,\n\t\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\tsections: this.sections,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\tinitEditorControl(uid)\n\t{\n\t\tif (!window.BXHtmlEditor)\n\t\t{\n\t\t\treturn setTimeout(BX.delegate(this.initEditorControl, this), 50);\n\t\t}\n\n\t\tthis.editor = null;\n\t\tif (window.BXHtmlEditor)\n\t\t{\n\t\t\tthis.editor = window.BXHtmlEditor.Get(this.editorId);\n\t\t}\n\n\t\tif (\n\t\t\t!this.editor\n\t\t\t&& top.BXHtmlEditor\n\t\t\t&& top.BXHtmlEditor !== window.BXHtmlEditor\n\t\t)\n\t\t{\n\t\t\tthis.editor = top.BXHtmlEditor.Get(this.editorId);\n\t\t}\n\n\t\tif (this.editor && this.editor.IsShown())\n\t\t{\n\t\t\tthis.customizeHtmlEditor();\n\n\t\t\tif (this.formDataValue.description)\n\t\t\t{\n\t\t\t\tthis.editor.SetContent(this.formDataValue.description);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.addCustomEvent(window.BXHtmlEditor, 'OnEditorCreated', (editor) => {\n\t\t\t\tif (editor.id === this.editorId)\n\t\t\t\t{\n\t\t\t\t\tthis.editor = editor;\n\t\t\t\t\tthis.customizeHtmlEditor();\n\n\t\t\t\t\tif (this.formDataValue.description)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.editor.SetContent(this.formDataValue.description);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcustomizeHtmlEditor()\n\t{\n\t\tconst editor = this.editor;\n\t\tif (editor.toolbar && editor.toolbar.controls && editor.toolbar.controls.spoiler)\n\t\t{\n\t\t\tDom.remove(editor.toolbar.controls.spoiler.pCont);\n\t\t}\n\t}\n\n\tinitLocationControl(uid)\n\t{\n\t\tthis.DOM.locationWrap = this.DOM.content.querySelector(`#${uid}_location_wrap`);\n\t\tthis.DOM.locationInput = this.DOM.content.querySelector(`#${uid}_location`);\n\n\t\tthis.locationSelector = new Location(\n\t\t\t{\n\t\t\t\tinputName: 'lo_cation', // don't use 'location' word here mantis:107863\n\t\t\t\twrap: this.DOM.locationWrap,\n\t\t\t\trichLocationEnabled: this.locationFeatureEnabled,\n\t\t\t\thideLocationLock: this.isCollabUser,\n\t\t\t\tlocationList: this.locationList || [],\n\t\t\t\troomsManager: this.roomsManager || null,\n\t\t\t\tlocationAccess: this.locationAccess || false,\n\t\t\t\tiblockMeetingRoomList: this.iblockMeetingRoomList,\n\t\t\t\tonChangeCallback: this.refreshPlanner,\n\t\t\t},\n\t\t);\n\t}\n\n\tinitRepeatRuleControl(uid)\n\t{\n\t\tconst rruleWrap = this.DOM.content.querySelector(`#${uid}_rrule_wrap`);\n\t\tif (!rruleWrap)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.DOM.rruleWrap = rruleWrap;\n\t\tthis.repeatSelector = new RepeatSelector({\n\t\t\tuid: this.uid,\n\t\t\twrap: this.DOM.rruleWrap,\n\t\t\trruleType: this.DOM.content.querySelector(`#${uid}_rrule_type`),\n\t\t\trruleCount: this.DOM.content.querySelector(`#${uid}_rrule_count`),\n\t\t\tgetDate: function() { return this.dateTimeControl.getValue().from; }.bind(this),\n\t\t});\n\n\t\tthis.dateTimeControl.subscribe('onChange', () => {\n\t\t\tif (this.repeatSelector.getType() === 'weekly')\n\t\t\t{\n\t\t\t\tthis.repeatSelector.changeType(this.repeatSelector.getType());\n\t\t\t}\n\t\t});\n\n\t\tif (this.plannerEnabled)\n\t\t{\n\t\t\tthis.planner.subscribe('onDateChange', () => {\n\t\t\t\tif (this.repeatSelector.getType() === 'weekly')\n\t\t\t\t{\n\t\t\t\t\tthis.repeatSelector.changeType(this.repeatSelector.getType());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tinitAttendeesControl()\n\t{\n\t\tif (this.attendeesControlEnabled)\n\t\t{\n\t\t\tthis.DOM.userSelectorWrap = this.DOM.content.querySelector('.calendar-attendees-selector-wrap');\n\t\t\tthis.DOM.userSelectorValueWarp = this.DOM.userSelectorWrap.appendChild(Tag.render`<div></div>`);\n\n\t\t\tthis.userTagSelector = new EntityTagSelector({\n\t\t\t\tdialogOptions: {\n\t\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\t\tpreselectedItems: this.attendeesPreselectedItems || [],\n\t\t\t\t\tzIndex: this.slider.zIndex,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'Item:onSelect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t\t'Item:onDeselect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t},\n\t\t\t\t\tentities: this.getParticipantsSelectorEntityList(),\n\t\t\t\t\tselectedItems: this.getSelectedItemsForTagSelector(),\n\t\t\t\t\tsearchTabOptions: {\n\t\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\t\ttitle: Loc.getMessage('EC_USER_DIALOG_404_TITLE'),\n\t\t\t\t\t\t\tsubtitle: Loc.getMessage('EC_USER_DIALOG_404_SUBTITLE'),\n\t\t\t\t\t\t\ticon: '/bitrix/images/calendar/search-email.svg',\n\t\t\t\t\t\t\ticonOpacity: 100,\n\t\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.userTagSelector.renderTo(this.DOM.userSelectorWrap);\n\t\t}\n\n\t\tif (this.plannerEnabled)\n\t\t{\n\t\t\tthis.DOM.hideGuestsWrap = this.DOM.content.querySelector('.calendar-hide-members-wrap');\n\t\t}\n\t}\n\n\thandleUserSelectorChanges()\n\t{\n\t\tif (this.planner)\n\t\t{\n\t\t\tthis.planner.show();\n\t\t\tthis.planner.showLoader();\n\n\t\t\tconst selectedItems = this.userTagSelector.getDialog().getSelectedItems();\n\t\t\tthis.setUserSelectorEntityList(selectedItems.map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tentityId: item.entityId,\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tentityType: item.entityType,\n\t\t\t\t}; }));\n\t\t\tthis.refreshPlanner();\n\t\t}\n\t}\n\n\tgetSelectedItemsForTagSelector()\n\t{\n\t\tconst result = [];\n\t\tconst canEdit = this.canEdit();\n\n\t\tthis.getUserSelectorEntityList().forEach((item) => {\n\t\t\tif (item.entityType === 'sharing')\n\t\t\t{\n\t\t\t\tresult.push({\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tentityId: item.entityId,\n\t\t\t\t\tentityType: 'extranet',\n\t\t\t\t\ttitle: item.title,\n\t\t\t\t\tdeselectable: false,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!canEdit && item.entityType === 'email')\n\t\t\t{\n\t\t\t\tresult.push({\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tentityId: item.entityId,\n\t\t\t\t\tentityType: 'email',\n\t\t\t\t\ttitle: item.title,\n\t\t\t\t\tdeselectable: false,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\thasExternalEmailUsers()\n\t{\n\t\treturn Boolean(this.getUserSelectorEntityList().find((item) => {\n\t\t\treturn item.entityType === 'email';\n\t\t}));\n\t}\n\n\tshowHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = '';\n\t\tUtil.initHintNode(this.DOM.hideGuestsWrap.querySelector('.calendar-hide-members-helper'));\n\t}\n\n\thideHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = 'none';\n\t}\n\n\tsetHideGuestsValue(hideGuests = true)\n\t{\n\t\tthis.hideGuests = hideGuests;\n\t}\n\n\tinitPlanner(uid)\n\t{\n\t\tthis.DOM.plannerOuterWrap = this.DOM.content.querySelector(`#${uid}_planner_outer_wrap`);\n\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.DOM.plannerOuterWrap,\n\t\t\tminWidth: parseInt(this.DOM.plannerOuterWrap.offsetWidth),\n\t\t\tlocked: !this.plannerFeatureEnabled,\n\t\t\tentryTimezone: this.entry.getTimezoneFrom(),\n\t\t});\n\n\t\tthis.planner.subscribe('onDateChange', this.handlePlannerSelectorChanges.bind(this));\n\t\tthis.planner.subscribe('onExpandTimeline', this.handleExpandPlannerTimeline.bind(this));\n\t\tthis.planner.subscribe('onDisplayAttendees', this.checkLocationForm.bind(this));\n\n\t\tthis.planner.show();\n\t\tthis.planner.showLoader();\n\t}\n\n\tloadPlannerData(params = {})\n\t{\n\t\tthis.planner.showLoader();\n\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.entry.id || 0,\n\t\t\t\t\tentryLocation: this.entry.data.LOCATION || '',\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\thostId: this.entry.data.MEETING_HOST || null,\n\t\t\t\t\ttype: this.type,\n\t\t\t\t\t// open_event need only location planner\n\t\t\t\t\tentityList: !this.isOpenEvent && params.entityList || [],\n\t\t\t\t\tdateFrom: Util.formatDate(this.planner.scaleDateFrom),\n\t\t\t\t\tdateTo: Util.formatDate(this.planner.scaleDateTo),\n\t\t\t\t\ttimezone: params.timezone || '',\n\t\t\t\t\tlocation: params.location || '',\n\t\t\t\t\tprevUserList: this.prevUserList,\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tif (this.planner)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (const id in response.data.accessibility)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (response.data.accessibility.hasOwnProperty(id))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.loadedAccessibilityData[id] = response.data.accessibility[id];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (Type.isArray(response.data.entries))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresponse.data.entries.forEach((entry) => {\n\t\t\t\t\t\t\t\t\tconst hasAccessibility = this.loadedAccessibilityData[entry.id];\n\t\t\t\t\t\t\t\t\tif (entry.type === 'user' && !this.prevUserList.includes(parseInt(entry.id)) && hasAccessibility)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.prevUserList.push(parseInt(entry.id));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\t\t\tthis.loadedAccessibilityData,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.hasExternalEmailUsers())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showHideGuestsOption();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.hideHideGuestsOption();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t},\n\t\t\t\t\t(response) =>\n                     { resolve(response);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t});\n\t}\n\n\tinitAdditionalControls(uid)\n\t{\n\t\tthis.DOM.privateEventCheckbox = this.DOM.content.querySelector(`#${uid}_private`);\n\t\tthis.DOM.importantEventCheckbox = this.DOM.content.querySelector(`#${uid}_important`);\n\t\tthis.DOM.importantEventCheckboxContainer = this.DOM.importantEventCheckbox.closest('.calendar-info-panel-important');\n\t\tthis.DOM.moreSettings = this.DOM.content.querySelector(`#${uid}_more_outer_wrap`);\n\t}\n\n\tinitColorControl(uid)\n\t{\n\t\tthis.DOM.colorWrap = this.DOM.content.querySelector(`#${uid}_color_selector_wrap`);\n\t\tthis.colorSelector = new ColorSelector(\n\t\t\t{\n\t\t\t\twrap: this.DOM.colorWrap,\n\t\t\t},\n\t\t);\n\t}\n\n\tinitCrmUfControl(uid)\n\t{\n\t\tconst crmUfWrap = BX(`${uid}-uf-crm-wrap`);\n\t\tif (!crmUfWrap)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.DOM.crmUfWrap = crmUfWrap;\n\n\t\tif (this.DOM.crmUfWrap)\n\t\t{\n\t\t\tconst entry = this.getCurrentEntry();\n\t\t\tconst loader = this.DOM.crmUfWrap.appendChild(Dom.adjust(Util.getLoader(50), { style: { height: '40px', width: '40px' } }));\n\n\t\t\tthis.DOM.saveBtn.disabled = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getCrmUserfield', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tevent_id: (entry && entry.id) ? entry.id : 0,\n\t\t\t\t\t},\n\t\t\t\t}).then(\n\t\t\t\t\t// Success\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tif (Type.isDomNode(this.DOM.crmUfWrap))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.BX.html(this.DOM.crmUfWrap, response.data.html);\n\t\t\t\t\t\t\tthis.DOM.saveBtn.disabled = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t// Failure\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tDom.remove(loader);\n\t\t\t\t\t\tthis.DOM.saveBtn.disabled = false;\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}, 800);\n\t\t}\n\t}\n\n\tinitAccessibilityControl(uid)\n\t{\n\t\tthis.DOM.accessibilityInput = this.DOM.content.querySelector(`#${uid}_accessibility`);\n\n\t\tthis.accessibilitySelector = new AccessibilitySelector({\n\t\t\tuid,\n\t\t\treadonly: !this.canEdit(),\n\t\t\tinput: this.DOM.accessibilityInput,\n\t\t});\n\t}\n\n\tdenySliderClose()\n\t{\n\t\tthis.denyClose = true;\n\t}\n\n\tallowSliderClose()\n\t{\n\t\tthis.denyClose = false;\n\t}\n\n\tcheckDenyClose()\n\t{\n\t\t// pending request\n\t\tif (this.state === this.STATE.REQUEST)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if closing of slider was caused during selection.\n\t\tif (!Type.isNull(this.mouseUpNodeCheck))\n\t\t{\n\t\t\treturn !this.mouseUpNodeCheck;\n\t\t}\n\n\t\t// if (top.BX(this.id + '_time_from_div') && top.BX(this.id + '_time_from_div').style.display !== 'none')\n\t\t// \treturn true;\n\t\t//\n\t\t// if (top.BX(this.id + '_time_to_div') && top.BX(this.id + '_time_to_div').style.display !== 'none')\n\t\t// \treturn true;\n\n\t\treturn this.denyClose;\n\t}\n\n\tneedToShowConfirmPopup()\n\t{\n\t\treturn this.doShowConfirmPopup && this.formDataChanged();\n\t}\n\n\tsetCurrentEntry(entry = null, userIndex = null)\n\t{\n\t\tconst currentSectionId = this.getCurrentSectionId();\n\t\tthis.entry = EntryManager.getEntryInstance(entry, userIndex, { type: this.type, ownerId: this.ownerId });\n\t\tif (\n\t\t\t!Util.getCalendarContext()\n\t\t\t&& this.type === 'group'\n\t\t)\n\t\t{\n\t\t\tthis.entry.setSectionId(currentSectionId);\n\t\t}\n\n\t\tEntryManager.registerEntrySlider(this.entry, this);\n\t}\n\n\tgetCurrentEntry()\n\t{\n\t\treturn this.entry;\n\t}\n\n\tgetCurrentSection()\n\t{\n\t\tlet section = false;\n\t\tconst sectionId = this.getCurrentSectionId();\n\n\t\tif (\n\t\t\tsectionId\n\t\t\t&& this.sectionIndex[sectionId] !== undefined\n\t\t\t&& this.sections[this.sectionIndex[sectionId]] !== undefined\n\t\t)\n\t\t{\n\t\t\tsection = this.sections[this.sectionIndex[sectionId]];\n\t\t}\n\n\t\treturn section;\n\t}\n\n\tgetCurrentSectionId()\n\t{\n\t\tlet section = 0;\n\t\tconst entry = this.getCurrentEntry();\n\n\t\tif (entry instanceof Entry && this.sections[this.sectionIndex[entry.sectionId]])\n\t\t{\n\t\t\tsection = parseInt(entry.sectionId);\n\t\t}\n\n\t\tif (!section)\n\t\t{\n\t\t\tif (this.type === 'location')\n\t\t\t{\n\t\t\t\tsection = RoomsManager.getNewEntrySectionId();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\t!Util.getCalendarContext()\n\t\t\t\t\t&& this.type === 'group'\n\t\t\t\t\t&& this.sections.length\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tsection = this.getSectionIdByCurrentContext();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsection = SectionManager.getNewEntrySectionId(this.type, this.ownerId);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this.sectionIndex[section])\n\t\t\t{\n\t\t\t\tsection = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!section && this.sections[0])\n\t\t{\n\t\t\tsection = parseInt(this.sections[0].ID);\n\t\t}\n\n\t\treturn section;\n\t}\n\n\tpinField(fieldName)\n\t{\n\t\tconst [placeHolders, placeHoldersAdditional] = this.getPlaceholders();\n\t\tconst field = placeHoldersAdditional[fieldName];\n\t\tconst newField = placeHolders[fieldName];\n\t\tconst fieldHeight = field.offsetHeight;\n\n\t\tfield.style.height = `${fieldHeight}px`;\n\t\tsetTimeout(() => {\n\t\t\tDom.addClass(field, 'calendar-hide-field');\n\t\t}, 0);\n\t\tnewField.style.height = '0';\n\n\t\tif (fieldName === 'description')\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.descriptionAdditionalWrap = this.DOM.additionalBlock.querySelector('.calendar-info-panel-description');\n\t\t\t\t}\n\n\t\t\t\tif (this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\twhile (this.DOM.descriptionAdditionalWrap.firstChild)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewField.appendChild(this.DOM.descriptionAdditionalWrap.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnewField.style.height = `${fieldHeight}px`;\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.display = 'none';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = true;\n\t\t\t\tconst editor = window.BXHtmlEditor.Get(this.editorId);\n\t\t\t\tif (editor)\n\t\t\t\t{\n\t\t\t\t\teditor.CheckAndReInit();\n\t\t\t\t}\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}, 500);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\twhile (field.firstChild)\n\t\t\t\t{\n\t\t\t\t\tnewField.appendChild(field.firstChild);\n\t\t\t\t}\n\t\t\t\tnewField.style.height = `${fieldHeight}px`;\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = true;\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}, 300);\n\t\t}\n\t}\n\n\tunPinField(fieldName)\n\t{\n\t\tconst [placeHolders, placeHoldersAdditional] = this.getPlaceholders();\n\t\tconst field = placeHolders[fieldName];\n\t\tconst newField = placeHoldersAdditional[fieldName];\n\t\tconst fieldHeight = field.offsetHeight;\n\n\t\tfield.style.height = `${fieldHeight}px`;\n\t\tsetTimeout(() => {\n\t\t\tDom.addClass(field, 'calendar-hide-field');\n\t\t}, 0);\n\t\tnewField.style.height = '0';\n\n\t\tif (fieldName === 'description')\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.descriptionAdditionalWrap = this.DOM.additionalBlock.querySelector('.calendar-info-panel-description');\n\t\t\t\t}\n\n\t\t\t\tif (this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\twhile (field.firstChild)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.DOM.descriptionAdditionalWrap.appendChild(field.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnewField.style.display = '';\n\t\t\t\tnewField.style.height = `${fieldHeight}px`;\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = false;\n\n\t\t\t\tconst editor = window.BXHtmlEditor.Get(this.editorId);\n\t\t\t\tif (editor)\n\t\t\t\t{\n\t\t\t\t\teditor.CheckAndReInit();\n\t\t\t\t}\n\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}, 300);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\twhile (field.firstChild)\n\t\t\t\t{\n\t\t\t\t\tnewField.appendChild(field.firstChild);\n\t\t\t\t}\n\t\t\t\tnewField.style.height = `${fieldHeight}px`;\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = false;\n\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}, 300);\n\t\t}\n\t}\n\n\tfieldIsPinned(fieldName)\n\t{\n\t\treturn this.pinnedFieldsIndex[fieldName];\n\t}\n\n\tgetPlaceholders()\n\t{\n\t\tif (!this.placeHolders)\n\t\t{\n\t\t\tthis.placeHolders = {};\n\t\t\tthis.placeHoldersAdditional = {};\n\n\t\t\tlet i;\n\t\t\tlet fieldId;\n\t\t\tlet nodes = this.DOM.formWrap.querySelectorAll('.calendar-field-additional-placeholder');\n\n\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t{\n\t\t\t\tfieldId = nodes[i].getAttribute('data-bx-block-placeholer');\n\t\t\t\tif (fieldId)\n\t\t\t\t{\n\t\t\t\t\tthis.placeHoldersAdditional[fieldId] = nodes[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnodes = this.DOM.formWrap.querySelectorAll('.calendar-field-placeholder');\n\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t{\n\t\t\t\tfieldId = nodes[i].getAttribute('data-bx-block-placeholer');\n\t\t\t\tif (fieldId)\n\t\t\t\t{\n\t\t\t\t\tthis.placeHolders[fieldId] = nodes[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn [this.placeHolders, this.placeHoldersAdditional];\n\t}\n\n\tgetSettings(settings)\n\t{\n\t\tthis.pinnedFieldsIndex = {};\n\t\tlet i;\n\t\tconst pinnedFields = [];\n\n\t\tfor (i in settings.pinnedFields)\n\t\t{\n\t\t\tif (settings.pinnedFields.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tpinnedFields.push(settings.pinnedFields[i]);\n\t\t\t\tthis.pinnedFieldsIndex[settings.pinnedFields[i]] = true;\n\t\t\t}\n\t\t}\n\t\tsettings.pinnedFields = pinnedFields;\n\n\t\treturn settings;\n\t}\n\n\tsaveSettings()\n\t{\n\t\tlet fieldName;\n\t\tconst pinnedFields = [];\n\n\t\tfor (fieldName in this.pinnedFieldsIndex)\n\t\t{\n\t\t\tif (this.pinnedFieldsIndex.hasOwnProperty(fieldName) && this.pinnedFieldsIndex[fieldName])\n\t\t\t{\n\t\t\t\tpinnedFields.push(fieldName);\n\t\t\t}\n\t\t}\n\n\t\tthis.formSettings.pinnedFields = pinnedFields;\n\t\tthis.BX.userOptions.save('calendar', this.formType, 'pinnedFields', pinnedFields);\n\t}\n\n\tupdateAdditionalBlockState(timeout)\n\t{\n\t\tif (timeout === false)\n\t\t{\n\t\t\tDom.clean(this.DOM.pinnedNamesWrap);\n\t\t\tconst additionalFields = [...this.DOM.additionalBlock.querySelectorAll('.calendar-field-additional-placeholder[data-bx-block-placeholer]')]\n\t\t\t\t.filter((field) => field.innerText !== '' && field.style.display !== 'none');\n\t\t\tconst fieldButtons = additionalFields.map((field) => Dom.create('SPAN', {\n\t\t\t\tattrs: {\n\t\t\t\t\t'data-bx-field-id': field.getAttribute('data-bx-block-placeholer'),\n\t\t\t\t},\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'calendar-additional-alt-promo-text',\n\t\t\t\t},\n\t\t\t\thtml: field.querySelector('.js-calendar-field-name').innerText,\n\t\t\t}));\n\t\t\tthis.DOM.pinnedNamesWrap.append(...fieldButtons);\n\t\t\tthis.bindAdditionalFieldButtons(fieldButtons);\n\n\t\t\tif (fieldButtons.length === 0)\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden');\n\t\t\t}\n\t\t\telse if (Dom.hasClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden');\n\t\t\t}\n\n\t\t\tthis.checkLastItemBorder();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.updateAdditionalBlockTimeout)\n\t\t\t{\n\t\t\t\tclearTimeout(this.updateAdditionalBlockTimeout);\n\t\t\t\tthis.updateAdditionalBlockTimeout = null;\n\t\t\t}\n\t\t\tthis.updateAdditionalBlockTimeout = setTimeout(() => {\n\t\t\t\tthis.updateAdditionalBlockState(false);\n\t\t\t}, 300);\n\t\t}\n\t}\n\n\tbindAdditionalFieldButtons(fieldButtons)\n\t{\n\t\tfor (const fieldButton of fieldButtons)\n\t\t{\n\t\t\tconst fieldId = fieldButton.getAttribute('data-bx-field-id');\n\n\t\t\tif (!this.canEdit() && this.getFieldsEditableOnlyByPermission().includes(fieldId))\n\t\t\t{\n\t\t\t\tfieldButton.remove();\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tEvent.bind(fieldButton, 'click', (event) => {\n\t\t\t\tconst fieldWrap = document.querySelector(`.calendar-openable-block [data-bx-block-placeholer=${fieldId}]`);\n\t\t\t\tthis.highlightField(fieldWrap);\n\n\t\t\t\tif (this.isAdditionalBlockOpened())\n\t\t\t\t{\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tgetFieldsEditableOnlyByPermission()\n\t{\n\t\treturn ['description', 'private', 'crm'];\n\t}\n\n\thighlightField(fieldWrap)\n\t{\n\t\tDom.addClass(fieldWrap, 'calendar-field-highlighted');\n\n\t\tconst fieldAbsoluteTop = this.DOM.content.scrollTop + fieldWrap.getBoundingClientRect().top;\n\t\tthis.highlightFieldScrollAnimation = new BX.easing({\n\t\t\tduration: 400,\n\t\t\tstart: {\n\t\t\t\tscroll: this.DOM.content.scrollTop,\n\t\t\t},\n\t\t\tfinish: {\n\t\t\t\tscroll: fieldAbsoluteTop,\n\t\t\t},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: (state) => {\n\t\t\t\tthis.DOM.content.scrollTop = state.scroll;\n\t\t\t},\n\t\t\tcomplete: () => {},\n\t\t});\n\t\tthis.highlightFieldScrollAnimation.animate();\n\n\t\tclearTimeout(fieldWrap.highlightTimeout);\n\t\tfieldWrap.highlightTimeout = setTimeout(() => BX.Dom.removeClass(fieldWrap, 'calendar-field-highlighted'), 2500);\n\t}\n\n\tisAdditionalBlockOpened()\n\t{\n\t\treturn Dom.hasClass(this.DOM.additionalSwitch, 'opened');\n\t}\n\n\tcheckLastItemBorder()\n\t{\n\t\tconst noBorderClass = 'no-border';\n\t\tlet i;\n\t\tlet nodes;\n\n\t\tnodes = this.DOM.mainBlock.querySelectorAll('.calendar-options-item-border');\n\t\tfor (i = 0; i < nodes.length; i++)\n\t\t{\n\t\t\tif (i === nodes.length - 1)\n\t\t\t{\n\t\t\t\tDom.addClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t}\n\n\t\tnodes = this.DOM.additionalBlock.querySelectorAll('.calendar-options-item-border');\n\t\tfor (i = 0; i < nodes.length; i++)\n\t\t{\n\t\t\tif (i === nodes.length - 1)\n\t\t\t{\n\t\t\t\tDom.addClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t}\n\t}\n\n\thandlePlannerSelectorChanges(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\t// Date time\n\t\t\tthis.dateTimeControl.setValue({\n\t\t\t\tfrom: data.dateFrom,\n\t\t\t\tto: data.dateTo,\n\t\t\t});\n\t\t\tif (this.locationSelector)\n\t\t\t{\n\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t{\n\t\t\t\t\t\tfrom: data.dateFrom,\n\t\t\t\t\t\tto: data.dateTo,\n\t\t\t\t\t\ttimezone: this.entry.getTimezoneFrom(),\n\t\t\t\t\t\tfullDay: data.fullDay,\n\t\t\t\t\t\tcurrentEventId: this.entry.id,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.planner)\n\t\t\t{\n\t\t\t\tconst fromHours = parseInt(data.dateFrom.getHours()) + Math.floor(data.dateFrom.getMinutes() / 60);\n\t\t\t\tconst toHours = parseInt(data.dateTo.getHours()) + Math.floor(data.dateTo.getMinutes() / 60);\n\t\t\t\tif (\n\t\t\t\t\t(fromHours !== 0 && fromHours <= this.planner.shownScaleTimeFrom)\n\t\t\t\t\t|| (toHours !== 0 && toHours !== 23 && toHours + 1 >= this.planner.shownScaleTimeTo)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.planner.updateSelector(data.dateFrom, data.dateTo, data.fullDay);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thandleExpandPlannerTimeline(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tif (data.reload)\n\t\t\t{\n\t\t\t\tthis.prevUserList = [];\n\t\t\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\t\t\tthis.loadPlannerData({\n\t\t\t\t\tentityList: this.getUserSelectorEntityList(),\n\t\t\t\t\tfrom: Util.formatDate(data.dateFrom),\n\t\t\t\t\tto: Util.formatDate(data.dateTo),\n\t\t\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\t\t\tlocation: this.locationSelector.getTextValue(),\n\t\t\t\t\tfocusSelector: false,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetUserSelectorEntityList()\n\t{\n\t\treturn this.selectorEntityList;\n\t}\n\n\tsetUserSelectorEntityList(selectorEntityList)\n\t{\n\t\tthis.selectorEntityList = selectorEntityList;\n\t}\n\n\trefreshPlannerState()\n\t{\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\tthis.loadPlannerData({\n\t\t\tentityList: this.isOpenEvent ? [] : this.getUserSelectorEntityList(),\n\t\t\tfrom: Util.formatDate(dateTime.from.getTime() - Util.getDayLength() * 3),\n\t\t\tto: Util.formatDate(dateTime.to.getTime() + Util.getDayLength() * 10),\n\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\tlocation: this.locationSelector.getTextValue(),\n\t\t});\n\t}\n\n\tcheckLocationForm(event)\n\t{\n\t\tif (!this.isCollabUser && event && event instanceof BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tconst usersCount = data.usersCount;\n\n\t\t\tif (this.locationCapacity !== 0)\n\t\t\t{\n\t\t\t\tLocation.setCurrentCapacity(this.locationCapacity);\n\t\t\t\tthis.locationCapacity = 0;\n\t\t\t}\n\t\t\tlet locationCapacity = Location.getCurrentCapacity() || 0;\n\n\t\t\tif (this.locationSelector.value.type === undefined && locationCapacity)\n\t\t\t{\n\t\t\t\tlocationCapacity = 0;\n\t\t\t\tLocation.setCurrentCapacity(0);\n\t\t\t}\n\n\t\t\tif (locationCapacity < usersCount && locationCapacity !== 0)\n\t\t\t{\n\t\t\t\tthis.locationSelector.addCapacityAlert();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.locationSelector.removeCapacityAlert();\n\t\t\t}\n\t\t}\n\t}\n\n\tplannerIsShown()\n\t{\n\t\treturn this.DOM.plannerWrap && Dom.hasClass(this.DOM.plannerWrap, 'calendar-edit-planner-wrap-shown');\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif (\n\t\t\t(e.ctrlKey || e.metaKey)\n\t\t\t&& !e.altKey\n\t\t\t&& e.keyCode === Util.getKeyCode('enter')\n\t\t\t&& this.checkTopSlider()\n\t\t\t&& !this.isAdditionalPopupShown()\n\t\t)\n\t\t{\n\t\t\tif (this.busyUsersDialog && this.busyUsersDialog.isShown())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tisAdditionalPopupShown(): boolean\n\t{\n\t\treturn this.DOM.locationRepeatBusyErrorPopup?.getPopupWindow()?.isShown();\n\t}\n\n\tcheckTopSlider()\n\t{\n\t\tconst slider = Util.getBX().SidePanel.Instance.getTopSlider();\n\n\t\treturn slider && slider.getData().get('type') === 'calendar:slider';\n\t}\n\n\tshowError(errorList)\n\t{\n\t\tlet errorText = '';\n\n\t\tif (Type.isArray(errorList))\n\t\t{\n\t\t\terrorList.forEach((error) => {\n\t\t\t\tif (error.code === 'edit_entry_location_busy' || error.code === 'edit_entry_location_busy_recurrence')\n\t\t\t\t{\n\t\t\t\t\tthis.locationBusyAlert = Util.showFieldError(error.message, this.DOM.locationWrap, { clearTimeout: 10000 });\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (error.code === 'edit_entry_location_repeat_busy')\n\t\t\t\t{\n\t\t\t\t\tthis.showLocationRepeatBusyErrorPopup(error.message);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\terrorText += `${error.message}\\n`;\n\t\t\t});\n\t\t}\n\n\t\tif (errorText !== '')\n\t\t{\n\t\t\talert(errorText);\n\t\t}\n\t}\n\n\tshowLocationRepeatBusyErrorPopup(message)\n\t{\n\t\tif (!this.DOM.locationRepeatBusyErrorPopup)\n\t\t{\n\t\t\tthis.DOM.locationRepeatBusyErrorPopup = EntryManager.getLocationRepeatBusyErrorPopup({\n\t\t\t\tmessage,\n\t\t\t\tonYesCallback: () => {\n\t\t\t\t\tif (Type.isDomNode(this.locationBusyAlert))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(this.locationBusyAlert);\n\t\t\t\t\t\tthis.locationBusyAlert = null;\n\t\t\t\t\t}\n\t\t\t\t\tthis.lastUsedSaveOptions.doCheckOccupancy = 'N';\n\t\t\t\t\tthis.DOM.locationRepeatBusyErrorPopup.close();\n\t\t\t\t\tthis.save(this.lastUsedSaveOptions);\n\t\t\t\t\tthis.lastUsedSaveOptions = {};\n\t\t\t\t},\n\t\t\t\tonCancelCallback: () => {\n\t\t\t\t\tthis.lastUsedSaveOptions = {};\n\t\t\t\t\tthis.DOM.locationRepeatBusyErrorPopup.close();\n\t\t\t\t},\n\t\t\t\tonPopupCloseCallback: () => {\n\t\t\t\t\tdelete this.DOM.locationRepeatBusyErrorPopup;\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.DOM.locationRepeatBusyErrorPopup.show();\n\t\t}\n\t}\n\n\tgetFormDataChanges(excludes = [])\n\t{\n\t\tif (!this.DOM.form)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tconst entry = this.entry;\n\t\tconst fields = [];\n\n\t\t// Name\n\t\tif (\n\t\t\t!excludes.includes('name')\n\t\t\t&& entry.name !== this.DOM.form.name.value\n\t\t)\n\t\t{\n\t\t\tfields.push('name');\n\t\t}\n\n\t\t// Description\n\t\tif (\n\t\t\t!excludes.includes('description')\n\t\t\t&& entry.getDescription() !== this.DOM.form.desc.value\n\t\t)\n\t\t{\n\t\t\tfields.push('description');\n\t\t}\n\n\t\t// Location\n\t\tif (\n\t\t\t!excludes.includes('location')\n\t\t\t&& this.locationSelector.getTextLocation(Location.parseStringValue(this.entry.getLocation()))\n\t\t\t!== this.locationSelector.getTextLocation(Location.parseStringValue(this.locationSelector.getTextValue()))\n\t\t)\n\t\t{\n\t\t\tfields.push('location');\n\t\t}\n\n\t\t// Date + time\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\tif (\n\t\t\t!excludes.includes('date&time')\n\t\t\t&& (\n\t\t\t\tentry.isFullDay() !== dateTime.fullDay\n\t\t\t\t|| dateTime.from.toString() !== entry.from.toString()\n\t\t\t\t|| dateTime.to.toString() !== entry.to.toString()\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tfields.push('date&time');\n\t\t}\n\n\t\t// Section\n\t\tif (\n\t\t\tthis.sectionSelectorEnabled\n\t\t\t&& !excludes.includes('section')\n\t\t\t&& Number(this.initialSectionId) !== Number(this.DOM.sectionInput.value)\n\t\t)\n\t\t{\n\t\t\tfields.push('section');\n\t\t}\n\n\t\t// Access codes\n\t\tif (\n\t\t\tthis.attendeesControlEnabled\n\t\t\t&& !excludes.includes('codes')\n\t\t\t&& this.getUserSelectorEntityList().map((item)=>{return item.entityId + ':' + item.id}).join('|')\n\t\t\t!== entry.getAttendeesEntityList().map((item)=>{return item.entityId + ':' + item.id}).join('|')\n\t\t)\n\t\t{\n\t\t\tfields.push('codes');\n\t\t}\n\n\t\tif (!excludes.includes('color'))\n\t\t{\n\t\t\tconst entryColor = (entry.data.COLOR || this.getCurrentSection().COLOR).toLowerCase();\n\n\t\t\tif (entryColor !== this.colorSelector.getValue().toLowerCase())\n\t\t\t{\n\t\t\t\tfields.push('color');\n\t\t\t}\n\t\t}\n\n\t\tif (!excludes.includes('reminder'))\n\t\t{\n\t\t\tconst reminder = entry.getReminders();\n\t\t\tif (Type.isArrayFilled(reminder) && reminder.length !== this.reminderValues.length)\n\t\t\t{\n\t\t\t\tfields.push('reminder');\n\t\t\t}\n\t\t}\n\n\t\tif (this.wasRruleChanged())\n\t\t{\n\t\t\tfields.push('rrule');\n\t\t}\n\n\t\tif (this.DOM.privateEventCheckbox && this.DOM.privateEventCheckbox.checked !== entry.isPrivate())\n\t\t{\n\t\t\tfields.push('private');\n\t\t}\n\n\t\tif (this.DOM.importantEventCheckbox && this.DOM.importantEventCheckbox.checked !== entry.important)\n\t\t{\n\t\t\tfields.push('important');\n\t\t}\n\n\t\tif (this.DOM.form.tz_from.dataset.value !== this.initialTimezoneFrom)\n\t\t{\n\t\t\tfields.push('tz_from');\n\t\t}\n\n\t\tif (this.DOM.form.tz_to.dataset.value !== this.initialTimezoneTo)\n\t\t{\n\t\t\tfields.push('tz_to');\n\t\t}\n\n\t\tconst currentUFCrm = entry.data.UF_CRM_CAL_EVENT || [];\n\t\tconst newUFCrm = new FormData(this.DOM.form).getAll('UF_CRM_CAL_EVENT[]');\n\t\tif (JSON.stringify(currentUFCrm.sort()) !== JSON.stringify(newUFCrm.sort()))\n\t\t{\n\t\t\tfields.push('uf_crm');\n\t\t}\n\n\t\tif (this.DOM.form.meeting_notify && entry.data.MEETING && this.DOM.form.meeting_notify.checked !== entry.data.MEETING.NOTIFY)\n\t\t{\n\t\t\tfields.push('meeting_notify');\n\t\t}\n\n\t\tif (this.DOM.accessibilityInput && this.DOM.accessibilityInput.dataset.value !== entry.accessibility)\n\t\t{\n\t\t\tfields.push('accessibility');\n\t\t}\n\n\t\tconst formMaxAttendees = parseInt(this.DOM.form?.max_attendees?.value, 10) || 0;\n\t\tconst optionsJson = entry?.data?.OPTIONS?.OPTIONS ?? null;\n\t\tconst eventMaxAttendees = JSON.parse(optionsJson)?.max_attendees ?? 0;\n\t\tif (formMaxAttendees !== eventMaxAttendees)\n\t\t{\n\t\t\tfields.push('max_attendees');\n\t\t}\n\n\t\tconst currentUfWebDavCalEnv = this.entry.data.UF_WEBDAV_CAL_EVENT || []\n\t\tconst newUfWebDavCalEnv = (new FormData(this.DOM.form)).getAll('UF_WEBDAV_CAL_EVENT[]')\n\t\t\t.filter(Boolean);\n\t\tif (JSON.stringify(currentUfWebDavCalEnv.sort()) !== JSON.stringify(newUfWebDavCalEnv.sort()))\n\t\t{\n\t\t\tfields.push('UF_WEBDAV_CAL_EVENT[]');\n\t\t}\n\n\t\treturn fields;\n\t}\n\n\twasRruleChanged()\n\t{\n\t\treturn JSON.stringify(this.getFormRrule()) !== JSON.stringify(this.initialRrule) && !this.entry.hasRecurrenceId();\n\t}\n\n\tgetFormRrule()\n\t{\n\t\tconst formData = new FormData(this.DOM.form);\n\t\tconst endsOn = formData.get('rrule_endson');\n\t\tconst FREQ = formData.get('EVENT_RRULE[FREQ]') ?? 'NONE';\n\t\tlet INTERVAL = parseInt(formData.get('EVENT_RRULE[INTERVAL]'), 10) || null;\n\t\tlet COUNT = null;\n\t\tlet UNTIL = null;\n\t\tlet BYDAY = null;\n\n\t\tif (endsOn === 'count')\n\t\t{\n\t\t\tconst defaultCount = 10;\n\t\t\tCOUNT = parseInt(formData.get('EVENT_RRULE[COUNT]'), 10) || defaultCount;\n\t\t}\n\n\t\tif (endsOn === 'until')\n\t\t{\n\t\t\tUNTIL = formData.get('EVENT_RRULE[UNTIL]');\n\t\t}\n\n\t\tif (FREQ === 'NONE')\n\t\t{\n\t\t\tINTERVAL = COUNT = UNTIL = null;\n\t\t}\n\n\t\tif (FREQ === 'WEEKLY')\n\t\t{\n\t\t\tBYDAY = formData.getAll('EVENT_RRULE[BYDAY][]');\n\t\t}\n\n\t\treturn { FREQ, INTERVAL, COUNT, UNTIL, BYDAY };\n\t}\n\n\tcheckCurrentUsersAccessibility()\n\t{\n\t\treturn this.getFormDataChanges().includes('date&time');\n\t}\n\n\tformDataChanged()\n\t{\n\t\treturn this.getFormDataChanges().length > 0;\n\t}\n\n\tgetUserCodes()\n\t{\n\t\tconst codes = [];\n\t\tconst valuesInput = this.DOM.attendeesWrap.querySelectorAll('input[name=\"EVENT_DESTINATION[]\"]');\n\n\t\tfor (const element of valuesInput)\n\t\t{\n\t\t\tif (!codes.includes(element.value))\n\t\t\t{\n\t\t\t\tcodes.push(element.value);\n\t\t\t}\n\t\t}\n\n\t\treturn codes;\n\t}\n\n\thandlePull(event: BaseEvent): void\n\t{\n\t\tif (!event instanceof BaseEvent)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = event.getData();\n\t\tconst command = data[0];\n\n\t\tconst params = Type.isObjectLike(data[1]) ? data[1] : {};\n\n\t\tswitch (command)\n\t\t{\n\t\t\tcase 'edit_event':\n\t\t\tcase 'delete_event':\n\t\t\tcase 'set_meeting_status':\n\t\t\t\tconst userIdList = Type.isArray(params?.fields?.ATTENDEES) ? params.fields.ATTENDEES : [];\n\t\t\t\tconst eventOwner = params?.fields?.CAL_TYPE === 'user'\n\t\t\t\t\t? parseInt(params?.fields?.OWNER_ID)\n\t\t\t\t\t: parseInt(params?.fields?.CREATED_BY);\n\t\t\t\tif (!userIdList.includes(eventOwner))\n\t\t\t\t{\n\t\t\t\t\tuserIdList.push(eventOwner);\n\t\t\t\t}\n\t\t\t\tthis.clearAccessibilityData(userIdList);\n\n\t\t\t\tthis.refreshPlannerState();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tclearAccessibilityData(userIdList: Object): void\n\t{\n\t\tif (Type.isArray(userIdList) && userIdList.length > 0 && this.prevUserList.length > 0)\n\t\t{\n\t\t\tthis.prevUserList = this.prevUserList.filter((userId) => !userIdList.includes(userId));\n\t\t}\n\t}\n\n\tgetParticipantsSelectorEntityList()\n\t{\n\t\tif (this.participantsSelectorEntityList && this.participantsSelectorEntityList.length > 0)\n\t\t{\n\t\t\treturn this.participantsSelectorEntityList;\n\t\t}\n\n\t\tlet entityList = [\n\t\t\t{\n\t\t\t\tid: 'user',\n\t\t\t\toptions: {\n\t\t\t\t\tinviteEmployeeLink: this.canEdit(),\n\t\t\t\t\tinviteGuestLink: this.canEdit(),\n\t\t\t\t\temailUsers: Util.isEventWithEmailGuestAllowed() && this.canEdit(),\n\t\t\t\t\tanalyticsSource: 'calendar',\n\t\t\t\t\tlockGuestLink: !Util.isEventWithEmailGuestAllowed(),\n\t\t\t\t\tlockGuestLinkFeatureId: 'calendar_events_with_email_guests',\n\t\t\t\t},\n\t\t\t\tfilters: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'calendar.attendeeFilter',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tisSharingEvent: this.entry.isSharingEvent(),\n\t\t\t\t\t\t\teventId: this.entry.id,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'department',\n\t\t\t\toptions: { selectMode: 'usersAndDepartments' },\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'meta-user',\n\t\t\t\toptions: { 'all-users': true },\n\t\t\t},\n\t\t];\n\n\t\tif (this.isProjectFeatureEnabled)\n\t\t{\n\t\t\tentityList.push({\n\t\t\t\tid: 'project',\n\t\t\t});\n\t\t}\n\n\t\tif (this.attendeesPreselectedItems)\n\t\t{\n\t\t\tlet projectRole = null;\n\n\t\t\tthis.attendeesPreselectedItems\n\t\t\t\t.forEach((item) => {\n\t\t\t\t\tconst type = item[0];\n\t\t\t\t\tconst role = item[1];\n\t\t\t\t\tif (type === 'project-roles')\n\t\t\t\t\t{\n\t\t\t\t\t\tprojectRole = role;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\n\t\t\tif (projectRole)\n\t\t\t{\n\t\t\t\tentityList = [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project-roles',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tprojectId: projectRole.split('_')[0],\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\n\t\treturn entityList;\n\t}\n\n\tisSyncSection(section)\n\t{\n\t\treturn section.EXTERNAL_TYPE === 'icloud'\n\t\t\t|| section.EXTERNAL_TYPE === 'google'\n\t\t\t|| section.EXTERNAL_TYPE === 'office365'\n\t\t\t|| (section.connectionLinks && section.connectionLinks.length > 0)\n\t\t;\n\t}\n\n\tgetSectionsForEditEvent(sections, currentSection)\n\t{\n\t\tconst result = [];\n\t\tconst currentType = currentSection.CAL_TYPE;\n\t\tresult.push(currentSection);\n\n\t\tsections.forEach((section) => {\n\t\t\tif (!this.isSyncSection(section) && section.CAL_TYPE === currentType)\n\t\t\t{\n\t\t\t\tresult.push(section);\n\t\t\t}\n\t\t});\n\n\t\tthis.sections = result;\n\t\tthis.sectionIndex = [];\n\n\t\tif (Type.isArray(this.sections))\n\t\t{\n\t\t\tthis.sections.forEach((value, ind) => {\n\t\t\t\tthis.sectionIndex[parseInt(value.ID)] = ind;\n\t\t\t});\n\t\t}\n\t}\n\n\tunsetHiddenSection(section, sectionManager)\n\t{\n\t\tconst sectId = parseInt(section.ID);\n\t\tif (!sectionManager.sectionIsShown(sectId))\n\t\t{\n\t\t\tlet hiddenSections = sectionManager.getHiddenSections();\n\t\t\thiddenSections = hiddenSections.filter((sectionId) => {\n\t\t\t\treturn sectionId !== sectId;\n\t\t\t});\n\t\t\tsectionManager.setHiddenSections(hiddenSections);\n\t\t\tsectionManager.saveHiddenSections();\n\t\t}\n\t}\n\n\tisCreateForm()\n\t{\n\t\treturn !this.isEditForm();\n\t}\n\n\tisEditForm()\n\t{\n\t\treturn parseInt(this.entry.id) > 0;\n\t}\n\n\tisCollabContext()\n\t{\n\t\tconst currentSection = this.getCurrentSection();\n\n\t\treturn currentSection && Type.isFunction(currentSection.isCollab)\n\t\t\t? currentSection.isCollab()\n\t\t\t: currentSection.IS_COLLAB\n\t\t;\n\t}\n\n\tgetSectionIdByCurrentContext()\n\t{\n\t\tconst sectionObj = this.sections.find(\n\t\t\t(section) => parseInt(section.OWNER_ID, 10) === this.ownerId\n\t\t\t\t&& section.CAL_TYPE === this.type\n\t\t);\n\n\t\treturn sectionObj && parseInt(sectionObj.ID, 10);\n\t}\n}\n"],"names":["SliderDateTimeControl","DateTimeControl","create","DOM","dateTimeWrap","outerContent","querySelector","UID","editor","fromDate","toDate","fromTime","toTime","fromTimeControl","TimeSelector","input","onChangeCallback","handleTimeFromChange","bind","toTimeControl","handleTimeToChange","fullDay","defTimezoneWrap","defTimezone","fromTz","toTz","tzButton","tzOuterCont","tzCont","title","Loc","getMessage","prepareModel","bindEventHandlers","BX","isAmPmMode","style","minWidth","Dom","adjust","props","autocomplete","setReadonly","timezoneHint","value","getValue","result","dateFrom","Util","formatDateUsable","from","dateTo","to","timeFrom","timeTo","timezoneIcon","Type","isStringFilled","Tag","render","readonlyElement","append","_t","_t2","EventEditForm","constructor","options","uid","sliderId","zIndex","denyClose","formType","STATE","READY","REQUEST","ERROR","sections","sectionIndex","trackingUsersList","userSettings","prevUserList","loadedAccessibilityData","eventOptions","name","type","isLocationCalendar","locationAccess","isProjectFeatureEnabled","locationCapacity","roomsManager","userId","parseInt","ownerId","entryId","entry","data","OPTIONS","formDataValue","emitter","EventEmitter","setEventNamespace","getBX","isCollabUser","calendarContext","analyticsChatId","createChatId","analyticsSubSection","getFormAnalyticsContext","setCalendarContext","context","getCalendarContext","isOpenEvent","CAL_TYPE","plannerEnabled","sectionSelectorEnabled","attendeesControlEnabled","formSettings","pinnedFields","isDate","entryDateFrom","Date","getTime","participantsEntityList","isArray","participantsSelectorEntityList","entryName","entryDescription","description","jumpToControl","refreshPlanner","Runtime","debounce","refreshPlannerState","state","doShowConfirmPopup","sliderOnClose","hideWithConfirm","handlePullBind","handlePull","keyHandlerBind","keyHandler","lastUsedSaveOptions","isAvailable","initInSlider","slider","promiseResolve","getUrl","addCustomEvent","onLoadSlider","destroy","setCurrentEntry","createContent","then","html","isFunction","opened","canEdit","isBoolean","permissions","edit","isMeeting","sectionId","getCurrentSectionId","isResourcebooking","CalendarSection","getCurrentSection","canDo","show","params","SidePanel","Instance","open","contentCallback","label","text","bgColor","events","onClose","onCloseComplete","onLoad","isOpened","Event","document","subscribe","mouseUpNodeCheck","e","mousedownTarget","target","srcElement","setTimeout","locationBusyAlert","remove","window","proxy","denySliderClose","allowSliderClose","event","getSlider","content","layout","notLoaded","close","location","reload","getData","get","initControls","setFormValues","attendeesSelectorWrap","highlightField","fieldWrap","highlightFieldScrollAnimation","stop","checkDenyClose","save","locationRepeatBusyErrorPopup","isPlainObject","formDataChanges","getFormDataChanges","isEditForm","length","sendFromEmail","hasExternalEmailUsers","emailConfirmDialogShown","EntryManager","showConfirmedEmailDialog","callback","id","isRecursive","confirmed","showConfirmEditDialog","recursionMode","isFirstInstance","canEditOnlyThis","sendInvitesAgain","undefined","includes","getAttendees","find","item","STATUS","showReInviteUsersDialog","addClass","saveBtn","UI","Button","State","CLOCKING","closeBtn","DISABLED","form","locationSelector","getTextValue","SaveContent","section","COLOR","toLowerCase","colorSelector","color","current_date_from","formatDate","rec_edit_mode","appendChild","requestUid","meeting_host","MEETING_HOST","chat_id","MEETING","CHAT_ID","registerRequestId","attendeesEntityList","getUserSelectorEntityList","clean","userSelectorValueWarp","forEach","entity","index","entityId","checkCurrentUsersAccessibility","previousAttendeesList","getAttendeesEntityList","Number","selectedCategories","categoryTagSelector","getDialog","getSelectedItems","selectedCategory","doCheckOccupancy","FormData","rruleType","dataset","accessibility","tz_from","tz_to","ajax","runAction","response","newChildEvent","eventList","DATE_FROM","OWNER_ID","colorEntryId","ID","unsetHiddenRoom","Location","parseStringValue","room_id","sectionManager","unsetHiddenSection","removeClass","showEditEntryNotification","showNewEntryNotification","REMIND","setNewEntryReminders","DT_SKIP_TIME","emit","BaseEvent","responseData","busyUsersList","handleBusyUsersError","errors","error","code","push","showError","edit_attendees","edit_location","busyUsers","users","userIds","hasOwnProperty","busyUsersDialog","BusyUsersDialog","exclude_users","join","removeCustomEvent","closeAllPopups","denyAction","needToShowConfirmPopup","message","isCreateForm","showConfirmPopup","hide","okCaption","maxWidth","onCustomEvent","plannerId","unbind","unsubscribe","setCurrentCapacity","planner","clearPlannerWatches","promise","Promise","getCurrentEntry","event_id","date_from","form_type","entityList","isOpen","util","trim","set","additionalParams","updateEntryData","meetSection","uniqueId","editorId","getSettings","userIndex","EMAIL_USER","entityType","DISPLAY_NAME","SHARING_USER","setUserSelectorEntityList","attendeesPreselectedItems","map","setUserSettings","setEventWithEmailGuestEnabled","eventWithEmailGuestEnabled","setTimezoneList","timezoneList","setAbsenceAvailable","absenceAvailable","handleSections","handleLocationData","locationFeatureEnabled","locationList","iblockMeetingRoomList","plannerFeatureEnabled","Boolean","projectFeatureEnabled","lock","SectionManager","setNewEntrySectionId","categoryId","category","CATEGORY_ID","preSelectedCategoryId","defaultCategoryId","preSelectedCategory","fulfill","isNil","showHelperCallback","top","InfoHelper","isLimit","limitAnalyticsLabels","module","source","sliderInstance","formWrap","buttonsWrap","initFormFieldManager","initDateTimeControl","initNameControl","initEditorControl","initAttendeesControl","initPlanner","initReminderControl","initSectionSelector","initLocationControl","initRepeatRuleControl","initColorControl","initCrmUfControl","initAccessibilityControl","initAdditionalControls","checkLastItemBorder","initCategoryControl","ZIndexManager","register","entryData","Entry","prepareData","getTimezoneFrom","getTimezoneTo","setTimezone","timezoneName","timezoneDefaultName","CAL_TYPES","user","setSectionId","filterSectionsByContext","calendarType","calendarOwnerId","ind","getSectionsForEditEvent","filter","locationItem","PERM","view_full","setLocationList","setMeetingRoomList","dateTimeControl","setValue","timezoneFrom","timezoneTo","initialTimezoneFrom","initialTimezoneTo","isSharingEvent","attr","getName","updateEventNameInputTitle","initialSectionId","sectionInput","sectionSelector","updateValue","fieldIsPinned","pinField","isSyncSection","setViewMode","getColor","remindersControl","reminder","getReminders","repeatSelector","rrule","getRrule","initialRrule","getFormRrule","getRRuleDescription","hasRecurrenceId","accessibilityInput","accessibilitySelector","default","getLocation","checkLocationAccessibility","timezone","currentEventId","max_attendees","optionsJson","JSON","parse","privateEventCheckbox","checked","private","importantEventCheckbox","important","meeting_notify","meetingNotify","NOTIFY","hide_guests","hideGuests","HIDE_GUESTS","allow_invite","ALLOW_INVITE","allowInvite","dateTime","updateSelector","focus","setSolid","setShowWorkTimeNotice","placeHolders","placeHoldersAdditional","getPlaceholders","fieldEditableOnlyByPermission","getFieldsEditableOnlyByPermission","importantEventCheckboxContainer","moreSettings","accessibilityText","after","loadPlannerData","getDayLength","categorySelectorWrap","categorySelectorValueWarp","EntityTagSelector","multiple","dialogOptions","preselectedItems","preload","entities","dynamicLoad","dynamicSearch","getItems","setDeselectable","getTags","tag","renderTo","isTitleOverflowing","el","clientWidth","scrollWidth","clientHeight","scrollHeight","switchFullDay","isString","setFullDayMode","switchTimezone","hasClass","mainBlock","additionalBlockWrap","additionalBlock","pinnedNamesWrap","additionalSwitch","toggleClass","getAttribute","fieldName","unPinField","fieldButtons","querySelectorAll","bindAdditionalFieldButtons","showTimezone","wasChangedByUser","defaultReminders","getNewEntryReminders","updateTimezone","select","isInputFocus","offsetWidth","getTitleFade","classList","add","Math","ceil","scrollLeft","entryNameFade","reminderWrap","reminderValues","reminderInputsWrap","Reminder","wrap","values","SectionSelector","outerWrap","defaultCalendarType","defaultOwnerId","sectionList","sectionGroupList","getSectionGroupList","isCollabContext","mode","NAME","selectCallback","sectionValue","saveDefaultSectionId","BXHtmlEditor","delegate","Get","IsShown","customizeHtmlEditor","SetContent","toolbar","controls","spoiler","pCont","locationWrap","locationInput","inputName","richLocationEnabled","hideLocationLock","rruleWrap","RepeatSelector","rruleCount","getDate","getType","changeType","userSelectorWrap","userTagSelector","handleUserSelectorChanges","getParticipantsSelectorEntityList","selectedItems","getSelectedItemsForTagSelector","searchTabOptions","stubOptions","subtitle","icon","iconOpacity","arrow","hideGuestsWrap","showLoader","deselectable","showHideGuestsOption","display","initHintNode","hideHideGuestsOption","setHideGuestsValue","plannerOuterWrap","Planner","locked","entryTimezone","handlePlannerSelectorChanges","handleExpandPlannerTimeline","checkLocationForm","resolve","entryLocation","LOCATION","hostId","scaleDateFrom","scaleDateTo","entries","hasAccessibility","hideLoader","update","closest","colorWrap","ColorSelector","crmUfWrap","loader","getLoader","height","width","disabled","isDomNode","AccessibilitySelector","readonly","isNull","formDataChanged","currentSectionId","getEntryInstance","registerEntrySlider","RoomsManager","getNewEntrySectionId","getSectionIdByCurrentContext","field","newField","fieldHeight","offsetHeight","descriptionAdditionalWrap","firstChild","pinnedFieldsIndex","CheckAndReInit","saveSettings","updateAdditionalBlockState","i","fieldId","nodes","settings","userOptions","timeout","additionalFields","innerText","attrs","className","updateAdditionalBlockTimeout","clearTimeout","fieldButton","isAdditionalBlockOpened","stopPropagation","fieldAbsoluteTop","scrollTop","getBoundingClientRect","easing","duration","start","scroll","finish","transition","makeEaseOut","transitions","quart","step","complete","animate","highlightTimeout","noBorderClass","fromHours","getHours","floor","getMinutes","toHours","shownScaleTimeFrom","shownScaleTimeTo","focusSelector","selectorEntityList","usersCount","getCurrentCapacity","addCapacityAlert","removeCapacityAlert","plannerIsShown","plannerWrap","ctrlKey","metaKey","altKey","keyCode","getKeyCode","checkTopSlider","isAdditionalPopupShown","isShown","getPopupWindow","getTopSlider","errorList","errorText","showFieldError","showLocationRepeatBusyErrorPopup","alert","getLocationRepeatBusyErrorPopup","onYesCallback","onCancelCallback","onPopupCloseCallback","excludes","fields","getDescription","desc","getTextLocation","isFullDay","toString","entryColor","isArrayFilled","wasRruleChanged","isPrivate","currentUFCrm","UF_CRM_CAL_EVENT","newUFCrm","getAll","stringify","sort","formMaxAttendees","eventMaxAttendees","currentUfWebDavCalEnv","UF_WEBDAV_CAL_EVENT","newUfWebDavCalEnv","formData","endsOn","FREQ","INTERVAL","COUNT","UNTIL","BYDAY","defaultCount","getUserCodes","codes","valuesInput","attendeesWrap","element","command","isObjectLike","userIdList","ATTENDEES","eventOwner","CREATED_BY","clearAccessibilityData","inviteEmployeeLink","inviteGuestLink","emailUsers","isEventWithEmailGuestAllowed","analyticsSource","lockGuestLink","lockGuestLinkFeatureId","filters","eventId","selectMode","projectRole","role","projectId","split","EXTERNAL_TYPE","connectionLinks","currentSection","currentType","sectId","sectionIsShown","hiddenSections","getHiddenSections","setHiddenSections","saveHiddenSections","isCollab","IS_COLLAB","sectionObj"],"mappings":"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"}