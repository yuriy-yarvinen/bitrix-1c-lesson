{"version":3,"file":"eventviewform.bundle.js","sources":["../src/user-avatar.js","../src/view-event-slider.js","../src/eventviewform.js"],"sourcesContent":["import { AvatarRoundGuest } from 'ui.avatar';\n\nexport const UserAvatar = {\n\tname: 'UserAvatar',\n\tprops: {\n\t\tavatarSize: Number,\n\t\tuser: {\n\t\t\tCOLLAB_USER: Boolean,\n\t\t\tSHARING_USER: Boolean,\n\t\t\tEMAIL_USER: Boolean,\n\t\t\tAVATAR: String | null,\n\t\t\tDISPLAY_NAME: String,\n\t\t},\n\t},\n\tmethods: {\n\t\trenderAvatar(): void\n\t\t{\n\t\t\tnew AvatarRoundGuest(\n\t\t\t\t{\n\t\t\t\t\tsize: this.avatarSize,\n\t\t\t\t\tuserName: this.user.DISPLAY_NAME,\n\t\t\t\t\tuserpicPath: this.getAvatar(),\n\t\t\t\t\tbaseColor: '#19cc45',\n\t\t\t\t},\n\t\t\t).renderTo(this.$refs.collabAvatar);\n\t\t},\n\n\t\tgetAvatar(): string | null\n\t\t{\n\t\t\tif (this.user.AVATAR && this.user.AVATAR !== '/bitrix/images/1.gif')\n\t\t\t{\n\t\t\t\treturn this.user.AVATAR;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tif (this.user.COLLAB_USER)\n\t\t{\n\t\t\tthis.renderAvatar();\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"calendar-slider-sidebar-user-block-item\">\n\t\t\t<div ref=\"collabAvatar\" v-if=\"user.COLLAB_USER\" :style=\"'width:' + avatarSize + 'px'\"></div>\n\t\t\t<div class=\"ui-icon ui-icon-common-user ui-icon-common-user-sharing\" :style=\"'width:' + avatarSize + 'px'\"\n\t\t\t\t v-else-if=\"user.SHARING_USER\">\n\t\t\t\t<i></i>\n\t\t\t</div>\n\t\t\t<div class=\"ui-icon ui-icon-common-user-mail\" :style=\"'width:' + avatarSize + 'px'\"\n\t\t\t\t v-else-if=\"user.EMAIL_USER\">\n\t\t\t\t<i></i>\n\t\t\t</div>\n\t\t\t<span v-else>\n\t\t\t\t<img :src=\"encodeURI(user.AVATAR)\" :width=\"avatarSize\" :height=\"avatarSize\" v-if=\"user.AVATAR && user.AVATAR !== '/bitrix/images/1.gif'\"/>\n\t\t\t\t<div class=\"ui-icon ui-icon-common-user\" :style=\"'width:' + avatarSize + 'px'\" v-else>\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t</div>\n\t`,\n};\n","\"use strict\";\n\nimport { Util } from 'calendar.util';\nimport { Entry } from 'calendar.entry';\nimport { Runtime, Event } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { UserAvatar\t} from './user-avatar';\n\nexport const ViewEventSlider = {\n\tname: 'ViewEventSlider',\n\tprops: ['params', 'reloadPlannerCallback', 'showUserListPopupCallback'],\n\tcomponents: {\n\t\tUserAvatar,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tid: this.params.id,\n\t\t\teventId: parseInt(this.params.eventId, 10),\n\t\t\tname: this.params.name,\n\t\t\tdescription: this.params.description,\n\t\t\ttimezoneHint: this.params.timezoneHint,\n\t\t\ttimezone: this.params.userTimezone,\n\t\t\tfromToHtml: this.params.fromToHtml,\n\t\t\tisMeeting: this.params.isMeeting,\n\t\t\tmeetingHost: this.params.meetingHost,\n\t\t\tmeetingHostDisplayName: this.params.meetingHostDisplayName,\n\t\t\tmeetingHostWorkPosition: this.params.meetingHostWorkPosition,\n\t\t\tavatarSize: this.params.avatarSize,\n\t\t\tattendees: this.params.attendees,\n\t\t\tavatarUsers: [],\n\t\t\tavatarMoreUsers: [],\n\t\t\tavatarMoreCount: 0,\n\t\t\tuserList: { y: [], i: [], q: [], n: [] },\n\t\t\tcurUserStatus: this.params.curUserStatus,\n\t\t\tmeetingCreatorUrl: this.params.meetingCreatorUrl,\n\t\t\tmeetingCreatorDisplayName: this.params.meetingCreatorDisplayName,\n\t\t\tmeetingCreatorCollabUser: this.params.meetingCreatorCollabUser,\n\t\t\tisRemind: this.params.isRemind,\n\t\t\tisWebdavEvent: this.params.isWebdavEvent,\n\t\t\tisCrmEvent: this.params.isCrmEvent,\n\t\t\tisHighImportance: this.params.isHighImportance,\n\t\t\tisRrule: this.params.isRrule,\n\t\t\trruleDescription: this.params.rruleDescription,\n\t\t\tdetailFilesTemplate: this.params.detailFilesTemplate,\n\t\t\taccessibility: this.params.accessibility,\n\t\t\tisIntranetEnabled: this.params.isIntranetEnabled,\n\t\t\tisPrivate: this.params.isPrivate,\n\t\t\tlocation: this.params.location,\n\t\t\tcanEditCalendar: this.params.canEditCalendar,\n\t\t\tdownloadIcsEnabled: this.params.downloadIcsEnabled,\n\t\t\tcanAttendeeEditCalendar: this.params.canAttendeeEditCalendar,\n\t\t\tcanDeleteEvent: this.params.canDeleteEvent,\n\t\t\tshowComments: this.params.showComments,\n\t\t\tfilesView: this.getComponentHTML(this.params.filesView),\n\t\t\tcrmView: this.getComponentHTML(this.params.crmView),\n\t\t\tentry: new Entry({data: this.params.entry, userIndex: this.params.userIndex}),\n\t\t\tisInvited: false,\n\n\t\t\tupdateParamsDebounce: Runtime.debounce(this.updateParams, 500, this),\n\t\t\thasPulls: false,\n\t\t\tbackgroundPullEvent: null,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.isInvited = this.entry.isInvited();\n\t},\n\tmounted()\n\t{\n\t\tif (this.params.eventExists)\n\t\t{\n\t\t\tthis.updateUserList();\n\t\t\tif (this.showComments)\n\t\t\t{\n\t\t\t\tthis.loadCommentsView();\n\t\t\t}\n\n\t\t\tif (this.isWebdavEvent)\n\t\t\t{\n\t\t\t\tthis.executeScripts(this.$refs.filesView);\n\t\t\t}\n\n\t\t\tEvent.bind(document, 'visibilitychange', this.handleBackgroundPulls);\n\t\t}\n\t\tEvent.bind(this.$refs.sliderDetailContent, 'mouseup', this.quote);\n\t\tEventEmitter.subscribe('AI.Copilot.Menu:open', this.handleCopilotMenuShow);\n\t},\n\tbeforeMount()\n\t{\n\t\tif (this.params.eventExists)\n\t\t{\n\t\t\tEventEmitter.subscribe('onPullEvent-calendar', this.handlePullEvent);\n\t\t\tEventEmitter.subscribe(`MeetingStatusControl_${this.id}:onSetStatus`, this.handleStatusUpdate);\n\t\t}\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (this.params.eventExists)\n\t\t{\n\t\t\tEventEmitter.unsubscribe('onPullEvent-calendar', this.handlePullEvent);\n\t\t\tEventEmitter.unsubscribe(`MeetingStatusControl_${this.id}:onSetStatus`, this.handleStatusUpdate);\n\t\t\tEvent.unbind(this.$refs.sliderDetailContent, 'mouseup', this.quote);\n\t\t\tEventEmitter.unsubscribe('AI.Copilot.Menu:open', this.handleCopilotMenuShow);\n\t\t}\n\t},\n\tcomputed: {\n\t\tauthorNodeId()\n\t\t{\n\t\t\treturn this.id + '_detail-author-info';\n\t\t},\n\t\tmeetingCreatorClassName(): string\n\t\t{\n\t\t\treturn `calendar-slider-sidebar-user-info-name${this.meetingCreatorCollabUser ? ' calendar-collab-user' : ''}`;\n\t\t},\n\t},\n\tmethods: {\n\t\tgetComponentHTML(json)\n\t\t{\n\t\t\tif (!json)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn JSON.parse(json).data.html;\n\t\t},\n\t\tloadCommentsView()\n\t\t{\n\t\t\tBX.ajax.runAction('calendar.api.calendareventviewform.getCommentsView', {\n\t\t\t\tdata: {\n\t\t\t\t\tsignedEvent: this.params.signedEvent,\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tconst commentsElement = document.createElement('div');\n\t\t\t\tcommentsElement.innerHTML = response.data.html;\n\t\t\t\tthis.$refs.commentsView.appendChild(commentsElement);\n\t\t\t\tthis.executeScripts(this.$refs.commentsView);\n\t\t\t});\n\t\t},\n\t\texecuteScripts(element)\n\t\t{\n\t\t\tif (!element)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// run scripts\n\t\t\tconst scripts = element.querySelectorAll('script');\n\t\t\tfor (const script of scripts)\n\t\t\t{\n\t\t\t\tconst s = document.createElement('script');\n\t\t\t\ts.innerHTML = script.innerHTML;\n\t\t\t\tscript.parentNode.appendChild(s);\n\t\t\t\tscript.remove();\n\t\t\t}\n\t\t\t// remove script elements\n\t\t\t// element.querySelectorAll('script').forEach(e => e.remove());\n\t\t},\n\t\tquote(e)\n\t\t{\n\t\t\twindow.mplCheckForQuote(e, e.currentTarget, `EVENT_${this.eventId}`, this.authorNodeId);\n\t\t},\n\t\tupdateUserList()\n\t\t{\n\t\t\tthis.userList = { y: [], i: [], q: [], n: [] };\n\t\t\tif (this.entry.isMeeting())\n\t\t\t{\n\t\t\t\tthis.entry.getAttendees().forEach(function(user) {\n\t\t\t\t\tif (user.STATUS === 'H')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userList.y.push(user);\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.userList[user.STATUS.toLowerCase()])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userList[user.STATUS.toLowerCase()].push(user);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\tconst accepted = this.attendees.y?.filter((attendee) => {\n\t\t\t\tif (!attendee)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (this.entry?.isOpenEvent())\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn parseInt(this.meetingHost.ID, 10) !== parseInt(attendee.ID, 10);\n\t\t\t}) ?? [];\n\n\t\t\tif (accepted.length <= 11)\n\t\t\t{\n\t\t\t\tthis.avatarUsers = accepted.slice(0, 11);\n\t\t\t\tthis.avatarMoreUsers = [];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.avatarUsers = accepted.slice(0, 10);\n\t\t\t\tthis.avatarMoreUsers = accepted.slice(10);\n\t\t\t}\n\n\t\t\tthis.avatarMoreCount = this.avatarMoreUsers.length;\n\t\t\tif (this.avatarMoreCount >= 1000)\n\t\t\t{\n\t\t\t\tthis.avatarMoreCount = `${parseInt(this.avatarMoreUsers.length / 1000, 10)}K`;\n\t\t\t}\n\t\t},\n\t\treloadPlanner()\n\t\t{\n\t\t\tconst plannerData = {\n\t\t\t\tentryId: this.entry.id || 0,\n\t\t\t\tentryLocation: this.entry.data.LOCATION || '',\n\t\t\t\townerId: 0,\n\t\t\t\thostId: this.entry.getMeetingHost(),\n\t\t\t\ttype: 'user',\n\t\t\t\tentityList: this.entry.getAttendeesEntityList(),\n\t\t\t\tdateFrom: Util.formatDate(this.entry.from.getTime() - Util.getDayLength() * 3),\n\t\t\t\tdateTo: Util.formatDate(this.entry.to.getTime() + Util.getDayLength() * 10),\n\t\t\t\ttimezone: this.timezone,\n\t\t\t\tlocation: this.entry.getLocation(),\n\t\t\t\tentry: this.entry,\n\t\t\t};\n\n\t\t\tthis.reloadPlannerCallback(plannerData);\n\t\t},\n\t\thandleBackgroundPulls()\n\t\t{\n\t\t\tif (this.hasPulls)\n\t\t\t{\n\t\t\t\tthis.updateParamsDebounce(this.backgroundPullEvent);\n\t\t\t\tthis.hasPulls = false;\n\t\t\t}\n\t\t},\n\t\thandleStatusUpdate(event)\n\t\t{\n\t\t\tthis.entry.data.MEETING_STATUS = event.getData().status;\n\t\t\tthis.curUserStatus = this.entry.data.MEETING_STATUS;\n\t\t\tthis.isInvited = this.entry.isInvited();\n\t\t},\n\t\thandlePullEvent(event: BaseEvent)\n\t\t{\n\t\t\tif (event.data[0] === 'refresh_sync_status')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.data[1]?.fields?.CAL_TYPE === 'location')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// debounce all pull events except location\n\t\t\t// update only when page is active\n\t\t\tif (BX.Calendar.Util.documentIsDisplayingNow())\n\t\t\t{\n\t\t\t\tthis.updateParamsDebounce(event);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hasPulls = true;\n\t\t\t\tthis.backgroundPullEvent = event;\n\t\t\t}\n\t\t},\n\t\tupdateParams(event: BaseEvent)\n\t\t{\n\t\t\tif (parseInt(event.data[1]?.fields?.PARENT_ID, 10) !== parseInt(this.params.parentId, 10))\n\t\t\t{\n\t\t\t\tthis.reloadPlanner();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst pullData = event.data[1].fields;\n\n\t\t\tif (pullData.NAME)\n\t\t\t{\n\t\t\t\tthis.name = pullData.NAME;\n\t\t\t}\n\n\t\t\tif (pullData.ACCESSIBILITY)\n\t\t\t{\n\t\t\t\tthis.accessibility = pullData.ACCESSIBILITY;\n\t\t\t}\n\n\t\t\tBX.ajax.runAction('calendar.api.calendareventviewform.getCalendarViewSliderParams', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.eventId,\n\t\t\t\t\tdateFrom: Util.formatDate(pullData.DATE_FROM),\n\t\t\t\t\ttimezoneOffset: pullData.TZ_OFFSET_FROM,\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tconst newData = response.data;\n\n\t\t\t\tthis.description = newData.description;\n\t\t\t\tthis.isMeeting = newData.isMeeting;\n\t\t\t\tthis.timezone = newData.userTimezone;\n\t\t\t\tthis.timezoneHint = newData.timezoneHint;\n\t\t\t\tthis.fromToHtml = newData.fromToHtml;\n\t\t\t\tthis.meetingHost = newData.meetingHost;\n\t\t\t\tthis.meetingHostDisplayName = newData.meetingHostDisplayName;\n\t\t\t\tthis.meetingHostWorkPosition = newData.meetingHostWorkPosition;\n\t\t\t\tthis.avatarSize = newData.avatarSize;\n\t\t\t\tthis.attendees = newData.attendees;\n\t\t\t\tthis.meetingCreatorUrl = newData.meetingCreatorUrl;\n\t\t\t\tthis.meetingCreatorDisplayName = newData.meetingCreatorDisplayName;\n\t\t\t\tthis.meetingCreatorCollabUser = newData.meetingCreatorCollabUser;\n\t\t\t\tthis.isRemind = newData.isRemind;\n\t\t\t\tthis.isWebdavEvent = newData.isWebdavEvent;\n\t\t\t\tthis.isCrmEvent = newData.isCrmEvent;\n\t\t\t\tthis.isHighImportance = newData.isHighImportance;\n\t\t\t\tthis.isRrule = newData.isRrule;\n\t\t\t\tthis.rruleDescription = newData.rruleDescription;\n\t\t\t\tthis.detailFilesTemplate = newData.detailFilesTemplate;\n\t\t\t\tthis.isIntranetEnabled = newData.isIntranetEnabled;\n\t\t\t\tthis.isPrivate = newData.isPrivate;\n\t\t\t\tthis.location = newData.location;\n\t\t\t\tthis.canEditCalendar = newData.canEditCalendar;\n\t\t\t\tthis.canAttendeeEditCalendar = newData.canAttendeeEditCalendar;\n\t\t\t\tthis.canDeleteEvent = newData.canDeleteEvent;\n\t\t\t\tthis.showComments = newData.showComments;\n\t\t\t\tthis.filesView = this.getComponentHTML(newData.filesView);\n\t\t\t\tif (this.filesView)\n\t\t\t\t{\n\t\t\t\t\t// wait for div element created\n\t\t\t\t\tsetTimeout(() => { this.executeScripts(this.$refs.filesView); }, 1000);\n\t\t\t\t}\n\t\t\t\tthis.crmView = this.getComponentHTML(newData.crmView);\n\t\t\t\tthis.entry = new Entry({\n\t\t\t\t\tdata: newData.entry,\n\t\t\t\t\tuserIndex: newData.userIndex,\n\t\t\t\t});\n\n\t\t\t\tthis.updateUserList();\n\t\t\t\tthis.reloadPlanner();\n\t\t\t});\n\t\t},\n\t\thandleCopilotMenuShow()\n\t\t{\n\t\t\tconst copilotPopups = [...document.querySelectorAll('.ai__copilot-menu-popup')];\n\t\t\tconst menu = copilotPopups.find((popup) => popup.offsetHeight > 0);\n\n\t\t\tconst offset = menu.getBoundingClientRect().bottom - this.$refs.comments.getBoundingClientRect().bottom;\n\n\t\t\tconst marginBottom = parseInt(this.$refs.comments.style.marginBottom, 10);\n\n\t\t\tif ((isNaN(marginBottom) && offset > 0) || (!isNaN(marginBottom) && marginBottom < offset))\n\t\t\t{\n\t\t\t\tthis.$refs.comments.style.marginBottom = `${offset}px`;\n\t\t\t}\n\t\t},\n\t\thighlightChange(element)\n\t\t{\n\t\t\tif (!element)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst savedOpacity = element.style.opacity;\n\t\t\tconst savedTransition = element.style.transition;\n\t\t\telement.style.opacity = '0.2';\n\t\t\tsetTimeout(() => {\n\t\t\t\telement.style.transition = '1s';\n\t\t\t\telement.style.opacity = savedOpacity;\n\t\t\t\tsetTimeout(() => { element.style.transition = savedTransition; }, 1000);\n\t\t\t}, 100);\n\t\t},\n\t},\n\twatch: {\n\t\tname: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightName); } },\n\t\tfromToHtml: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightFromTo); } },\n\t\tdescription: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightDescription); } },\n\t\tcrmView: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightCrmView); } },\n\t\tlocation: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightLocation); } },\n\t\taccessibility: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightAccessibility); } },\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-alert ui-alert-danger ui-alert-icon-danger ui-alert-text-center\" v-if=\"!params.eventExists\">\n\t\t\t<span class=\"ui-alert-message\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_EVENT_NOT_FOUND')}}</span>\n\t\t</div>\n\t\t<div class=\"calendar-slider-calendar-wrap\" v-else>\n\t\t\t<div class=\"calendar-slider-header\">\n\t\t\t\t<div class=\"calendar-head-area\">\n\t\t\t\t\t<div class=\"calendar-head-area-inner\">\n\t\t\t\t\t\t<div class=\"calendar-head-area-title\">\n\t\t\t\t\t\t\t<span class=\"calendar-event-invite-counter calendar-event-invite-counter-big\" v-if=\"isInvited\">1</span>\n\t\t\t\t\t\t\t<span :id=\"id + '_title'\" class=\"calendar-head-area-title-name\" ref=\"highlightName\">{{name}}</span>\n\t\t\t\t\t\t\t<span :id=\"id + '_copy_url_btn'\" class=\"calendar-page-link-btn\" :title=\"$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_COPY_LINK')\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"calendar-slider-workarea\">\n\t\t\t\t<div class=\"calendar-slider-sidebar\">\n\t\t\t\t\t<div :id=\"id + '_time_wrap'\" class=\"calendar-slider-sidebar-head\" :title=\"timezoneHint\" ref=\"highlightFromTo\">\n\t\t\t\t\t\t<div :id=\"id + '_time_inner_wrap'\" class=\"calendar-slider-sidebar-head-title\">{{fromToHtml}}\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-head-timezone\" :title=\"timezoneHint\" v-if=\"timezoneHint\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-head-timezone-icon\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div :id=\"id + '_sidebar_inner'\" class=\"calendar-slider-sidebar-inner\">\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-videocall\" style=\"display: none;\"></div>\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-layout calendar-slider-sidebar-user\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-layout-top calendar-slider-sidebar-user-top calendar-slider-sidebar-border-bottom\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-left-side\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-name\">\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"isMeeting\">{{$Bitrix.Loc.getMessage('EC_VIEW_ATTENDEES_TITLE')}}</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else>{{$Bitrix.Loc.getMessage('EC_VIEW_HOST')}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-right-side\" :id=\"id + '_add_link'\" style=\"display: none;\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-property calendar-slider-sidebar-link-user\">\n\t\t\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('EC_VIEW_ATTENDEES_ADD')}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-layout-main\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block\">\n\t\t\t\t\t\t\t\t<div v-if=\"isMeeting\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-container-holder\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-container\" v-if=\"!entry.isOpenEvent()\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block-avatar\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a :href=\"meetingHost.URL\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<UserAvatar :user=\"meetingHost\" :avatarSize=\"avatarSize\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-icon-top\"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-icon-bottom\"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"calendar-slider-sidebar-user-container\"\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"att in avatarUsers\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block-avatar\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a :href=\"att.URL\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<UserAvatar :user=\"att\" :avatarSize=\"avatarSize\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-icon-bottom\"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"avatarMoreUsers.length > 0\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"calendar-slider-sidebar-user-more-container\" ref=\"attendeesMore\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"showUserListPopupCallback($refs.attendeesMore, avatarMoreUsers)\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-more\">\n\t\t\t\t\t\t\t\t\t\t\t\t+{{avatarMoreCount}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-row calendar-slider-sidebar-border-bottom\" v-if=\"meetingCreatorUrl\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-string-name\">{{$Bitrix.Loc.getMessage('EC_VIEW_CREATED_BY')}}:</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-string-value\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t:href=\"meetingCreatorUrl\"\n\t\t\t\t\t\t\t\t\t\t\t\t:class=\"meetingCreatorClassName\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{{meetingCreatorDisplayName}}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-container calendar-slider-sidebar-user-card\" v-else>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block-avatar\">\n\t\t\t\t\t\t\t\t\t\t<a :href=\"meetingHost.URL\">\n\t\t\t\t\t\t\t\t\t\t\t<UserAvatar :user=\"meetingHost\" :avatarSize=\"avatarSize\"/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-icon-bottom\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-info\">\n\t\t\t\t\t\t\t\t\t\t<a :href=\"meetingHost.URL\" class=\"calendar-slider-sidebar-user-info-name\">{{meetingHostDisplayName}}</a>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-info-status\" v-if=\"meetingHostWorkPosition\">{{meetingHostWorkPosition}}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social calendar-slider-sidebar-border-bottom\" v-if=\"isMeeting\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-left\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-item\" ref=\"attendeesY\"\n\t\t\t\t\t\t\t\t\t\t @click=\"showUserListPopupCallback($refs.attendeesY, userList.y)\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-number\">\n\t\t\t\t\t\t\t\t\t\t\t{{attendees.y.length}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-name calendar-slider-sidebar-color-grey-opacity\">\n\t\t\t\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('EC_VIEW_STATUS_TITLE_Y')}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-item\" ref=\"attendeesQ\"\n\t\t\t\t\t\t\t\t\t\t @click=\"showUserListPopupCallback($refs.attendeesQ, userList.q)\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-number\">\n\t\t\t\t\t\t\t\t\t\t\t{{attendees.q.length}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-name calendar-slider-sidebar-color-grey-opacity\">\n\t\t\t\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('EC_VIEW_STATUS_TITLE_Q')}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-right\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-item\" style=\"visibility: hidden;\" ref=\"attendeesI\"\n\t\t\t\t\t\t\t\t\t\t @click=\"showUserListPopupCallback($refs.attendeesI, userList.i)\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-number\">\n\t\t\t\t\t\t\t\t\t\t\t{{attendees.i.length}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-name calendar-slider-sidebar-color-grey-opacity\">\n\t\t\t\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('EC_VIEW_STATUS_TITLE_I')}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-item\" ref=\"attendeesN\"\n\t\t\t\t\t\t\t\t\t\t @click=\"showUserListPopupCallback($refs.attendeesN, userList.n)\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-number\">\n\t\t\t\t\t\t\t\t\t\t\t{{attendees.n.length}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-name calendar-slider-sidebar-color-grey-opacity\">\n\t\t\t\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('EC_VIEW_STATUS_TITLE_N')}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-layout-main calendar-slider-sidebar-border-bottom calendar-slider-sidebar-remind\" v-if=\"isRemind && showComments\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-row\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-string-name\">{{$Bitrix.Loc.getMessage('EC_VIEW_REMINDERS')}}:</div>\n\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-remind-link calendar-slider-sidebar-string-value\" :id=\"id + '_add_reminder_link'\" style=\"display: none;\">\n\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-remind-link-name\">{{$Bitrix.Loc.getMessage('EC_VIEW_REMINDER_ADD')}}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-remind-wrap\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-row calendar-slider-sidebar-border-bottom\" v-if=\"isRrule\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-string-name\">{{$Bitrix.Loc.getMessage('EC_T_REPEAT')}}:</div>\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-string-value calendar-slider-sidebar-rrule-desc\">{{rruleDescription}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-slider-sidebar-copy\" style=\"display: none;\">\n\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-copy-link\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_COPY_LINK')}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-slider-content\">\n\t\t\t\t\t<div class=\"calendar-slider-detail calendar-slider-detail-panel\">\n\t\t\t\t\t\t<div class=\"calendar-slider-detail-info\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-header\">\n\t\t\t\t\t\t\t\t<div id=\"calendar-slider-detail-important-button\" class=\"calendar-slider-info-panel-important mutable\" v-if=\"isHighImportance\">\n\t\t\t\t\t\t\t\t\t<span class=\"if-not-no\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_IMPORTANT_EVENT')}}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-subtitle-status\" style=\"visibility: hidden\">\n\t\t\t\t\t\t\t\t\t#calendar-slider-detail-subtitle-status#\n\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-detail-status-below-name\"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-content\" ref=\"sliderDetailContent\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"calendar-detail-author-info\"\n\t\t\t\t\t\t\t\t\t:id=\"authorNodeId\"\n\t\t\t\t\t\t\t\t\t:bx-post-author-id=\"meetingHost.ID\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{meetingCreatorDisplayName ?? meetingHostDisplayName}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div id=\"calendar-slider-detail-description\" class=\"calendar-slider-detail-description\" v-if=\"description\"\n\t\t\t\t\t\t\t\t\t ref=\"highlightDescription\" v-html=\"description\">\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-files\" :id=\"id + '_' + eventId + '_files_wrap'\" v-if=\"isWebdavEvent\">\n\t\t\t\t\t\t\t\t\t<div v-html=\"filesView\" ref=\"filesView\"></div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-timeline hidden\" :id=\"id + '_view_planner_wrap'\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-view-planner-wrap\"></div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-relation\" :id=\"id + '_view_relation_wrap'\"/>\n\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-block\" v-if=\"isCrmEvent\" ref=\"highlightCrmView\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-name\">{{$Bitrix.Loc.getMessage('EC_CRM_TITLE')}}:</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-value calendar-slider-detail-option-crm\">\n\t\t\t\t\t\t\t\t\t\t\t<div v-html=\"crmView\"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-block\" v-if=\"accessibility && isIntranetEnabled\" ref=\"highlightAccessibility\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-name\">{{$Bitrix.Loc.getMessage('EC_ACCESSIBILITY_TITLE')}}:</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-value\">{{$Bitrix.Loc.getMessage('EC_ACCESSIBILITY_' + accessibility.toUpperCase())}}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-block\" v-if=\"isPrivate && isIntranetEnabled\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-name\">{{$Bitrix.Loc.getMessage('EC_EDDIV_SPECIAL_NOTES')}}:</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-value\">{{$Bitrix.Loc.getMessage('EC_PRIVATE_EVENT')}}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-place\" v-if=\"location\" ref=\"highlightLocation\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-place-title\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_LOCATION')}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-place-name\">{{location}}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-buttons\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-view-buttonset calendar-slider-view-button-more-right\">\n\t\t\t\t\t\t\t\t\t<div :id=\"id + '_buttonset'\" class=\"calendar-slider-view-buttonset-inner\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" :id=\"id + '_current_status'\" :value=\"curUserStatus\"/>\n\t\t\t\t\t\t\t\t\t\t<span :id=\"id + '_status_buttonset'\"></span>\n\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<button v-show=\"canEditCalendar || (canAttendeeEditCalendar && ['H', 'Y'].includes(curUserStatus))\" :id=\"id + '_but_edit'\" class=\"ui-btn ui-btn-light-border\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_EDIT')}}</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tv-show=\"downloadIcsEnabled\"\n\t\t\t\t\t\t\t\t\t\t\t\t:id=\"id + '_but_download'\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_DOWNLOAD')}}\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"canDeleteEvent\" :id=\"id + '_but_del'\" class=\"ui-btn ui-btn-light-border\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_DEL')}}</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"calendar-slider-comments\" v-if=\"showComments\" ref=\"comments\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-comments-title\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_COMMENTS')}}</div>\n\t\t\t\t\t\t\t<div class=\"calendar-slider-comments-main\" :id=\"id + 'comments-cont'\" style=\"opacity: 1;\">\n\t\t\t\t\t\t\t\t<div ref=\"commentsView\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","'use strict';\n\nimport { Util } from 'calendar.util';\nimport { Type, Event, Loc, Dom, Runtime, Text, Tag } from 'main.core';\nimport { Entry, EntryManager } from 'calendar.entry';\nimport { MeetingStatusControl, IntranetButton } from 'calendar.controls';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Planner } from 'calendar.planner';\nimport { BitrixVue } from 'ui.vue3';\nimport { ViewEventSlider } from './view-event-slider';\nimport { CalendarSection } from 'calendar.sectionmanager';\nimport 'viewer';\nimport { DateTimeFormat } from 'main.date'; // need for planner.js\nimport { RelationInterface } from 'calendar.entityrelation';\nimport { AvatarRoundGuest } from 'ui.avatar';\n\nexport class EventViewForm\n{\n\tpermissions = {};\n\tname = 'eventviewform';\n\tuid = null;\n\tDOM = {};\n\tRELOAD_REQUESTED = 'RELOAD_REQUESTED';\n\tRELOAD_FINISHED = 'RELOAD_FINISHED';\n\treloadStatus = null;\n\tentityChanged = false;\n\tLOAD_DELAY = 500;\n\tapp = null;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.type = options.type || 'user';\n\t\tthis.attendees = [];\n\t\tthis.ownerId = options.ownerId || 0;\n\t\tthis.userId = options.userId || 0;\n\t\tthis.zIndex = 3100;\n\t\tthis.entryId = options.entryId || null;\n\t\tthis.calendarContext = options.calendarContext || null;\n\t\tthis.entryDateFrom = options.entryDateFrom || null;\n\t\tthis.timezoneOffset = options.timezoneOffset || null;\n\t\tthis.BX = Util.getBX();\n\n\t\tthis.sliderOnLoad = this.onLoadSlider.bind(this);\n\t\tthis.showUserListPopupBind = this.showUserListPopup.bind(this);\n\t\tthis.keyHandlerBind = this.keyHandler.bind(this);\n\t\tthis.destroyBind = this.destroy.bind(this);\n\n\t\tthis.loadPlannerDataDebounce = Runtime.debounce(this.loadPlannerData, this.LOAD_DELAY, this);\n\n\t\tthis.pullEventList = new Set();\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.slider = slider;\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onLoad', this.sliderOnLoad);\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onCloseComplete', this.destroyBind);\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBind);\n\n\t\tthis\n\t\t\t.createContent(slider)\n\t\t\t.then((html) => {\n\t\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t\t{\n\t\t\t\t\tpromiseResolve(html);\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.opened = true;\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.opened;\n\t}\n\n\tdestroy()\n\t{\n\t\tEventEmitter.unsubscribe(this.slider, 'SidePanel.Slider:onLoad', this.sliderOnLoad);\n\t\tEventEmitter.unsubscribe(this.slider, 'SidePanel.Slider:onCloseComplete', this.destroyBind);\n\t\tEvent.unbind(document, 'keydown', this.keyHandlerBind);\n\n\t\tif (this.app)\n\t\t{\n\t\t\tthis.app.unmount();\n\t\t}\n\n\t\tif (this.intranetControllButton && this.intranetControllButton.destroy)\n\t\t{\n\t\t\tthis.intranetControllButton.destroy();\n\t\t}\n\n\t\tUtil.closeAllPopups();\n\t\tthis.opened = false;\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tif (!event instanceof BaseEvent)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst data = event.getData();\n\t\tconst slider = data[0]?.slider;\n\n\t\tthis.DOM.content = slider.layout.content;\n\n\t\t// Used to execute javasctipt and attach CSS from ajax responce\n\t\tthis.BX.html(slider.layout.content, slider.getData().get('sliderContent'));\n\t\tif (!Type.isNull(this.uid))\n\t\t{\n\t\t\tthis.initControls(this.uid);\n\t\t}\n\n\t\tthis.reloadStatus = this.RELOAD_FINISHED;\n\t}\n\n\tloadComponentAssets(json)\n\t{\n\t\tif (!json)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst assets = JSON.parse(json).data.assets;\n\t\tconst promise = new Promise((resolve, reject) => {\n\t\t\tconst css = assets.css;\n\t\t\tBX.load(css, () => {\n\t\t\t\tBX.loadScript(assets.js, resolve);\n\t\t\t});\n\t\t});\n\t\tpromise.then(() => {\n\t\t\tconst strings = assets.string;\n\t\t\tconst stringAsset = strings.join('\\n');\n\t\t\tBX.html(document.head, stringAsset, { useAdjacentHTML: true });\n\t\t});\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendareventviewform.getCalendarViewSliderParams', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.entryId,\n\t\t\t\t\tdateFrom: Util.formatDate(this.entryDateFrom),\n\t\t\t\t\ttimezoneOffset: this.timezoneOffset,\n\t\t\t\t},\n\t\t\t\tanalytics: {\n\t\t\t\t\ttool: 'im',\n\t\t\t\t\tcategory: 'events',\n\t\t\t\t\tevent: 'view_card',\n\t\t\t\t\tc_section: 'card_full',\n\t\t\t\t\tp5: `eventId_${this.entryId}`,\n\t\t\t\t},\n\t\t\t}).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tconst viewEventSliderRoot = document.createElement('div');\n\n\t\t\t\t\tif ((Type.isFunction(slider.isOpen) && slider.isOpen()) || slider.isOpen === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst params = response.data;\n\t\t\t\t\t\tparams.eventExists = Boolean(params.entry.ID);\n\t\t\t\t\t\tthis.attendees = [];\n\n\t\t\t\t\t\tfor (const status in params.attendees)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.attendees.push(...params.attendees[status]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// load components' css and js\n\t\t\t\t\t\tif (params.filesView)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.loadComponentAssets(params.filesView);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (params.crmView)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.loadComponentAssets(params.crmView);\n\t\t\t\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendareventviewform.getCrmView', {\n\t\t\t\t\t\t\t\tdata: { signedEvent: params.signedEvent },\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// set vue component to slider\n\t\t\t\t\t\tthis.app = BitrixVue.createApp(ViewEventSlider, {\n\t\t\t\t\t\t\tparams,\n\t\t\t\t\t\t\treloadPlannerCallback: this.loadPlannerDataDebounce,\n\t\t\t\t\t\t\tshowUserListPopupCallback: this.showUserListPopupBind,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.app.mount(viewEventSliderRoot);\n\n\t\t\t\t\t\tslider.sliderContent = viewEventSliderRoot;\n\n\t\t\t\t\t\t// set local params\n\t\t\t\t\t\tthis.userId = params.userId;\n\t\t\t\t\t\tthis.uid = params.id;\n\t\t\t\t\t\tthis.entryUrl = params.entryUrl;\n\t\t\t\t\t\tthis.userTimezone = params.userTimezone;\n\t\t\t\t\t\tthis.plannerFeatureEnabled = Boolean(params.plannerFeatureEnabled);\n\t\t\t\t\t\tif (this.planner && !this.plannerFeatureEnabled)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.planner.lock();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.handleEntryData(params.entry, params.userIndex, params.section);\n\n\t\t\t\t\t\tthis.isCollabUser = params.isCollabUser;\n\t\t\t\t\t\tthis.downloadIcsEnabled = params.downloadIcsEnabled;\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(viewEventSliderRoot);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tif (response.errors && response.errors.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tslider.getData().set(\n\t\t\t\t\t\t\t'sliderContent',\n\t\t\t\t\t\t\t'<div class=\"calendar-slider-alert\">'\n\t\t\t\t\t\t+ '<div class=\"calendar-slider-alert-inner\">'\n\t\t\t\t\t\t+ '<div class=\"calendar-slider-alert-img\"></div>'\n\t\t\t\t\t\t+ `<h1 class=\"calendar-slider-alert-text\">${Text.encode(response.errors[0].message)}</h1>`\n\t\t\t\t\t\t+ '</div>'\n\t\t\t\t\t\t+ '</div>',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (response.data && !Type.isNil(response.data.isAvailable) && !response.data.isAvailable)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst showHelperCallback = () => {\n\t\t\t\t\t\t\ttop.BX.UI.InfoHelper.show('limit_office_calendar_off', {\n\t\t\t\t\t\t\t\tisLimit: true,\n\t\t\t\t\t\t\t\tlimitAnalyticsLabels: {\n\t\t\t\t\t\t\t\t\tmodule: 'calendar',\n\t\t\t\t\t\t\t\t\tsource: 'eventViewForm',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (this.slider)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.slider.close(true, showHelperCallback);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tshowHelperCallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.error(response.errors);\n\t\t\t\t\tresolve(response);\n\t\t\t\t},\n\t\t\t);\n\t\t});\n\t}\n\n\tinitControls(uid)\n\t{\n\t\tthis.DOM.title = this.DOM.content.querySelector(`#${uid}_title`);\n\t\tthis.DOM.buttonSet = this.DOM.content.querySelector(`#${uid}_buttonset`);\n\t\tthis.DOM.editButton = this.DOM.content.querySelector(`#${uid}_but_edit`);\n\t\tif (this.downloadIcsEnabled)\n\t\t{\n\t\t\tthis.DOM.downloadButton = this.DOM.content.querySelector(`#${uid}_but_download`);\n\t\t}\n\t\tthis.DOM.delButton = this.DOM.content.querySelector(`#${uid}_but_del`);\n\t\tthis.DOM.sidebarInner = this.DOM.content.querySelector(`#${uid}_sidebar_inner`);\n\n\t\tif (this.DOM.buttonSet)\n\t\t{\n\t\t\tthis.initPlannerControl(uid);\n\t\t}\n\n\t\tconst innerTimeWrap = this.DOM.content.querySelector(`#${uid}_time_inner_wrap`);\n\t\tif (Type.isElementNode(innerTimeWrap) && innerTimeWrap.offsetHeight > 50)\n\t\t{\n\t\t\tDom.addClass(this.DOM.content.querySelector(`#${uid}_time_wrap`), 'calendar-slider-sidebar-head-long-time');\n\t\t}\n\n\t\tif ((this.canDo('edit') || this.canDo('editLocation') || this.canDo('editAttendees')) && this.DOM.editButton)\n\t\t{\n\t\t\tEvent.bind(this.DOM.editButton, 'click', this.handleEditButtonClick.bind(this));\n\t\t}\n\n\t\tif (this.DOM.sidebarInner)\n\t\t{\n\t\t\t// Reminder\n\t\t\tthis.DOM.reminderWrap = this.DOM.sidebarInner.querySelector('.calendar-slider-sidebar-remind-wrap');\n\t\t\tif (Type.isDomNode(this.DOM.reminderWrap))\n\t\t\t{\n\t\t\t\tDom.clean(this.DOM.reminderWrap);\n\t\t\t\tconst viewMode = !this.canDo('edit')\n\t\t\t\t\t&& this.entry.getCurrentStatus() === false;\n\n\t\t\t\tthis.reminderControl = new this.BX.Calendar.Controls.Reminder({\n\t\t\t\t\twrap: this.DOM.reminderWrap,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\tviewMode,\n\t\t\t\t});\n\t\t\t\tthis.reminderControl.setValue(this.entry.getReminders());\n\n\t\t\t\tif (!viewMode)\n\t\t\t\t{\n\t\t\t\t\tthis.reminderControl.subscribe('onChange', (event) => {\n\t\t\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.handleEntityChanges();\n\t\t\t\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updateReminders', {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tentryId: this.entry.id,\n\t\t\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\t\t\treminders: this.reminderValues,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst items = this.DOM.sidebarInner.querySelectorAll('.calendar-slider-sidebar-border-bottom');\n\t\t\tif (items.length >= 2)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(items[items.length - 1], 'calendar-slider-sidebar-border-bottom');\n\t\t\t}\n\t\t}\n\n\t\tif (this.downloadIcsEnabled)\n\t\t{\n\t\t\tEvent.bind(this.DOM.downloadButton, 'click', () => EntryManager.downloadIcs(this.entryId));\n\t\t}\n\n\t\tif (this.canDo('delete'))\n\t\t{\n\t\t\tEvent.bind(this.DOM.delButton, 'click', () => {\n\t\t\t\tEventEmitter.subscribeOnce('BX.Calendar.Entry:beforeDelete', () => {\n\t\t\t\t\tthis.BX.SidePanel.Instance.close();\n\t\t\t\t});\n\t\t\t\tEntryManager.deleteEntry(this.entry, this.calendarContext);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.remove(this.DOM.delButton);\n\t\t}\n\n\t\tconst filesWrap = `${uid}_${this.entry.id}_files_wrap`;\n\t\tif (filesWrap)\n\t\t{\n\t\t\tconst currentTop = (typeof window.top.BX.viewElementBind === 'function' ? window.top.BX : window.BX);\n\t\t\tcurrentTop.viewElementBind(\n\t\t\t\tfilesWrap,\n\t\t\t\t{\n\t\t\t\t\tshowTitle: true,\n\t\t\t\t},\n\t\t\t\t(node) => {\n\t\t\t\t\treturn Type.isElementNode(node) && (node.getAttribute('data-bx-viewer') || node.getAttribute('data-bx-image'));\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tthis.DOM.relationWrap = this.DOM.content.querySelector(`#${uid}_view_relation_wrap`);\n\n\t\tif (\n\t\t\tthis.DOM.relationWrap\n\t\t\t&& this.canDo('view')\n\t\t\t&& ['#shared_crm#', '#booking#'].includes(this.entry?.data?.EVENT_TYPE)\n\t\t)\n\t\t{\n\t\t\tthis.relationControl = new RelationInterface({\n\t\t\t\tparentNode: this.DOM.relationWrap,\n\t\t\t\teventId: this.entry.parentId,\n\t\t\t});\n\t\t\tDom.append(this.relationControl.render(), this.DOM.relationWrap);\n\t\t}\n\n\t\tif (this.entry && this.entry.isMeeting())\n\t\t{\n\t\t\tthis.initAcceptMeetingControl(uid);\n\t\t}\n\n\t\tif (this.DOM.sidebarInner)\n\t\t{\n\t\t\tconst items = this.DOM.sidebarInner.querySelectorAll('.calendar-slider-sidebar-border-bottom');\n\t\t\tif (items.length >= 2)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(items[items.length - 1], 'calendar-slider-sidebar-border-bottom');\n\t\t\t}\n\t\t}\n\n\t\tthis.DOM.copyButton = this.DOM.content.querySelector(`#${uid}_copy_url_btn`);\n\t\tif (this.DOM.copyButton)\n\t\t{\n\t\t\tEvent.bind(this.DOM.copyButton, 'click', this.copyEventUrl.bind(this));\n\t\t}\n\n\t\t// Init \"Videocall\" control\n\t\tthis.DOM.videoCall = this.DOM.sidebarInner.querySelector('.calendar-slider-sidebar-videocall');\n\t\tDom.clean(this.DOM.videoCall);\n\t\tif (\n\t\t\tType.isElementNode(this.DOM.videoCall)\n\t\t\t&& this.entry\n\t\t\t&& this.entry.data.PARENT_ID\n\t\t\t&& (\n\t\t\t\tthis.entry.data.EVENT_TYPE === '#shared#'\n\t\t\t\t|| this.entry.data.EVENT_TYPE === '#shared_crm#'\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tthis.DOM.videoCall.style.display = '';\n\t\t\tthis.conferenceButton = Tag.render`\n\t\t\t\t<div class=\"ui-btn-split ui-btn-icon-camera-blue intranet-control-btn ui-btn-light-border ui-btn-icon-inline\" style=\"width: 100%\">\n\t\t\t\t\t<button class=\"ui-btn-main calendar-slider-conference-button\">\n\t\t\t\t\t\t${Loc.getMessage('EC_CALENDAR_CONFERENCE')}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tEvent.bind(this.conferenceButton, 'click', this.handleConferenceButtonClick.bind(this));\n\n\t\t\tDom.append(this.conferenceButton, this.DOM.videoCall);\n\t\t}\n\t\telse if (\n\t\t\tBX?.Intranet?.ControlButton\n\t\t\t&& Type.isElementNode(this.DOM.videoCall)\n\t\t\t&& this.entry.getCurrentStatus() !== false\n\t\t)\n\t\t{\n\t\t\tthis.DOM.videoCall.style.display = '';\n\n\t\t\tconst items = this.isCollabUser\n\t\t\t\t? ['chat', 'videocall', 'task']\n\t\t\t\t: ['chat', 'videocall', 'blog_post', 'task']\n\t\t\t;\n\n\t\t\tthis.intranetControllButton = new IntranetButton({\n\t\t\t\tintranetControlButtonParams: {\n\t\t\t\t\titems,\n\t\t\t\t\tcontainer: this.DOM.videoCall,\n\t\t\t\t\tentityType: 'calendar_event',\n\t\t\t\t\tentityId: this.entry.parentId,\n\t\t\t\t\tentityData: {\n\t\t\t\t\t\tdateFrom: Util.formatDate(this.entry.from),\n\t\t\t\t\t\tparentId: this.entry.parentId,\n\t\t\t\t\t},\n\t\t\t\t\tanalytics: {\n\t\t\t\t\t\tstartVideoCall: {\n\t\t\t\t\t\t\ttool: 'im',\n\t\t\t\t\t\t\tcategory: 'events',\n\t\t\t\t\t\t\tevent: 'click_call',\n\t\t\t\t\t\t\ttype: 'group',\n\t\t\t\t\t\t\tc_section: 'card_full',\n\t\t\t\t\t\t\tc_sub_section: 'context_menu',\n\t\t\t\t\t\t\tp5: `eventId_${this.entry.parentId}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcallbacks: {\n\t\t\t\t\tgetUsersCount: () => this.attendees.length,\n\t\t\t\t\thasChat: () => this.entry.data?.MEETING?.CHAT_ID > 0,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.videoCall.style.display = 'none';\n\t\t}\n\t}\n\n\thandleEntryData(data, userIndex, sectionData)\n\t{\n\t\tthis.entry = new Entry({ data, userIndex });\n\t\tthis.section = new CalendarSection(sectionData);\n\n\t\tif (Type.isPlainObject(sectionData))\n\t\t{\n\t\t\tthis.permissions = sectionData.PERM;\n\t\t}\n\n\t\tEntryManager.registerEntrySlider(this.entry, this);\n\t}\n\n\tinitPlannerControl(uid)\n\t{\n\t\tthis.plannerId = `${uid}_view_slider_planner`;\n\t\tthis.DOM.plannerWrapOuter = this.DOM.content.querySelector('.calendar-slider-detail-timeline');\n\t\tthis.DOM.plannerWrap = this.DOM.plannerWrapOuter.querySelector('.calendar-view-planner-wrap');\n\t\tDom.clean(this.DOM.plannerWrap);\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.DOM.plannerWrap,\n\t\t\tminWidth: parseInt(this.DOM.plannerWrap.offsetWidth),\n\t\t\tsolidStatus: true,\n\t\t\treadonly: true,\n\t\t\tlocked: !this.plannerFeatureEnabled,\n\t\t\talwaysBlue: true,\n\t\t});\n\n\t\tthis.planner.show();\n\t\tthis.planner.showLoader();\n\t\tthis.planner.setEntriesCount(this.attendees.length);\n\n\t\tsetTimeout(() => {\n\t\t\tif (this.DOM.plannerWrapOuter)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.plannerWrapOuter, 'hidden');\n\t\t\t}\n\t\t}, 500);\n\n\t\tconst plannerData = {\n\t\t\tentryId: this.entry.id || 0,\n\t\t\tentryLocation: this.entry.data.LOCATION || '',\n\t\t\townerId: this.ownerId,\n\t\t\thostId: this.entry.getMeetingHost(),\n\t\t\ttype: this.type,\n\t\t\tentityList: this.entry.getAttendeesEntityList(),\n\t\t\tdateFrom: Util.formatDate(this.entry.from.getTime() - Util.getDayLength() * 3),\n\t\t\tdateTo: Util.formatDate(this.entry.to.getTime() + Util.getDayLength() * 10),\n\t\t\ttimezone: this.userTimezone,\n\t\t\tlocation: this.entry.getLocation(),\n\t\t\tentry: this.entry,\n\t\t};\n\n\t\tthis.loadPlannerDataDebounce(plannerData);\n\t}\n\n\tshowUserListPopup(node, userList)\n\t{\n\t\tif (this.userListPopup)\n\t\t{\n\t\t\tthis.userListPopup.close();\n\t\t}\n\n\t\tif (userList && userList.length > 0)\n\t\t{\n\t\t\tthis.DOM.userListPopupWrap = this.BX.create('DIV', { props: { className: 'calendar-user-list-popup-block' } });\n\t\t\tuserList.forEach(function(user)\n\t\t\t{\n\t\t\t\tlet userAvatar = `\n\t\t\t\t\t<div class=\"ui-icon ui-icon-common-user\" style=\"width: 34px; height: 34px;\">\n\t\t\t\t\t\t<i></i>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\tif (user.AVATAR && user.AVATAR !== '/bitrix/images/1.gif')\n\t\t\t\t{\n\t\t\t\t\tuserAvatar = `<img src=\"${encodeURI(user.AVATAR)}\" width=\"34\" height=\"34\">`;\n\t\t\t\t}\n\n\t\t\t\tif (user.EMAIL_USER)\n\t\t\t\t{\n\t\t\t\t\tuserAvatar = `\n\t\t\t\t\t\t<div class=\"ui-icon ui-icon ui-icon-common-user-mail\" style=\"width: 34px; height: 34px;\">\n\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t}\n\n\t\t\t\tif (user.SHARING_USER)\n\t\t\t\t{\n\t\t\t\t\tuserAvatar = `\n\t\t\t\t\t\t<div class=\"ui-icon ui-icon-common-user ui-icon-common-user-sharing\" style=\"width: 34px; height: 34px;\">\n\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t}\n\n\t\t\t\tif (user.COLLAB_USER)\n\t\t\t\t{\n\t\t\t\t\tconst userpicPath = user.AVATAR && user.AVATAR !== '/bitrix/images/1.gif'\n\t\t\t\t\t\t? user.AVATAR\n\t\t\t\t\t\t: null\n\t\t\t\t\t;\n\t\t\t\t\tuserAvatar = new AvatarRoundGuest(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsize: 34,\n\t\t\t\t\t\t\tuserName: user.DISPLAY_NAME,\n\t\t\t\t\t\t\tuserpicPath,\n\t\t\t\t\t\t\tbaseColor: '#19cc45',\n\t\t\t\t\t\t},\n\t\t\t\t\t).getContainer();\n\t\t\t\t}\n\n\t\t\t\tconst userWrap = Tag.render`\n\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-container calendar-slider-sidebar-user-card\">\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block-avatar\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block-item\">\n\t\t\t\t\t\t\t\t${userAvatar}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-info\">\n\t\t\t\t\t\t\t<a href=\"${user.URL ? user.URL : '#'}\" \n\t\t\t\t\t\t\t\tclass=\"calendar-slider-sidebar-user-info-name ${user.COLLAB_USER ? 'calendar-collab-user' : ''}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Text.encode(user.DISPLAY_NAME)}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\tthis.DOM.userListPopupWrap.append(userWrap);\n\t\t\t}, this);\n\n\t\t\tthis.userListPopup = this.BX.PopupWindowManager.create(`user-list-popup-${Math.random()}`, node, {\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: node.offsetWidth / 2,\n\t\t\t\tresizable: false,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontent: this.DOM.userListPopupWrap,\n\t\t\t\tclassName: 'calendar-user-list-popup',\n\t\t\t\tmaxWidth: 300,\n\t\t\t\tmaxHeight: 500,\n\t\t\t\tzIndex: 4000,\n\t\t\t\tangle: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.userListPopup.show();\n\t\t\tthis.BX.addCustomEvent(this.userListPopup, 'onPopupClose', () => {\n\t\t\t\tthis.userListPopup.destroy();\n\t\t\t});\n\t\t}\n\t}\n\n\tinitAcceptMeetingControl(uid)\n\t{\n\t\tthis.DOM.statusButtonset = this.DOM.content.querySelector(`#${uid}_status_buttonset`);\n\t\tthis.DOM.statusButtonset.style.marginRight = '12px';\n\n\t\tif (this.entry.getCurrentStatus() === 'H' || this.entry.getCurrentStatus() === false)\n\t\t{\n\t\t\tDom.remove(this.DOM.statusButtonset);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.statusControl = new MeetingStatusControl(\n\t\t\t\t{\n\t\t\t\t\twrap: this.DOM.statusButtonset,\n\t\t\t\t\tcurrentStatus: this.DOM.content.querySelector(`#${uid}_current_status`).value || this.entry.getCurrentStatus(),\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tthis.statusControl.subscribe('onSetStatus', (event) => {\n\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t{\n\t\t\t\t\tthis.handleEntityChanges();\n\t\t\t\t\tEntryManager.setMeetingStatus(this.entry, event.getData().status)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.statusControl.setStatus(this.entry.getCurrentStatus(), false);\n\t\t\t\t\t\t\tthis.statusControl.updateStatus();\n\n\t\t\t\t\t\t\tif (this.entry.getCurrentStatus() === 'Y')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tEvent.bind(this.DOM.editButton, 'click', this.handleEditButtonClick.bind(this));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tEvent.unbind(this.DOM.editButton, 'click', this.handleEditButtonClick.bind(this));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tEventEmitter.emit(`MeetingStatusControl_${uid}:onSetStatus`, event);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcopyEventUrl()\n\t{\n\t\tif (!this.entryUrl || !this.BX.clipboard.copy(window.location.origin + this.entryUrl))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.timeoutIds = this.timeoutIds || [];\n\t\tconst popup = new this.BX.PopupWindow(\n\t\t\t`calendar_clipboard_copy_${Text.getRandom().toLowerCase()}`,\n\t\t\tthis.DOM.copyButton,\n\t\t\t{\n\t\t\t\tcontent: Loc.getMessage('CALENDAR_TIP_TEMPLATE_LINK_COPIED'),\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tzIndex: 1000,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 20,\n\t\t\t\tcachable: false,\n\t\t\t},\n\t\t);\n\t\tpopup.show();\n\n\t\tlet timeoutId;\n\t\twhile (timeoutId = this.timeoutIds.pop())\n\t\t{\n\t\t\tclearTimeout(timeoutId);\n\t\t}\n\t\tthis.timeoutIds.push(setTimeout(() => {\n\t\t\tpopup.close();\n\t\t}, 1500));\n\t}\n\n\tcanDo(action)\n\t{\n\t\tif ((action === 'edit' || action === 'delete'))\n\t\t{\n\t\t\tif (this.entry.isResourcebooking())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.entry.permissions)\n\t\t\t{\n\t\t\t\treturn this.entry.permissions?.edit;\n\t\t\t}\n\n\t\t\treturn this.section.canDo('edit');\n\t\t}\n\n\t\tif ((action === 'view'))\n\t\t{\n\t\t\tif (this.entry.permissions)\n\t\t\t{\n\t\t\t\treturn this.entry.permissions?.view_full;\n\t\t\t}\n\n\t\t\treturn this.permissions.view_full;\n\t\t}\n\n\t\tconst isInvitedOrRejected = ['Q', 'N'].includes(this.entry.getCurrentStatus());\n\t\tif (action === 'editLocation')\n\t\t{\n\t\t\tconst canEdit = this.entry.permissions?.edit === true;\n\t\t\tconst canEditLocation = this.entry.permissions?.editLocation === true;\n\n\t\t\treturn !isInvitedOrRejected && (canEdit || canEditLocation);\n\t\t}\n\n\t\tif (action === 'editAttendees')\n\t\t{\n\t\t\tconst canEdit = this.entry.permissions?.edit === true;\n\t\t\tconst canEditAttendees = this.entry.permissions?.editAttendees === true;\n\n\t\t\treturn !isInvitedOrRejected && (canEdit || canEditAttendees);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tplannerIsShown()\n\t{\n\t\treturn this.DOM.plannerWrap && Dom.hasClass(this.DOM.plannerWrap, 'calendar-edit-planner-wrap-shown');\n\t}\n\n\tloadPlannerData(plannerData)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\t\tdata: plannerData,\n\t\t\t}).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\tresponse.data.accessibility,\n\t\t\t\t\t);\n\n\t\t\t\t\tthis.planner.updateSelector(\n\t\t\t\t\t\tUtil.adjustDateForTimezoneOffset(\n\t\t\t\t\t\t\tplannerData.entry.from,\n\t\t\t\t\t\t\tplannerData.entry.userTimezoneOffsetFrom,\n\t\t\t\t\t\t\tplannerData.entry.fullDay,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tUtil.adjustDateForTimezoneOffset(\n\t\t\t\t\t\t\tplannerData.entry.to,\n\t\t\t\t\t\t\tplannerData.entry.userTimezoneOffsetTo,\n\t\t\t\t\t\t\tplannerData.entry.fullDay,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tplannerData.entry.fullDay,\n\n\t\t\t\t\t);\n\t\t\t\t\tresolve(response);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response);\n\t\t\t\t},\n\t\t\t);\n\t\t});\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif (\n\t\t\t(\n\t\t\t\te.keyCode === Util.getKeyCode('delete')\n\t\t\t\t// || e.keyCode === Util.getKeyCode('backspace')\n\t\t\t)\n\t\t\t&& this.canDo('delete'))\n\t\t{\n\t\t\tconst target = event.target || event.srcElement;\n\t\t\tconst tagName = Type.isElementNode(target) ? target.tagName.toLowerCase() : null;\n\t\t\tif (tagName && !['input', 'textarea'].includes(tagName))\n\t\t\t{\n\t\t\t\tEventEmitter.subscribeOnce('BX.Calendar.Entry:beforeDelete', () => {\n\t\t\t\t\tthis.BX.SidePanel.Instance.close();\n\t\t\t\t});\n\t\t\t\tEntryManager.deleteEntry(this.entry, this.calendarContext);\n\t\t\t}\n\t\t}\n\t}\n\n\thandleEntityChanges()\n\t{\n\t\tthis.entityChanged = true;\n\t}\n\n\thandleConferenceButtonClick()\n\t{\n\t\tif (this.conferenceButton)\n\t\t{\n\t\t\tDom.addClass(this.conferenceButton, 'ui-btn-wait');\n\t\t}\n\n\t\tthis.getConferenceChatId();\n\n\t\tif (this.conferenceButton)\n\t\t{\n\t\t\tDom.removeClass(this.conferenceButton, 'ui-btn-wait');\n\t\t}\n\t}\n\n\tgetConferenceChatId()\n\t{\n\t\treturn this.BX.ajax.runAction('calendar.api.calendarajax.getConferenceChatId', {\n\t\t\tdata: {\n\t\t\t\teventId: this.entry.data.PARENT_ID,\n\t\t\t},\n\t\t\tanalytics: {\n\t\t\t\ttool: 'im',\n\t\t\t\tcategory: 'events',\n\t\t\t\tevent: 'click_call',\n\t\t\t\ttype: 'videoconf',\n\t\t\t\tc_section: 'card_full',\n\t\t\t\tc_sub_section: 'card',\n\t\t\t\tp5: `eventId_${this.entry.parentId}`,\n\t\t\t},\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tif (top.window.BXIM && response.data && response.data.chatId)\n\t\t\t\t{\n\t\t\t\t\ttop.BXIM.openMessenger(`chat${parseInt(response.data.chatId, 10)}`);\n\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\talert(Loc.getMessage('EC_CONFERENCE_ERROR'));\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\talert(Loc.getMessage('EC_CONFERENCE_ERROR'));\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t);\n\t}\n\n\thandleEditButtonClick(): void\n\t{\n\t\tthis.BX.SidePanel.Instance.close(false, () => {\n\t\t\tEntryManager.openEditSlider({\n\t\t\t\tentry: this.entry,\n\t\t\t\ttype: this.type,\n\t\t\t\townerId: this.ownerId,\n\t\t\t\tuserId: this.userId,\n\t\t\t});\n\t\t});\n\t}\n}\n"],"names":["UserAvatar","name","props","avatarSize","Number","user","COLLAB_USER","Boolean","SHARING_USER","EMAIL_USER","AVATAR","String","DISPLAY_NAME","methods","renderAvatar","AvatarRoundGuest","size","userName","userpicPath","getAvatar","baseColor","renderTo","$refs","collabAvatar","mounted","template","ViewEventSlider","components","data","id","params","eventId","parseInt","description","timezoneHint","timezone","userTimezone","fromToHtml","isMeeting","meetingHost","meetingHostDisplayName","meetingHostWorkPosition","attendees","avatarUsers","avatarMoreUsers","avatarMoreCount","userList","y","i","q","n","curUserStatus","meetingCreatorUrl","meetingCreatorDisplayName","meetingCreatorCollabUser","isRemind","isWebdavEvent","isCrmEvent","isHighImportance","isRrule","rruleDescription","detailFilesTemplate","accessibility","isIntranetEnabled","isPrivate","location","canEditCalendar","downloadIcsEnabled","canAttendeeEditCalendar","canDeleteEvent","showComments","filesView","getComponentHTML","crmView","entry","Entry","userIndex","isInvited","updateParamsDebounce","Runtime","debounce","updateParams","hasPulls","backgroundPullEvent","created","eventExists","updateUserList","loadCommentsView","executeScripts","Event","bind","document","handleBackgroundPulls","sliderDetailContent","quote","EventEmitter","subscribe","handleCopilotMenuShow","beforeMount","handlePullEvent","handleStatusUpdate","beforeUnmount","unsubscribe","unbind","computed","authorNodeId","meetingCreatorClassName","json","JSON","parse","html","BX","ajax","runAction","signedEvent","then","response","commentsElement","createElement","innerHTML","commentsView","appendChild","element","scripts","querySelectorAll","script","s","parentNode","remove","e","window","mplCheckForQuote","currentTarget","getAttendees","forEach","STATUS","push","toLowerCase","accepted","filter","attendee","isOpenEvent","ID","length","slice","reloadPlanner","plannerData","entryId","entryLocation","LOCATION","ownerId","hostId","getMeetingHost","type","entityList","getAttendeesEntityList","dateFrom","Util","formatDate","from","getTime","getDayLength","dateTo","to","getLocation","reloadPlannerCallback","event","MEETING_STATUS","getData","status","fields","CAL_TYPE","Calendar","documentIsDisplayingNow","PARENT_ID","parentId","pullData","NAME","ACCESSIBILITY","DATE_FROM","timezoneOffset","TZ_OFFSET_FROM","newData","setTimeout","copilotPopups","menu","find","popup","offsetHeight","offset","getBoundingClientRect","bottom","comments","marginBottom","style","isNaN","highlightChange","savedOpacity","opacity","savedTransition","transition","watch","handler","newValue","oldValue","highlightName","highlightFromTo","highlightDescription","highlightCrmView","highlightLocation","highlightAccessibility","EventViewForm","constructor","options","permissions","uid","DOM","RELOAD_REQUESTED","RELOAD_FINISHED","reloadStatus","entityChanged","LOAD_DELAY","app","userId","zIndex","calendarContext","entryDateFrom","getBX","sliderOnLoad","onLoadSlider","showUserListPopupBind","showUserListPopup","keyHandlerBind","keyHandler","destroyBind","destroy","loadPlannerDataDebounce","loadPlannerData","pullEventList","Set","initInSlider","slider","promiseResolve","createContent","Type","isFunction","opened","isOpened","unmount","intranetControllButton","closeAllPopups","BaseEvent","content","layout","get","isNull","initControls","loadComponentAssets","assets","promise","Promise","resolve","reject","css","load","loadScript","js","strings","string","stringAsset","join","head","useAdjacentHTML","analytics","tool","category","c_section","p5","viewEventSliderRoot","isOpen","BitrixVue","createApp","showUserListPopupCallback","mount","sliderContent","entryUrl","plannerFeatureEnabled","planner","lock","handleEntryData","section","isCollabUser","errors","set","Text","encode","message","isNil","isAvailable","showHelperCallback","top","UI","InfoHelper","show","isLimit","limitAnalyticsLabels","module","source","close","console","error","title","querySelector","buttonSet","editButton","downloadButton","delButton","sidebarInner","initPlannerControl","innerTimeWrap","isElementNode","Dom","addClass","canDo","handleEditButtonClick","reminderWrap","isDomNode","clean","viewMode","getCurrentStatus","reminderControl","Controls","Reminder","wrap","setValue","getReminders","handleEntityChanges","reminderValues","values","reminders","items","removeClass","EntryManager","downloadIcs","subscribeOnce","SidePanel","Instance","deleteEntry","filesWrap","currentTop","viewElementBind","showTitle","node","getAttribute","relationWrap","includes","EVENT_TYPE","relationControl","RelationInterface","append","render","initAcceptMeetingControl","copyButton","copyEventUrl","videoCall","display","conferenceButton","Tag","Loc","getMessage","handleConferenceButtonClick","Intranet","ControlButton","IntranetButton","intranetControlButtonParams","container","entityType","entityId","entityData","startVideoCall","c_sub_section","callbacks","getUsersCount","hasChat","MEETING","CHAT_ID","sectionData","CalendarSection","isPlainObject","PERM","registerEntrySlider","plannerId","plannerWrapOuter","plannerWrap","Planner","minWidth","offsetWidth","solidStatus","readonly","locked","alwaysBlue","showLoader","setEntriesCount","userListPopup","userListPopupWrap","create","className","userAvatar","encodeURI","getContainer","userWrap","URL","PopupWindowManager","Math","random","autoHide","closeByEsc","offsetTop","offsetLeft","resizable","lightShadow","maxWidth","maxHeight","angle","position","addCustomEvent","statusButtonset","marginRight","statusControl","MeetingStatusControl","currentStatus","value","setMeetingStatus","setStatus","updateStatus","emit","clipboard","copy","origin","timeoutIds","PopupWindow","getRandom","darkMode","cachable","timeoutId","pop","clearTimeout","action","isResourcebooking","edit","view_full","isInvitedOrRejected","canEdit","canEditLocation","editLocation","canEditAttendees","editAttendees","plannerIsShown","hasClass","hideLoader","update","entries","updateSelector","adjustDateForTimezoneOffset","userTimezoneOffsetFrom","fullDay","userTimezoneOffsetTo","keyCode","getKeyCode","target","srcElement","tagName","getConferenceChatId","BXIM","chatId","openMessenger","alert","openEditSlider"],"mappings":";;;;;CAEO,MAAMA,UAAU,GAAG;GACzBC,IAAI,EAAE,YAAY;GAClBC,KAAK,EAAE;KACNC,UAAU,EAAEC,MAAM;KAClBC,IAAI,EAAE;OACLC,WAAW,EAAEC,OAAO;OACpBC,YAAY,EAAED,OAAO;OACrBE,UAAU,EAAEF,OAAO;OACnBG,MAAM,EAAEC,MAAM,GAAG,IAAI;OACrBC,YAAY,EAAED;;IAEf;GACDE,OAAO,EAAE;KACRC,YAAY,GACZ;OACC,IAAIC,0BAAgB,CACnB;SACCC,IAAI,EAAE,IAAI,CAACb,UAAU;SACrBc,QAAQ,EAAE,IAAI,CAACZ,IAAI,CAACO,YAAY;SAChCM,WAAW,EAAE,IAAI,CAACC,SAAS,EAAE;SAC7BC,SAAS,EAAE;QACX,CACD,CAACC,QAAQ,CAAC,IAAI,CAACC,KAAK,CAACC,YAAY,CAAC;MACnC;KAEDJ,SAAS,GACT;OACC,IAAI,IAAI,CAACd,IAAI,CAACK,MAAM,IAAI,IAAI,CAACL,IAAI,CAACK,MAAM,KAAK,sBAAsB,EACnE;SACC,OAAO,IAAI,CAACL,IAAI,CAACK,MAAM;;OAGxB,OAAO,IAAI;;IAEZ;GACDc,OAAO,GACP;KACC,IAAI,IAAI,CAACnB,IAAI,CAACC,WAAW,EACzB;OACC,IAAI,CAACQ,YAAY,EAAE;;IAEpB;;GAEDW,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;CAmBZ,CAAC;;CCxDM,MAAMC,eAAe,GAAG;GAC9BzB,IAAI,EAAE,iBAAiB;GACvBC,KAAK,EAAE,CAAC,QAAQ,EAAE,uBAAuB,EAAE,2BAA2B,CAAC;GACvEyB,UAAU,EAAE;KACX3B;IACA;GACD4B,IAAI,GAAG;KACN,OAAO;OACNC,EAAE,EAAE,IAAI,CAACC,MAAM,CAACD,EAAE;OAClBE,OAAO,EAAEC,QAAQ,CAAC,IAAI,CAACF,MAAM,CAACC,OAAO,EAAE,EAAE,CAAC;OAC1C9B,IAAI,EAAE,IAAI,CAAC6B,MAAM,CAAC7B,IAAI;OACtBgC,WAAW,EAAE,IAAI,CAACH,MAAM,CAACG,WAAW;OACpCC,YAAY,EAAE,IAAI,CAACJ,MAAM,CAACI,YAAY;OACtCC,QAAQ,EAAE,IAAI,CAACL,MAAM,CAACM,YAAY;OAClCC,UAAU,EAAE,IAAI,CAACP,MAAM,CAACO,UAAU;OAClCC,SAAS,EAAE,IAAI,CAACR,MAAM,CAACQ,SAAS;OAChCC,WAAW,EAAE,IAAI,CAACT,MAAM,CAACS,WAAW;OACpCC,sBAAsB,EAAE,IAAI,CAACV,MAAM,CAACU,sBAAsB;OAC1DC,uBAAuB,EAAE,IAAI,CAACX,MAAM,CAACW,uBAAuB;OAC5DtC,UAAU,EAAE,IAAI,CAAC2B,MAAM,CAAC3B,UAAU;OAClCuC,SAAS,EAAE,IAAI,CAACZ,MAAM,CAACY,SAAS;OAChCC,WAAW,EAAE,EAAE;OACfC,eAAe,EAAE,EAAE;OACnBC,eAAe,EAAE,CAAC;OAClBC,QAAQ,EAAE;SAAEC,CAAC,EAAE,EAAE;SAAEC,CAAC,EAAE,EAAE;SAAEC,CAAC,EAAE,EAAE;SAAEC,CAAC,EAAE;QAAI;OACxCC,aAAa,EAAE,IAAI,CAACrB,MAAM,CAACqB,aAAa;OACxCC,iBAAiB,EAAE,IAAI,CAACtB,MAAM,CAACsB,iBAAiB;OAChDC,yBAAyB,EAAE,IAAI,CAACvB,MAAM,CAACuB,yBAAyB;OAChEC,wBAAwB,EAAE,IAAI,CAACxB,MAAM,CAACwB,wBAAwB;OAC9DC,QAAQ,EAAE,IAAI,CAACzB,MAAM,CAACyB,QAAQ;OAC9BC,aAAa,EAAE,IAAI,CAAC1B,MAAM,CAAC0B,aAAa;OACxCC,UAAU,EAAE,IAAI,CAAC3B,MAAM,CAAC2B,UAAU;OAClCC,gBAAgB,EAAE,IAAI,CAAC5B,MAAM,CAAC4B,gBAAgB;OAC9CC,OAAO,EAAE,IAAI,CAAC7B,MAAM,CAAC6B,OAAO;OAC5BC,gBAAgB,EAAE,IAAI,CAAC9B,MAAM,CAAC8B,gBAAgB;OAC9CC,mBAAmB,EAAE,IAAI,CAAC/B,MAAM,CAAC+B,mBAAmB;OACpDC,aAAa,EAAE,IAAI,CAAChC,MAAM,CAACgC,aAAa;OACxCC,iBAAiB,EAAE,IAAI,CAACjC,MAAM,CAACiC,iBAAiB;OAChDC,SAAS,EAAE,IAAI,CAAClC,MAAM,CAACkC,SAAS;OAChCC,QAAQ,EAAE,IAAI,CAACnC,MAAM,CAACmC,QAAQ;OAC9BC,eAAe,EAAE,IAAI,CAACpC,MAAM,CAACoC,eAAe;OAC5CC,kBAAkB,EAAE,IAAI,CAACrC,MAAM,CAACqC,kBAAkB;OAClDC,uBAAuB,EAAE,IAAI,CAACtC,MAAM,CAACsC,uBAAuB;OAC5DC,cAAc,EAAE,IAAI,CAACvC,MAAM,CAACuC,cAAc;OAC1CC,YAAY,EAAE,IAAI,CAACxC,MAAM,CAACwC,YAAY;OACtCC,SAAS,EAAE,IAAI,CAACC,gBAAgB,CAAC,IAAI,CAAC1C,MAAM,CAACyC,SAAS,CAAC;OACvDE,OAAO,EAAE,IAAI,CAACD,gBAAgB,CAAC,IAAI,CAAC1C,MAAM,CAAC2C,OAAO,CAAC;OACnDC,KAAK,EAAE,IAAIC,oBAAK,CAAC;SAAC/C,IAAI,EAAE,IAAI,CAACE,MAAM,CAAC4C,KAAK;SAAEE,SAAS,EAAE,IAAI,CAAC9C,MAAM,CAAC8C;QAAU,CAAC;OAC7EC,SAAS,EAAE,KAAK;OAEhBC,oBAAoB,EAAEC,iBAAO,CAACC,QAAQ,CAAC,IAAI,CAACC,YAAY,EAAE,GAAG,EAAE,IAAI,CAAC;OACpEC,QAAQ,EAAE,KAAK;OACfC,mBAAmB,EAAE;MACrB;IACD;GACDC,OAAO,GACP;KACC,IAAI,CAACP,SAAS,GAAG,IAAI,CAACH,KAAK,CAACG,SAAS,EAAE;IACvC;GACDrD,OAAO,GACP;KACC,IAAI,IAAI,CAACM,MAAM,CAACuD,WAAW,EAC3B;OACC,IAAI,CAACC,cAAc,EAAE;OACrB,IAAI,IAAI,CAAChB,YAAY,EACrB;SACC,IAAI,CAACiB,gBAAgB,EAAE;;OAGxB,IAAI,IAAI,CAAC/B,aAAa,EACtB;SACC,IAAI,CAACgC,cAAc,CAAC,IAAI,CAAClE,KAAK,CAACiD,SAAS,CAAC;;OAG1CkB,eAAK,CAACC,IAAI,CAACC,QAAQ,EAAE,kBAAkB,EAAE,IAAI,CAACC,qBAAqB,CAAC;;KAErEH,eAAK,CAACC,IAAI,CAAC,IAAI,CAACpE,KAAK,CAACuE,mBAAmB,EAAE,SAAS,EAAE,IAAI,CAACC,KAAK,CAAC;KACjEC,6BAAY,CAACC,SAAS,CAAC,sBAAsB,EAAE,IAAI,CAACC,qBAAqB,CAAC;IAC1E;GACDC,WAAW,GACX;KACC,IAAI,IAAI,CAACpE,MAAM,CAACuD,WAAW,EAC3B;OACCU,6BAAY,CAACC,SAAS,CAAC,sBAAsB,EAAE,IAAI,CAACG,eAAe,CAAC;OACpEJ,6BAAY,CAACC,SAAS,CAAE,wBAAuB,IAAI,CAACnE,EAAG,cAAa,EAAE,IAAI,CAACuE,kBAAkB,CAAC;;IAE/F;GACDC,aAAa,GACb;KACC,IAAI,IAAI,CAACvE,MAAM,CAACuD,WAAW,EAC3B;OACCU,6BAAY,CAACO,WAAW,CAAC,sBAAsB,EAAE,IAAI,CAACH,eAAe,CAAC;OACtEJ,6BAAY,CAACO,WAAW,CAAE,wBAAuB,IAAI,CAACzE,EAAG,cAAa,EAAE,IAAI,CAACuE,kBAAkB,CAAC;OAChGX,eAAK,CAACc,MAAM,CAAC,IAAI,CAACjF,KAAK,CAACuE,mBAAmB,EAAE,SAAS,EAAE,IAAI,CAACC,KAAK,CAAC;OACnEC,6BAAY,CAACO,WAAW,CAAC,sBAAsB,EAAE,IAAI,CAACL,qBAAqB,CAAC;;IAE7E;GACDO,QAAQ,EAAE;KACTC,YAAY,GACZ;OACC,OAAO,IAAI,CAAC5E,EAAE,GAAG,qBAAqB;MACtC;KACD6E,uBAAuB,GACvB;OACC,OAAQ,yCAAwC,IAAI,CAACpD,wBAAwB,GAAG,uBAAuB,GAAG,EAAG,EAAC;;IAE/G;GACDzC,OAAO,EAAE;KACR2D,gBAAgB,CAACmC,IAAI,EACrB;OACC,IAAI,CAACA,IAAI,EACT;SACC,OAAO,EAAE;;OAGV,OAAOC,IAAI,CAACC,KAAK,CAACF,IAAI,CAAC,CAAC/E,IAAI,CAACkF,IAAI;MACjC;KACDvB,gBAAgB,GAChB;OACCwB,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC,oDAAoD,EAAE;SACvErF,IAAI,EAAE;WACLsF,WAAW,EAAE,IAAI,CAACpF,MAAM,CAACoF;;QAE1B,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;SACrB,MAAMC,eAAe,GAAG1B,QAAQ,CAAC2B,aAAa,CAAC,KAAK,CAAC;SACrDD,eAAe,CAACE,SAAS,GAAGH,QAAQ,CAACxF,IAAI,CAACkF,IAAI;SAC9C,IAAI,CAACxF,KAAK,CAACkG,YAAY,CAACC,WAAW,CAACJ,eAAe,CAAC;SACpD,IAAI,CAAC7B,cAAc,CAAC,IAAI,CAAClE,KAAK,CAACkG,YAAY,CAAC;QAC5C,CAAC;MACF;KACDhC,cAAc,CAACkC,OAAO,EACtB;OACC,IAAI,CAACA,OAAO,EACZ;SACC;;;OAGD,MAAMC,OAAO,GAAGD,OAAO,CAACE,gBAAgB,CAAC,QAAQ,CAAC;OAClD,KAAK,MAAMC,MAAM,IAAIF,OAAO,EAC5B;SACC,MAAMG,CAAC,GAAGnC,QAAQ,CAAC2B,aAAa,CAAC,QAAQ,CAAC;SAC1CQ,CAAC,CAACP,SAAS,GAAGM,MAAM,CAACN,SAAS;SAC9BM,MAAM,CAACE,UAAU,CAACN,WAAW,CAACK,CAAC,CAAC;SAChCD,MAAM,CAACG,MAAM,EAAE;;;;MAIhB;;KACDlC,KAAK,CAACmC,CAAC,EACP;OACCC,MAAM,CAACC,gBAAgB,CAACF,CAAC,EAAEA,CAAC,CAACG,aAAa,EAAG,SAAQ,IAAI,CAACrG,OAAQ,EAAC,EAAE,IAAI,CAAC0E,YAAY,CAAC;MACvF;KACDnB,cAAc,GACd;OAAA;OACC,IAAI,CAACxC,QAAQ,GAAG;SAAEC,CAAC,EAAE,EAAE;SAAEC,CAAC,EAAE,EAAE;SAAEC,CAAC,EAAE,EAAE;SAAEC,CAAC,EAAE;QAAI;OAC9C,IAAI,IAAI,CAACwB,KAAK,CAACpC,SAAS,EAAE,EAC1B;SACC,IAAI,CAACoC,KAAK,CAAC2D,YAAY,EAAE,CAACC,OAAO,CAAC,UAASjI,IAAI,EAAE;WAChD,IAAIA,IAAI,CAACkI,MAAM,KAAK,GAAG,EACvB;aACC,IAAI,CAACzF,QAAQ,CAACC,CAAC,CAACyF,IAAI,CAACnI,IAAI,CAAC;YAC1B,MACI,IAAI,IAAI,CAACyC,QAAQ,CAACzC,IAAI,CAACkI,MAAM,CAACE,WAAW,EAAE,CAAC,EACjD;aACC,IAAI,CAAC3F,QAAQ,CAACzC,IAAI,CAACkI,MAAM,CAACE,WAAW,EAAE,CAAC,CAACD,IAAI,CAACnI,IAAI,CAAC;;UAEpD,EAAE,IAAI,CAAC;;OAGT,MAAMqI,QAAQ,iDAAG,IAAI,CAAChG,SAAS,CAACK,CAAC,qBAAhB,kBAAkB4F,MAAM,CAAEC,QAAQ,IAAK;SAAA;SACvD,IAAI,CAACA,QAAQ,EACb;WACC,OAAO,KAAK;;SAGb,mBAAI,IAAI,CAAClE,KAAK,aAAV,YAAYmE,WAAW,EAAE,EAC7B;WACC,OAAO,IAAI;;SAGZ,OAAO7G,QAAQ,CAAC,IAAI,CAACO,WAAW,CAACuG,EAAE,EAAE,EAAE,CAAC,KAAK9G,QAAQ,CAAC4G,QAAQ,CAACE,EAAE,EAAE,EAAE,CAAC;QACtE,CAAC,oCAAI,EAAE;OAER,IAAIJ,QAAQ,CAACK,MAAM,IAAI,EAAE,EACzB;SACC,IAAI,CAACpG,WAAW,GAAG+F,QAAQ,CAACM,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;SACxC,IAAI,CAACpG,eAAe,GAAG,EAAE;QACzB,MAED;SACC,IAAI,CAACD,WAAW,GAAG+F,QAAQ,CAACM,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;SACxC,IAAI,CAACpG,eAAe,GAAG8F,QAAQ,CAACM,KAAK,CAAC,EAAE,CAAC;;OAG1C,IAAI,CAACnG,eAAe,GAAG,IAAI,CAACD,eAAe,CAACmG,MAAM;OAClD,IAAI,IAAI,CAAClG,eAAe,IAAI,IAAI,EAChC;SACC,IAAI,CAACA,eAAe,GAAI,GAAEb,QAAQ,CAAC,IAAI,CAACY,eAAe,CAACmG,MAAM,GAAG,IAAI,EAAE,EAAE,CAAE,GAAE;;MAE9E;KACDE,aAAa,GACb;OACC,MAAMC,WAAW,GAAG;SACnBC,OAAO,EAAE,IAAI,CAACzE,KAAK,CAAC7C,EAAE,IAAI,CAAC;SAC3BuH,aAAa,EAAE,IAAI,CAAC1E,KAAK,CAAC9C,IAAI,CAACyH,QAAQ,IAAI,EAAE;SAC7CC,OAAO,EAAE,CAAC;SACVC,MAAM,EAAE,IAAI,CAAC7E,KAAK,CAAC8E,cAAc,EAAE;SACnCC,IAAI,EAAE,MAAM;SACZC,UAAU,EAAE,IAAI,CAAChF,KAAK,CAACiF,sBAAsB,EAAE;SAC/CC,QAAQ,EAAEC,kBAAI,CAACC,UAAU,CAAC,IAAI,CAACpF,KAAK,CAACqF,IAAI,CAACC,OAAO,EAAE,GAAGH,kBAAI,CAACI,YAAY,EAAE,GAAG,CAAC,CAAC;SAC9EC,MAAM,EAAEL,kBAAI,CAACC,UAAU,CAAC,IAAI,CAACpF,KAAK,CAACyF,EAAE,CAACH,OAAO,EAAE,GAAGH,kBAAI,CAACI,YAAY,EAAE,GAAG,EAAE,CAAC;SAC3E9H,QAAQ,EAAE,IAAI,CAACA,QAAQ;SACvB8B,QAAQ,EAAE,IAAI,CAACS,KAAK,CAAC0F,WAAW,EAAE;SAClC1F,KAAK,EAAE,IAAI,CAACA;QACZ;OAED,IAAI,CAAC2F,qBAAqB,CAACnB,WAAW,CAAC;MACvC;KACDtD,qBAAqB,GACrB;OACC,IAAI,IAAI,CAACV,QAAQ,EACjB;SACC,IAAI,CAACJ,oBAAoB,CAAC,IAAI,CAACK,mBAAmB,CAAC;SACnD,IAAI,CAACD,QAAQ,GAAG,KAAK;;MAEtB;KACDkB,kBAAkB,CAACkE,KAAK,EACxB;OACC,IAAI,CAAC5F,KAAK,CAAC9C,IAAI,CAAC2I,cAAc,GAAGD,KAAK,CAACE,OAAO,EAAE,CAACC,MAAM;OACvD,IAAI,CAACtH,aAAa,GAAG,IAAI,CAACuB,KAAK,CAAC9C,IAAI,CAAC2I,cAAc;OACnD,IAAI,CAAC1F,SAAS,GAAG,IAAI,CAACH,KAAK,CAACG,SAAS,EAAE;MACvC;KACDsB,eAAe,CAACmE,KAAgB,EAChC;OAAA;OACC,IAAIA,KAAK,CAAC1I,IAAI,CAAC,CAAC,CAAC,KAAK,qBAAqB,EAC3C;SACC;;OAGD,IAAI,iBAAA0I,KAAK,CAAC1I,IAAI,CAAC,CAAC,CAAC,4CAAb,aAAe8I,MAAM,qBAArB,oBAAuBC,QAAQ,MAAK,UAAU,EAClD;SACC;;;;;OAKD,IAAI5D,EAAE,CAAC6D,QAAQ,CAACf,IAAI,CAACgB,uBAAuB,EAAE,EAC9C;SACC,IAAI,CAAC/F,oBAAoB,CAACwF,KAAK,CAAC;QAChC,MAED;SACC,IAAI,CAACpF,QAAQ,GAAG,IAAI;SACpB,IAAI,CAACC,mBAAmB,GAAGmF,KAAK;;MAEjC;KACDrF,YAAY,CAACqF,KAAgB,EAC7B;OAAA;OACC,IAAItI,QAAQ,kBAACsI,KAAK,CAAC1I,IAAI,CAAC,CAAC,CAAC,6CAAb,cAAe8I,MAAM,qBAArB,qBAAuBI,SAAS,EAAE,EAAE,CAAC,KAAK9I,QAAQ,CAAC,IAAI,CAACF,MAAM,CAACiJ,QAAQ,EAAE,EAAE,CAAC,EACzF;SACC,IAAI,CAAC9B,aAAa,EAAE;SAEpB;;OAGD,MAAM+B,QAAQ,GAAGV,KAAK,CAAC1I,IAAI,CAAC,CAAC,CAAC,CAAC8I,MAAM;OAErC,IAAIM,QAAQ,CAACC,IAAI,EACjB;SACC,IAAI,CAAChL,IAAI,GAAG+K,QAAQ,CAACC,IAAI;;OAG1B,IAAID,QAAQ,CAACE,aAAa,EAC1B;SACC,IAAI,CAACpH,aAAa,GAAGkH,QAAQ,CAACE,aAAa;;OAG5CnE,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC,gEAAgE,EAAE;SACnFrF,IAAI,EAAE;WACLuH,OAAO,EAAE,IAAI,CAACpH,OAAO;WACrB6H,QAAQ,EAAEC,kBAAI,CAACC,UAAU,CAACkB,QAAQ,CAACG,SAAS,CAAC;WAC7CC,cAAc,EAAEJ,QAAQ,CAACK;;QAE1B,CAAC,CAAClE,IAAI,CAAEC,QAAQ,IAAK;SACrB,MAAMkE,OAAO,GAAGlE,QAAQ,CAACxF,IAAI;SAE7B,IAAI,CAACK,WAAW,GAAGqJ,OAAO,CAACrJ,WAAW;SACtC,IAAI,CAACK,SAAS,GAAGgJ,OAAO,CAAChJ,SAAS;SAClC,IAAI,CAACH,QAAQ,GAAGmJ,OAAO,CAAClJ,YAAY;SACpC,IAAI,CAACF,YAAY,GAAGoJ,OAAO,CAACpJ,YAAY;SACxC,IAAI,CAACG,UAAU,GAAGiJ,OAAO,CAACjJ,UAAU;SACpC,IAAI,CAACE,WAAW,GAAG+I,OAAO,CAAC/I,WAAW;SACtC,IAAI,CAACC,sBAAsB,GAAG8I,OAAO,CAAC9I,sBAAsB;SAC5D,IAAI,CAACC,uBAAuB,GAAG6I,OAAO,CAAC7I,uBAAuB;SAC9D,IAAI,CAACtC,UAAU,GAAGmL,OAAO,CAACnL,UAAU;SACpC,IAAI,CAACuC,SAAS,GAAG4I,OAAO,CAAC5I,SAAS;SAClC,IAAI,CAACU,iBAAiB,GAAGkI,OAAO,CAAClI,iBAAiB;SAClD,IAAI,CAACC,yBAAyB,GAAGiI,OAAO,CAACjI,yBAAyB;SAClE,IAAI,CAACC,wBAAwB,GAAGgI,OAAO,CAAChI,wBAAwB;SAChE,IAAI,CAACC,QAAQ,GAAG+H,OAAO,CAAC/H,QAAQ;SAChC,IAAI,CAACC,aAAa,GAAG8H,OAAO,CAAC9H,aAAa;SAC1C,IAAI,CAACC,UAAU,GAAG6H,OAAO,CAAC7H,UAAU;SACpC,IAAI,CAACC,gBAAgB,GAAG4H,OAAO,CAAC5H,gBAAgB;SAChD,IAAI,CAACC,OAAO,GAAG2H,OAAO,CAAC3H,OAAO;SAC9B,IAAI,CAACC,gBAAgB,GAAG0H,OAAO,CAAC1H,gBAAgB;SAChD,IAAI,CAACC,mBAAmB,GAAGyH,OAAO,CAACzH,mBAAmB;SACtD,IAAI,CAACE,iBAAiB,GAAGuH,OAAO,CAACvH,iBAAiB;SAClD,IAAI,CAACC,SAAS,GAAGsH,OAAO,CAACtH,SAAS;SAClC,IAAI,CAACC,QAAQ,GAAGqH,OAAO,CAACrH,QAAQ;SAChC,IAAI,CAACC,eAAe,GAAGoH,OAAO,CAACpH,eAAe;SAC9C,IAAI,CAACE,uBAAuB,GAAGkH,OAAO,CAAClH,uBAAuB;SAC9D,IAAI,CAACC,cAAc,GAAGiH,OAAO,CAACjH,cAAc;SAC5C,IAAI,CAACC,YAAY,GAAGgH,OAAO,CAAChH,YAAY;SACxC,IAAI,CAACC,SAAS,GAAG,IAAI,CAACC,gBAAgB,CAAC8G,OAAO,CAAC/G,SAAS,CAAC;SACzD,IAAI,IAAI,CAACA,SAAS,EAClB;;WAECgH,UAAU,CAAC,MAAM;aAAE,IAAI,CAAC/F,cAAc,CAAC,IAAI,CAAClE,KAAK,CAACiD,SAAS,CAAC;YAAG,EAAE,IAAI,CAAC;;SAEvE,IAAI,CAACE,OAAO,GAAG,IAAI,CAACD,gBAAgB,CAAC8G,OAAO,CAAC7G,OAAO,CAAC;SACrD,IAAI,CAACC,KAAK,GAAG,IAAIC,oBAAK,CAAC;WACtB/C,IAAI,EAAE0J,OAAO,CAAC5G,KAAK;WACnBE,SAAS,EAAE0G,OAAO,CAAC1G;UACnB,CAAC;SAEF,IAAI,CAACU,cAAc,EAAE;SACrB,IAAI,CAAC2D,aAAa,EAAE;QACpB,CAAC;MACF;KACDhD,qBAAqB,GACrB;OACC,MAAMuF,aAAa,GAAG,CAAC,GAAG7F,QAAQ,CAACiC,gBAAgB,CAAC,yBAAyB,CAAC,CAAC;OAC/E,MAAM6D,IAAI,GAAGD,aAAa,CAACE,IAAI,CAAEC,KAAK,IAAKA,KAAK,CAACC,YAAY,GAAG,CAAC,CAAC;OAElE,MAAMC,MAAM,GAAGJ,IAAI,CAACK,qBAAqB,EAAE,CAACC,MAAM,GAAG,IAAI,CAACzK,KAAK,CAAC0K,QAAQ,CAACF,qBAAqB,EAAE,CAACC,MAAM;OAEvG,MAAME,YAAY,GAAGjK,QAAQ,CAAC,IAAI,CAACV,KAAK,CAAC0K,QAAQ,CAACE,KAAK,CAACD,YAAY,EAAE,EAAE,CAAC;OAEzE,IAAKE,KAAK,CAACF,YAAY,CAAC,IAAIJ,MAAM,GAAG,CAAC,IAAM,CAACM,KAAK,CAACF,YAAY,CAAC,IAAIA,YAAY,GAAGJ,MAAO,EAC1F;SACC,IAAI,CAACvK,KAAK,CAAC0K,QAAQ,CAACE,KAAK,CAACD,YAAY,GAAI,GAAEJ,MAAO,IAAG;;MAEvD;KACDO,eAAe,CAAC1E,OAAO,EACvB;OACC,IAAI,CAACA,OAAO,EACZ;SACC;;OAED,MAAM2E,YAAY,GAAG3E,OAAO,CAACwE,KAAK,CAACI,OAAO;OAC1C,MAAMC,eAAe,GAAG7E,OAAO,CAACwE,KAAK,CAACM,UAAU;OAChD9E,OAAO,CAACwE,KAAK,CAACI,OAAO,GAAG,KAAK;OAC7Bf,UAAU,CAAC,MAAM;SAChB7D,OAAO,CAACwE,KAAK,CAACM,UAAU,GAAG,IAAI;SAC/B9E,OAAO,CAACwE,KAAK,CAACI,OAAO,GAAGD,YAAY;SACpCd,UAAU,CAAC,MAAM;WAAE7D,OAAO,CAACwE,KAAK,CAACM,UAAU,GAAGD,eAAe;UAAG,EAAE,IAAI,CAAC;QACvE,EAAE,GAAG,CAAC;;IAER;GACDE,KAAK,EAAE;KACNxM,IAAI,EAAE;OAAEyM,OAAO,CAACC,QAAQ,EAAEC,QAAQ,EAAE;SAAE,IAAI,CAACR,eAAe,CAAC,IAAI,CAAC9K,KAAK,CAACuL,aAAa,CAAC;;MAAK;KACzFxK,UAAU,EAAE;OAAEqK,OAAO,CAACC,QAAQ,EAAEC,QAAQ,EAAE;SAAE,IAAI,CAACR,eAAe,CAAC,IAAI,CAAC9K,KAAK,CAACwL,eAAe,CAAC;;MAAK;KACjG7K,WAAW,EAAE;OAAEyK,OAAO,CAACC,QAAQ,EAAEC,QAAQ,EAAE;SAAE,IAAI,CAACR,eAAe,CAAC,IAAI,CAAC9K,KAAK,CAACyL,oBAAoB,CAAC;;MAAK;KACvGtI,OAAO,EAAE;OAAEiI,OAAO,CAACC,QAAQ,EAAEC,QAAQ,EAAE;SAAE,IAAI,CAACR,eAAe,CAAC,IAAI,CAAC9K,KAAK,CAAC0L,gBAAgB,CAAC;;MAAK;KAC/F/I,QAAQ,EAAE;OAAEyI,OAAO,CAACC,QAAQ,EAAEC,QAAQ,EAAE;SAAE,IAAI,CAACR,eAAe,CAAC,IAAI,CAAC9K,KAAK,CAAC2L,iBAAiB,CAAC;;MAAK;KACjGnJ,aAAa,EAAE;OAAE4I,OAAO,CAACC,QAAQ,EAAEC,QAAQ,EAAE;SAAE,IAAI,CAACR,eAAe,CAAC,IAAI,CAAC9K,KAAK,CAAC4L,sBAAsB,CAAC;;;IACtG;;GAEDzL,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAkQZ,CAAC;;CC1nBY;GAAA;GAAA;AAEb,CAcO,MAAM0L,aAAa,CAC1B;GAYCC,WAAW,CAACC,OAAO,GAAG,EAAE,EACxB;KAAA,KAZAC,WAAW,GAAG,EAAE;KAAA,KAChBrN,IAAI,GAAG,eAAe;KAAA,KACtBsN,GAAG,GAAG,IAAI;KAAA,KACVC,GAAG,GAAG,EAAE;KAAA,KACRC,gBAAgB,GAAG,kBAAkB;KAAA,KACrCC,eAAe,GAAG,iBAAiB;KAAA,KACnCC,YAAY,GAAG,IAAI;KAAA,KACnBC,aAAa,GAAG,KAAK;KAAA,KACrBC,UAAU,GAAG,GAAG;KAAA,KAChBC,GAAG,GAAG,IAAI;KAIT,IAAI,CAACrE,IAAI,GAAG4D,OAAO,CAAC5D,IAAI,IAAI,MAAM;KAClC,IAAI,CAAC/G,SAAS,GAAG,EAAE;KACnB,IAAI,CAAC4G,OAAO,GAAG+D,OAAO,CAAC/D,OAAO,IAAI,CAAC;KACnC,IAAI,CAACyE,MAAM,GAAGV,OAAO,CAACU,MAAM,IAAI,CAAC;KACjC,IAAI,CAACC,MAAM,GAAG,IAAI;KAClB,IAAI,CAAC7E,OAAO,GAAGkE,OAAO,CAAClE,OAAO,IAAI,IAAI;KACtC,IAAI,CAAC8E,eAAe,GAAGZ,OAAO,CAACY,eAAe,IAAI,IAAI;KACtD,IAAI,CAACC,aAAa,GAAGb,OAAO,CAACa,aAAa,IAAI,IAAI;KAClD,IAAI,CAAC9C,cAAc,GAAGiC,OAAO,CAACjC,cAAc,IAAI,IAAI;KACpD,IAAI,CAACrE,EAAE,GAAG8C,kBAAI,CAACsE,KAAK,EAAE;KAEtB,IAAI,CAACC,YAAY,GAAG,IAAI,CAACC,YAAY,CAAC3I,IAAI,CAAC,IAAI,CAAC;KAChD,IAAI,CAAC4I,qBAAqB,GAAG,IAAI,CAACC,iBAAiB,CAAC7I,IAAI,CAAC,IAAI,CAAC;KAC9D,IAAI,CAAC8I,cAAc,GAAG,IAAI,CAACC,UAAU,CAAC/I,IAAI,CAAC,IAAI,CAAC;KAChD,IAAI,CAACgJ,WAAW,GAAG,IAAI,CAACC,OAAO,CAACjJ,IAAI,CAAC,IAAI,CAAC;KAE1C,IAAI,CAACkJ,uBAAuB,GAAG7J,iBAAO,CAACC,QAAQ,CAAC,IAAI,CAAC6J,eAAe,EAAE,IAAI,CAAChB,UAAU,EAAE,IAAI,CAAC;KAE5F,IAAI,CAACiB,aAAa,GAAG,IAAIC,GAAG,EAAE;;GAG/BC,YAAY,CAACC,MAAM,EAAEC,cAAc,EACnC;KACC,IAAI,CAACD,MAAM,GAAGA,MAAM;KACpBlJ,6BAAY,CAACC,SAAS,CAACiJ,MAAM,EAAE,yBAAyB,EAAE,IAAI,CAACb,YAAY,CAAC;KAC5ErI,6BAAY,CAACC,SAAS,CAACiJ,MAAM,EAAE,kCAAkC,EAAE,IAAI,CAACP,WAAW,CAAC;KACpFjJ,eAAK,CAACC,IAAI,CAACC,QAAQ,EAAE,SAAS,EAAE,IAAI,CAAC6I,cAAc,CAAC;KAEpD,IAAI,CACFW,aAAa,CAACF,MAAM,CAAC,CACrB9H,IAAI,CAAEL,IAAI,IAAK;OACf,IAAIsI,cAAI,CAACC,UAAU,CAACH,cAAc,CAAC,EACnC;SACCA,cAAc,CAACpI,IAAI,CAAC;;MAErB,CAAC;KAEH,IAAI,CAACwI,MAAM,GAAG,IAAI;;GAGnBC,QAAQ,GACR;KACC,OAAO,IAAI,CAACD,MAAM;;GAGnBX,OAAO,GACP;KACC5I,6BAAY,CAACO,WAAW,CAAC,IAAI,CAAC2I,MAAM,EAAE,yBAAyB,EAAE,IAAI,CAACb,YAAY,CAAC;KACnFrI,6BAAY,CAACO,WAAW,CAAC,IAAI,CAAC2I,MAAM,EAAE,kCAAkC,EAAE,IAAI,CAACP,WAAW,CAAC;KAC3FjJ,eAAK,CAACc,MAAM,CAACZ,QAAQ,EAAE,SAAS,EAAE,IAAI,CAAC6I,cAAc,CAAC;KAEtD,IAAI,IAAI,CAACV,GAAG,EACZ;OACC,IAAI,CAACA,GAAG,CAAC0B,OAAO,EAAE;;KAGnB,IAAI,IAAI,CAACC,sBAAsB,IAAI,IAAI,CAACA,sBAAsB,CAACd,OAAO,EACtE;OACC,IAAI,CAACc,sBAAsB,CAACd,OAAO,EAAE;;KAGtC9E,kBAAI,CAAC6F,cAAc,EAAE;KACrB,IAAI,CAACJ,MAAM,GAAG,KAAK;;GAGpBjB,YAAY,CAAC/D,KAAK,EAClB;KAAA;KACC,IAAI,CAACA,KAAK,YAAYqF,0BAAS,EAC/B;OACC;;KAED,MAAM/N,IAAI,GAAG0I,KAAK,CAACE,OAAO,EAAE;KAC5B,MAAMyE,MAAM,aAAGrN,IAAI,CAAC,CAAC,CAAC,qBAAP,OAASqN,MAAM;KAE9B,IAAI,CAACzB,GAAG,CAACoC,OAAO,GAAGX,MAAM,CAACY,MAAM,CAACD,OAAO;;;KAGxC,IAAI,CAAC7I,EAAE,CAACD,IAAI,CAACmI,MAAM,CAACY,MAAM,CAACD,OAAO,EAAEX,MAAM,CAACzE,OAAO,EAAE,CAACsF,GAAG,CAAC,eAAe,CAAC,CAAC;KAC1E,IAAI,CAACV,cAAI,CAACW,MAAM,CAAC,IAAI,CAACxC,GAAG,CAAC,EAC1B;OACC,IAAI,CAACyC,YAAY,CAAC,IAAI,CAACzC,GAAG,CAAC;;KAG5B,IAAI,CAACI,YAAY,GAAG,IAAI,CAACD,eAAe;;GAGzCuC,mBAAmB,CAACtJ,IAAI,EACxB;KACC,IAAI,CAACA,IAAI,EACT;OACC;;KAED,MAAMuJ,MAAM,GAAGtJ,IAAI,CAACC,KAAK,CAACF,IAAI,CAAC,CAAC/E,IAAI,CAACsO,MAAM;KAC3C,MAAMC,OAAO,GAAG,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;OAChD,MAAMC,GAAG,GAAGL,MAAM,CAACK,GAAG;OACtBxJ,EAAE,CAACyJ,IAAI,CAACD,GAAG,EAAE,MAAM;SAClBxJ,EAAE,CAAC0J,UAAU,CAACP,MAAM,CAACQ,EAAE,EAAEL,OAAO,CAAC;QACjC,CAAC;MACF,CAAC;KACFF,OAAO,CAAChJ,IAAI,CAAC,MAAM;OAClB,MAAMwJ,OAAO,GAAGT,MAAM,CAACU,MAAM;OAC7B,MAAMC,WAAW,GAAGF,OAAO,CAACG,IAAI,CAAC,IAAI,CAAC;OACtC/J,EAAE,CAACD,IAAI,CAACnB,QAAQ,CAACoL,IAAI,EAAEF,WAAW,EAAE;SAAEG,eAAe,EAAE;QAAM,CAAC;MAC9D,CAAC;;GAGH7B,aAAa,CAACF,MAAM,EACpB;KACC,OAAO,IAAImB,OAAO,CAAEC,OAAO,IAAK;OAC/B,IAAI,CAACtJ,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC,gEAAgE,EAAE;SACxFrF,IAAI,EAAE;WACLuH,OAAO,EAAE,IAAI,CAACA,OAAO;WACrBS,QAAQ,EAAEC,kBAAI,CAACC,UAAU,CAAC,IAAI,CAACoE,aAAa,CAAC;WAC7C9C,cAAc,EAAE,IAAI,CAACA;UACrB;SACD6F,SAAS,EAAE;WACVC,IAAI,EAAE,IAAI;WACVC,QAAQ,EAAE,QAAQ;WAClB7G,KAAK,EAAE,WAAW;WAClB8G,SAAS,EAAE,WAAW;WACtBC,EAAE,EAAG,WAAU,IAAI,CAAClI,OAAQ;;QAE7B,CAAC,CAAChC,IAAI,CACLC,QAAQ,IAAK;SACb,MAAMkK,mBAAmB,GAAG3L,QAAQ,CAAC2B,aAAa,CAAC,KAAK,CAAC;SAEzD,IAAK8H,cAAI,CAACC,UAAU,CAACJ,MAAM,CAACsC,MAAM,CAAC,IAAItC,MAAM,CAACsC,MAAM,EAAE,IAAKtC,MAAM,CAACsC,MAAM,KAAK,IAAI,EACjF;WACC,MAAMzP,MAAM,GAAGsF,QAAQ,CAACxF,IAAI;WAC5BE,MAAM,CAACuD,WAAW,GAAG9E,OAAO,CAACuB,MAAM,CAAC4C,KAAK,CAACoE,EAAE,CAAC;WAC7C,IAAI,CAACpG,SAAS,GAAG,EAAE;WAEnB,KAAK,MAAM+H,MAAM,IAAI3I,MAAM,CAACY,SAAS,EACrC;aACC,IAAI,CAACA,SAAS,CAAC8F,IAAI,CAAC,GAAG1G,MAAM,CAACY,SAAS,CAAC+H,MAAM,CAAC,CAAC;;;;WAIjD,IAAI3I,MAAM,CAACyC,SAAS,EACpB;aACC,IAAI,CAAC0L,mBAAmB,CAACnO,MAAM,CAACyC,SAAS,CAAC;;WAG3C,IAAIzC,MAAM,CAAC2C,OAAO,EAClB;aACC,IAAI,CAACwL,mBAAmB,CAACnO,MAAM,CAAC2C,OAAO,CAAC;aACxC,IAAI,CAACsC,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC,+CAA+C,EAAE;eACvErF,IAAI,EAAE;iBAAEsF,WAAW,EAAEpF,MAAM,CAACoF;;cAC5B,CAAC;;;;WAIH,IAAI,CAAC4G,GAAG,GAAG0D,iBAAS,CAACC,SAAS,CAAC/P,eAAe,EAAE;aAC/CI,MAAM;aACNuI,qBAAqB,EAAE,IAAI,CAACuE,uBAAuB;aACnD8C,yBAAyB,EAAE,IAAI,CAACpD;YAChC,CAAC;WACF,IAAI,CAACR,GAAG,CAAC6D,KAAK,CAACL,mBAAmB,CAAC;WAEnCrC,MAAM,CAAC2C,aAAa,GAAGN,mBAAmB;;;WAG1C,IAAI,CAACvD,MAAM,GAAGjM,MAAM,CAACiM,MAAM;WAC3B,IAAI,CAACR,GAAG,GAAGzL,MAAM,CAACD,EAAE;WACpB,IAAI,CAACgQ,QAAQ,GAAG/P,MAAM,CAAC+P,QAAQ;WAC/B,IAAI,CAACzP,YAAY,GAAGN,MAAM,CAACM,YAAY;WACvC,IAAI,CAAC0P,qBAAqB,GAAGvR,OAAO,CAACuB,MAAM,CAACgQ,qBAAqB,CAAC;WAClE,IAAI,IAAI,CAACC,OAAO,IAAI,CAAC,IAAI,CAACD,qBAAqB,EAC/C;aACC,IAAI,CAACC,OAAO,CAACC,IAAI,EAAE;;WAEpB,IAAI,CAACC,eAAe,CAACnQ,MAAM,CAAC4C,KAAK,EAAE5C,MAAM,CAAC8C,SAAS,EAAE9C,MAAM,CAACoQ,OAAO,CAAC;WAEpE,IAAI,CAACC,YAAY,GAAGrQ,MAAM,CAACqQ,YAAY;WACvC,IAAI,CAAChO,kBAAkB,GAAGrC,MAAM,CAACqC,kBAAkB;;SAGpDkM,OAAO,CAACiB,mBAAmB,CAAC;QAC5B,EACAlK,QAAQ,IAAK;SACb,IAAIA,QAAQ,CAACgL,MAAM,IAAIhL,QAAQ,CAACgL,MAAM,CAACrJ,MAAM,GAAG,CAAC,EACjD;WACCkG,MAAM,CAACzE,OAAO,EAAE,CAAC6H,GAAG,CACnB,eAAe,EACf,qCAAqC,GACpC,2CAA2C,GAC3C,+CAA+C,GAC9C,0CAAyCC,cAAI,CAACC,MAAM,CAACnL,QAAQ,CAACgL,MAAM,CAAC,CAAC,CAAC,CAACI,OAAO,CAAE,OAAM,GACxF,QAAQ,GACR,QAAQ,CACT;;SAGF,IAAIpL,QAAQ,CAACxF,IAAI,IAAI,CAACwN,cAAI,CAACqD,KAAK,CAACrL,QAAQ,CAACxF,IAAI,CAAC8Q,WAAW,CAAC,IAAI,CAACtL,QAAQ,CAACxF,IAAI,CAAC8Q,WAAW,EACzF;WACC,MAAMC,kBAAkB,GAAG,MAAM;aAChCC,GAAG,CAAC7L,EAAE,CAAC8L,EAAE,CAACC,UAAU,CAACC,IAAI,CAAC,2BAA2B,EAAE;eACtDC,OAAO,EAAE,IAAI;eACbC,oBAAoB,EAAE;iBACrBC,MAAM,EAAE,UAAU;iBAClBC,MAAM,EAAE;;cAET,CAAC;YACF;WAED,IAAI,IAAI,CAAClE,MAAM,EACf;aACC,IAAI,CAACA,MAAM,CAACmE,KAAK,CAAC,IAAI,EAAET,kBAAkB,CAAC;YAC3C,MAED;aACCA,kBAAkB,EAAE;;;SAItBU,OAAO,CAACC,KAAK,CAAClM,QAAQ,CAACgL,MAAM,CAAC;SAC9B/B,OAAO,CAACjJ,QAAQ,CAAC;QACjB,CACD;MACD,CAAC;;GAGH4I,YAAY,CAACzC,GAAG,EAChB;KAAA;KACC,IAAI,CAACC,GAAG,CAAC+F,KAAK,GAAG,IAAI,CAAC/F,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,QAAO,CAAC;KAChE,IAAI,CAACC,GAAG,CAACiG,SAAS,GAAG,IAAI,CAACjG,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,YAAW,CAAC;KACxE,IAAI,CAACC,GAAG,CAACkG,UAAU,GAAG,IAAI,CAAClG,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,WAAU,CAAC;KACxE,IAAI,IAAI,CAACpJ,kBAAkB,EAC3B;OACC,IAAI,CAACqJ,GAAG,CAACmG,cAAc,GAAG,IAAI,CAACnG,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,eAAc,CAAC;;KAEjF,IAAI,CAACC,GAAG,CAACoG,SAAS,GAAG,IAAI,CAACpG,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,UAAS,CAAC;KACtE,IAAI,CAACC,GAAG,CAACqG,YAAY,GAAG,IAAI,CAACrG,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,gBAAe,CAAC;KAE/E,IAAI,IAAI,CAACC,GAAG,CAACiG,SAAS,EACtB;OACC,IAAI,CAACK,kBAAkB,CAACvG,GAAG,CAAC;;KAG7B,MAAMwG,aAAa,GAAG,IAAI,CAACvG,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,kBAAiB,CAAC;KAC/E,IAAI6B,cAAI,CAAC4E,aAAa,CAACD,aAAa,CAAC,IAAIA,aAAa,CAACnI,YAAY,GAAG,EAAE,EACxE;OACCqI,aAAG,CAACC,QAAQ,CAAC,IAAI,CAAC1G,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,YAAW,CAAC,EAAE,wCAAwC,CAAC;;KAG5G,IAAI,CAAC,IAAI,CAAC4G,KAAK,CAAC,MAAM,CAAC,IAAI,IAAI,CAACA,KAAK,CAAC,cAAc,CAAC,IAAI,IAAI,CAACA,KAAK,CAAC,eAAe,CAAC,KAAK,IAAI,CAAC3G,GAAG,CAACkG,UAAU,EAC5G;OACCjO,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8H,GAAG,CAACkG,UAAU,EAAE,OAAO,EAAE,IAAI,CAACU,qBAAqB,CAAC1O,IAAI,CAAC,IAAI,CAAC,CAAC;;KAGhF,IAAI,IAAI,CAAC8H,GAAG,CAACqG,YAAY,EACzB;;OAEC,IAAI,CAACrG,GAAG,CAAC6G,YAAY,GAAG,IAAI,CAAC7G,GAAG,CAACqG,YAAY,CAACL,aAAa,CAAC,sCAAsC,CAAC;OACnG,IAAIpE,cAAI,CAACkF,SAAS,CAAC,IAAI,CAAC9G,GAAG,CAAC6G,YAAY,CAAC,EACzC;SACCJ,aAAG,CAACM,KAAK,CAAC,IAAI,CAAC/G,GAAG,CAAC6G,YAAY,CAAC;SAChC,MAAMG,QAAQ,GAAG,CAAC,IAAI,CAACL,KAAK,CAAC,MAAM,CAAC,IAChC,IAAI,CAACzP,KAAK,CAAC+P,gBAAgB,EAAE,KAAK,KAAK;SAE3C,IAAI,CAACC,eAAe,GAAG,IAAI,IAAI,CAAC3N,EAAE,CAAC6D,QAAQ,CAAC+J,QAAQ,CAACC,QAAQ,CAAC;WAC7DC,IAAI,EAAE,IAAI,CAACrH,GAAG,CAAC6G,YAAY;WAC3BrG,MAAM,EAAE,IAAI,CAACA,MAAM;WACnBwG;UACA,CAAC;SACF,IAAI,CAACE,eAAe,CAACI,QAAQ,CAAC,IAAI,CAACpQ,KAAK,CAACqQ,YAAY,EAAE,CAAC;SAExD,IAAI,CAACP,QAAQ,EACb;WACC,IAAI,CAACE,eAAe,CAAC1O,SAAS,CAAC,UAAU,EAAGsE,KAAK,IAAK;aACrD,IAAIA,KAAK,YAAYqF,0BAAS,EAC9B;eACC,IAAI,CAACqF,mBAAmB,EAAE;eAC1B,IAAI,CAACC,cAAc,GAAG3K,KAAK,CAACE,OAAO,EAAE,CAAC0K,MAAM;eAC5C,IAAI,CAACnO,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC,2CAA2C,EAAE;iBACnErF,IAAI,EAAE;mBACLuH,OAAO,EAAE,IAAI,CAACzE,KAAK,CAAC7C,EAAE;mBACtBkM,MAAM,EAAE,IAAI,CAACA,MAAM;mBACnBoH,SAAS,EAAE,IAAI,CAACF;;gBAEjB,CAAC;;YAEH,CAAC;;;OAIJ,MAAMG,KAAK,GAAG,IAAI,CAAC5H,GAAG,CAACqG,YAAY,CAACjM,gBAAgB,CAAC,wCAAwC,CAAC;OAC9F,IAAIwN,KAAK,CAACrM,MAAM,IAAI,CAAC,EACrB;SACC,IAAI,CAAChC,EAAE,CAACsO,WAAW,CAACD,KAAK,CAACA,KAAK,CAACrM,MAAM,GAAG,CAAC,CAAC,EAAE,uCAAuC,CAAC;;;KAIvF,IAAI,IAAI,CAAC5E,kBAAkB,EAC3B;OACCsB,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8H,GAAG,CAACmG,cAAc,EAAE,OAAO,EAAE,MAAM2B,2BAAY,CAACC,WAAW,CAAC,IAAI,CAACpM,OAAO,CAAC,CAAC;;KAG3F,IAAI,IAAI,CAACgL,KAAK,CAAC,QAAQ,CAAC,EACxB;OACC1O,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8H,GAAG,CAACoG,SAAS,EAAE,OAAO,EAAE,MAAM;SAC7C7N,6BAAY,CAACyP,aAAa,CAAC,gCAAgC,EAAE,MAAM;WAClE,IAAI,CAACzO,EAAE,CAAC0O,SAAS,CAACC,QAAQ,CAACtC,KAAK,EAAE;UAClC,CAAC;SACFkC,2BAAY,CAACK,WAAW,CAAC,IAAI,CAACjR,KAAK,EAAE,IAAI,CAACuJ,eAAe,CAAC;QAC1D,CAAC;MACF,MAED;OACC,IAAI,CAAClH,EAAE,CAACiB,MAAM,CAAC,IAAI,CAACwF,GAAG,CAACoG,SAAS,CAAC;;KAGnC,MAAMgC,SAAS,GAAI,GAAErI,GAAI,IAAG,IAAI,CAAC7I,KAAK,CAAC7C,EAAG,aAAY;KACtD,IAAI+T,SAAS,EACb;OACC,MAAMC,UAAU,GAAI,OAAO3N,MAAM,CAAC0K,GAAG,CAAC7L,EAAE,CAAC+O,eAAe,KAAK,UAAU,GAAG5N,MAAM,CAAC0K,GAAG,CAAC7L,EAAE,GAAGmB,MAAM,CAACnB,EAAG;OACpG8O,UAAU,CAACC,eAAe,CACzBF,SAAS,EACT;SACCG,SAAS,EAAE;QACX,EACAC,IAAI,IAAK;SACT,OAAO5G,cAAI,CAAC4E,aAAa,CAACgC,IAAI,CAAC,KAAKA,IAAI,CAACC,YAAY,CAAC,gBAAgB,CAAC,IAAID,IAAI,CAACC,YAAY,CAAC,eAAe,CAAC,CAAC;QAC9G,CACD;;KAGF,IAAI,CAACzI,GAAG,CAAC0I,YAAY,GAAG,IAAI,CAAC1I,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,qBAAoB,CAAC;KAEpF,IACC,IAAI,CAACC,GAAG,CAAC0I,YAAY,IAClB,IAAI,CAAC/B,KAAK,CAAC,MAAM,CAAC,IAClB,CAAC,cAAc,EAAE,WAAW,CAAC,CAACgC,QAAQ,gBAAC,IAAI,CAACzR,KAAK,yCAAV,YAAY9C,IAAI,qBAAhB,iBAAkBwU,UAAU,CAAC,EAExE;OACC,IAAI,CAACC,eAAe,GAAG,IAAIC,yCAAiB,CAAC;SAC5CvO,UAAU,EAAE,IAAI,CAACyF,GAAG,CAAC0I,YAAY;SACjCnU,OAAO,EAAE,IAAI,CAAC2C,KAAK,CAACqG;QACpB,CAAC;OACFkJ,aAAG,CAACsC,MAAM,CAAC,IAAI,CAACF,eAAe,CAACG,MAAM,EAAE,EAAE,IAAI,CAAChJ,GAAG,CAAC0I,YAAY,CAAC;;KAGjE,IAAI,IAAI,CAACxR,KAAK,IAAI,IAAI,CAACA,KAAK,CAACpC,SAAS,EAAE,EACxC;OACC,IAAI,CAACmU,wBAAwB,CAAClJ,GAAG,CAAC;;KAGnC,IAAI,IAAI,CAACC,GAAG,CAACqG,YAAY,EACzB;OACC,MAAMuB,KAAK,GAAG,IAAI,CAAC5H,GAAG,CAACqG,YAAY,CAACjM,gBAAgB,CAAC,wCAAwC,CAAC;OAC9F,IAAIwN,KAAK,CAACrM,MAAM,IAAI,CAAC,EACrB;SACC,IAAI,CAAChC,EAAE,CAACsO,WAAW,CAACD,KAAK,CAACA,KAAK,CAACrM,MAAM,GAAG,CAAC,CAAC,EAAE,uCAAuC,CAAC;;;KAIvF,IAAI,CAACyE,GAAG,CAACkJ,UAAU,GAAG,IAAI,CAAClJ,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,eAAc,CAAC;KAC5E,IAAI,IAAI,CAACC,GAAG,CAACkJ,UAAU,EACvB;OACCjR,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8H,GAAG,CAACkJ,UAAU,EAAE,OAAO,EAAE,IAAI,CAACC,YAAY,CAACjR,IAAI,CAAC,IAAI,CAAC,CAAC;;;;KAIvE,IAAI,CAAC8H,GAAG,CAACoJ,SAAS,GAAG,IAAI,CAACpJ,GAAG,CAACqG,YAAY,CAACL,aAAa,CAAC,oCAAoC,CAAC;KAC9FS,aAAG,CAACM,KAAK,CAAC,IAAI,CAAC/G,GAAG,CAACoJ,SAAS,CAAC;KAC7B,IACCxH,cAAI,CAAC4E,aAAa,CAAC,IAAI,CAACxG,GAAG,CAACoJ,SAAS,CAAC,IACnC,IAAI,CAAClS,KAAK,IACV,IAAI,CAACA,KAAK,CAAC9C,IAAI,CAACkJ,SAAS,KAE3B,IAAI,CAACpG,KAAK,CAAC9C,IAAI,CAACwU,UAAU,KAAK,UAAU,IACtC,IAAI,CAAC1R,KAAK,CAAC9C,IAAI,CAACwU,UAAU,KAAK,cAAc,CAChD,EAEF;OACC,IAAI,CAAC5I,GAAG,CAACoJ,SAAS,CAAC1K,KAAK,CAAC2K,OAAO,GAAG,EAAE;OACrC,IAAI,CAACC,gBAAgB,GAAGC,aAAG,CAACP,MAAM,cAAC;;;QAGhC,CAA2C;;;IAG9C,GAHKQ,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,CAG5C;OACDxR,eAAK,CAACC,IAAI,CAAC,IAAI,CAACoR,gBAAgB,EAAE,OAAO,EAAE,IAAI,CAACI,2BAA2B,CAACxR,IAAI,CAAC,IAAI,CAAC,CAAC;OAEvFuO,aAAG,CAACsC,MAAM,CAAC,IAAI,CAACO,gBAAgB,EAAE,IAAI,CAACtJ,GAAG,CAACoJ,SAAS,CAAC;MACrD,MACI,IACJ,OAAA7P,EAAE,6BAAF,IAAIoQ,QAAQ,aAAZ,aAAcC,aAAa,IACxBhI,cAAI,CAAC4E,aAAa,CAAC,IAAI,CAACxG,GAAG,CAACoJ,SAAS,CAAC,IACtC,IAAI,CAAClS,KAAK,CAAC+P,gBAAgB,EAAE,KAAK,KAAK,EAE3C;OACC,IAAI,CAACjH,GAAG,CAACoJ,SAAS,CAAC1K,KAAK,CAAC2K,OAAO,GAAG,EAAE;OAErC,MAAMzB,KAAK,GAAG,IAAI,CAACjD,YAAY,GAC5B,CAAC,MAAM,EAAE,WAAW,EAAE,MAAM,CAAC,GAC7B,CAAC,MAAM,EAAE,WAAW,EAAE,WAAW,EAAE,MAAM,CAAC;OAG7C,IAAI,CAAC1C,sBAAsB,GAAG,IAAI4H,gCAAc,CAAC;SAChDC,2BAA2B,EAAE;WAC5BlC,KAAK;WACLmC,SAAS,EAAE,IAAI,CAAC/J,GAAG,CAACoJ,SAAS;WAC7BY,UAAU,EAAE,gBAAgB;WAC5BC,QAAQ,EAAE,IAAI,CAAC/S,KAAK,CAACqG,QAAQ;WAC7B2M,UAAU,EAAE;aACX9N,QAAQ,EAAEC,kBAAI,CAACC,UAAU,CAAC,IAAI,CAACpF,KAAK,CAACqF,IAAI,CAAC;aAC1CgB,QAAQ,EAAE,IAAI,CAACrG,KAAK,CAACqG;YACrB;WACDkG,SAAS,EAAE;aACV0G,cAAc,EAAE;eACfzG,IAAI,EAAE,IAAI;eACVC,QAAQ,EAAE,QAAQ;eAClB7G,KAAK,EAAE,YAAY;eACnBb,IAAI,EAAE,OAAO;eACb2H,SAAS,EAAE,WAAW;eACtBwG,aAAa,EAAE,cAAc;eAC7BvG,EAAE,EAAG,WAAU,IAAI,CAAC3M,KAAK,CAACqG,QAAS;;;UAGrC;SACD8M,SAAS,EAAE;WACVC,aAAa,EAAE,MAAM,IAAI,CAACpV,SAAS,CAACqG,MAAM;WAC1CgP,OAAO,EAAE;aAAA;aAAA,OAAM,0BAAI,CAACrT,KAAK,CAAC9C,IAAI,8CAAf,kBAAiBoW,OAAO,qBAAxB,sBAA0BC,OAAO,IAAG,CAAC;;;QAErD,CAAC;MACF,MAED;OACC,IAAI,CAACzK,GAAG,CAACoJ,SAAS,CAAC1K,KAAK,CAAC2K,OAAO,GAAG,MAAM;;;GAI3C5E,eAAe,CAACrQ,IAAI,EAAEgD,SAAS,EAAEsT,WAAW,EAC5C;KACC,IAAI,CAACxT,KAAK,GAAG,IAAIC,oBAAK,CAAC;OAAE/C,IAAI;OAAEgD;MAAW,CAAC;KAC3C,IAAI,CAACsN,OAAO,GAAG,IAAIiG,uCAAe,CAACD,WAAW,CAAC;KAE/C,IAAI9I,cAAI,CAACgJ,aAAa,CAACF,WAAW,CAAC,EACnC;OACC,IAAI,CAAC5K,WAAW,GAAG4K,WAAW,CAACG,IAAI;;KAGpC/C,2BAAY,CAACgD,mBAAmB,CAAC,IAAI,CAAC5T,KAAK,EAAE,IAAI,CAAC;;GAGnDoP,kBAAkB,CAACvG,GAAG,EACtB;KACC,IAAI,CAACgL,SAAS,GAAI,GAAEhL,GAAI,sBAAqB;KAC7C,IAAI,CAACC,GAAG,CAACgL,gBAAgB,GAAG,IAAI,CAAChL,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAC,kCAAkC,CAAC;KAC9F,IAAI,CAAChG,GAAG,CAACiL,WAAW,GAAG,IAAI,CAACjL,GAAG,CAACgL,gBAAgB,CAAChF,aAAa,CAAC,6BAA6B,CAAC;KAC7FS,aAAG,CAACM,KAAK,CAAC,IAAI,CAAC/G,GAAG,CAACiL,WAAW,CAAC;KAC/B,IAAI,CAAC1G,OAAO,GAAG,IAAI2G,wBAAO,CAAC;OAC1B7D,IAAI,EAAE,IAAI,CAACrH,GAAG,CAACiL,WAAW;OAC1BE,QAAQ,EAAE3W,QAAQ,CAAC,IAAI,CAACwL,GAAG,CAACiL,WAAW,CAACG,WAAW,CAAC;OACpDC,WAAW,EAAE,IAAI;OACjBC,QAAQ,EAAE,IAAI;OACdC,MAAM,EAAE,CAAC,IAAI,CAACjH,qBAAqB;OACnCkH,UAAU,EAAE;MACZ,CAAC;KAEF,IAAI,CAACjH,OAAO,CAACgB,IAAI,EAAE;KACnB,IAAI,CAAChB,OAAO,CAACkH,UAAU,EAAE;KACzB,IAAI,CAAClH,OAAO,CAACmH,eAAe,CAAC,IAAI,CAACxW,SAAS,CAACqG,MAAM,CAAC;KAEnDwC,UAAU,CAAC,MAAM;OAChB,IAAI,IAAI,CAACiC,GAAG,CAACgL,gBAAgB,EAC7B;SACCvE,aAAG,CAACoB,WAAW,CAAC,IAAI,CAAC7H,GAAG,CAACgL,gBAAgB,EAAE,QAAQ,CAAC;;MAErD,EAAE,GAAG,CAAC;KAEP,MAAMtP,WAAW,GAAG;OACnBC,OAAO,EAAE,IAAI,CAACzE,KAAK,CAAC7C,EAAE,IAAI,CAAC;OAC3BuH,aAAa,EAAE,IAAI,CAAC1E,KAAK,CAAC9C,IAAI,CAACyH,QAAQ,IAAI,EAAE;OAC7CC,OAAO,EAAE,IAAI,CAACA,OAAO;OACrBC,MAAM,EAAE,IAAI,CAAC7E,KAAK,CAAC8E,cAAc,EAAE;OACnCC,IAAI,EAAE,IAAI,CAACA,IAAI;OACfC,UAAU,EAAE,IAAI,CAAChF,KAAK,CAACiF,sBAAsB,EAAE;OAC/CC,QAAQ,EAAEC,kBAAI,CAACC,UAAU,CAAC,IAAI,CAACpF,KAAK,CAACqF,IAAI,CAACC,OAAO,EAAE,GAAGH,kBAAI,CAACI,YAAY,EAAE,GAAG,CAAC,CAAC;OAC9EC,MAAM,EAAEL,kBAAI,CAACC,UAAU,CAAC,IAAI,CAACpF,KAAK,CAACyF,EAAE,CAACH,OAAO,EAAE,GAAGH,kBAAI,CAACI,YAAY,EAAE,GAAG,EAAE,CAAC;OAC3E9H,QAAQ,EAAE,IAAI,CAACC,YAAY;OAC3B6B,QAAQ,EAAE,IAAI,CAACS,KAAK,CAAC0F,WAAW,EAAE;OAClC1F,KAAK,EAAE,IAAI,CAACA;MACZ;KAED,IAAI,CAACkK,uBAAuB,CAAC1F,WAAW,CAAC;;GAG1CqF,iBAAiB,CAACyH,IAAI,EAAElT,QAAQ,EAChC;KACC,IAAI,IAAI,CAACqW,aAAa,EACtB;OACC,IAAI,CAACA,aAAa,CAAC/F,KAAK,EAAE;;KAG3B,IAAItQ,QAAQ,IAAIA,QAAQ,CAACiG,MAAM,GAAG,CAAC,EACnC;OACC,IAAI,CAACyE,GAAG,CAAC4L,iBAAiB,GAAG,IAAI,CAACrS,EAAE,CAACsS,MAAM,CAAC,KAAK,EAAE;SAAEnZ,KAAK,EAAE;WAAEoZ,SAAS,EAAE;;QAAoC,CAAC;OAC9GxW,QAAQ,CAACwF,OAAO,CAAC,UAASjI,IAAI,EAC9B;SACC,IAAIkZ,UAAU,GAAI;;;;KAIjB;SACD,IAAIlZ,IAAI,CAACK,MAAM,IAAIL,IAAI,CAACK,MAAM,KAAK,sBAAsB,EACzD;WACC6Y,UAAU,GAAI,aAAYC,SAAS,CAACnZ,IAAI,CAACK,MAAM,CAAE,2BAA0B;;SAG5E,IAAIL,IAAI,CAACI,UAAU,EACnB;WACC8Y,UAAU,GAAI;;;;MAIb;;SAGF,IAAIlZ,IAAI,CAACG,YAAY,EACrB;WACC+Y,UAAU,GAAI;;;;MAIb;;SAGF,IAAIlZ,IAAI,CAACC,WAAW,EACpB;WACC,MAAMY,WAAW,GAAGb,IAAI,CAACK,MAAM,IAAIL,IAAI,CAACK,MAAM,KAAK,sBAAsB,GACtEL,IAAI,CAACK,MAAM,GACX,IAAI;WAEP6Y,UAAU,GAAG,IAAIxY,0BAAgB,CAChC;aACCC,IAAI,EAAE,EAAE;aACRC,QAAQ,EAAEZ,IAAI,CAACO,YAAY;aAC3BM,WAAW;aACXE,SAAS,EAAE;YACX,CACD,CAACqY,YAAY,EAAE;;SAGjB,MAAMC,QAAQ,GAAG3C,aAAG,CAACP,MAAM,gBAAC;;;;UAIxB,CAAa;;;;kBAIL,CAA4B;wDACU,CAAiD;;UAE/F,CAAiC;;;;KAIrC,GAXM+C,UAAU,EAIFlZ,IAAI,CAACsZ,GAAG,GAAGtZ,IAAI,CAACsZ,GAAG,GAAG,GAAG,EACatZ,IAAI,CAACC,WAAW,GAAG,sBAAsB,GAAG,EAAE,EAE5FgS,cAAI,CAACC,MAAM,CAAClS,IAAI,CAACO,YAAY,CAAC,CAInC;SACD,IAAI,CAAC4M,GAAG,CAAC4L,iBAAiB,CAAC7C,MAAM,CAACmD,QAAQ,CAAC;QAC3C,EAAE,IAAI,CAAC;OAER,IAAI,CAACP,aAAa,GAAG,IAAI,CAACpS,EAAE,CAAC6S,kBAAkB,CAACP,MAAM,CAAE,mBAAkBQ,IAAI,CAACC,MAAM,EAAG,EAAC,EAAE9D,IAAI,EAAE;SAChG+D,QAAQ,EAAE,IAAI;SACdC,UAAU,EAAE,IAAI;SAChBC,SAAS,EAAE,CAAC;SACZC,UAAU,EAAElE,IAAI,CAAC4C,WAAW,GAAG,CAAC;SAChCuB,SAAS,EAAE,KAAK;SAChBC,WAAW,EAAE,IAAI;SACjBxK,OAAO,EAAE,IAAI,CAACpC,GAAG,CAAC4L,iBAAiB;SACnCE,SAAS,EAAE,0BAA0B;SACrCe,QAAQ,EAAE,GAAG;SACbC,SAAS,EAAE,GAAG;SACdtM,MAAM,EAAE,IAAI;SACZuM,KAAK,EAAE;WACNC,QAAQ,EAAE;;QAEX,CAAC;OAEF,IAAI,CAACrB,aAAa,CAACpG,IAAI,EAAE;OACzB,IAAI,CAAChM,EAAE,CAAC0T,cAAc,CAAC,IAAI,CAACtB,aAAa,EAAE,cAAc,EAAE,MAAM;SAChE,IAAI,CAACA,aAAa,CAACxK,OAAO,EAAE;QAC5B,CAAC;;;GAIJ8H,wBAAwB,CAAClJ,GAAG,EAC5B;KACC,IAAI,CAACC,GAAG,CAACkN,eAAe,GAAG,IAAI,CAAClN,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,mBAAkB,CAAC;KACrF,IAAI,CAACC,GAAG,CAACkN,eAAe,CAACxO,KAAK,CAACyO,WAAW,GAAG,MAAM;KAEnD,IAAI,IAAI,CAACjW,KAAK,CAAC+P,gBAAgB,EAAE,KAAK,GAAG,IAAI,IAAI,CAAC/P,KAAK,CAAC+P,gBAAgB,EAAE,KAAK,KAAK,EACpF;OACCR,aAAG,CAACjM,MAAM,CAAC,IAAI,CAACwF,GAAG,CAACkN,eAAe,CAAC;MACpC,MAED;OACC,IAAI,CAACE,aAAa,GAAG,IAAIC,sCAAoB,CAC5C;SACChG,IAAI,EAAE,IAAI,CAACrH,GAAG,CAACkN,eAAe;SAC9BI,aAAa,EAAE,IAAI,CAACtN,GAAG,CAACoC,OAAO,CAAC4D,aAAa,CAAE,IAAGjG,GAAI,iBAAgB,CAAC,CAACwN,KAAK,IAAI,IAAI,CAACrW,KAAK,CAAC+P,gBAAgB;QAC5G,CACD;OAED,IAAI,CAACmG,aAAa,CAAC5U,SAAS,CAAC,aAAa,EAAGsE,KAAK,IAAK;SACtD,IAAIA,KAAK,YAAYqF,0BAAS,EAC9B;WACC,IAAI,CAACqF,mBAAmB,EAAE;WAC1BM,2BAAY,CAAC0F,gBAAgB,CAAC,IAAI,CAACtW,KAAK,EAAE4F,KAAK,CAACE,OAAO,EAAE,CAACC,MAAM,CAAC,CAC/DtD,IAAI,CAAC,MAAM;aACX,IAAI,CAACyT,aAAa,CAACK,SAAS,CAAC,IAAI,CAACvW,KAAK,CAAC+P,gBAAgB,EAAE,EAAE,KAAK,CAAC;aAClE,IAAI,CAACmG,aAAa,CAACM,YAAY,EAAE;aAEjC,IAAI,IAAI,CAACxW,KAAK,CAAC+P,gBAAgB,EAAE,KAAK,GAAG,EACzC;eACChP,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8H,GAAG,CAACkG,UAAU,EAAE,OAAO,EAAE,IAAI,CAACU,qBAAqB,CAAC1O,IAAI,CAAC,IAAI,CAAC,CAAC;cAC/E,MAED;eACCD,eAAK,CAACc,MAAM,CAAC,IAAI,CAACiH,GAAG,CAACkG,UAAU,EAAE,OAAO,EAAE,IAAI,CAACU,qBAAqB,CAAC1O,IAAI,CAAC,IAAI,CAAC,CAAC;;aAGlFK,6BAAY,CAACoV,IAAI,CAAE,wBAAuB5N,GAAI,cAAa,EAAEjD,KAAK,CAAC;YACnE,CAAC;;QAEJ,CAAC;;;GAIJqM,YAAY,GACZ;KACC,IAAI,CAAC,IAAI,CAAC9E,QAAQ,IAAI,CAAC,IAAI,CAAC9K,EAAE,CAACqU,SAAS,CAACC,IAAI,CAACnT,MAAM,CAACjE,QAAQ,CAACqX,MAAM,GAAG,IAAI,CAACzJ,QAAQ,CAAC,EACrF;OACC;;KAGD,IAAI,CAAC0J,UAAU,GAAG,IAAI,CAACA,UAAU,IAAI,EAAE;KACvC,MAAM5P,KAAK,GAAG,IAAI,IAAI,CAAC5E,EAAE,CAACyU,WAAW,CACnC,2BAA0BlJ,cAAI,CAACmJ,SAAS,EAAE,CAAChT,WAAW,EAAG,EAAC,EAC3D,IAAI,CAAC+E,GAAG,CAACkJ,UAAU,EACnB;OACC9G,OAAO,EAAEoH,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;OAC5DyE,QAAQ,EAAE,IAAI;OACd3B,QAAQ,EAAE,IAAI;OACd/L,MAAM,EAAE,IAAI;OACZuM,KAAK,EAAE,IAAI;OACXL,UAAU,EAAE,EAAE;OACdyB,QAAQ,EAAE;MACV,CACD;KACDhQ,KAAK,CAACoH,IAAI,EAAE;KAEZ,IAAI6I,SAAS;KACb,OAAOA,SAAS,GAAG,IAAI,CAACL,UAAU,CAACM,GAAG,EAAE,EACxC;OACCC,YAAY,CAACF,SAAS,CAAC;;KAExB,IAAI,CAACL,UAAU,CAAC/S,IAAI,CAAC+C,UAAU,CAAC,MAAM;OACrCI,KAAK,CAACyH,KAAK,EAAE;MACb,EAAE,IAAI,CAAC,CAAC;;GAGVe,KAAK,CAAC4H,MAAM,EACZ;KACC,IAAKA,MAAM,KAAK,MAAM,IAAIA,MAAM,KAAK,QAAQ,EAC7C;OACC,IAAI,IAAI,CAACrX,KAAK,CAACsX,iBAAiB,EAAE,EAClC;SACC,OAAO,KAAK;;OAGb,IAAI,IAAI,CAACtX,KAAK,CAAC4I,WAAW,EAC1B;SAAA;SACC,gCAAO,IAAI,CAAC5I,KAAK,CAAC4I,WAAW,qBAAtB,sBAAwB2O,IAAI;;OAGpC,OAAO,IAAI,CAAC/J,OAAO,CAACiC,KAAK,CAAC,MAAM,CAAC;;KAGlC,IAAK4H,MAAM,KAAK,MAAM,EACtB;OACC,IAAI,IAAI,CAACrX,KAAK,CAAC4I,WAAW,EAC1B;SAAA;SACC,iCAAO,IAAI,CAAC5I,KAAK,CAAC4I,WAAW,qBAAtB,uBAAwB4O,SAAS;;OAGzC,OAAO,IAAI,CAAC5O,WAAW,CAAC4O,SAAS;;KAGlC,MAAMC,mBAAmB,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAChG,QAAQ,CAAC,IAAI,CAACzR,KAAK,CAAC+P,gBAAgB,EAAE,CAAC;KAC9E,IAAIsH,MAAM,KAAK,cAAc,EAC7B;OAAA;OACC,MAAMK,OAAO,GAAG,+BAAI,CAAC1X,KAAK,CAAC4I,WAAW,qBAAtB,uBAAwB2O,IAAI,MAAK,IAAI;OACrD,MAAMI,eAAe,GAAG,+BAAI,CAAC3X,KAAK,CAAC4I,WAAW,qBAAtB,uBAAwBgP,YAAY,MAAK,IAAI;OAErE,OAAO,CAACH,mBAAmB,KAAKC,OAAO,IAAIC,eAAe,CAAC;;KAG5D,IAAIN,MAAM,KAAK,eAAe,EAC9B;OAAA;OACC,MAAMK,OAAO,GAAG,+BAAI,CAAC1X,KAAK,CAAC4I,WAAW,qBAAtB,uBAAwB2O,IAAI,MAAK,IAAI;OACrD,MAAMM,gBAAgB,GAAG,+BAAI,CAAC7X,KAAK,CAAC4I,WAAW,qBAAtB,uBAAwBkP,aAAa,MAAK,IAAI;OAEvE,OAAO,CAACL,mBAAmB,KAAKC,OAAO,IAAIG,gBAAgB,CAAC;;KAG7D,OAAO,KAAK;;GAGbE,cAAc,GACd;KACC,OAAO,IAAI,CAACjP,GAAG,CAACiL,WAAW,IAAIxE,aAAG,CAACyI,QAAQ,CAAC,IAAI,CAAClP,GAAG,CAACiL,WAAW,EAAE,kCAAkC,CAAC;;GAGtG5J,eAAe,CAAC3F,WAAW,EAC3B;KACC,OAAO,IAAIkH,OAAO,CAAEC,OAAO,IAAK;OAC/B,IAAI,CAACtJ,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC,yCAAyC,EAAE;SACjErF,IAAI,EAAEsH;QACN,CAAC,CAAC/B,IAAI,CACLC,QAAQ,IAAK;SACb,IAAI,CAAC2K,OAAO,CAAC4K,UAAU,EAAE;SACzB,IAAI,CAAC5K,OAAO,CAAC6K,MAAM,CAClBxV,QAAQ,CAACxF,IAAI,CAACib,OAAO,EACrBzV,QAAQ,CAACxF,IAAI,CAACkC,aAAa,CAC3B;SAED,IAAI,CAACiO,OAAO,CAAC+K,cAAc,CAC1BjT,kBAAI,CAACkT,2BAA2B,CAC/B7T,WAAW,CAACxE,KAAK,CAACqF,IAAI,EACtBb,WAAW,CAACxE,KAAK,CAACsY,sBAAsB,EACxC9T,WAAW,CAACxE,KAAK,CAACuY,OAAO,CACzB,EACDpT,kBAAI,CAACkT,2BAA2B,CAC/B7T,WAAW,CAACxE,KAAK,CAACyF,EAAE,EACpBjB,WAAW,CAACxE,KAAK,CAACwY,oBAAoB,EACtChU,WAAW,CAACxE,KAAK,CAACuY,OAAO,CACzB,EACD/T,WAAW,CAACxE,KAAK,CAACuY,OAAO,CAEzB;SACD5M,OAAO,CAACjJ,QAAQ,CAAC;QACjB,EACAA,QAAQ,IAAK;SACbiJ,OAAO,CAACjJ,QAAQ,CAAC;QACjB,CACD;MACD,CAAC;;GAGHqH,UAAU,CAACxG,CAAC,EACZ;KACC,IAEEA,CAAC,CAACkV,OAAO,KAAKtT,kBAAI,CAACuT,UAAU,CAAC,QAAQ;;QAGpC,IAAI,CAACjJ,KAAK,CAAC,QAAQ,CAAC,EACxB;OACC,MAAMkJ,MAAM,GAAG/S,KAAK,CAAC+S,MAAM,IAAI/S,KAAK,CAACgT,UAAU;OAC/C,MAAMC,OAAO,GAAGnO,cAAI,CAAC4E,aAAa,CAACqJ,MAAM,CAAC,GAAGA,MAAM,CAACE,OAAO,CAAC9U,WAAW,EAAE,GAAG,IAAI;OAChF,IAAI8U,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,UAAU,CAAC,CAACpH,QAAQ,CAACoH,OAAO,CAAC,EACvD;SACCxX,6BAAY,CAACyP,aAAa,CAAC,gCAAgC,EAAE,MAAM;WAClE,IAAI,CAACzO,EAAE,CAAC0O,SAAS,CAACC,QAAQ,CAACtC,KAAK,EAAE;UAClC,CAAC;SACFkC,2BAAY,CAACK,WAAW,CAAC,IAAI,CAACjR,KAAK,EAAE,IAAI,CAACuJ,eAAe,CAAC;;;;GAK7D+G,mBAAmB,GACnB;KACC,IAAI,CAACpH,aAAa,GAAG,IAAI;;GAG1BsJ,2BAA2B,GAC3B;KACC,IAAI,IAAI,CAACJ,gBAAgB,EACzB;OACC7C,aAAG,CAACC,QAAQ,CAAC,IAAI,CAAC4C,gBAAgB,EAAE,aAAa,CAAC;;KAGnD,IAAI,CAAC0G,mBAAmB,EAAE;KAE1B,IAAI,IAAI,CAAC1G,gBAAgB,EACzB;OACC7C,aAAG,CAACoB,WAAW,CAAC,IAAI,CAACyB,gBAAgB,EAAE,aAAa,CAAC;;;GAIvD0G,mBAAmB,GACnB;KACC,OAAO,IAAI,CAACzW,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC,+CAA+C,EAAE;OAC9ErF,IAAI,EAAE;SACLG,OAAO,EAAE,IAAI,CAAC2C,KAAK,CAAC9C,IAAI,CAACkJ;QACzB;OACDmG,SAAS,EAAE;SACVC,IAAI,EAAE,IAAI;SACVC,QAAQ,EAAE,QAAQ;SAClB7G,KAAK,EAAE,YAAY;SACnBb,IAAI,EAAE,WAAW;SACjB2H,SAAS,EAAE,WAAW;SACtBwG,aAAa,EAAE,MAAM;SACrBvG,EAAE,EAAG,WAAU,IAAI,CAAC3M,KAAK,CAACqG,QAAS;;MAEpC,CAAC,CAAC5D,IAAI,CACLC,QAAQ,IAAK;OACb,IAAIwL,GAAG,CAAC1K,MAAM,CAACuV,IAAI,IAAIrW,QAAQ,CAACxF,IAAI,IAAIwF,QAAQ,CAACxF,IAAI,CAAC8b,MAAM,EAC5D;SACC9K,GAAG,CAAC6K,IAAI,CAACE,aAAa,CAAE,OAAM3b,QAAQ,CAACoF,QAAQ,CAACxF,IAAI,CAAC8b,MAAM,EAAE,EAAE,CAAE,EAAC,CAAC;SAEnE,OAAO,IAAI;;OAGZE,KAAK,CAAC5G,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC,CAAC;OAE5C,OAAO,IAAI;MACX,EACA7P,QAAQ,IAAK;OACbwW,KAAK,CAAC5G,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC,CAAC;OAE5C,OAAO,IAAI;MACX,CACD;;GAGF7C,qBAAqB,GACrB;KACC,IAAI,CAACrN,EAAE,CAAC0O,SAAS,CAACC,QAAQ,CAACtC,KAAK,CAAC,KAAK,EAAE,MAAM;OAC7CkC,2BAAY,CAACuI,cAAc,CAAC;SAC3BnZ,KAAK,EAAE,IAAI,CAACA,KAAK;SACjB+E,IAAI,EAAE,IAAI,CAACA,IAAI;SACfH,OAAO,EAAE,IAAI,CAACA,OAAO;SACrByE,MAAM,EAAE,IAAI,CAACA;QACb,CAAC;MACF,CAAC;;CAEJ;;;;;;;;"}