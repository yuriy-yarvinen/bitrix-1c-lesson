{"version":3,"file":"text.bundle.js","sources":["../src/text.js"],"sourcesContent":["import { Event } from 'main.core';\nimport { Base } from 'landing.node.base';\nimport { TableEditor } from 'landing.node.tableeditor';\n\nconst escapeText = BX.Landing.Utils.escapeText;\nconst matchers = BX.Landing.Utils.Matchers;\nconst changeTagName = BX.Landing.Utils.changeTagName;\nconst textToPlaceholders = BX.Landing.Utils.textToPlaceholders;\n\nexport class Text extends Base\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\n\t\tthis.currentNode = null;\n\t\tthis.type = 'text';\n\t\tthis.tableBaseFontSize = '22';\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t\tthis.onPaste = this.onPaste.bind(this);\n\t\tthis.onDrop = this.onDrop.bind(this);\n\t\tthis.onInput = this.onInput.bind(this);\n\t\tthis.onKeyDown = this.onKeyDown.bind(this);\n\t\tthis.onMousedown = this.onMousedown.bind(this);\n\t\tthis.onMouseup = this.onMouseup.bind(this);\n\n\t\t// Bind on node events\n\t\tthis.bindEvents(this.node);\n\t\tEvent.bind(document, 'mouseup', this.onMouseup);\n\t}\n\n\tbindEvents(node)\n\t{\n\t\tEvent.bind(node, 'mousedown', this.onMousedown);\n\t\tEvent.bind(node, 'click', this.onClick);\n\t\tEvent.bind(node, 'paste', this.onPaste);\n\t\tEvent.bind(node, 'drop', this.onDrop);\n\t\tEvent.bind(node, 'input', this.onInput);\n\t\tEvent.bind(node, 'keydown', this.onKeyDown);\n\t}\n\n\t/**\n\t * Handles allow inline edit event\n\t */\n\tonAllowInlineEdit()\n\t{\n\t\t// Show title \"Click to edit\" for node\n\t\tthis.node.setAttribute('title', escapeText(BX.Landing.Loc.getMessage('LANDING_TITLE_OF_TEXT_NODE')));\n\t}\n\n\t/**\n\t * Handles change event\n\t * @param {boolean} [preventAdjustPosition]\n\t * @param {?boolean} [preventHistory = false]\n\t */\n\tonChange(preventAdjustPosition, preventHistory)\n\t{\n\t\tsuper.onChange.call(this, preventHistory);\n\n\t\tthis.processNewTableContainers();\n\n\t\tif (!preventHistory)\n\t\t{\n\t\t\tBX.Landing.History.getInstance().push();\n\t\t}\n\n\t\tif (!preventAdjustPosition)\n\t\t{\n\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().adjustPosition(this.node);\n\t\t}\n\t}\n\n\tprocessNewTableContainers()\n\t{\n\t\tconst newTables = [...this.node.querySelectorAll('.landing-table-container-new')];\n\t\tif (newTables.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnewTables.forEach((newTableElement) => {\n\t\t\tconst tableEditor = new TableEditor(newTableElement, this, false);\n\n\t\t\tif (tableEditor.table)\n\t\t\t{\n\t\t\t\ttableEditor.toggleSelectAll();\n\t\t\t\tconst thTech = tableEditor.table.querySelector('.landing-table-th-select-all');\n\t\t\t\tif (thTech)\n\t\t\t\t{\n\t\t\t\t\tthis.addTableButtons(thTech);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnewTableElement.classList.remove('landing-table-container-new');\n\t\t});\n\t}\n\n\tonKeyDown(event)\n\t{\n\t\tif (event.code === 'Backspace')\n\t\t{\n\t\t\tthis.onBackspaceDown(event);\n\t\t}\n\t\tthis.onInput(event);\n\t}\n\n\tonInput(event)\n\t{\n\t\tclearTimeout(this.inputTimeout);\n\n\t\tconst key = event.keyCode || event.which;\n\n\t\tif (!(key === 90 && (/win/i.test(top.window.navigator.userAgent) ? event.ctrlKey : event.metaKey)))\n\t\t{\n\t\t\tthis.inputTimeout = setTimeout(() => {\n\t\t\t\tif (this.lastValue !== this.getValue())\n\t\t\t\t{\n\t\t\t\t\tthis.onChange(true);\n\t\t\t\t\tthis.lastValue = this.getValue();\n\t\t\t\t}\n\t\t\t}, 400);\n\t\t}\n\n\t\tif (this.isTable(event))\n\t\t{\n\t\t\tconst tableFontSize = parseInt(window.getComputedStyle(event.srcElement).getPropertyValue('font-size'), 10);\n\t\t\tif (\n\t\t\t\tevent.srcElement.textContent === ''\n\t\t\t\t&& BX.Dom.hasClass(event.srcElement, 'landing-table-td')\n\t\t\t\t&& tableFontSize < this.tableBaseFontSize\n\t\t\t)\n\t\t\t{\n\t\t\t\tBX.Dom.addClass(event.srcElement, 'landing-table-td-height');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.Dom.removeClass(event.srcElement, 'landing-table-td-height');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Handles escape press event\n\t */\n\tonEscapePress()\n\t{\n\t\t// Hide editor by press on Escape button\n\t\tif (this.isEditable())\n\t\t{\n\t\t\tif (this === this.currentNode)\n\t\t\t{\n\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t}\n\n\t\t\tthis.disableEdit();\n\t\t}\n\t}\n\n\t/**\n\t * Handles drop event on this node\n\t *\n\t * @param {DragEvent} event\n\t */\n\tonDrop(event)\n\t{\n\t\t// Prevents drag and drop any content into editor area\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * Handles paste event on this node\n\t *\n\t * @param {ClipboardEvent} event\n\t * @param {function} event.preventDefault\n\t * @param {object} event.clipboardData\n\t */\n\tonPaste(event)\n\t{\n\t\tevent.preventDefault();\n\n\t\tif (event.clipboardData && event.clipboardData.getData)\n\t\t{\n\t\t\tconst sourceText = event.clipboardData.getData('text/plain');\n\t\t\tlet encodedText = BX.Text.encode(sourceText);\n\t\t\tif (this.isLinkPasted(sourceText))\n\t\t\t{\n\t\t\t\tencodedText = this.prepareToLink(encodedText);\n\t\t\t}\n\t\t\tconst formattedHtml = encodedText.replaceAll('\\n', '<br>');\n\t\t\tdocument.execCommand('insertHTML', false, formattedHtml);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// ie11\n\t\t\tconst text = window.clipboardData.getData('text');\n\t\t\tdocument.execCommand('paste', true, BX.Text.encode(text));\n\t\t}\n\n\t\tthis.onChange();\n\t}\n\n\t/**\n\t * Handles click on document\n\t */\n\tonDocumentClick(event)\n\t{\n\t\tif (this.isEditable() && !this.fromNode)\n\t\t{\n\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\tthis.disableEdit();\n\t\t}\n\n\t\tthis.fromNode = false;\n\t}\n\n\tonMousedown(event)\n\t{\n\t\tBX.Event.EventEmitter.emit('BX.Landing.Node.Text:onMousedown');\n\t\tif (!this.manifest.group)\n\t\t{\n\t\t\tthis.fromNode = true;\n\n\t\t\tif (this.manifest.allowInlineEdit !== false\n\t\t\t\t&& BX.Landing.Main.getInstance().isControlsEnabled())\n\t\t\t{\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis.enableEdit();\n\t\t\t\tif (this.isTable(event))\n\t\t\t\t{\n\t\t\t\t\tthis.disableEdit();\n\t\t\t\t\tthis.currentNode.node.querySelectorAll('.landing-table-container')\n\t\t\t\t\t\t.forEach((table) => {\n\t\t\t\t\t\t\tif (!table.hasAttribute('table-prepare'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.prepareNewTable(table);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\tconst tableFontSize = parseInt(window.getComputedStyle(event.srcElement).getPropertyValue('font-size'), 10);\n\t\t\t\t\tif (\n\t\t\t\t\t\tevent.srcElement.textContent === ''\n\t\t\t\t\t\t&& BX.Dom.hasClass(event.srcElement, 'landing-table-td')\n\t\t\t\t\t\t&& tableFontSize < this.tableBaseFontSize\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Dom.addClass(event.srcElement, 'landing-table-td-height');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Dom.removeClass(event.srcElement, 'landing-table-td-height');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (!this.manifest.textOnly && !BX.Landing.UI.Panel.StylePanel.getInstance().isShown())\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().show(this.node, null, this.buttons);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.nodeTableContainerList)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.nodeTableContainerList.forEach((tableContainer) => {\n\t\t\t\t\t\t\ttableContainer.tableEditor.unselect(tableContainer.tableEditor);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tBX.Landing.UI.Tool.ColorPicker.hideAll();\n\t\t\t}\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tif (event.target.nodeName === 'A'\n\t\t\t\t\t|| event.target.parentElement.nodeName === 'A')\n\t\t\t\t{\n\t\t\t\t\tconst range = document.createRange();\n\t\t\t\t\trange.selectNode(event.target);\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tonMouseup()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tthis.fromNode = false;\n\t\t}, 10);\n\t}\n\n\t/**\n\t * Click on field - switch edit mode.\n\t */\n\tonClick(event)\n\t{\n\t\tif (this.isTable(event))\n\t\t{\n\t\t\tthis.addTableButtons(event.srcElement);\n\t\t}\n\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t\tthis.fromNode = false;\n\n\t\tif (event.target.nodeName === 'A'\n\t\t\t|| event.target.parentElement.nodeName === 'A')\n\t\t{\n\t\t\tconst range = document.createRange();\n\t\t\trange.selectNode(event.target);\n\t\t\twindow.getSelection().removeAllRanges();\n\t\t\twindow.getSelection().addRange(range);\n\t\t}\n\t}\n\n\t/**\n\t * Checks that is editable\n\t * @return {boolean}\n\t */\n\tisEditable(): boolean\n\t{\n\t\treturn this.node.isContentEditable;\n\t}\n\n\t/**\n\t * Enables edit mode\n\t */\n\tenableEdit(): void\n\t{\n\t\tconst currentNode = this.currentNode;\n\t\tif (currentNode)\n\t\t{\n\t\t\tconst node = this.currentNode.node;\n\t\t\tconst nodeTableContainerList = node.querySelectorAll('.landing-table-container');\n\t\t\tif (nodeTableContainerList.length > 0)\n\t\t\t{\n\t\t\t\tnodeTableContainerList.forEach((nodeTableContainer) => {\n\t\t\t\t\tif (!nodeTableContainer.tableEditor)\n\t\t\t\t\t{\n\t\t\t\t\t\tnodeTableContainer.tableEditor = new TableEditor(nodeTableContainer, this.currentNode);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.nodeTableContainerList = nodeTableContainerList;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isEditable() && !BX.Landing.UI.Panel.StylePanel.getInstance().isShown())\n\t\t{\n\t\t\tif (this !== this.currentNode && this.currentNode !== null)\n\t\t\t{\n\t\t\t\tthis.disableEdit();\n\t\t\t}\n\n\t\t\tthis.currentNode = this;\n\t\t\tBX.Landing.Node.Text.currentNode = this.currentNode;\n\n\t\t\tthis.buttons = [];\n\t\t\tthis.buttons.push(this.getDesignButton());\n\n\t\t\tif (this.isHeader())\n\t\t\t{\n\t\t\t\tthis.buttons.push(this.getChangeTagButton());\n\t\t\t\tthis.getChangeTagButton().onChangeHandler = this.onChangeTag.bind(this);\n\t\t\t}\n\n\t\t\tthis.lastValue = this.getValue();\n\t\t\tthis.node.contentEditable = true;\n\n\t\t\tthis.node.setAttribute('title', '');\n\t\t}\n\t}\n\n\t/**\n\t * Gets design button for editor\n\t * @return {BX.Landing.UI.Button.Design}\n\t */\n\tgetDesignButton(): BX.Landing.UI.Button.Design\n\t{\n\t\tif (!this.designButton)\n\t\t{\n\t\t\tthis.designButton = new BX.Landing.UI.Button.Design('design', {\n\t\t\t\thtml: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_DESIGN'),\n\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_DESIGN') },\n\t\t\t\tonClick: function() {\n\t\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t\t\tthis.disableEdit();\n\t\t\t\t\tthis.onDesignShow(this.manifest.code);\n\t\t\t\t}.bind(this),\n\t\t\t});\n\t\t}\n\n\t\tthis.designButton.insertBefore = 'ai_copilot';\n\n\t\treturn this.designButton;\n\t}\n\n\t/**\n\t * Disables edit mode\n\t */\n\tdisableEdit()\n\t{\n\t\tif (this.isEditable())\n\t\t{\n\t\t\tthis.node.contentEditable = false;\n\n\t\t\tif (this.lastValue !== this.getValue())\n\t\t\t{\n\t\t\t\tthis.onChange();\n\t\t\t\tthis.lastValue = this.getValue();\n\t\t\t}\n\n\t\t\tif (this.isAllowInlineEdit())\n\t\t\t{\n\t\t\t\tthis.node.setAttribute('title', escapeText(BX.Landing.Loc.getMessage('LANDING_TITLE_OF_TEXT_NODE')));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets form field\n\t * @return {BX.Landing.UI.Field.Text}\n\t */\n\tgetField(): BX.Landing.UI.Field.Text\n\t{\n\t\tif (this.field)\n\t\t{\n\t\t\tthis.field.setValue(this.node.innerHTML);\n\t\t\tthis.field.content = this.node.innerHTML;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.field = new BX.Landing.UI.Field.Text({\n\t\t\t\tselector: this.selector,\n\t\t\t\ttitle: this.manifest.name,\n\t\t\t\tcontent: this.node.innerHTML,\n\t\t\t\ttextOnly: this.manifest.textOnly,\n\t\t\t\tbind: this.node,\n\t\t\t});\n\n\t\t\tif (this.isHeader())\n\t\t\t{\n\t\t\t\tthis.field.changeTagButton = this.getChangeTagButton();\n\t\t\t}\n\t\t}\n\n\t\treturn this.field;\n\t}\n\n\t/**\n\t * Sets node value\n\t * @param value\n\t * @param {?boolean} [preventSave = false]\n\t * @param {?boolean} [preventHistory = false]\n\t */\n\tsetValue(value, preventSave, preventHistory)\n\t{\n\t\tthis.preventSave(preventSave);\n\t\tthis.lastValue = this.isSavePrevented() ? this.getValue() : this.lastValue;\n\t\tthis.node.innerHTML = value;\n\t\tthis.onChange(false, preventHistory);\n\t}\n\n\t/**\n\t * Gets node value\n\t * @return {string}\n\t */\n\tgetValue(): string\n\t{\n\t\tif (this.node.querySelector('.landing-table-container') !== null)\n\t\t{\n\t\t\tconst node = this.node.cloneNode(true);\n\t\t\tthis.prepareTable(node);\n\n\t\t\treturn textToPlaceholders(node.innerHTML);\n\t\t}\n\n\t\treturn textToPlaceholders(this.node.innerHTML);\n\t}\n\n\t/**\n\t * Checks that this node is header\n\t * @return {boolean}\n\t */\n\tisHeader(): boolean\n\t{\n\t\treturn matchers.headerTag.test(this.node.nodeName);\n\t}\n\n\t/**\n\t * Checks that this node is table\n\t * @return {boolean}\n\t */\n\tisTable(event): boolean\n\t{\n\t\tlet nodeIsTable = false;\n\t\tif (this.currentNode && event)\n\t\t{\n\t\t\tthis.currentNode.node.querySelectorAll('.landing-table-container')\n\t\t\t\t.forEach((table) => {\n\t\t\t\t\tif (table.contains(event.srcElement))\n\t\t\t\t\t{\n\t\t\t\t\t\tnodeIsTable = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\treturn nodeIsTable;\n\t}\n\n\t/**\n\t * Delete br tags in new table and add flag after this\n\t */\n\tprepareNewTable(table)\n\t{\n\t\ttable.querySelectorAll('br').forEach((tdTag) => {\n\t\t\ttdTag.remove();\n\t\t});\n\t\ttable.setAttribute('table-prepare', 'true');\n\t\tthis.currentNode.onChange(true);\n\t}\n\n\taddTableButtons(srcElement)\n\t{\n\t\tif (!srcElement)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst buttons = [];\n\t\tlet neededButtons = [];\n\t\tlet setTd = [];\n\t\tconst tableButtons = this.getTableButtons();\n\t\tconst tableAlignButtons = [tableButtons[0], tableButtons[1], tableButtons[2], tableButtons[3]];\n\t\tconst node = this.currentNode.node;\n\t\tlet table = null;\n\t\tlet isCell = false;\n\t\tlet isButtonAddRow = false;\n\t\tlet isButtonAddCol = false;\n\t\tlet isNeedTablePanel = true;\n\t\tif (\n\t\t\tBX.Dom.hasClass(srcElement, 'landing-table')\n\t\t\t|| BX.Dom.hasClass(srcElement, 'landing-table-col-dnd')\n\t\t)\n\t\t{\n\t\t\tisNeedTablePanel = false;\n\t\t}\n\n\t\tif (BX.Dom.hasClass(srcElement, 'landing-table-row-add'))\n\t\t{\n\t\t\tisButtonAddRow = true;\n\t\t}\n\n\t\tif (BX.Dom.hasClass(srcElement, 'landing-table-col-add'))\n\t\t{\n\t\t\tisButtonAddCol = true;\n\t\t}\n\t\tlet hideButtons = [];\n\t\tconst nodeTableList = node.querySelectorAll('.landing-table');\n\t\tif (nodeTableList.length > 0)\n\t\t{\n\t\t\tnodeTableList.forEach((nodeTable) => {\n\t\t\t\tif (nodeTable.contains(srcElement))\n\t\t\t\t{\n\t\t\t\t\ttable = nodeTable;\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t\tlet isSelectedAll;\n\n\t\ttableButtons.forEach((tableButton) => {\n\t\t\ttableButton.options.srcElement = srcElement;\n\t\t\ttableButton.options.node = node;\n\t\t\ttableButton.options.table = table;\n\t\t});\n\n\t\tif (BX.Dom.hasClass(srcElement, 'landing-table-row-dnd'))\n\t\t{\n\t\t\tsetTd = srcElement.parentNode.children;\n\t\t\tsetTd = [...setTd];\n\t\t\tneededButtons = this.getAmountTableRows(table) > 1 ? [0, 1, 2, 3, 4, 5, 6] : [0, 1, 2, 3, 4, 5];\n\t\t\tneededButtons.forEach((neededButton) => {\n\t\t\t\ttableButtons[neededButton].options.target = 'row';\n\t\t\t\ttableButtons[neededButton].options.setTd = setTd;\n\t\t\t\tbuttons.push(tableButtons[neededButton]);\n\t\t\t});\n\t\t}\n\n\t\tif (BX.Dom.hasClass(srcElement.parentNode, 'landing-table-col-dnd'))\n\t\t{\n\t\t\tconst childNodes = srcElement.parentElement.parentElement.childNodes;\n\t\t\tconst childNodesArray = [...childNodes];\n\t\t\tconst childNodesArrayPrepare = [];\n\t\t\tchildNodesArray.forEach((childNode) => {\n\t\t\t\tif (childNode.nodeType === 1)\n\t\t\t\t{\n\t\t\t\t\tchildNodesArrayPrepare.push(childNode);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst neededPosition = childNodesArrayPrepare.indexOf(srcElement.parentElement);\n\t\t\tconst rows = srcElement.parentElement.parentElement.parentElement.childNodes;\n\t\t\trows.forEach((row) => {\n\t\t\t\tif (row.nodeType === 1)\n\t\t\t\t{\n\t\t\t\t\tconst rowChildPrepare = [];\n\t\t\t\t\trow.childNodes.forEach((rowChildNode) => {\n\t\t\t\t\t\tif (rowChildNode.nodeType === 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trowChildPrepare.push(rowChildNode);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (rowChildPrepare[neededPosition])\n\t\t\t\t\t{\n\t\t\t\t\t\tsetTd.push(rowChildPrepare[neededPosition]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tneededButtons = this.getAmountTableCols(table) > 1 ? [0, 1, 2, 3, 4, 5, 7] : [0, 1, 2, 3, 4, 5];\n\t\t\tneededButtons.forEach((neededButton) => {\n\t\t\t\ttableButtons[neededButton].options.target = 'col';\n\t\t\t\ttableButtons[neededButton].options.setTd = setTd;\n\t\t\t\tbuttons.push(tableButtons[neededButton]);\n\t\t\t});\n\t\t}\n\n\t\tif (BX.Dom.hasClass(srcElement, 'landing-table-th-select-all'))\n\t\t{\n\t\t\tif (BX.Dom.hasClass(srcElement, 'landing-table-th-select-all-selected'))\n\t\t\t{\n\t\t\t\tisSelectedAll = true;\n\t\t\t\tconst rows = srcElement.parentElement.parentElement.childNodes;\n\t\t\t\trows.forEach((row) => {\n\t\t\t\t\trow.childNodes.forEach((th) => {\n\t\t\t\t\t\tsetTd.push(th);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tneededButtons = [0, 1, 2, 3, 4, 5, 8, 9, 10];\n\t\t\t\tneededButtons.forEach((neededButton) => {\n\t\t\t\t\ttableButtons[neededButton].options.target = 'table';\n\t\t\t\t\ttableButtons[neededButton].options.setTd = setTd;\n\t\t\t\t\tbuttons.push(tableButtons[neededButton]);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tisSelectedAll = false;\n\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tBX.Dom.hasClass(srcElement, 'landing-table-td')\n\t\t\t|| srcElement.closest('.landing-table-td') !== null\n\t\t)\n\t\t{\n\t\t\tsetTd.push(srcElement);\n\t\t\tneededButtons = [3, 2, 1, 0];\n\t\t\tneededButtons.forEach((neededButton) => {\n\t\t\t\ttableButtons[neededButton].options.target = 'cell';\n\t\t\t\ttableButtons[neededButton].options.setTd = setTd;\n\t\t\t\ttableButtons[neededButton].insertAfter = 'strikeThrough';\n\t\t\t\tbuttons.push(tableButtons[neededButton]);\n\t\t\t});\n\t\t\tisCell = true;\n\t\t\thideButtons = ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull', 'createTable', 'pasteTable'];\n\t\t}\n\n\t\tlet activeAlignButtonId = null;\n\t\tconst setActiveAlignButtonId = [];\n\t\tsetTd.forEach((th) => {\n\t\t\tif (th.nodeType === 1)\n\t\t\t{\n\t\t\t\tactiveAlignButtonId = undefined;\n\n\t\t\t\tif (BX.Dom.hasClass(th, 'text-left'))\n\t\t\t\t{\n\t\t\t\t\tactiveAlignButtonId = 'alignLeft';\n\t\t\t\t}\n\n\t\t\t\tif (BX.Dom.hasClass(th, 'text-center'))\n\t\t\t\t{\n\t\t\t\t\tactiveAlignButtonId = 'alignCenter';\n\t\t\t\t}\n\n\t\t\t\tif (BX.Dom.hasClass(th, 'text-right'))\n\t\t\t\t{\n\t\t\t\t\tactiveAlignButtonId = 'alignRight';\n\t\t\t\t}\n\n\t\t\t\tif (BX.Dom.hasClass(th, 'text-justify'))\n\t\t\t\t{\n\t\t\t\t\tactiveAlignButtonId = 'alignJustify';\n\t\t\t\t}\n\t\t\t\tsetActiveAlignButtonId.push(activeAlignButtonId);\n\t\t\t}\n\t\t});\n\t\tlet count = 0;\n\t\tlet isIdentical = true;\n\t\twhile (count < setActiveAlignButtonId.length && isIdentical)\n\t\t{\n\t\t\tif (count > 0 && setActiveAlignButtonId[count] !== setActiveAlignButtonId[count - 1])\n\t\t\t{\n\t\t\t\tisIdentical = false;\n\t\t\t}\n\t\t\tcount++;\n\t\t}\n\n\t\tactiveAlignButtonId = isIdentical ? setActiveAlignButtonId[0] : undefined;\n\t\tif (activeAlignButtonId)\n\t\t{\n\t\t\ttableAlignButtons.forEach((tableAlignButton) => {\n\t\t\t\tif (tableAlignButton.id === activeAlignButtonId)\n\t\t\t\t{\n\t\t\t\t\tBX.Dom.addClass(tableAlignButton.layout, 'landing-ui-active');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (buttons[0] && buttons[1] && buttons[2] && buttons[3])\n\t\t{\n\t\t\tbuttons[0].options.alignButtons = tableAlignButtons;\n\t\t\tbuttons[1].options.alignButtons = tableAlignButtons;\n\t\t\tbuttons[2].options.alignButtons = tableAlignButtons;\n\t\t\tbuttons[3].options.alignButtons = tableAlignButtons;\n\t\t}\n\n\t\tif (!this.manifest.textOnly)\n\t\t{\n\t\t\tif (isNeedTablePanel)\n\t\t\t{\n\t\t\t\tif (!isButtonAddRow && !isButtonAddCol && table)\n\t\t\t\t{\n\t\t\t\t\tif (isCell)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().show(table.parentNode, null, buttons, true, hideButtons);\n\t\t\t\t\t}\n\t\t\t\t\telse if (isSelectedAll === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().show(table.parentNode, null, buttons, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets change tag button\n\t * @return {BX.Landing.UI.Button.ChangeTag}\n\t */\n\tgetChangeTagButton(): BX.Landing.UI.Button.ChangeTag\n\t{\n\t\tif (!this.changeTagButton)\n\t\t{\n\t\t\tthis.changeTagButton = new BX.Landing.UI.Button.ChangeTag('changeTag', {\n\t\t\t\thtml: `<span class=\"landing-ui-icon-editor-${this.node.nodeName.toLowerCase()}\"></span>`,\n\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_CHANGE_TAG') },\n\t\t\t\tonChange: this.onChangeTag.bind(this),\n\t\t\t});\n\t\t}\n\n\t\tthis.changeTagButton.insertAfter = 'unlink';\n\n\t\tthis.changeTagButton.activateItem(this.node.nodeName);\n\n\t\treturn this.changeTagButton;\n\t}\n\n\tgetTableButtons(): []\n\t{\n\t\tconst buttons = [];\n\t\tbuttons.push(\n\t\t\tnew BX.Landing.UI.Button.AlignTable(\n\t\t\t\t'alignLeft',\n\t\t\t\t{\n\t\t\t\t\thtml: '<span class=\"landing-ui-icon-editor-left\"></span>',\n\t\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_LEFT') },\n\t\t\t\t},\n\t\t\t\tthis.currentNode,\n\t\t\t),\n\t\t\tnew BX.Landing.UI.Button.AlignTable(\n\t\t\t\t'alignCenter',\n\t\t\t\t{\n\t\t\t\t\thtml: '<span class=\"landing-ui-icon-editor-center\"></span>',\n\t\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_CENTER') },\n\t\t\t\t},\n\t\t\t\tthis.currentNode,\n\t\t\t),\n\t\t\tnew BX.Landing.UI.Button.AlignTable(\n\t\t\t\t'alignRight',\n\t\t\t\t{\n\t\t\t\t\thtml: '<span class=\"landing-ui-icon-editor-right\"></span>',\n\t\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_RIGHT') },\n\t\t\t\t},\n\t\t\t\tthis.currentNode,\n\t\t\t),\n\t\t\tnew BX.Landing.UI.Button.AlignTable(\n\t\t\t\t'alignJustify',\n\t\t\t\t{\n\t\t\t\t\thtml: '<span class=\"landing-ui-icon-editor-justify\"></span>',\n\t\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_JUSTIFY') },\n\t\t\t\t},\n\t\t\t\tthis.currentNode,\n\t\t\t),\n\t\t\tnew BX.Landing.UI.Button.TableColorAction(\n\t\t\t\t'tableTextColor',\n\t\t\t\t{\n\t\t\t\t\ttext: BX.Landing.Loc.getMessage('EDITOR_ACTION_SET_FORE_COLOR'),\n\t\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_COLOR') },\n\t\t\t\t},\n\t\t\t\tthis.currentNode,\n\t\t\t),\n\t\t\tnew BX.Landing.UI.Button.TableColorAction(\n\t\t\t\t'tableBgColor',\n\t\t\t\t{\n\t\t\t\t\thtml: '<i class=\"landing-ui-icon-editor-fill-color\"></i>',\n\t\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_TABLE_CELL_BG') },\n\t\t\t\t},\n\t\t\t\tthis.currentNode,\n\t\t\t),\n\t\t\tnew BX.Landing.UI.Button.DeleteElementTable(\n\t\t\t\t'deleteRow',\n\t\t\t\t{\n\t\t\t\t\thtml: '<span class=\"landing-ui-icon-editor-delete\"></span>',\n\t\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_DELETE_ROW_TABLE') },\n\t\t\t\t},\n\t\t\t\tthis.currentNode,\n\t\t\t),\n\t\t\tnew BX.Landing.UI.Button.DeleteElementTable(\n\t\t\t\t'deleteCol',\n\t\t\t\t{\n\t\t\t\t\thtml: '<span class=\"landing-ui-icon-editor-delete\"></span>',\n\t\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_DELETE_COL_TABLE') },\n\t\t\t\t},\n\t\t\t\tthis.currentNode,\n\t\t\t),\n\t\t\tnew BX.Landing.UI.Button.StyleTable(\n\t\t\t\t'styleTable',\n\t\t\t\t{\n\t\t\t\t\thtml: `\n\t\t\t\t\t\t${BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_TABLE_STYLE')}\n\t\t\t\t\t\t\t<i class=\"fas fa-chevron-down g-ml-8\"></i>\n\t\t\t\t\t`,\n\t\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_TABLE_STYLE') },\n\t\t\t\t},\n\t\t\t\tthis.currentNode,\n\t\t\t),\n\t\t\tnew BX.Landing.UI.Button.CopyTable(\n\t\t\t\t'copyTable',\n\t\t\t\t{\n\t\t\t\t\ttext: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_TABLE_COPY'),\n\t\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_TABLE_COPY') },\n\t\t\t\t},\n\t\t\t\tthis.currentNode,\n\t\t\t),\n\t\t\tnew BX.Landing.UI.Button.DeleteTable(\n\t\t\t\t'deleteTable',\n\t\t\t\t{\n\t\t\t\t\thtml: '<span class=\"landing-ui-icon-editor-delete\"></span>',\n\t\t\t\t\tattrs: { title: BX.Landing.Loc.getMessage('LANDING_TITLE_OF_EDITOR_ACTION_TABLE_DELETE') },\n\t\t\t\t},\n\t\t\t\tthis.currentNode,\n\t\t\t),\n\t\t);\n\n\t\treturn buttons;\n\t}\n\n\t/**\n\t * Handles change tag event\n\t * @param value\n\t * @param {?boolean} [preventHistory = false]\n\t */\n\tonChangeTag(value, preventHistory)\n\t{\n\t\tthis.node = changeTagName(this.node, value);\n\n\t\tthis.bindEvents(this.node);\n\n\t\tif (!this.getField().isEditable() && !preventHistory)\n\t\t{\n\t\t\tthis.disableEdit();\n\t\t\tthis.enableEdit();\n\t\t}\n\n\t\tconst data = {};\n\t\tdata[this.selector] = value;\n\n\t\tif (!preventHistory)\n\t\t{\n\t\t\tthis.changeOptionsHandler(data)\n\t\t\t\t.then(() => {\n\t\t\t\t\tBX.Landing.History.getInstance().push();\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t}\n\t}\n\n\tgetAmountTableCols(table): number\n\t{\n\t\treturn table.querySelectorAll('.landing-table-col-dnd').length;\n\t}\n\n\tgetAmountTableRows(table): number\n\t{\n\t\treturn table.querySelectorAll('.landing-table-row-dnd').length;\n\t}\n\n\tprepareTable(node): HTMLElement\n\t{\n\t\tconst setClassesForRemove = [\n\t\t\t'table-selected-all',\n\t\t\t'landing-table-th-select-all-selected',\n\t\t\t'landing-table-cell-selected',\n\t\t\t'landing-table-row-selected',\n\t\t\t'landing-table-th-selected',\n\t\t\t'landing-table-th-selected-cell',\n\t\t\t'landing-table-th-selected-top',\n\t\t\t'landing-table-th-selected-x',\n\t\t\t'landing-table-tr-selected-left',\n\t\t\t'landing-table-tr-selected-y',\n\t\t\t'landing-table-col-selected',\n\t\t\t'landing-table-tr-selected',\n\t\t\t'table-selected-all-right',\n\t\t\t'table-selected-all-bottom',\n\t\t];\n\t\tsetClassesForRemove.forEach((className) => {\n\t\t\tnode.querySelectorAll(`.${className}`).forEach((element) => {\n\t\t\t\tBX.Dom.removeClass(element, className);\n\t\t\t});\n\t\t});\n\n\t\treturn node;\n\t}\n\n\tonBackspaceDown(event)\n\t{\n\t\tconst selection = window.getSelection();\n\t\tconst position = selection.getRangeAt(0).startOffset;\n\t\tif (position === 0)\n\t\t{\n\t\t\tlet focusNode = selection.focusNode;\n\t\t\tif (!BX.Type.isNil(focusNode) && focusNode.nodeType !== 3)\n\t\t\t{\n\t\t\t\tif (focusNode.firstChild.nodeType === 3 && focusNode.firstChild.firstChild.nodeType === 3)\n\t\t\t\t{\n\t\t\t\t\tfocusNode = focusNode.firstChild.firstChild;\n\t\t\t\t}\n\t\t\t\telse if (focusNode.firstChild.nodeType === 3)\n\t\t\t\t{\n\t\t\t\t\tfocusNode = null;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfocusNode = focusNode.firstChild;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (focusNode)\n\t\t\t{\n\t\t\t\tconst focusNodeParent = focusNode.parentNode;\n\t\t\t\tconst allowedNodeName = new Set(['BLOCKQUOTE', 'UL']);\n\t\t\t\tif (focusNodeParent && allowedNodeName.has(focusNodeParent.nodeName))\n\t\t\t\t{\n\t\t\t\t\tconst focusNodeContainer = document.createElement('div');\n\t\t\t\t\tfocusNodeContainer.append(focusNode);\n\t\t\t\t\tfocusNodeParent.append(focusNodeContainer);\n\t\t\t\t}\n\t\t\t\tlet contentNode = focusNode.parentNode.parentNode;\n\t\t\t\twhile (contentNode && !allowedNodeName.has(contentNode.nodeName))\n\t\t\t\t{\n\t\t\t\t\tcontentNode = contentNode.parentNode;\n\t\t\t\t}\n\n\t\t\t\tif (contentNode && contentNode.childNodes.length === 1)\n\t\t\t\t{\n\t\t\t\t\tcontentNode.after(focusNode.parentNode);\n\t\t\t\t\tcontentNode.remove();\n\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tisLinkPasted(text): boolean\n\t{\n\t\tconst reg = /^https?:\\/\\/(?:www\\.)?[\\w#%+.:=@~-]{1,256}\\.[\\d()A-Za-z]{1,6}\\b[\\w#%&()+./:=?@~-]*$/;\n\n\t\treturn Boolean(reg.test(text));\n\t}\n\n\tprepareToLink(text): HTMLElement\n\t{\n\t\treturn `<a class='g-bg-transparent' href='${text}' target='_blank'> ${text} </a>`;\n\t}\n}\n"],"names":["escapeText","BX","Landing","Utils","matchers","Matchers","changeTagName","textToPlaceholders","Text","Base","constructor","options","currentNode","type","tableBaseFontSize","onClick","bind","onPaste","onDrop","onInput","onKeyDown","onMousedown","onMouseup","bindEvents","node","Event","document","onAllowInlineEdit","setAttribute","Loc","getMessage","onChange","preventAdjustPosition","preventHistory","call","processNewTableContainers","History","getInstance","push","UI","Panel","EditorPanel","adjustPosition","newTables","querySelectorAll","length","forEach","newTableElement","tableEditor","TableEditor","table","toggleSelectAll","thTech","querySelector","addTableButtons","classList","remove","event","code","onBackspaceDown","clearTimeout","inputTimeout","key","keyCode","which","test","top","window","navigator","userAgent","ctrlKey","metaKey","setTimeout","lastValue","getValue","isTable","tableFontSize","parseInt","getComputedStyle","srcElement","getPropertyValue","textContent","Dom","hasClass","addClass","removeClass","onEscapePress","isEditable","hide","disableEdit","preventDefault","clipboardData","getData","sourceText","encodedText","encode","isLinkPasted","prepareToLink","formattedHtml","replaceAll","execCommand","text","onDocumentClick","fromNode","EventEmitter","emit","manifest","group","allowInlineEdit","Main","isControlsEnabled","stopPropagation","enableEdit","hasAttribute","prepareNewTable","textOnly","StylePanel","isShown","show","buttons","nodeTableContainerList","tableContainer","unselect","Tool","ColorPicker","hideAll","requestAnimationFrame","target","nodeName","parentElement","range","createRange","selectNode","getSelection","removeAllRanges","addRange","isContentEditable","nodeTableContainer","Node","getDesignButton","isHeader","getChangeTagButton","onChangeHandler","onChangeTag","contentEditable","designButton","Button","Design","html","attrs","title","onDesignShow","insertBefore","isAllowInlineEdit","getField","field","setValue","innerHTML","content","Field","selector","name","changeTagButton","value","preventSave","isSavePrevented","cloneNode","prepareTable","headerTag","nodeIsTable","contains","tdTag","neededButtons","setTd","tableButtons","getTableButtons","tableAlignButtons","isCell","isButtonAddRow","isButtonAddCol","isNeedTablePanel","hideButtons","nodeTableList","nodeTable","isSelectedAll","tableButton","parentNode","children","getAmountTableRows","neededButton","childNodes","childNodesArray","childNodesArrayPrepare","childNode","nodeType","neededPosition","indexOf","rows","row","rowChildPrepare","rowChildNode","getAmountTableCols","th","closest","insertAfter","activeAlignButtonId","setActiveAlignButtonId","undefined","count","isIdentical","tableAlignButton","id","layout","alignButtons","ChangeTag","toLowerCase","activateItem","AlignTable","TableColorAction","DeleteElementTable","StyleTable","CopyTable","DeleteTable","data","changeOptionsHandler","then","catch","setClassesForRemove","className","element","selection","position","getRangeAt","startOffset","focusNode","Type","isNil","firstChild","focusNodeParent","allowedNodeName","Set","has","focusNodeContainer","createElement","append","contentNode","after","reg","Boolean"],"mappings":"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"}