{"version":3,"file":"dialog.bundle.js","sources":["../src/const.js","../src/helpers/get-closest-z-index.js","../src/dialog.js"],"sourcesContent":["export const DialogAnglePositions = Object.freeze({\n\ttopLeft: 'topLeft',\n\ttopCenter: 'topCenter',\n\ttopRight: 'topRight',\n\trightTop: 'rightTop',\n\trightCenter: 'rightCenter',\n\trightBottom: 'rightBottom',\n\tbottomLeft: 'bottomLeft',\n\tbottomCenter: 'bottomCenter',\n\tbottomRight: 'bottomRight',\n\tleftTop: 'leftTop',\n\tleftCenter: 'leftCenter',\n\tleftBottom: 'leftBottom',\n});\n\nexport const DialogBackground = Object.freeze({\n\tdefault: 'default',\n\tvibrant: 'vibrant',\n});\n\nexport const aliases = {\n\tonShow: { namespace: 'BX.UI.System.Dialog', eventName: 'onShow' },\n\tonAfterShow: { namespace: 'BX.UI.System.Dialog', eventName: 'onAfterShow' },\n\tonHide: { namespace: 'BX.UI.System.Dialog', eventName: 'onHide' },\n\tonAfterHide: { namespace: 'BX.UI.System.Dialog', eventName: 'onAfterHide' },\n};\n","import { Type } from 'main.core';\n\nconst getClosestZIndexElement = (target: HTMLElement) => {\n\tlet currentElement = target;\n\n\twhile (currentElement && currentElement !== document.body)\n\t{\n\t\tconst computedStyle = getComputedStyle(currentElement);\n\t\tconst position = computedStyle.position;\n\n\t\tif (position === 'absolute' || position === 'fixed')\n\t\t{\n\t\t\tconst zIndex = computedStyle.zIndex;\n\n\t\t\tif (zIndex !== 'auto')\n\t\t\t{\n\t\t\t\tconst zIndexValue = parseInt(zIndex, 10);\n\n\t\t\t\tif (Type.isNumber(zIndexValue))\n\t\t\t\t{\n\t\t\t\t\treturn zIndexValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcurrentElement = currentElement.parentElement;\n\t}\n\n\treturn 0;\n};\n\nexport { getClosestZIndexElement };\n","import { bind, Dom, Tag, Type, Event } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { Headline, Text } from 'ui.system.typography';\nimport { Outline, Icon, IconHoverMode } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport type { DialogAnglePositon, DialogEvents, DialogStickPosition } from './type';\nimport { DialogAnglePositions, DialogBackground, aliases } from './const';\nimport { getClosestZIndexElement } from './helpers/get-closest-z-index';\n\nimport './css/dialog.css';\n\ntype DialogBindElement = Element | { top: number; left: number; };\n\nexport type DialogOptions = {\n\ttitle?: string;\n\tsubtitle?: string;\n\thasCloseButton?: boolean;\n\tcontent: HTMLElement;\n\tleftButtons?: Button[];\n\tcenterButtons?: Button[];\n\trightButtons?: Button[];\n\thasVerticalPadding?: boolean;\n\thasHorizontalPadding?: boolean;\n\tevents?: DialogEvents;\n\thasOverlay?: boolean;\n\tdisableScrolling?: boolean;\n\tcloseByEsc?: boolean;\n\tcloseByClickOutside?: boolean;\n\tbackground?: DialogBackground;\n\n\t// stickPosition: ?DialogStickPosition;\n\t// bindElement?: DialogBindElement;\n\t// anglePosition?: DialogAnglePositon;\n};\n\nexport class Dialog extends Event.EventEmitter\n{\n\t#title: ?string;\n\t#subtitle: ?string;\n\t#hasCloseButton: ?boolean;\n\t#content: ?HTMLElement;\n\t#leftButtons: Button[] = [];\n\t#rightButtons: Button[] = [];\n\t#centerButtons: Button[] = [];\n\t#hasVerticalPadding: ?boolean;\n\t#hasHorizontalPadding: ?boolean;\n\t#hasOverlay: ?boolean;\n\t#width: ?number;\n\t#disableScrolling: boolean;\n\t#closeByClickOutside: ?boolean;\n\t#closeByEsc: ?boolean;\n\t#dialogBackground: DialogBackground;\n\n\t#stickPosition: ?DialogStickPosition;\n\t#bindElement: ?DialogBindElement;\n\t#anglePosition: ?DialogAnglePositon;\n\n\t#popup: ?Popup;\n\n\tconstructor(options: DialogOptions = {})\n\t{\n\t\tsuper(options);\n\n\t\tthis.setEventNamespace('UI.System.Dialog');\n\t\tthis.subscribeFromOptions(options.events);\n\n\t\tthis.#title = options.title;\n\t\tthis.#subtitle = options.subtitle;\n\t\tthis.#hasCloseButton = Type.isBoolean(options.hasCloseButton) ? options.hasCloseButton : true;\n\t\tthis.#content = options.content;\n\t\tthis.#leftButtons = options.leftButtons ?? [];\n\t\tthis.#centerButtons = options.centerButtons ?? [];\n\t\tthis.#rightButtons = options.rightButtons ?? [];\n\t\tthis.#hasHorizontalPadding = options.hasHorizontalPadding ?? true;\n\t\tthis.#hasVerticalPadding = options.hasVerticalPadding ?? true;\n\t\tthis.#hasOverlay = options.hasOverlay === true;\n\t\tthis.#disableScrolling = options.disableScrolling;\n\t\tthis.#closeByClickOutside = options.closeByClickOutside ?? true;\n\t\tthis.#closeByEsc = options.closeByEsc ?? true;\n\t\tthis.#width = options.width;\n\t\tthis.#dialogBackground = options.background || DialogBackground.default;\n\n\t\t// this.#stickPosition = options.stickPosition;\n\t\t// this.#anglePosition = options.anglePosition;\n\t\t// this.#bindElement = options.bindElement;\n\t}\n\n\tstatic show(options?: DialogOptions): void\n\t{\n\t\tconst dialog = new Dialog(options);\n\n\t\tdialog.show();\n\t}\n\n\tsubscribeFromOptions(events)\n\t{\n\t\tsuper.subscribeFromOptions(events, aliases);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#getPopup().show();\n\t}\n\n\thide(): void\n\t{\n\t\tthis.#getPopup().close();\n\t}\n\n\tsetTitle(title: string): void\n\t{\n\t\tthis.#title = title;\n\n\t\tif (this.#popup)\n\t\t{\n\t\t\tthis.#updatePopupContent();\n\t\t}\n\t}\n\n\tsetSubtitle(subtitle: string): void\n\t{\n\t\tthis.#subtitle = subtitle;\n\n\t\tif (this.#popup)\n\t\t{\n\t\t\tthis.#updatePopupContent();\n\t\t}\n\t}\n\n\tsetContent(content: HTMLElement): void\n\t{\n\t\tthis.#content = content;\n\n\t\tif (this.#popup)\n\t\t{\n\t\t\tthis.#updatePopupContent();\n\t\t}\n\t}\n\n\tsetLeftButtons(buttons: Button[]): void\n\t{\n\t\tthis.#leftButtons = buttons;\n\n\t\tif (this.#popup)\n\t\t{\n\t\t\tthis.#updatePopupContent();\n\t\t}\n\t}\n\n\tsetCenterButtons(buttons: Button[]): void\n\t{\n\t\tthis.#centerButtons = buttons;\n\n\t\tif (this.#popup)\n\t\t{\n\t\t\tthis.#updatePopupContent();\n\t\t}\n\t}\n\n\tsetRightButtons(buttons: Button[]): void\n\t{\n\t\tthis.#rightButtons = buttons;\n\n\t\tif (this.#popup)\n\t\t{\n\t\t\tthis.#updatePopupContent();\n\t\t}\n\t}\n\n\t#createPopup(): Popup\n\t{\n\t\treturn new Popup({\n\t\t\tnoAllPaddings: true,\n\t\t\tclassName: this.#getPopupClassName(),\n\t\t\tcloseIcon: false,\n\t\t\tcontent: this.#renderPopupContent(),\n\t\t\tevents: {\n\t\t\t\tonShow: () => {\n\t\t\t\t\tthis.#adjustDialogPosition();\n\t\t\t\t\tif (this.#disableScrolling)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(document.body, 'ui-system-dialog__disable-scrolling');\n\t\t\t\t\t}\n\t\t\t\t\tthis.emit('onShow');\n\t\t\t\t},\n\t\t\t\tonAfterShow: () => {\n\t\t\t\t\tthis.#adjustDialogPosition();\n\t\t\t\t\tthis.emit('onAfterShow');\n\t\t\t\t},\n\t\t\t\tonClose: () => {\n\t\t\t\t\tthis.#adjustDialogPosition();\n\t\t\t\t\tif (this.#disableScrolling)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(document.body, 'ui-system-dialog__disable-scrolling');\n\t\t\t\t\t}\n\t\t\t\t\tthis.emit('onHide');\n\t\t\t\t},\n\t\t\t\tonAfterClose: () => {\n\t\t\t\t\tthis.#adjustDialogPosition();\n\t\t\t\t\tthis.emit('onAfterHide');\n\t\t\t\t},\n\t\t\t},\n\t\t\tborderRadius: this.#getPopupBorderRadius(),\n\t\t\tminWidth: this.#width,\n\t\t\tmaxWidth: this.#width,\n\t\t\toverlay: this.#hasOverlay ? {\n\t\t\t\tbackgroundColor: 'rgba(0, 32, 78, 0.46)',\n\t\t\t\topacity: 100,\n\t\t\t} : undefined,\n\t\t\tautoHideHandler: (event: PointerEvent) => {\n\t\t\t\tif (event.target.closest('.ui-system-dialog'))\n\t\t\t\t{\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst zIndex = getClosestZIndexElement(event.target);\n\n\t\t\t\tif (zIndex > this.#getPopup().getZindex())\n\t\t\t\t{\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tautoHide: this.#closeByClickOutside,\n\t\t\tcloseByEsc: this.#closeByEsc,\n\t\t\tcacheable: false,\n\n\t\t\tanglePosition: this.#anglePosition,\n\t\t\t// bindElement: this.#getCalculatedBindElement(),\n\t\t});\n\t}\n\n\t#getPopup(): Popup\n\t{\n\t\tif (!this.#popup)\n\t\t{\n\t\t\tthis.#popup = this.#createPopup();\n\t\t}\n\n\t\treturn this.#popup;\n\t}\n\n\t#updatePopupContent(): void\n\t{\n\t\tthis.#popup?.setContent(this.#renderPopupContent());\n\t}\n\n\t#renderPopupContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-system-dialog__content-wrapper\">\n\t\t\t\t${this.#renderDialogHeader()}\n\t\t\t\t${this.#renderDialogContent()}\n\t\t\t\t${this.#renderDialogFooter()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderDialogHeader(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<header class=\"ui-system-dialog__header\">\n\t\t\t\t<div class=\"ui-system-dialog__header-left\">\n\t\t\t\t\t${this.#title ? Headline.render(this.#title, { size: 'md' }) : ''}\n\t\t\t\t\t${this.#subtitle ? Text.render(this.#subtitle, { size: 'xs', className: 'ui-system-dialog__subtitle' }) : ''}\n\t\t\t\t</div>\n\t\t\t\t${this.#hasCloseButton ? this.#renderCloseButton() : ''}\n\t\t\t</header>\n\t\t`;\n\t}\n\n\t#renderCloseButton(): ?HTMLButtonElement\n\t{\n\t\tconst icon = new Icon({\n\t\t\ticon: Outline.CROSS_L,\n\t\t\tsize: 24,\n\t\t\thoverMode: IconHoverMode.DEFAULT,\n\t\t});\n\n\t\tconst btn = Tag.render`<button class=\"ui-system-dialog__header-close-btn\">${icon.render()}</button>`;\n\n\t\tbind(btn, 'click', () => {\n\t\t\tthis.#popup.close();\n\t\t});\n\n\t\treturn btn;\n\t}\n\n\t#renderDialogContent(): HTMLElement\n\t{\n\t\tconst classes = ['ui-system-dialog__content'];\n\n\t\tif (this.#hasHorizontalPadding === false)\n\t\t{\n\t\t\tclasses.push('--rm-horizontal');\n\t\t}\n\n\t\tif (this.#hasVerticalPadding === false)\n\t\t{\n\t\t\tclasses.push('--rm-vertical');\n\t\t}\n\n\t\treturn Tag.render`<div class=\"${classes.join(' ')}\">${this.#content}</div>`;\n\t}\n\n\t#renderDialogFooter(): ?HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<footer class=\"ui-system-dialog__footer\">\n\t\t\t\t${this.#renderLeftButtons(this.#leftButtons)}\n\t\t\t\t${this.#renderCenterButtons(this.#centerButtons)}\n\t\t\t\t${this.#renderRightButtons(this.#rightButtons)}\n\t\t\t</footer>\n\t\t`;\n\t}\n\n\t#renderLeftButtons(buttons: Button[]): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"ui-system-dialog__left-buttons\"></div>`;\n\n\t\tbuttons.forEach((button) => {\n\t\t\tDom.append(button.render(), container);\n\t\t});\n\n\t\treturn container;\n\t}\n\n\t#renderCenterButtons(buttons: Button[]): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"ui-system-dialog__center-buttons\"></div>`;\n\n\t\tbuttons.forEach((button) => {\n\t\t\tDom.append(button.render(), container);\n\t\t});\n\n\t\treturn container;\n\t}\n\n\t#renderRightButtons(buttons: Button[]): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"ui-system-dialog__right-buttons\"></div>`;\n\n\t\tbuttons.forEach((button) => {\n\t\t\tDom.append(button.render(), container);\n\t\t});\n\n\t\treturn container;\n\t}\n\n\t#getPopupBorderRadius(): string\n\t{\n\t\tif (this.#stickPosition === 'top')\n\t\t{\n\t\t\treturn '0 0 18px 18px';\n\t\t}\n\n\t\tif (this.#stickPosition === 'right')\n\t\t{\n\t\t\treturn '18ox 0 0 18px';\n\t\t}\n\n\t\tif (this.#stickPosition === 'bottom')\n\t\t{\n\t\t\treturn '18px 18px 0 0';\n\t\t}\n\n\t\tif (this.#stickPosition === 'left')\n\t\t{\n\t\t\treturn '18px 0 0 18px';\n\t\t}\n\n\t\treturn '18px 18px 18px 18px';\n\t}\n\n\t#getCalculatedBindElement(): ?DialogBindElement\n\t{\n\t\tif (!this.#bindElement)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (Type.isPlainObject(this.#bindElement) && 'top' in this.#bindElement && 'left' in this.#bindElement)\n\t\t{\n\t\t\treturn this.#bindElement;\n\t\t}\n\n\t\tif (Type.isDomNode(this.#bindElement) && this.#anglePosition)\n\t\t{\n\t\t\tconst { width = 0, height = 0 } = Dom.getPosition(this.#popup?.getPopupContainer());\n\n\t\t\treturn this.#calculateAnglePosition(this.#bindElement, this.#anglePosition, width, height);\n\t\t}\n\n\t\treturn this.#bindElement;\n\t}\n\n\t#calculateAnglePosition(\n\t\telement: HTMLElement,\n\t\tanglePosition: DialogAnglePositon,\n\t\tpopupWidth: number,\n\t\tpopupHeight: number,\n\t): { top: number; left: number }\n\t{\n\t\tconst elementPosition = Dom.getPosition(element);\n\t\tconst { left, top, width, height } = elementPosition;\n\n\t\tconst angleWidth = 16;\n\t\tconst angleHeight = 8;\n\t\tconst angleOffset = 30;\n\n\t\tswitch (anglePosition)\n\t\t{\n\t\t\tcase DialogAnglePositions.topLeft:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top + height + popupHeight + angleHeight,\n\t\t\t\t\tleft: left + (width - angleWidth) / 2 - angleOffset,\n\t\t\t\t};\n\n\t\t\tcase DialogAnglePositions.topCenter:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top + height + popupHeight + angleHeight * 2,\n\t\t\t\t\tleft: left - (width / 2) - angleOffset - angleWidth / 2,\n\t\t\t\t};\n\n\t\t\tcase DialogAnglePositions.topRight:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top + height + popupHeight + angleHeight * 2,\n\t\t\t\t\tleft: left - popupWidth + width / 2 + angleOffset + angleWidth / 2,\n\t\t\t\t};\n\n\t\t\tcase DialogAnglePositions.rightTop:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top + (height / 2) - angleOffset - angleWidth / 2,\n\t\t\t\t\tleft: left - popupWidth - angleHeight,\n\t\t\t\t};\n\n\t\t\tcase DialogAnglePositions.rightCenter:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top + (height / 2) - popupHeight / 2,\n\t\t\t\t\tleft: left - popupWidth - angleHeight,\n\t\t\t\t};\n\n\t\t\tcase DialogAnglePositions.rightBottom:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top + (height / 2) - popupHeight + angleOffset + angleWidth / 2,\n\t\t\t\t\tleft: left - popupWidth - angleHeight,\n\t\t\t\t};\n\n\t\t\tcase DialogAnglePositions.bottomLeft:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top - popupHeight - angleHeight,\n\t\t\t\t\tleft: left + (width / 2) - angleOffset - angleWidth / 2,\n\t\t\t\t};\n\n\t\t\tcase DialogAnglePositions.bottomCenter:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top - popupHeight - angleHeight,\n\t\t\t\t\tleft: left - (width / 2) - angleOffset - angleWidth / 2,\n\t\t\t\t};\n\n\t\t\tcase DialogAnglePositions.bottomRight:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top - popupHeight - angleHeight,\n\t\t\t\t\tleft: left - popupWidth + width / 2 + angleOffset + angleWidth / 2,\n\t\t\t\t};\n\n\t\t\tcase DialogAnglePositions.leftTop:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top + (height / 2) - angleOffset - angleWidth / 2,\n\t\t\t\t\tleft: left + width + angleHeight,\n\t\t\t\t};\n\n\t\t\tcase DialogAnglePositions.leftCenter:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top + (height / 2) - popupHeight / 2,\n\t\t\t\t\tleft: left + width + angleHeight,\n\t\t\t\t};\n\n\t\t\tcase DialogAnglePositions.leftBottom:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top + (height / 2) - popupHeight + angleOffset + angleWidth / 2,\n\t\t\t\t\tleft: left + width + angleHeight,\n\t\t\t\t};\n\n\t\t\tdefault:\n\t\t\t\treturn {\n\t\t\t\t\ttop: top + (height / 2),\n\t\t\t\t\tleft: left + (width / 2),\n\t\t\t\t};\n\t\t}\n\t}\n\n\t#getPopupClassName(): string\n\t{\n\t\tconst classes = ['ui-system-dialog'];\n\n\t\tif (this.#anglePosition)\n\t\t{\n\t\t\tclasses.push('popup-window-with-angle');\n\n\t\t\tconst angleClass = this.#anglePosition\n\t\t\t\t.replaceAll(/([A-Z])/g, '-$1')\n\t\t\t\t.toLowerCase();\n\n\t\t\tclasses.push(`popup-window-angle-${angleClass}`);\n\t\t}\n\n\t\tclasses.push(`--bg-${this.#dialogBackground}`);\n\n\t\treturn classes.join(' ');\n\t}\n\n\t#adjustDialogPosition(): void\n\t{\n\t\tif (this.#popup)\n\t\t{\n\t\t\tthis.#popup.setBindElement(this.#getCalculatedBindElement());\n\n\t\t\tthis.#popup.adjustPosition();\n\t\t}\n\t}\n}\n"],"names":["DialogAnglePositions","Object","freeze","topLeft","topCenter","topRight","rightTop","rightCenter","rightBottom","bottomLeft","bottomCenter","bottomRight","leftTop","leftCenter","leftBottom","DialogBackground","default","vibrant","aliases","onShow","namespace","eventName","onAfterShow","onHide","onAfterHide","getClosestZIndexElement","target","currentElement","document","body","computedStyle","getComputedStyle","position","zIndex","zIndexValue","parseInt","Type","isNumber","parentElement","Dialog","Event","EventEmitter","constructor","options","setEventNamespace","subscribeFromOptions","events","title","subtitle","isBoolean","hasCloseButton","content","leftButtons","centerButtons","rightButtons","hasHorizontalPadding","hasVerticalPadding","hasOverlay","disableScrolling","closeByClickOutside","closeByEsc","width","background","show","dialog","hide","close","setTitle","setSubtitle","setContent","setLeftButtons","buttons","setCenterButtons","setRightButtons","Popup","noAllPaddings","className","closeIcon","Dom","addClass","emit","onClose","removeClass","onAfterClose","borderRadius","minWidth","maxWidth","overlay","backgroundColor","opacity","undefined","autoHideHandler","event","closest","preventDefault","getZindex","autoHide","cacheable","anglePosition","Tag","render","Headline","size","Text","icon","Icon","Outline","CROSS_L","hoverMode","IconHoverMode","DEFAULT","btn","bind","classes","push","join","container","forEach","button","append","isPlainObject","isDomNode","height","getPosition","getPopupContainer","element","popupWidth","popupHeight","elementPosition","left","top","angleWidth","angleHeight","angleOffset","angleClass","replaceAll","toLowerCase","setBindElement","adjustPosition"],"mappings":"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"}