{"version":3,"file":"compacteventform.bundle.js","sources":["../src/compacteventform.js"],"sourcesContent":["// @flow\nimport { Type, Tag, Loc, Dom, Event, Runtime } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Util } from 'calendar.util';\nimport { MenuManager, Popup, PopupManager } from 'main.popup';\nimport {\n\tDateTimeControl,\n\tLocation,\n\tReminder,\n\tSectionSelector,\n\tUserPlannerSelector,\n\tColorSelector,\n\tBusyUsersDialog,\n} from 'calendar.controls';\nimport { Entry, EntryManager } from 'calendar.entry';\nimport { SectionManager } from 'calendar.sectionmanager';\nimport { sendData } from 'ui.analytics';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { RelationInterface } from 'calendar.entityrelation';\n\nexport class CompactEventForm extends EventEmitter\n{\n\tstatic VIEW_MODE = 'view';\n\tstatic EDIT_MODE = 'edit';\n\tstatic USER_URL = '/company/personal/user/#USER_ID#/';\n\tSTATE = { READY: 1, REQUEST: 2, ERROR: 3 };\n\tzIndex = 1200;\n\tZ_INDEX_OFFSET = -1000;\n\tuserSettings = '';\n\tDOM = {};\n\tmode;\n\tdisplayed = false;\n\tsections = [];\n\tsectionIndex = {};\n\ttrackingUsersList = [];\n\tcheckDataBeforeCloseMode = true;\n\tCHECK_CHANGES_DELAY = 500;\n\tRELOAD_DATA_DELAY = 500;\n\texcludedUsers = [];\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.CompactEventForm');\n\t\tthis.BX = Util.getBX();\n\n\t\tthis.userId = parseInt(options.userId, 10) || Util.getCurrentUserId();\n\t\tthis.type = options.type || 'user';\n\t\tthis.isLocationCalendar = options.isLocationCalendar || false;\n\t\tthis.calendarContext = options.calendarContext || null;\n\t\tthis.ownerId = options.ownerId || this.userId;\n\t\tthis.isCollabUser = Util.getCalendarContext().isCollabUser || false;\n\n\t\tthis.checkForChangesDebounce = Runtime.debounce(this.checkForChanges, this.CHECK_CHANGES_DELAY, this);\n\t\tthis.reloadEntryDataDebounce = Runtime.debounce(this.reloadEntryData, this.RELOAD_DATA_DELAY, this);\n\t\tthis.checkOutsideClickClose = this.checkOutsideClickClose.bind(this);\n\t\tthis.outsideMouseDownClose = this.outsideMouseDownClose.bind(this);\n\t\tthis.keyHandler = this.handleKeyPress.bind(this);\n\n\t\tthis.lastUsedSaveOptions = {};\n\t}\n\n\tshow(mode = CompactEventForm.EDIT_MODE, params = {})\n\t{\n\t\tthis.setParams(params);\n\t\tthis.setMode(mode);\n\n\t\tthis.state = this.STATE.READY;\n\n\t\tthis.popupId = `compact-event-form-${Math.round(Math.random() * 100_000)}`;\n\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\t\tthis.popup = this.getPopup(params);\n\n\t\t// Small hack to use transparent titlebar to drag&drop popup\n\t\tDom.addClass(this.popup.titleBar, 'calendar-add-popup-titlebar');\n\t\tDom.removeClass(this.popup.popupContainer, 'popup-window-with-titlebar');\n\t\tDom.removeClass(this.popup.closeIcon, 'popup-window-titlebar-close-icon');\n\t\tEvent.bind(document, 'mousedown', this.outsideMouseDownClose);\n\t\tEvent.bind(document, 'mouseup', this.checkOutsideClickClose);\n\t\tEvent.bind(document, 'keydown', this.keyHandler);\n\t\tEvent.bind(this.popup.popupContainer, 'transitionend', () => {\n\t\t\tDom.removeClass(this.popup.popupContainer, 'calendar-simple-view-popup-show');\n\t\t});\n\n\t\t// Fulfill previous deletions to avoid data inconsistency\n\t\tif (this.isEditMode())\n\t\t{\n\t\t\tEntryManager.doDelayedActions();\n\t\t}\n\n\t\tif (this.isViewMode() && !this.isLocationMode())\n\t\t{\n\t\t\tthis.sendOpenViewCardAnalytics();\n\t\t}\n\n\t\tthis.prepareData()\n\t\t\t.then(() => {\n\t\t\t\tif (this.isLocationMode())\n\t\t\t\t{\n\t\t\t\t\tthis.setFormValuesLocation();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.setFormValues();\n\t\t\t\t}\n\n\t\t\t\tthis.popup.show();\n\t\t\t\tif (this.hasToOpenPlannerInDefault())\n\t\t\t\t{\n\t\t\t\t\tthis.userPlannerSelector.showPlanner();\n\t\t\t\t}\n\n\t\t\t\tif (this.isTitleOverflowing())\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.titleInput.title = this.entry.name;\n\t\t\t\t}\n\n\t\t\t\tthis.checkDataBeforeCloseMode = true;\n\t\t\t\tif (this.canDo('edit') && this.DOM.titleInput && mode === CompactEventForm.EDIT_MODE)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.titleInput.focus();\n\t\t\t\t\tthis.DOM.titleInput.select();\n\t\t\t\t}\n\n\t\t\t\tthis.displayed = true;\n\n\t\t\t\tif (this.getMode() === CompactEventForm.VIEW_MODE)\n\t\t\t\t{\n\t\t\t\t\tUtil.sendAnalyticLabel({ calendarAction: 'view_event', formType: 'compact' });\n\t\t\t\t\tthis.popup.getButtons()[0].button.focus();\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tthis.getMode() === CompactEventForm.EDIT_MODE\n\t\t\t\t\t&& !this.userPlannerSelector.isPlannerDisplayed()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.userPlannerSelector.checkBusyTime();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tgetPopup(params)\n\t{\n\t\treturn new Popup(\n\t\t\tthis.popupId,\n\t\t\tparams.bindNode,\n\t\t\t{\n\t\t\t\tzIndex: this.zIndex + this.Z_INDEX_OFFSET,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tcloseIcon: true,\n\t\t\t\ttitleBar: true,\n\t\t\t\tdraggable: {\n\t\t\t\t\trestrict: true,\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tlightShadow: true,\n\t\t\t\tclassName: 'calendar-simple-view-popup calendar-simple-view-popup-show',\n\t\t\t\tcacheable: false,\n\t\t\t\tcontent: this.isLocationMode()\n\t\t\t\t\t? this.getPopupContentLocation()\n\t\t\t\t\t: this.getPopupContentCalendar(),\n\t\t\t\tbuttons: this.getButtons(),\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: this.close.bind(this),\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t}\n\n\tisShown()\n\t{\n\t\treturn this.displayed;\n\t}\n\n\tclose(fromButton = true, fromPopup = false)\n\t{\n\t\tif (\n\t\t\t!fromButton\n\t\t\t&& !this.checkTopSlider()\n\t\t)\n\t\t{\n\t\t\tif (this.popup)\n\t\t\t{\n\t\t\t\tthis.popup.destroyed = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.destroyed = false;\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tthis.getMode() === CompactEventForm.EDIT_MODE\n\t\t\t&& this.formDataChanged()\n\t\t\t&& this.checkDataBeforeCloseMode\n\t\t\t&& !fromPopup\n\t\t)\n\t\t{\n\t\t\tif (this.checkTopSlider())\n\t\t\t{\n\t\t\t\tthis.showConfirmClosePopup();\n\t\t\t}\n\n\t\t\t// Workaround to prevent form closing even if user don't want to and presses \"cancel\" in confirm\n\t\t\tif (this.popup)\n\t\t\t{\n\t\t\t\tthis.popup.destroyed = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.destroyed = false;\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.displayed = false;\n\t\tthis.emit('onClose');\n\t\tEvent.unbind(document, 'mousedown', this.outsideMouseDownClose);\n\t\tEvent.unbind(document, 'mouseup', this.checkOutsideClickClose);\n\t\tEvent.unbind(document, 'keydown', this.keyHandler);\n\n\t\tif (this.userPlannerSelector)\n\t\t{\n\t\t\tthis.userPlannerSelector.destroy();\n\t\t}\n\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\n\t\tif (Location)\n\t\t{\n\t\t\tLocation.setCurrentCapacity(0);\n\t\t}\n\t\tUtil.clearPlannerWatches();\n\t\tUtil.closeAllPopups();\n\t}\n\n\tgetPopupContentCalendar()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-add-popup-wrap\">\n\t\t\t${this.DOM.titleOuterWrap = Tag.render`\n\t\t\t<div class=\"calendar-field-container calendar-field-container-string-select\">\n\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t${this.getEntryCounter()}\n\t\t\t\t\t${this.getTitleControl()}\n\t\t\t\t\t${this.getTitleFade()}\n\t\t\t\t\t${this.getColorControl()}\n\t\t\t\t</div>\n\t\t\t</div>`}\n\t\t\t<div class=\"calendar-field-container calendar-field-container-choice\">\n\t\t\t\t${this.getSectionControl('textselect')}\n\t\t\t</div>\n\n\t\t\t${this.getDateTimeControl()}\n\t\t\t${this.getUserPlannerSelector()}\n\n\t\t\t<div class=\"calendar-field-container calendar-field-container-info\">\n\t\t\t\t${this.getTypeInfoControl()}\n\t\t\t\t${this.getLocationControl()}\n\t\t\t\t${this.DOM.remindersOuterWrap = Tag.render`\n\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t<div class=\"calendar-field-title\">${Loc.getMessage('EC_REMIND_LABEL')}:</div>\n\t\t\t\t\t${this.createRemindersControl()}\n\t\t\t\t</div>`}\n\t\t\t\t${this.getRRuleInfoControl()}\n\t\t\t</div>\n\n\t\t\t${this.getRelationControl()}\n\t\t</div>`;\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tgetPopupContentLocation()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-add-popup-wrap\">\n\t\t\t${this.DOM.titleOuterWrap = Tag.render`\n\t\t\t<div class=\"calendar-field-container calendar-field-container-string-select\">\n\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t${this.getTitleControlLocation()}\n\t\t\t\t\t${this.getTitleFade()}\n\t\t\t\t\t${this.getColorControlsLocationView()}\n\t\t\t\t</div>\n\t\t\t</div>`}\n\t\t\t<div class=\"calendar-field-container calendar-field-container-choice\">\n\t\t\t\t${this.getSectionControl('location')}\n\t\t\t</div>\n\t\t\t${this.getDateTimeControl()}\n\t\t\t\n\t\t</div>`;\n\t\tif (this.entry.id !== this.entry.parentId)\n\t\t{\n\t\t\tthis.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t${this.getHostControl()}\n\t\t\t`);\n\t\t}\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tgetButtons()\n\t{\n\t\tlet buttons = [];\n\t\tif (this.isLocationMode())\n\t\t{\n\t\t\tbuttons = this.getLocationModeButtons();\n\t\t}\n\t\telse if (this.isInvitedMode())\n\t\t{\n\t\t\tbuttons = this.getInvitedButtons();\n\t\t}\n\t\telse if (this.isEditMode())\n\t\t{\n\t\t\tbuttons = this.getEditModeButtons();\n\t\t}\n\t\telse if (this.isViewMode())\n\t\t{\n\t\t\tbuttons = this.getViewModeButtons();\n\t\t}\n\n\t\tif (buttons.length > 3)\n\t\t{\n\t\t\tconst firstTwoButtons = buttons.slice(0, 2);\n\t\t\tconst menuButtons = buttons.slice(2);\n\n\t\t\tbuttons = [...firstTwoButtons, this.getMoreButton(menuButtons)];\n\t\t}\n\n\t\tif (buttons.length > 2)\n\t\t{\n\t\t\tbuttons[1].button.className = 'ui-btn ui-btn-light-border';\n\t\t}\n\n\t\treturn buttons;\n\t}\n\n\tgetLocationModeButtons()\n\t{\n\t\t// if (this.entry.id === this.entry.parentId)\n\t\t// {\n\t\t// \treturn [\n\t\t// \t\tnew BX.UI.Button({\n\t\t// \t\t\tclassName: 'ui-btn ui-btn-disabled',\n\t\t// \t\t\ttext: Loc.getMessage('CALENDAR_UPDATE_PROGRESS'),\n\t\t// \t\t})\n\t\t// \t];\n\t\t// }\n\n\t\tconst buttons = [this.getOpenParentButton()];\n\n\t\tif (this.canDo('release'))\n\t\t{\n\t\t\tbuttons.push(this.getReleaseLocationButton());\n\t\t}\n\n\t\treturn buttons;\n\t}\n\n\tgetInvitedButtons()\n\t{\n\t\treturn [this.getAcceptButton(), this.getDeclineButton(), this.getOpenButton(), ...this.getEditEventButtons()];\n\t}\n\n\tgetEditModeButtons()\n\t{\n\t\tconst buttons = [this.getSaveButton(), this.getCloseButton()];\n\n\t\tif (this.canDo('edit'))\n\t\t{\n\t\t\tbuttons.push(this.getFullFormButton());\n\t\t}\n\n\t\treturn buttons;\n\t}\n\n\tgetViewModeButtons()\n\t{\n\t\tconst buttons = [this.getOpenButton()];\n\n\t\tif (this.entry.isMeeting() && this.entry.getMeetingHost() !== this.userId)\n\t\t{\n\t\t\tif (this.entry.getCurrentStatus() === 'N')\n\t\t\t{\n\t\t\t\tbuttons.push(this.getAcceptButtonWithoutBorder());\n\t\t\t}\n\t\t\telse if (this.entry.getCurrentStatus() === 'Y')\n\t\t\t{\n\t\t\t\tbuttons.push(this.getDeclineButton());\n\t\t\t}\n\t\t}\n\n\t\tbuttons.push(...this.getEditEventButtons());\n\n\t\treturn buttons;\n\t}\n\n\tgetEditEventButtons()\n\t{\n\t\tconst buttons = [];\n\t\tif (!this.isNewEntry() && (this.entry.permissions?.edit || this.canDo('edit') || this.canDo('editLocation') || this.canDo('editAttendees')))\n\t\t{\n\t\t\tbuttons.push(this.getEditButton());\n\t\t}\n\n\t\tif (\n\t\t\tthis.isCollabUser\n\t\t\t&& !this.isNewEntry()\n\t\t\t&& (this.entry.permissions?.view_full || this.canDo('viewFull')))\n\t\t{\n\t\t\tbuttons.push(this.getDownloadIcsButton());\n\t\t}\n\n\t\tif (!this.isNewEntry() && (this.entry.permissions?.edit || this.canDo('edit')))\n\t\t{\n\t\t\tbuttons.push(this.getDeleteButton());\n\t\t}\n\n\t\treturn buttons;\n\t}\n\n\tgetOpenButton()\n\t{\n\t\tconst className = this.entry.isInvited() ? 'ui-btn-link' : 'ui-btn-primary';\n\t\tconst openButton = new BX.UI.Button({\n\t\t\tclassName: `ui-btn ${className}`,\n\t\t\ttext: Loc.getMessage('CALENDAR_EVENT_DO_OPEN'),\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\tBX.Calendar.EntryManager.openViewSlider(this.entry.id, {\n\t\t\t\t\t\tentry: this.entry,\n\t\t\t\t\t\tcalendarContext: this.calendarContext,\n\t\t\t\t\t\ttype: this.type,\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\tfrom: this.entry.from,\n\t\t\t\t\t\ttimezoneOffset: this.entry && this.entry.data ? this.entry.data.TZ_OFFSET_FROM : null,\n\t\t\t\t\t});\n\t\t\t\t\tthis.close();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\topenButton.button.setAttribute('data-role', 'openButton');\n\n\t\treturn openButton;\n\t}\n\n\tgetEditButton()\n\t{\n\t\treturn new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('CALENDAR_EVENT_DO_EDIT'),\n\t\t\tclassName: 'ui-btn ui-btn-link',\n\t\t\tevents: {\n\t\t\t\tclick: this.editEntryInSlider.bind(this),\n\t\t\t},\n\t\t});\n\t}\n\n\tgetSaveButton()\n\t{\n\t\tconst messageCode = this.isNewEntry() ? 'CALENDAR_EVENT_DO_ADD' : 'CALENDAR_EVENT_DO_SAVE';\n\t\tconst saveButton = new BX.UI.Button({\n\t\t\tname: 'save',\n\t\t\ttext: Loc.getMessage(messageCode),\n\t\t\tclassName: 'ui-btn ui-btn-primary',\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\tthis.save();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsaveButton.button.setAttribute('data-role', 'saveButton');\n\n\t\treturn saveButton;\n\t}\n\n\tgetDeleteButton()\n\t{\n\t\treturn new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('CALENDAR_EVENT_DO_DELETE'),\n\t\t\tclassName: 'ui-btn ui-btn-link',\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tEventEmitter.subscribeOnce('BX.Calendar.Entry:beforeDelete', () => {\n\t\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t});\n\n\t\t\t\t\tEntryManager.deleteEntry(this.entry);\n\n\t\t\t\t\tif (!this.entry.wasEverRecursive())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tgetCloseButton()\n\t{\n\t\tconst closeButton = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('CALENDAR_EVENT_DO_CANCEL'),\n\t\t\tclassName: 'ui-btn ui-btn-link',\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tif (this.isNewEntry())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setFormValues();\n\n\t\t\t\t\t\tif (this.userPlannerSelector)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.userPlannerSelector.destroy();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setMode(CompactEventForm.VIEW_MODE);\n\t\t\t\t\t\tthis.popup.setButtons(this.getButtons());\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tcloseButton.button.setAttribute('data-role', 'closeButton');\n\n\t\treturn closeButton;\n\t}\n\n\tgetFullFormButton()\n\t{\n\t\tconst fullFormButton = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('CALENDAR_EVENT_FULL_FORM'),\n\t\t\tclassName: 'ui-btn calendar-full-form-btn',\n\t\t\tevents: {\n\t\t\t\tclick: this.editEntryInSlider.bind(this),\n\t\t\t},\n\t\t});\n\t\tfullFormButton.button.setAttribute('data-role', 'fullForm');\n\n\t\treturn fullFormButton;\n\t}\n\n\tgetDownloadIcsButton(): BX.UI.Button\n\t{\n\t\treturn new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('CALENDAR_EVENT_DO_DOWNLOAD_ICS'),\n\t\t\tclassName: 'ui-btn ui-btn-link',\n\t\t\tevents: {\n\t\t\t\tclick: () => EntryManager.downloadIcs(this.getCurrentEntry().id),\n\t\t\t},\n\t\t});\n\t}\n\n\tgetAcceptButtonWithoutBorder()\n\t{\n\t\treturn this.getAcceptButton(true);\n\t}\n\n\tgetAcceptButton(withoutBorder = false)\n\t{\n\t\tconst className = withoutBorder ? 'ui-btn-link' : 'ui-btn-primary';\n\t\tconst acceptButton = new BX.UI.Button({\n\t\t\tclassName: `ui-btn ${className}`,\n\t\t\ttext: Loc.getMessage('EC_DESIDE_BUT_Y'),\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tif (!this.entry.isRecursive())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.entry.setCurrentStatus('Y');\n\t\t\t\t\t\tthis.setFormValues();\n\t\t\t\t\t}\n\n\t\t\t\t\tEntryManager.setMeetingStatus(this.entry, 'Y')\n\t\t\t\t\t\t.then(this.refreshMeetingStatus.bind(this));\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tacceptButton.button.setAttribute('data-role', 'accept');\n\n\t\treturn acceptButton;\n\t}\n\n\tgetDeclineButton()\n\t{\n\t\tconst declineButton = new BX.UI.Button({\n\t\t\tclassName: 'ui-btn ui-btn-link',\n\t\t\ttext: Loc.getMessage('EC_DESIDE_BUT_N'),\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tEntryManager.setMeetingStatus(this.entry, 'N').then(() => {\n\t\t\t\t\t\tif (this.isShown())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tdeclineButton.button.setAttribute('data-role', 'decline');\n\n\t\treturn declineButton;\n\t}\n\n\tgetOpenParentButton()\n\t{\n\t\tconst className = this.entry.isInvited() ? 'ui-btn-link' : 'ui-btn-primary';\n\n\t\treturn new BX.UI.Button({\n\t\t\tclassName: `ui-btn ${className}`,\n\t\t\ttext: Loc.getMessage('CALENDAR_EVENT_DO_OPEN_PARENT'),\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\tBX.Calendar.EntryManager.openViewSlider(\n\t\t\t\t\t\tthis.entry.parentId,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\tfrom: this.entry.from,\n\t\t\t\t\t\t\ttimezoneOffset: this.entry && this.entry.data ? this.entry.data.TZ_OFFSET_FROM : null,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t\tthis.close();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tgetReleaseLocationButton()\n\t{\n\t\treturn new BX.UI.Button({\n\t\t\tname: 'release',\n\t\t\ttext: Loc.getMessage('CALENDAR_EVENT_DO_RELEASE'),\n\t\t\tclassName: 'ui-btn ui-btn-light-border',\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\tthis.releaseLocation();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tgetMoreButton(buttons)\n\t{\n\t\tlet buttonsMenu;\n\n\t\tconst moreButton = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('CALENDAR_EVENT_DO_MORE'),\n\t\t\tclassName: 'ui-btn ui-btn-light-border ui-btn-dropdown',\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tbuttonsMenu.show();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tconst buttonsItems = buttons.map((button) => {\n\t\t\treturn {\n\t\t\t\ttext: button.button.innerText,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tbutton.button.click();\n\t\t\t\t},\n\t\t\t};\n\t\t});\n\n\t\tbuttonsMenu = MenuManager.create({\n\t\t\tid: `calendar-compact-event-form-more${Date.now()}`,\n\t\t\tbindElement: moreButton.button,\n\t\t\titems: buttonsItems,\n\t\t});\n\n\t\treturn moreButton;\n\t}\n\n\tfreezePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.buttons.forEach((button) => {\n\t\t\t\tif (button?.options?.name === 'save')\n\t\t\t\t{\n\t\t\t\t\tbutton.setClocking(true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbutton.setDisabled(true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tunfreezePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.buttons.forEach((button) => {\n\t\t\t\tbutton.setClocking(false);\n\t\t\t\tbutton.setDisabled(false);\n\t\t\t});\n\t\t}\n\t}\n\n\trefreshMeetingStatus()\n\t{\n\t\tthis.emit('doRefresh');\n\t\tthis.popup.setButtons(this.getButtons());\n\t\tif (this.entry.isInvited())\n\t\t{\n\t\t\tDom.removeClass(this.DOM.entryCounter, 'calendar-event-invite-counter-none');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.entryCounter, 'calendar-event-invite-counter-none');\n\t\t}\n\n\t\tif (this.userPlannerSelector)\n\t\t{\n\t\t\tconst isInvited = this.entry.isInvited();\n\t\t\tthis.userPlannerSelector.setViewMode(isInvited);\n\t\t\tthis.userPlannerSelector.displayAttendees(this.entry.getAttendees());\n\t\t\tthis.locationSelector.setViewMode(isInvited);\n\t\t\tif (!isInvited)\n\t\t\t{\n\t\t\t\tif (this.isLocationCalendar)\n\t\t\t\t{\n\t\t\t\t\tthis.locationSelector.setValue(this.locationSelector.default);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.locationOuterWrap.style.display = '';\n\t\t\t\t\tthis.locationSelector.setValue(this.entry.getLocation());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tif (Type.isDomNode(this.DOM.loader))\n\t\t{\n\t\t\tDom.remove(this.DOM.loader);\n\t\t\tthis.DOM.loader = null;\n\t\t}\n\t}\n\n\tshowInEditMode(params = {})\n\t{\n\t\treturn this.show(CompactEventForm.EDIT_MODE, params);\n\t}\n\n\tshowInViewMode(params = {})\n\t{\n\t\treturn this.show(CompactEventForm.VIEW_MODE, params);\n\t}\n\n\tisLocationMode()\n\t{\n\t\treturn this.isViewMode() && this.type === 'location';\n\t}\n\n\tisInvitedMode()\n\t{\n\t\treturn this.entry.isInvited();\n\t}\n\n\tisEditMode()\n\t{\n\t\treturn this.getMode() === CompactEventForm.EDIT_MODE;\n\t}\n\n\tisViewMode()\n\t{\n\t\treturn this.getMode() === CompactEventForm.VIEW_MODE;\n\t}\n\n\tsetMode(mode)\n\t{\n\t\tif (mode === 'edit' || mode === 'view')\n\t\t{\n\t\t\tthis.mode = mode;\n\t\t}\n\t}\n\n\tgetMode()\n\t{\n\t\treturn this.mode;\n\t}\n\n\tcheckForChanges()\n\t{\n\t\tif (\n\t\t\t!this.isNewEntry()\n\t\t\t&& this.getMode() === CompactEventForm.VIEW_MODE\n\t\t\t&& this.formDataChanged()\n\t\t)\n\t\t{\n\t\t\tthis.setMode(CompactEventForm.EDIT_MODE);\n\t\t\tthis.popup.setButtons(this.getButtons());\n\t\t}\n\t\telse if (\n\t\t\t!this.isNewEntry()\n\t\t\t&& this.getMode() === CompactEventForm.EDIT_MODE\n\t\t\t&& !this.formDataChanged()\n\t\t)\n\t\t{\n\t\t\tthis.setMode(CompactEventForm.VIEW_MODE);\n\t\t\tthis.popup.setButtons(this.getButtons());\n\t\t}\n\t\tthis.emitOnChange();\n\t}\n\n\tupdateEventNameInputTitle()\n\t{\n\t\tif (this.isTitleOverflowing())\n\t\t{\n\t\t\tthis.DOM.titleInput.title = this.DOM.titleInput.value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.titleInput.title = '';\n\t\t}\n\t}\n\n\tisTitleOverflowing()\n\t{\n\t\tconst el = this.DOM.titleInput;\n\n\t\treturn el.clientWidth < el.scrollWidth || el.clientHeight < el.scrollHeight;\n\t}\n\n\thasToOpenPlannerInDefault()\n\t{\n\t\treturn this.userPlannerSelector\n\t\t\t&& (\n\t\t\t\tthis.isLocationCalendar\n\t\t\t\t|| (\n\t\t\t\t\tthis.userPlannerSelector.attendeesEntityList.length > 1\n\t\t\t\t\t&& this.getMode() !== CompactEventForm.VIEW_MODE\n\t\t\t\t)\n\t\t\t)\n\t\t;\n\t}\n\n\tcheckLocationForm(event)\n\t{\n\t\tif (!this.isCollabUser && event && event instanceof BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tconst usersCount = data.usersCount;\n\n\t\t\tlet locationCapacity = Location.getCurrentCapacity() || 0;\n\n\t\t\tif (this.locationSelector.value.type === undefined && locationCapacity)\n\t\t\t{\n\t\t\t\tlocationCapacity = 0;\n\t\t\t\tLocation.setCurrentCapacity(0);\n\t\t\t}\n\n\t\t\tif (locationCapacity < usersCount && locationCapacity !== 0)\n\t\t\t{\n\t\t\t\tthis.locationSelector.addCapacityAlert();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.locationSelector.removeCapacityAlert();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetFormDataChanges(excludes = [])\n\t{\n\t\tconst entry = this.entry;\n\t\tconst fields = [];\n\n\t\t// Name\n\t\tif (!excludes.includes('name') && entry.name !== this.DOM.titleInput.value)\n\t\t{\n\t\t\tfields.push('name');\n\t\t}\n\n\t\t// Location\n\t\tif (\n\t\t\t!excludes.includes('location')\n\t\t\t&& this.locationSelector.getTextLocation(Location.parseStringValue(entry.getLocation()))\n\t\t\t!==\tthis.locationSelector.getTextLocation(Location.parseStringValue(this.locationSelector.getTextValue()))\n\t\t)\n\t\t{\n\t\t\tfields.push('location');\n\t\t}\n\n\t\t// Date + time\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\tif (\n\t\t\t!excludes.includes('date&time')\n\t\t\t&&\t(entry.isFullDay() !== dateTime.fullDay\n\t\t\t\t|| dateTime.from.toString() !== entry.from.toString()\n\t\t\t\t|| dateTime.to.toString() !== entry.to.toString()\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tfields.push('date&time');\n\t\t}\n\n\t\t// Notify\n\t\tif (\n\t\t\t!excludes.includes('notify')\n\t\t\t&& (!entry.isMeeting() || entry.getMeetingNotify()) !== this.userPlannerSelector.getInformValue()\n\t\t)\n\t\t{\n\t\t\tfields.push('notify');\n\t\t}\n\n\t\t// Section\n\t\tif (!excludes.includes('section') && parseInt(entry.sectionId) !== parseInt(this.sectionValue))\n\t\t{\n\t\t\tfields.push('section');\n\t\t}\n\n\t\t// Access codes\n\t\tif (\n\t\t\t!excludes.includes('codes')\n\t\t\t&& this.userPlannerSelector.getEntityList().map((item) => { return `${item.entityId}:${item.id}`;}).join('|')\n\t\t\t!==\tentry.getAttendeesEntityList().map((item) => { return `${item.entityId}:${item.id}`;}).join('|')\n\t\t)\n\t\t{\n\t\t\tfields.push('codes');\n\t\t}\n\n\t\treturn fields;\n\t}\n\n\tformDataChanged()\n\t{\n\t\treturn this.getFormDataChanges().length > 0;\n\t}\n\n\tsetParams(params = {})\n\t{\n\t\tthis.userId = parseInt(params.userId, 10) || Util.getCurrentUserId();\n\t\tthis.type = params.type || 'user';\n\t\tthis.isLocationCalendar = params.isLocationCalendar || false;\n\t\tthis.locationAccess = params.locationAccess || false;\n\t\tthis.calendarContext = params.calendarContext || null;\n\t\tthis.ownerId = params.ownerId ?? 0;\n\t\tif (this.type === 'user' && !this.ownerId)\n\t\t{\n\t\t\tthis.ownerId = this.userId;\n\t\t}\n\t\tthis.entry = EntryManager.getEntryInstance(params.entry, params.userIndex, {\n\t\t\ttype: this.type,\n\t\t\townerId: this.ownerId,\n\t\t});\n\t\tthis.sectionValue = null;\n\t\tthis.analyticsSubSection = this.getFormAnalyticsContext();\n\n\t\tif (\n\t\t\t!this.entry.id\n\t\t\t&& Type.isPlainObject(params.entryTime)\n\t\t\t&& Type.isDate(params.entryTime.from)\n\t\t\t&& Type.isDate(params.entryTime.to)\n\t\t)\n\t\t{\n\t\t\tthis.entry.setDateTimeValue(params.entryTime);\n\t\t}\n\n\t\tif (Type.isPlainObject(params.userSettings))\n\t\t{\n\t\t\tthis.userSettings = params.userSettings;\n\t\t}\n\n\t\tthis.locationFeatureEnabled = Boolean(params.locationFeatureEnabled);\n\t\tthis.locationList = Type.isArray(params.locationList)\n\t\t\t? params.locationList.filter((locationItem) => {\n\t\t\t\treturn locationItem.PERM.view_full;\n\t\t\t})\n\t\t\t: [];\n\n\t\tthis.roomsManager = params.roomsManager || null;\n\t\tthis.iblockMeetingRoomList = params.iblockMeetingRoomList || [];\n\n\t\tthis.plannerFeatureEnabled = Boolean(params.plannerFeatureEnabled);\n\n\t\tthis.setSections(params.sections, params.trackingUserList);\n\t}\n\n\tsetSections(sections, trackingUsersList = [])\n\t{\n\t\tthis.sections = sections;\n\t\tthis.trackingUsersList = trackingUsersList || [];\n\t\tthis.updateSectionIndex();\n\n\t\tif (this.entry.id)\n\t\t{\n\t\t\tconst section = this.getCurrentSection();\n\t\t\tthis.getSectionsForEditEvent(this.sections, section);\n\t\t}\n\t}\n\n\tprepareData(params = {})\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst section = this.getCurrentSection();\n\t\t\tif (section && section.canDo)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getCompactFormData', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tentryId: this.entry.id,\n\t\t\t\t\t\tloadSectionId: this.entry.sectionId,\n\t\t\t\t\t},\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response && response.data && response.data.section)\n\t\t\t\t\t{\n\t\t\t\t\t\t// todo: refactor this part to new Section entities\n\t\t\t\t\t\tthis.sections.push(new window.BXEventCalendar.Section(Util.getCalendarContext(), response.data.section));\n\t\t\t\t\t\tthis.setSections(this.sections);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tgetEntryCounter()\n\t{\n\t\tif (!this.DOM.entryCounter)\n\t\t{\n\t\t\tthis.DOM.entryCounter = Tag.render`\n\t\t\t\t<span class=\"calendar-event-invite-counter calendar-event-invite-counter-big\">1</span>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.entry.isInvited())\n\t\t{\n\t\t\tDom.removeClass(this.DOM.entryCounter, 'calendar-event-invite-counter-none');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.entryCounter, 'calendar-event-invite-counter-none');\n\t\t}\n\n\t\treturn this.DOM.entryCounter;\n\t}\n\n\tgetTitleControl()\n\t{\n\t\tthis.DOM.titleInput = Tag.render`\n\t\t\t<input class=\"calendar-field calendar-field-string --text-overflow-none\"\n\t\t\t\tvalue=\"\"\n\t\t\t\tplaceholder=\"${Loc.getMessage('EC_ENTRY_NAME')}\"\n\t\t\t\ttype=\"text\"\n\t\t\t/>\n\t\t`;\n\n\t\tthis.bindFade();\n\n\t\tEvent.bind(this.DOM.titleInput, 'keyup', this.checkForChangesDebounce);\n\t\tEvent.bind(this.DOM.titleInput, 'change', this.checkForChangesDebounce);\n\t\tEvent.bind(this.DOM.titleInput, 'keyup', this.updateEventNameInputTitle.bind(this));\n\t\tEvent.bind(this.DOM.titleInput, 'change', this.updateEventNameInputTitle.bind(this));\n\n\t\treturn this.DOM.titleInput;\n\t}\n\n\tbindFade()\n\t{\n\t\tlet isInputFocus = false;\n\n\t\tEvent.bind(this.DOM.titleInput, 'focusout', () => {\n\t\t\tif (this.DOM.titleInput.scrollWidth > this.DOM.titleInput.offsetWidth)\n\t\t\t{\n\t\t\t\tthis.getTitleFade().classList.add('--show');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getTitleFade().classList.remove('--show');\n\t\t\t}\n\t\t\tisInputFocus = false;\n\t\t});\n\n\t\tEvent.bind(this.DOM.titleInput, 'focus', () => {\n\t\t\tthis.getTitleFade().classList.remove('--show');\n\t\t\tisInputFocus = true;\n\t\t});\n\n\t\tEvent.bind(this.DOM.titleInput, 'scroll', () => {\n\t\t\tif (\n\t\t\t\tthis.DOM.titleInput.scrollWidth > this.DOM.titleInput.offsetWidth\n\t\t\t\t&& Math.ceil(this.DOM.titleInput.offsetWidth + this.DOM.titleInput.scrollLeft) < this.DOM.titleInput.scrollWidth\n\t\t\t\t&& !isInputFocus\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.getTitleFade().classList.add('--show');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getTitleFade().classList.remove('--show');\n\t\t\t}\n\t\t});\n\t}\n\n\tgetTitleFade()\n\t{\n\t\tif (!this.DOM.titleFade)\n\t\t{\n\t\t\tthis.DOM.titleFade = Tag.render`\n\t\t\t\t<div class=\"calendar-field-title-fade\"></div>\t\n\t\t\t`;\n\t\t}\n\n\t\treturn this.DOM.titleFade;\n\t}\n\n\tgetTitleControlLocation()\n\t{\n\t\tthis.DOM.titleInput = Tag.render`\n\t\t\t<input class=\"calendar-field calendar-field-string --text-overflow-none\"\n\t\t\t\tvalue=\"\"\n\t\t\t\tplaceholder=\"${Loc.getMessage('EC_ENTRY_NAME')}\"\n\t\t\t\ttype=\"text\"\n\t\t\t\treadonly\n\t\t\t/>\n\t\t`;\n\n\t\tthis.bindFade();\n\n\t\treturn this.DOM.titleInput;\n\t}\n\n\tgetHostControl()\n\t{\n\t\tconst userId = this.entry.data.CREATED_BY;\n\t\tconst userUrl = CompactEventForm.USER_URL.replace('#USER_ID#', userId);\n\t\tconst userAvatar = this.BX.Calendar.EntryManager.userIndex[userId]\n\t\t\t? this.BX.Calendar.EntryManager.userIndex[userId].AVATAR\n\t\t\t: ''\n\t\t;\n\n\t\tthis.DOM.hostBar = Tag.render`\n\t\t\t<div class=\"calendar-slider-detail-option-without-border\">\n\t\t\t\t<div class=\"calendar-slider-detail-option-block\">\n\t\t\t\t\t<div class=\"calendar-field-value\">\n\t\t\t\t\t\t${`${Loc.getMessage('EC_HOST')}: `}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class=\"calendar-field-location-host-img\">\n\t\t\t\t\t\t<a href=\"${userUrl}\">\n\t\t\t\t\t\t\t${this.renderAvatar(userAvatar)}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class=\"calendar-slider-detail-option-value\">\n\t\t\t\t\t\t<a href=\"${userUrl}\" class=\"calendar-slider-sidebar-user-info-name calendar-slider-sidebar-user-info-name-padding\">${BX.util.htmlspecialchars(this.entry.name)}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.DOM.hostBar;\n\t}\n\n\trenderAvatar(src)\n\t{\n\t\tconst avatarClassName = 'calendar-field-location-host-img-value';\n\n\t\tif (this.isAvatar(src))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<img class=\"${avatarClassName}\" src=\"${src}\" alt=\"\">\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-icon ui-icon-common-user ${avatarClassName}\"><i></i></div>\n\t\t`;\n\t}\n\n\tisAvatar(src)\n\t{\n\t\treturn Type.isStringFilled(src) && src !== '/bitrix/images/1.gif';\n\t}\n\n\tgetColorControl()\n\t{\n\t\tthis.DOM.colorSelect = Tag.render`<div class=\"calendar-field calendar-field-select calendar-field-tiny\"></div>`;\n\t\tthis.colorSelector = new ColorSelector({\n\t\t\twrap: this.DOM.colorSelect,\n\t\t\tmode: 'selector',\n\t\t});\n\n\t\tthis.colorSelector.subscribe('onChange', (event) => {\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tconst color = event.getData().value;\n\t\t\t\tif (\n\t\t\t\t\t!this.isNewEntry()\n\t\t\t\t\t&& (this.canDo('edit') || this.entry.getCurrentStatus() !== false)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updateColor', {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tentryId: this.entry.id,\n\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\tcolor,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tthis.entry.data.COLOR = color;\n\n\t\t\t\t\tthis.emit('doRefresh');\n\t\t\t\t\tthis.emitOnChange();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn this.DOM.colorSelect;\n\t}\n\n\tgetColorControlsLocationView()\n\t{\n\t\tthis.DOM.colorSelect = Tag.render`<div class=\"calendar-field calendar-field-select calendar-colorpicker-readonly calendar-field-tiny\"></div>`;\n\t\tthis.colorSelector = new ColorSelector({\n\t\t\twrap: this.DOM.colorSelect,\n\t\t\tmode: 'view',\n\t\t});\n\n\t\treturn this.DOM.colorSelect;\n\t}\n\n\tgetSectionControl(mode)\n\t{\n\t\tthis.DOM.sectionSelectWrap = Tag.render`<div class=\"calendar-field-choice-calendar\"></div>`;\n\t\tthis.sectionSelector = new SectionSelector({\n\t\t\touterWrap: this.DOM.sectionSelectWrap,\n\t\t\tdefaultCalendarType: this.type,\n\t\t\tdefaultOwnerId: this.ownerId,\n\t\t\tsectionList: Util.filterSectionsByContext(this.sections, {\n\t\t\t\tisCollabUser: this.isCollabUser,\n\t\t\t\tcalendarType: this.type,\n\t\t\t\tcalendarOwnerId: this.ownerId,\n\t\t\t}),\n\t\t\tsectionGroupList: SectionManager.getSectionGroupList({\n\t\t\t\ttype: this.type,\n\t\t\t\townerId: this.ownerId,\n\t\t\t\tuserId: this.userId,\n\t\t\t\ttrackingUsersList: this.trackingUsersList,\n\t\t\t\tisCollabUser: this.isCollabUser,\n\t\t\t\tisCollabContext: this.getCurrentSection().isCollab(),\n\t\t\t}),\n\t\t\tmode,\n\t\t\tzIndex: this.zIndex,\n\t\t\tgetCurrentSection: () => {\n\t\t\t\tconst section = this.getCurrentSection();\n\t\t\t\tif (section)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: section.id,\n\t\t\t\t\t\tname: section.name,\n\t\t\t\t\t\tcolor: section.color,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tselectCallback: (sectionValue) => {\n\t\t\t\tif (sectionValue)\n\t\t\t\t{\n\t\t\t\t\tif (this.colorSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.colorSelector.setValue(sectionValue.color);\n\t\t\t\t\t}\n\t\t\t\t\tthis.sectionValue = sectionValue.id;\n\t\t\t\t\tthis.checkForChangesDebounce();\n\n\t\t\t\t\tSectionManager.saveDefaultSectionId(this.sectionValue);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\treturn this.DOM.sectionSelectWrap;\n\t}\n\n\tgetDateTimeControl()\n\t{\n\t\tthis.DOM.dateTimeWrap = Tag.render`<div class=\"calendar-field-container calendar-field-container-datetime\"></div>`;\n\n\t\tthis.dateTimeControl = new DateTimeControl(null, {\n\t\t\tshowTimezone: false,\n\t\t\touterWrap: this.DOM.dateTimeWrap,\n\t\t\tinlineEditMode: true,\n\t\t});\n\n\t\tthis.dateTimeControl.subscribe('onSetValue', () => {\n\t\t\tthis.excludedUsers = [];\n\t\t});\n\n\t\tthis.dateTimeControl.subscribe('onChange', (event) => {\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tconst value = event.getData().value;\n\t\t\t\tif (this.remindersControl)\n\t\t\t\t{\n\t\t\t\t\tthis.remindersControl.setFullDayMode(value.fullDay);\n\n\t\t\t\t\tif (this.isNewEntry() && !this.remindersControl.wasChangedByUser())\n\t\t\t\t\t{\n\t\t\t\t\t\tconst defaultReminders = EntryManager.getNewEntryReminders(\n\t\t\t\t\t\t\tvalue.fullDay ? 'fullDay' : 'withTime',\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis.remindersControl.setValue(defaultReminders, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.userPlannerSelector)\n\t\t\t\t{\n\t\t\t\t\tif (!this.userPlannerSelector.isPlannerDisplayed())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userPlannerSelector.showPlanner();\n\t\t\t\t\t\tthis.userPlannerSelector.refreshPlannerStateDebounce();\n\t\t\t\t\t}\n\t\t\t\t\tthis.userPlannerSelector.setLocationValue(this.locationSelector.getTextValue());\n\t\t\t\t\tthis.userPlannerSelector.setDateTime(value, true);\n\t\t\t\t}\n\n\t\t\t\tif (this.locationSelector)\n\t\t\t\t{\n\t\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfrom: event.getData().value.from,\n\t\t\t\t\t\t\tto: event.getData().value.to,\n\t\t\t\t\t\t\tfullDay: event.getData().value.fullDay,\n\t\t\t\t\t\t\tcurrentEventId: this.entry.parentId,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.checkForChangesDebounce();\n\t\t\t}\n\t\t});\n\n\t\treturn this.DOM.dateTimeWrap;\n\t}\n\n\tgetUserPlannerSelector()\n\t{\n\t\tthis.DOM.userPlannerSelectorOuterWrap = Tag.render`<div>\n\t\t\t<div class=\"calendar-field-container calendar-field-container-members\">\n\t\t\t\t${this.DOM.userSelectorWrap = Tag.render`\n\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t<div class=\"calendar-members-selected\">\n\t\t\t\t\t\t<span class=\"calendar-attendees-label\"></span>\n\t\t\t\t\t\t<span class=\"calendar-attendees-list\"></span>\n\t\t\t\t\t\t<span class=\"calendar-members-more\">${Loc.getMessage('EC_ATTENDEES_MORE')}</span>\n\t\t\t\t\t\t<span class=\"calendar-members-change-link\">${Loc.getMessage('EC_SEC_SLIDER_CHANGE')}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`}\n\t\t\t\t<span class=\"calendar-videocall-wrap calendar-videocall-hidden\"></span>\n\t\t\t\t${this.DOM.informWrap = Tag.render`\n\t\t\t\t<div class=\"calendar-field-container-inform\">\n\t\t\t\t\t<span class=\"calendar-field-container-inform-text\">${Loc.getMessage('EC_NOTIFY_OPTION')}</span>\n\t\t\t\t</div>`}\n\t\t\t</div>\n\t\t\t<div class=\"calendar-user-selector-wrap\"></div>\n\t\t\t<div class=\"calendar-add-popup-planner-wrap calendar-add-popup-show-planner\">\n\t\t\t\t${this.DOM.plannerOuterWrap = Tag.render`\n\t\t\t\t<div class=\"calendar-planner-wrapper\" style=\"height: 0\">\n\t\t\t\t</div>`}\n\t\t\t</div>\n\t\t\t${this.DOM.hideGuestsWrap = Tag.render`\n\t\t\t<div class=\"calendar-hide-members-container\" style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-hide-members-container-inner\">\n\t\t\t\t\t<div class=\"calendar-hide-members-icon-hidden\"></div>\n\t\t\t\t\t<div class=\"calendar-hide-members-text\">${Loc.getMessage('EC_HIDE_GUEST_NAMES')}</div>\n\t\t\t\t\t<span class=\"calendar-hide-members-helper\" data-hint=\"${Loc.getMessage('EC_HIDE_GUEST_NAMES_HINT')}\"></span>\n\t\t\t\t</div>\n\t\t\t</div>`}\n\t\t<div>`;\n\n\t\tthis.userPlannerSelector = new UserPlannerSelector({\n\t\t\tplannerReadOnly: !this.canDo('editUserPlannerSelector'),\n\t\t\touterWrap: this.DOM.userPlannerSelectorOuterWrap,\n\t\t\twrap: this.DOM.userSelectorWrap,\n\t\t\tinformWrap: this.DOM.informWrap,\n\t\t\tplannerOuterWrap: this.DOM.plannerOuterWrap,\n\t\t\thideGuestsWrap: this.DOM.hideGuestsWrap,\n\t\t\treadOnlyMode: false,\n\t\t\tuserId: this.userId,\n\t\t\ttype: this.type,\n\t\t\townerId: this.ownerId,\n\t\t\tzIndex: this.zIndex + 10,\n\t\t\tplannerFeatureEnabled: this.plannerFeatureEnabled,\n\t\t\tisEditableSharingEvent: this.shouldShowFakeUserControl(),\n\t\t\topenEditFormCallback: () => {\n\t\t\t\tthis.editEntryInSlider('userSelector');\n\t\t\t},\n\t\t});\n\n\t\tthis.userPlannerSelector.subscribe('onDateChange', this.handlePlannerSelectorChanges.bind(this));\n\t\tthis.userPlannerSelector.subscribe('onNotifyChange', this.checkForChangesDebounce);\n\t\tthis.userPlannerSelector.subscribe('onUserCodesChange', this.checkForChangesDebounce);\n\n\t\treturn this.DOM.userPlannerSelectorOuterWrap;\n\t}\n\n\tgetRelationControl(): HTMLElement\n\t{\n\t\tthis.DOM.relationWrap = null;\n\t\tif (\n\t\t\tthis.canDo('viewFull')\n\t\t\t&& ['#shared_crm#', '#booking#'].includes(this.entry?.data?.EVENT_TYPE)\n\t\t)\n\t\t{\n\t\t\tthis.DOM.relationWrap = Tag.render`<div class=\"calendar-field-container-relations\"></div>`;\n\t\t\tthis.relationControl = new RelationInterface({\n\t\t\t\tparentNode: this.DOM.relationWrap,\n\t\t\t\teventId: this.entry.parentId,\n\t\t\t});\n\t\t\tDom.append(this.relationControl.render(), this.DOM.relationWrap);\n\t\t}\n\n\t\treturn this.DOM.relationWrap;\n\t}\n\n\tgetLocationControl()\n\t{\n\t\tthis.DOM.locationWrap = Tag.render`<div class=\"calendar-field-place\"></div>`;\n\n\t\tthis.locationSelector = new Location(\n\t\t\t{\n\t\t\t\twrap: this.DOM.locationWrap,\n\t\t\t\treadOnly: !this.canDo('edit'),\n\t\t\t\trichLocationEnabled: this.locationFeatureEnabled,\n\t\t\t\thideLocationLock: this.isCollabUser,\n\t\t\t\tlocationList: this.locationList || [],\n\t\t\t\troomsManager: this.roomsManager || null,\n\t\t\t\tlocationAccess: this.locationAccess || false,\n\t\t\t\tiblockMeetingRoomList: this.iblockMeetingRoomList || [],\n\t\t\t\tinlineEditModeEnabled: !this.isLocationCalendar,\n\t\t\t\tonChangeCallback: () => {\n\t\t\t\t\tif (this.userPlannerSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userPlannerSelector.setLocationValue(this.locationSelector.getTextValue());\n\t\t\t\t\t\tif (this.locationSelector.getValue().type !== undefined\n\t\t\t\t\t\t\t&& !this.userPlannerSelector.isPlannerDisplayed())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.userPlannerSelector.showPlanner();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.userPlannerSelector.refreshPlannerStateDebounce();\n\t\t\t\t\t}\n\t\t\t\t\tthis.checkForChangesDebounce();\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\tconst locationName = this.locationSelector.getTextLocation(Location.parseStringValue(this.entry.getLocation()));\n\t\tthis.DOM.editLocationInFullForm = Tag.render`\n\t\t\t<div class=\"calendar-field-place-link\">\n\t\t\t\t<span class=\"calendar-text-link\">\n\t\t\t\t\t${BX.util.htmlspecialchars(locationName) || Loc.getMessage('EC_REMIND1_ADD')}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\t\tEvent.bind(this.DOM.editLocationInFullForm, 'click', () => this.editEntryInSlider('location'));\n\t\tDom.style(this.DOM.editLocationInFullForm, 'display', this.shouldShowFakeLocationControl() ? '' : 'none');\n\n\t\tthis.DOM.locationOuterWrap = Tag.render`\n\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t<div class=\"calendar-field-title calendar-field-title-align-top\">${Loc.getMessage('EC_LOCATION_LABEL')}:</div>\n\t\t\t\t${this.DOM.locationWrap}\n\t\t\t\t${this.DOM.editLocationInFullForm}\n\t\t\t</div>\n\t\t`;\n\n\t\tif (this.userPlannerSelector)\n\t\t{\n\t\t\tthis.userPlannerSelector.subscribe('onDisplayAttendees', this.checkLocationForm.bind(this));\n\t\t\tthis.userPlannerSelector.planner?.subscribe('onDisplayAttendees', this.checkLocationForm.bind(this));\n\t\t}\n\n\t\treturn this.DOM.locationOuterWrap;\n\t}\n\n\tcreateRemindersControl()\n\t{\n\t\tthis.reminderValues = [];\n\t\tthis.DOM.remindersWrap = Tag.render`<div class=\"calendar-text\"></div>`;\n\t\tthis.remindersControl = new Reminder({\n\t\t\twrap: this.DOM.remindersWrap,\n\t\t\tzIndex: this.zIndex,\n\t\t});\n\n\t\tthis.remindersControl.subscribe('onChange', (event) => {\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\tif (!this.isNewEntry()\n\t\t\t\t\t&& (this.canDo('edit')\n\t\t\t\t\t\t|| this.entry.getCurrentStatus() !== false))\n\t\t\t\t{\n\t\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updateReminders', {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tentryId: this.entry.id,\n\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\treminders: this.reminderValues,\n\t\t\t\t\t\t},\n\t\t\t\t\t}).then((response) => {\n\t\t\t\t\t\tthis.entry.data.REMIND = response.data.REMIND;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn this.DOM.remindersWrap;\n\t}\n\n\tgetTypeInfoControl()\n\t{\n\t\tthis.DOM.typeInfoTitle = Tag.render`<div class=\"calendar-field-title\"></div>`;\n\t\tthis.DOM.typeInfoLink = Tag.render`<div class=\"calendar-field-link\"></div>`;\n\n\t\tthis.DOM.typeInfoWrap = Tag.render`\n\t\t\t<div class=\"calendar-field-block\" style=\"display: none\">\n\t\t\t\t${this.DOM.typeInfoTitle}\n\t\t\t\t${this.DOM.typeInfoLink}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.DOM.typeInfoWrap;\n\t}\n\n\tgetRRuleInfoControl()\n\t{\n\t\tthis.DOM.rruleInfo = Tag.render`<div class=\"calendar-text\"></div>`;\n\t\tthis.DOM.rruleInfoWrap = Tag.render`\n\t\t\t<div class=\"calendar-field-block\" style=\"display: none\">\n\t\t\t\t<div class=\"calendar-field-title\">${Loc.getMessage('EC_REPEAT')}:</div>\n\t\t\t\t${this.DOM.rruleInfo}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.DOM.rruleInfoWrap;\n\t}\n\n\tgetTimezoneInfoControl()\n\t{\n\t\tthis.DOM.timezoneInfo = Tag.render`<div class=\"calendar-text\"></div>`;\n\t\tthis.DOM.timezoneInfoWrap = Tag.render`\n\t\t\t<div class=\"calendar-field-block\" style=\"display: none\">\n\t\t\t\t<div class=\"calendar-field-title\">${Loc.getMessage('EC_TIMEZONE')}:</div>\n\t\t\t\t${this.DOM.timezoneInfo}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.DOM.timezoneInfoWrap;\n\t}\n\n\tisNewEntry()\n\t{\n\t\treturn !this.entry.id;\n\t}\n\n\tcanDo(action)\n\t{\n\t\tconst section = this.getCurrentSection();\n\n\t\tif (action === 'edit' || action === 'delete')\n\t\t{\n\t\t\tif ((this.entry.isMeeting() && this.entry.id !== this.entry.parentId))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.entry.isResourcebooking())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.isNewEntry() && this.isCollabUser && !this.entry?.permissions.edit)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn section.canDo('edit');\n\t\t}\n\n\t\tif (action === 'view')\n\t\t{\n\t\t\tif (this.entry.permissions && Type.isBoolean(this.entry.permissions.view_time))\n\t\t\t{\n\t\t\t\treturn this.entry.permissions.view_time === true;\n\t\t\t}\n\n\t\t\treturn section.canDo('view_time');\n\t\t}\n\n\t\tif (action === 'viewFull')\n\t\t{\n\t\t\tif (this.entry.permissions && Type.isBoolean(this.entry.permissions.view_full))\n\t\t\t{\n\t\t\t\treturn this.entry.permissions.view_full === true;\n\t\t\t}\n\n\t\t\treturn section.canDo('view_full');\n\t\t}\n\n\t\tif (action === 'release')\n\t\t{\n\t\t\treturn section.canDo('access');\n\t\t}\n\n\t\tconst isInvitedOrRejected = ['Q', 'N'].includes(this.entry.getCurrentStatus());\n\t\tif (action === 'editLocation')\n\t\t{\n\t\t\tconst canEdit = this.entry.permissions?.edit === true;\n\t\t\tconst canEditLocation = this.entry.permissions?.edit_location === true;\n\n\t\t\treturn this.isNewEntry() || !isInvitedOrRejected && (canEdit || canEditLocation);\n\t\t}\n\n\t\tif (action === 'editAttendees')\n\t\t{\n\t\t\tconst canEdit = this.entry.permissions?.edit === true;\n\t\t\tconst canEditAttendees = this.entry.permissions?.edit_attendees === true;\n\n\t\t\treturn this.isNewEntry() || !isInvitedOrRejected && (canEdit || canEditAttendees);\n\t\t}\n\n\t\tif (action === 'editUserPlannerSelector')\n\t\t{\n\t\t\treturn this.isNewEntry() || this.entry.permissions?.edit === true;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tsetFormValues()\n\t{\n\t\tconst entry = this.entry;\n\t\tconst section = this.getCurrentSection();\n\t\tconst readOnly = !this.canDo('edit');\n\n\t\t// Date time\n\t\tthis.dateTimeControl.setValue({\n\t\t\tfrom: Util.adjustDateForTimezoneOffset(entry.from, entry.userTimezoneOffsetFrom, entry.fullDay),\n\t\t\tto: Util.adjustDateForTimezoneOffset(entry.to, entry.userTimezoneOffsetTo, entry.fullDay),\n\t\t\tfullDay: entry.fullDay,\n\t\t\ttimezoneFrom: entry.getTimezoneFrom() || '',\n\t\t\ttimezoneTo: entry.getTimezoneTo() || '',\n\t\t\ttimezoneName: this.userSettings.timezoneName,\n\t\t});\n\t\tthis.dateTimeControl.setInlineEditMode(this.isNewEntry() ? 'edit' : 'view');\n\t\tthis.dateTimeControl.setViewMode(readOnly);\n\n\t\t// Title\n\t\tthis.setEventNameInputValue(entry.getName());\n\n\t\tif (readOnly)\n\t\t{\n\t\t\tDom.attr(this.DOM.titleInput, 'readonly', 'readonly');\n\t\t}\n\n\t\t// Color\n\t\tthis.colorSelector.setValue(entry.getColor() || section.color, false);\n\t\tthis.colorSelector.setViewMode(readOnly && this.entry.getCurrentStatus() === false);\n\n\t\t// Section\n\t\tthis.sectionValue = this.getCurrentSectionId();\n\t\tthis.sectionSelector.updateValue();\n\t\tif ((this.isSyncSection(section) || entry.isSharingEvent()) && entry.id)\n\t\t{\n\t\t\tthis.sectionSelector.setViewMode(true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.sectionSelector.setViewMode(readOnly);\n\t\t}\n\n\t\t// Reminders\n\t\tthis.remindersControl.setValue(entry.getReminders(), false);\n\t\tthis.remindersControl.setViewMode(readOnly && this.entry.getCurrentStatus() === false);\n\t\tif (readOnly && this.entry.getCurrentStatus() === false)\n\t\t{\n\t\t\tthis.DOM.remindersOuterWrap.style.display = 'none';\n\t\t}\n\n\t\t// Recurcion\n\t\tif (entry.isRecursive())\n\t\t{\n\t\t\tthis.DOM.rruleInfoWrap.style = '';\n\t\t\tDom.adjust(this.DOM.rruleInfo, { text: entry.getRRuleDescription() });\n\t\t}\n\n\t\t// Location\n\t\tconst readOnlyLocation = !this.canDo('editLocation');\n\t\tlet location = entry.getLocation();\n\n\t\tDom.style(this.DOM.editLocationInFullForm, 'display', 'none');\n\t\tDom.style(this.DOM.locationWrap, 'display', '');\n\t\tDom.style(this.DOM.locationOuterWrap, 'display', '');\n\n\t\tif (this.shouldShowFakeLocationControl())\n\t\t{\n\t\t\tDom.style(this.DOM.editLocationInFullForm, 'display', '');\n\t\t\tDom.style(this.DOM.locationWrap, 'display', 'none');\n\t\t}\n\t\telse if (readOnlyLocation && !location)\n\t\t{\n\t\t\tDom.style(this.DOM.locationOuterWrap, 'display', 'none');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.locationSelector.setViewMode(readOnlyLocation);\n\t\t\tif (this.isLocationCalendar)\n\t\t\t{\n\t\t\t\tthis.locationSelector.setValue(this.locationSelector.default);\n\t\t\t\tlocation = this.locationSelector.default;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.locationOuterWrap.style.display = '';\n\t\t\t\tthis.locationSelector.setValue(entry.getLocation());\n\t\t\t}\n\t\t}\n\n\t\tif (this.locationSelector)\n\t\t{\n\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t{\n\t\t\t\t\tfrom: this.dateTimeControl.getValue().from,\n\t\t\t\t\tto: this.dateTimeControl.getValue().to,\n\t\t\t\t\tfullDay: this.dateTimeControl.getValue().fullDay,\n\t\t\t\t\tcurrentEventId: this.entry.parentId,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\t// User Planner Selector\n\t\tif (\n\t\t\tthis.userPlannerSelector\n\t\t\t&& (this.canDo('viewFull') || entry.getCurrentStatus() !== false)\n\t\t)\n\t\t{\n\t\t\tthis.userPlannerSelector.setValue({\n\t\t\t\tattendeesEntityList: entry.getAttendeesEntityList(),\n\t\t\t\tlocation,\n\t\t\t\tattendees: entry.getAttendees(),\n\t\t\t\tnotify: !entry.isMeeting() || entry.getMeetingNotify(),\n\t\t\t\tviewMode: this.getMode() === CompactEventForm.VIEW_MODE,\n\t\t\t\tentry,\n\t\t\t\thideGuests: entry.getHideGuests(),\n\t\t\t\tattendeesUndeselectedItems: this.getUndeselectedItems(),\n\t\t\t});\n\t\t\tthis.userPlannerSelector.setDateTime(this.dateTimeControl.getValue());\n\t\t\tconst readOnlyUserPlanner = !this.canDo('editAttendees');\n\t\t\tif (readOnlyUserPlanner)\n\t\t\t{\n\t\t\t\tthis.userPlannerSelector.setViewMode(readOnlyUserPlanner);\n\t\t\t}\n\n\t\t\tif (this.shouldShowFakeUserControl())\n\t\t\t{\n\t\t\t\tthis.userPlannerSelector.setEditableSharingEventMode();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.remove(this.DOM.userPlannerSelectorOuterWrap);\n\t\t}\n\n\t\tif (!this.canDo('edit') && this.canDo('editAttendees'))\n\t\t{\n\t\t\tthis.userPlannerSelector.setCanEditAttendeesMode();\n\t\t}\n\n\t\tlet hideInfoContainer = true;\n\t\tthis.DOM.infoContainer = this.DOM.wrap.querySelector('.calendar-field-container-info');\n\t\tfor (let i = 0; i <= this.DOM.infoContainer.childNodes.length; i++)\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isElementNode(this.DOM.infoContainer.childNodes[i])\n\t\t\t\t&& this.DOM.infoContainer.childNodes[i].style.display !== 'none'\n\t\t\t)\n\t\t\t{\n\t\t\t\thideInfoContainer = false;\n\t\t\t}\n\t\t}\n\n\t\tif (hideInfoContainer)\n\t\t{\n\t\t\tthis.DOM.infoContainer.style.display = 'none';\n\t\t}\n\t}\n\n\tshouldShowFakeLocationControl()\n\t{\n\t\tif (this.entry.isSharingEvent())\n\t\t{\n\t\t\treturn this.canDo('editLocation')\n\t\t\t\t&& (\n\t\t\t\t\tthis.entry.permissions?.edit\n\t\t\t\t\t|| this.entry.permissions?.edit_location\n\t\t\t\t\t|| this.canDo('edit')\n\t\t\t\t)\n\t\t\t;\n\t\t}\n\n\t\treturn this.canDo('editLocation') && !this.canDo('edit');\n\t}\n\n\tshouldShowFakeUserControl(): boolean\n\t{\n\t\tif (this.entry.isSharingEvent())\n\t\t{\n\t\t\treturn this.canDo('editAttendees')\n\t\t\t\t&& (\n\t\t\t\t\tthis.entry.permissions?.edit\n\t\t\t\t\t|| this.entry.permissions?.edit_attendees\n\t\t\t\t\t|| this.canDo('edit')\n\t\t\t\t)\n\t\t\t;\n\t\t}\n\n\t\treturn this.canDo('editAttendees') && !this.canDo('edit');\n\t}\n\n\tsetEventNameInputValue(name: string)\n\t{\n\t\tthis.DOM.titleInput.value = name;\n\t}\n\n\tsetFormValuesLocation()\n\t{\n\t\tconst entry = this.entry;\n\t\tconst section = this.getCurrentSection();\n\t\tconst readOnly = true;\n\n\t\t// Date time\n\t\tthis.dateTimeControl.setValue({\n\t\t\tfrom: Util.adjustDateForTimezoneOffset(entry.from, entry.userTimezoneOffsetFrom, entry.fullDay),\n\t\t\tto: Util.adjustDateForTimezoneOffset(entry.to, entry.userTimezoneOffsetTo, entry.fullDay),\n\t\t\tfullDay: entry.fullDay,\n\t\t\ttimezoneFrom: entry.getTimezoneFrom() || '',\n\t\t\ttimezoneTo: entry.getTimezoneTo() || '',\n\t\t\ttimezoneName: this.userSettings.timezoneName,\n\t\t});\n\t\tthis.dateTimeControl.setInlineEditMode(this.isNewEntry() ? 'edit' : 'view');\n\t\tthis.dateTimeControl.setViewMode(readOnly);\n\n\t\t// Title\n\t\tlet name = '';\n\t\tif (this.entry.id === this.entry.parentId)\n\t\t{\n\t\t\tname = Loc.getMessage('CALENDAR_UPDATE');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tname = `${section.name}: ${BX.util.htmlspecialchars(entry.getName())}`;\n\t\t}\n\t\tthis.setEventNameInputValue(name);\n\n\t\t// Color\n\t\tthis.colorSelector.setValue(entry.getColor() || section.color, false);\n\t\tthis.colorSelector.setViewMode(!readOnly);\n\n\t\t// Section\n\t\tthis.sectionValue = this.getCurrentSectionId();\n\t\tthis.sectionSelector.updateValue();\n\t\tthis.sectionSelector.setViewMode(readOnly);\n\t}\n\n\tsave(options = {}): boolean\n\t{\n\t\tif (this.state === this.STATE.REQUEST)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst entry = this.getCurrentEntry();\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tif (\n\t\t\t!this.userSettings.sendFromEmail\n\t\t\t&& this.userPlannerSelector.hasExternalEmailUsers()\n\t\t\t&& !options.emailConfirmDialogShown\n\t\t)\n\t\t{\n\t\t\tEntryManager.showConfirmedEmailDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.emailConfirmDialogShown = true;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\t!this.isNewEntry()\n\t\t\t&& entry.isRecursive()\n\t\t\t&& !options.confirmed\n\t\t\t&& this.getFormDataChanges(['section', 'notify']).length > 0\n\t\t)\n\t\t{\n\t\t\tEntryManager.showConfirmEditDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.recursionMode = (entry.isFirstInstance() && params.recursionMode === 'next')\n\t\t\t\t\t\t? 'all'\n\t\t\t\t\t\t: params.recursionMode;\n\t\t\t\t\toptions.confirmed = true;\n\t\t\t\t\tthis.lastUsedSaveOptions = options;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\t!this.isNewEntry()\n\t\t\t&& entry.isMeeting()\n\t\t\t&& options.sendInvitesAgain === undefined\n\t\t\t&& this.getFormDataChanges().includes('date&time')\n\t\t\t&& entry.getAttendees().find((item) => {\n\t\t\t\treturn item.STATUS === 'N';\n\t\t\t})\n\t\t)\n\t\t{\n\t\t\tEntryManager.showReInviteUsersDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.sendInvitesAgain = params.sendInvitesAgain;\n\t\t\t\t\tthis.lastUsedSaveOptions = options;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\t!this.isNewEntry()\n\t\t\t&& entry.isRecursive()\n\t\t\t&& !options.confirmed\n\t\t\t&& this.getFormDataChanges().includes('section')\n\t\t)\n\t\t{\n\t\t\toptions.recursionMode = entry.isFirstInstance() ? 'all' : 'next';\n\t\t}\n\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\tconst data = {\n\t\t\tid: entry.id,\n\t\t\tsection: this.sectionValue,\n\t\t\tname: this.DOM.titleInput.value,\n\t\t\tdesc: entry.getDescription(),\n\t\t\treminder: this.remindersControl.getSelectedValues(),\n\t\t\tdate_from: dateTime.fromDate,\n\t\t\tdate_to: dateTime.toDate,\n\t\t\tskip_time: dateTime.fullDay ? 'Y' : 'N',\n\t\t\ttime_from: Util.formatTime(\n\t\t\t\tUtil.adjustDateForTimezoneOffset(dateTime.from, -entry.userTimezoneOffsetFrom, dateTime.fullDay)\n\t\t\t),\n\t\t\ttime_to: Util.formatTime(\n\t\t\t\tUtil.adjustDateForTimezoneOffset(dateTime.to, -entry.userTimezoneOffsetTo, dateTime.fullDay)\n\t\t\t),\n\t\t\tlocation: this.locationSelector.getTextValue(),\n\t\t\ttz_from: entry.getTimezoneFrom(),\n\t\t\ttz_to: entry.getTimezoneTo(),\n\t\t\tmeeting_notify: this.userPlannerSelector.getInformValue() ? 'Y' : 'N',\n\t\t\tmeeting_host: entry.data.MEETING_HOST || '0',\n\t\t\tchat_id: entry.data.MEETING\n\t\t\t\t? entry.data.MEETING.CHAT_ID\n\t\t\t\t: 0,\n\t\t\texclude_users: (this.excludedUsers || []).map((user) => user.ID).join(','),\n\t\t\tattendeesEntityList: this.userPlannerSelector.getEntityList(),\n\t\t\tsendInvitesAgain: options.sendInvitesAgain ? 'Y' : 'N',\n\t\t\thide_guests: this.userPlannerSelector.hideGuests ? 'Y' : 'N',\n\t\t\trequestUid: BX.Calendar.Util.registerRequestId(),\n\t\t\tprivate_event: entry.isPrivate() ? 'Y' : 'N',\n\t\t};\n\n\t\tlet checkCurrentUsersAccessibility = !entry.id || this.checkCurrentUsersAccessibility();\n\t\tif (\n\t\t\t!checkCurrentUsersAccessibility\n\t\t\t&& this.getFormDataChanges().includes('codes')\n\t\t)\n\t\t{\n\t\t\tconst previousAttendeesList = entry.getAttendeesEntityList();\n\t\t\tconst newAttendeesList = [];\n\t\t\tdata.attendeesEntityList.forEach((entity) => {\n\t\t\t\tif (!previousAttendeesList.find((item) => {\n\t\t\t\t\treturn entity.entityId === item.entityId\n\t\t\t\t\t\t&& parseInt(entity.id) === parseInt(item.id);\n\t\t\t\t}))\n\t\t\t\t{\n\t\t\t\t\tif (entity.entityId === 'user')\n\t\t\t\t\t{\n\t\t\t\t\t\tnewAttendeesList.push(entity.id);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcheckCurrentUsersAccessibility = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tdata.newAttendeesList = newAttendeesList;\n\t\t}\n\t\tdata.checkCurrentUsersAccessibility = checkCurrentUsersAccessibility ? 'Y' : 'N';\n\n\t\tdata.doCheckOccupancy = options.doCheckOccupancy === false ? 'N' : 'Y';\n\n\t\tif (entry.id && entry.isRecursive())\n\t\t{\n\t\t\tdata.EVENT_RRULE = entry.data.RRULE;\n\t\t}\n\n\t\tif (options.recursionMode)\n\t\t{\n\t\t\tdata.rec_edit_mode = options.recursionMode;\n\t\t\tdata.current_date_from = Util.formatDate(entry.from);\n\t\t}\n\n\t\tif (this.getCurrentSection().color.toLowerCase() !== this.colorSelector.getValue().toLowerCase())\n\t\t{\n\t\t\tdata.color = this.colorSelector.getValue();\n\t\t}\n\n\t\tif (this.analyticsSubSection)\n\t\t{\n\t\t\tdata.analyticsSubSection = this.analyticsSubSection;\n\t\t}\n\n\t\tthis.state = this.STATE.REQUEST;\n\n\t\tthis.freezePopup();\n\t\tthis.BX.ajax.runAction('calendar.api.calendarentryajax.editEntry', { data })\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif (this.isLocationCalendar && this.roomsManager)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.roomsManager.unsetHiddenRoom(Location.parseStringValue(data.location).room_id);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.excludedUsers)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.excludedUsers = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t// unset section from hidden\n\t\t\t\t\tconst section = this.getCurrentSection();\n\t\t\t\t\tif (section && !section.isShown())\n\t\t\t\t\t{\n\t\t\t\t\t\tsection.show();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.unfreezePopup();\n\t\t\t\t\tthis.state = this.STATE.READY;\n\t\t\t\t\tif (response.data.entryId)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (entry.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tEntryManager.showEditEntryNotification(response.data.entryId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tEntryManager.showNewEntryNotification(response.data.entryId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.emit('onSave', new BaseEvent({\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tresponseData: response.data,\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t},\n\t\t\t\t\t}));\n\t\t\t\t\tthis.close();\n\n\t\t\t\t\tif (Type.isArray(response.data.eventList)\n\t\t\t\t\t\t&& response.data.eventList.length > 0\n\t\t\t\t\t\t&& response.data.eventList[0].REMIND\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.setNewEntryReminders(\n\t\t\t\t\t\t\tdateTime.fullDay ? 'fullDay' : 'withTime',\n\t\t\t\t\t\t\tresponse.data.eventList[0].REMIND,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.unfreezePopup();\n\n\t\t\t\t\tconst errors = [];\n\t\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\terror.code !== 'edit_entry_user_busy'\n\t\t\t\t\t\t\t&& error.code !== 'edit_entry_location_repeat_busy'\n\t\t\t\t\t\t\t&& error.code !== 'edit_entry_location_busy_recurrence'\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terrors.push(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (error.code === 'edit_entry_location_repeat_busy')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showLocationRepeatBusyErrorPopup(error.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tresponse.errors = errors;\n\n\t\t\t\t\tif (response.data && Type.isPlainObject(response.data.busyUsersList))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.handleBusyUsersError(response.data.busyUsersList);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (response.errors && response.errors.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showError(response.errors);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.state = this.STATE.ERROR;\n\t\t\t\t},\n\t\t\t);\n\n\t\treturn true;\n\t}\n\n\tshowLocationRepeatBusyErrorPopup(message)\n\t{\n\t\tif (!this.DOM.locationRepeatBusyErrorPopup)\n\t\t{\n\t\t\tthis.DOM.locationRepeatBusyErrorPopup = EntryManager.getLocationRepeatBusyErrorPopup({\n\t\t\t\tmessage,\n\t\t\t\tonYesCallback: () => {\n\t\t\t\t\tthis.lastUsedSaveOptions.doCheckOccupancy = false;\n\t\t\t\t\tthis.save(this.lastUsedSaveOptions);\n\t\t\t\t\tthis.lastUsedSaveOptions = {};\n\t\t\t\t\tthis.DOM.locationRepeatBusyErrorPopup.close();\n\t\t\t\t},\n\t\t\t\tonCancelCallback: () => {\n\t\t\t\t\tthis.DOM.locationRepeatBusyErrorPopup.close();\n\t\t\t\t},\n\t\t\t\tonPopupCloseCallback: () => {\n\t\t\t\t\tdelete this.DOM.locationRepeatBusyErrorPopup;\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.DOM.locationRepeatBusyErrorPopup.show();\n\t\t}\n\t}\n\n\thandleBusyUsersError(busyUsers)\n\t{\n\t\tconst users = [];\n\n\t\tfor (const id in busyUsers)\n\t\t{\n\t\t\tif (busyUsers.hasOwnProperty(id))\n\t\t\t{\n\t\t\t\tusers.push(busyUsers[id]);\n\t\t\t}\n\t\t}\n\n\t\tthis.busyUsersDialog = new BusyUsersDialog();\n\n\t\tthis.busyUsersDialog.subscribe('onContinueEditing', () => {\n\t\t\tthis.excludedUsers = [];\n\t\t});\n\n\t\tthis.busyUsersDialog.subscribe('onSaveWithout', () => {\n\t\t\tthis.excludedUsers.push(...users);\n\t\t\tthis.save();\n\t\t});\n\n\t\tthis.busyUsersDialog.show({ users });\n\t}\n\n\thandleKeyPress(e)\n\t{\n\t\tif (\n\t\t\tthis.getMode() === CompactEventForm.EDIT_MODE\n\t\t\t&& e.keyCode === Util.getKeyCode('enter')\n\t\t\t&& (e.ctrlKey || e.metaKey) && !e.altKey\n\t\t\t&& !this.isAdditionalPopupShown()\n\t\t\t&& !this.isCoveredByTopSlider()\n\t\t)\n\t\t{\n\t\t\tif (this.busyUsersDialog && this.busyUsersDialog.isShown())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\tthis.locationSelector.selectContol.onChangeCallback();\n\t\t\tthis.save();\n\t\t}\n\t\telse if (\n\t\t\tthis.checkTopSlider()\n\t\t\t&& e.keyCode === Util.getKeyCode('escape')\n\t\t\t&& e.type === 'keyup'\n\t\t\t&& this.couldBeClosedByEsc()\n\t\t)\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t\telse if (\n\t\t\te.keyCode === Util.getKeyCode('delete')\n\t\t\t&& !this.isNewEntry()\n\t\t\t&& !this.isCoveredByTopSlider()\n\t\t\t&& this.canDo('delete')\n\t\t)\n\t\t{\n\t\t\tconst target = event.target || event.srcElement;\n\t\t\tconst tagName = Type.isElementNode(target) ? target.tagName.toLowerCase() : null;\n\t\t\tif (tagName && !['input', 'textarea'].includes(tagName))\n\t\t\t{\n\t\t\t\tEventEmitter.subscribeOnce('BX.Calendar.Entry:beforeDelete', () => {\n\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\tthis.close();\n\t\t\t\t});\n\t\t\t\tEntryManager.deleteEntry(this.entry);\n\t\t\t}\n\t\t}\n\t\telse if (\n\t\t\te.keyCode === Util.getKeyCode('enter')\n\t\t\t&& this.DOM.confirmPopup\n\t\t)\n\t\t{\n\t\t\tthis.close(true, true);\n\t\t}\n\t}\n\n\tisAdditionalPopupShown(): boolean\n\t{\n\t\treturn this.DOM.locationRepeatBusyErrorPopup;\n\t}\n\n\tgetCurrentEntry()\n\t{\n\t\treturn this.entry;\n\t}\n\n\tgetCurrentSection()\n\t{\n\t\tlet section = false;\n\t\tconst sectionId = this.getCurrentSectionId();\n\n\t\tif (\n\t\t\tsectionId\n\t\t\t&& this.sectionIndex[sectionId] !== undefined\n\t\t\t&& this.sections[this.sectionIndex[sectionId]] !== undefined)\n\t\t{\n\t\t\tsection = this.sections[this.sectionIndex[sectionId]];\n\t\t}\n\n\t\treturn section;\n\t}\n\n\tgetCurrentSectionId()\n\t{\n\t\tlet sectionId = 0;\n\t\tif (this.sectionValue)\n\t\t{\n\t\t\tsectionId = this.sectionValue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst entry = this.getCurrentEntry();\n\t\t\tif (entry instanceof Entry)\n\t\t\t{\n\t\t\t\tsectionId = parseInt(entry.sectionId, 10);\n\t\t\t}\n\n\t\t\t// TODO: refactor - don't take first section\n\t\t\tif (!sectionId && this.sections[0])\n\t\t\t{\n\t\t\t\tsectionId = parseInt(this.sections[0].id, 10);\n\t\t\t}\n\t\t}\n\n\t\treturn sectionId;\n\t}\n\n\thandlePlannerSelectorChanges(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tconst dateTimeValue = this.dateTimeControl.getValue();\n\t\t\tdateTimeValue.from = event.getData().dateFrom;\n\t\t\tdateTimeValue.to = event.getData().dateTo;\n\t\t\t// Date time\n\t\t\tthis.dateTimeControl.setValue(dateTimeValue);\n\t\t\tthis.userPlannerSelector.setDateTime(this.dateTimeControl.getValue());\n\n\t\t\tif (this.locationSelector)\n\t\t\t{\n\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t{\n\t\t\t\t\t\tfrom: event.getData().dateFrom,\n\t\t\t\t\t\tto: event.getData().dateTo,\n\t\t\t\t\t\tfullDay: event.getData().fullDay,\n\t\t\t\t\t\tcurrentEventId: this.entry.parentId,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.checkForChangesDebounce();\n\t\t}\n\t}\n\n\teditEntryInSlider(jumpToControl = false)\n\t{\n\t\tthis.checkDataBeforeCloseMode = false;\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tBX.Calendar.EntryManager.openEditSlider({\n\t\t\tcalendarContext,\n\t\t\tentry: this.entry,\n\t\t\ttype: this.type,\n\t\t\tisLocationCalendar: this.isLocationCalendar,\n\t\t\tlocationAccess: this.locationAccess,\n\t\t\troomsManager: this.roomsManager,\n\t\t\tlocationCapacity: Location.getCurrentCapacity(), // for location component\n\t\t\townerId: this.ownerId,\n\t\t\tuserId: this.userId,\n\t\t\tformDataValue: {\n\t\t\t\tsection: this.sectionValue,\n\t\t\t\tname: this.DOM.titleInput.value,\n\t\t\t\treminder: this.remindersControl.getSelectedRawValues(),\n\t\t\t\tcolor: this.colorSelector.getValue(),\n\t\t\t\tfrom: Util.adjustDateForTimezoneOffset(dateTime.from, -this.entry.userTimezoneOffsetFrom, dateTime.fullDay),\n\t\t\t\tto: Util.adjustDateForTimezoneOffset(dateTime.to, -this.entry.userTimezoneOffsetTo, dateTime.fullDay),\n\t\t\t\tfullDay: dateTime.fullDay,\n\t\t\t\tlocation: this.locationSelector.getTextValue(),\n\t\t\t\tmeetingNotify: this.userPlannerSelector.getInformValue() ? 'Y' : 'N',\n\t\t\t\thideGuests: this.userPlannerSelector.hideGuests ? 'Y' : 'N',\n\t\t\t\tattendeesEntityList: this.userPlannerSelector.getEntityList(),\n\t\t\t},\n\t\t\tjumpToControl,\n\t\t});\n\t\tthis.close();\n\t}\n\n\toutsideMouseDownClose(event)\n\t{\n\t\tconst target = event.target || event.srcElement;\n\t\tthis.outsideMouseDown = this.checkOutsideMouseClickTarget(target);\n\t}\n\n\tisCoveredByTopSlider(): boolean\n\t{\n\t\tconst topSlider = BX.SidePanel.Instance.getTopSlider();\n\n\t\treturn topSlider && !topSlider.url.includes('/calendar/');\n\t}\n\n\tcheckTopSlider(): boolean\n\t{\n\t\treturn !Util.getBX().SidePanel.Instance.getTopSlider();\n\t}\n\n\tcheckOutsideClickClose(event)\n\t{\n\t\tconst target = event.target || event.srcElement;\n\t\tthis.outsideMouseUp = this.checkOutsideMouseClickTarget(target);\n\n\t\tif (\n\t\t\tDom.hasClass(target, 'popup-window-close-icon')\n\t\t\t&& Dom.hasClass(target.parentElement, 'calendar-simple-view-popup')\n\t\t)\n\t\t{\n\t\t\tthis.close(true, true);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tthis.couldBeClosedByEsc()\n\t\t\t&& this.outsideMouseDown\n\t\t\t&& this.outsideMouseUp\n\t\t\t&& (this.getMode() === CompactEventForm.VIEW_MODE\n\t\t\t\t|| !this.formDataChanged()\n\t\t\t\t|| this.isNewEntry())\n\t\t)\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.close(false);\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\tcheckOutsideMouseClickTarget(target): boolean\n\t{\n\t\treturn !target.closest('button.aiassistant-marta')\n\t\t\t&& !target.closest('div.aiassistant-marta__chat-popup')\n\t\t\t&& !target.closest('div.popup-window')\n\t\t;\n\t}\n\n\tcouldBeClosedByEsc(): boolean\n\t{\n\t\treturn !PopupManager._popups.find((popup) => {\n\t\t\treturn popup && popup.getId() !== this.popupId && popup.isShown();\n\t\t});\n\t}\n\n\temitOnChange()\n\t{\n\t\tthis.emit('onChange', new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tform: this,\n\t\t\t\tentry: this.entry,\n\t\t\t},\n\t\t}));\n\t}\n\n\tshowError(errorList)\n\t{\n\t\tlet errorText = '';\n\n\t\tif (Type.isArray(errorList))\n\t\t{\n\t\t\terrorList.forEach((error) => {\n\t\t\t\terrorText += `${error.message}\\n`;\n\t\t\t});\n\t\t}\n\n\t\tif (errorText !== '')\n\t\t{\n\t\t\talert(errorText);\n\t\t}\n\t}\n\n\treloadEntryData()\n\t{\n\t\tif (this.isShown()\n\t\t\t&& !this.isNewEntry()\n\t\t\t&& this.getMode() === CompactEventForm.VIEW_MODE)\n\t\t{\n\t\t\tconst calendar = Util.getCalendarContext();\n\t\t\tif (calendar)\n\t\t\t{\n\t\t\t\tconst entry = EntryManager.getEntryInstance(\n\t\t\t\t\tcalendar.getView().getEntryById(this.entry.getUniqueId()),\n\t\t\t\t);\n\n\t\t\t\tif (entry && entry.getUniqueId())\n\t\t\t\t{\n\t\t\t\t\tthis.entry = entry;\n\t\t\t\t\tif (this.isLocationMode())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setFormValuesLocation();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setFormValues();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcheckCurrentUsersAccessibility()\n\t{\n\t\treturn this.getFormDataChanges().includes('date&time');\n\t}\n\n\thandlePull(params)\n\t{\n\t\tif (\n\t\t\tthis.userPlannerSelector\n\t\t\t&& this.userPlannerSelector?.planner?.isShown()\n\t\t)\n\t\t{\n\t\t\tconst userIdList = Type.isArray(params?.fields?.ATTENDEES) ? params.fields.ATTENDEES : [];\n\t\t\tconst eventOwner = params?.fields?.CAL_TYPE === 'user'\n\t\t\t\t? parseInt(params?.fields?.OWNER_ID)\n\t\t\t\t: parseInt(params?.fields?.CREATED_BY);\n\t\t\tif (!userIdList.includes(eventOwner))\n\t\t\t{\n\t\t\t\tuserIdList.push(eventOwner);\n\t\t\t}\n\t\t\tthis.userPlannerSelector.clearAccessibilityData(userIdList);\n\n\t\t\tthis.userPlannerSelector.refreshPlannerStateDebounce();\n\t\t}\n\n\t\tconst entry = this.getCurrentEntry();\n\t\tif (\n\t\t\t!this.isNewEntry()\n\t\t\t&& entry\n\t\t\t&& entry.parentId === parseInt(params?.fields?.PARENT_ID)\n\t\t)\n\t\t{\n\t\t\tif (params.command === 'delete_event'\n\t\t\t\t&& entry.getType() === params?.fields?.CAL_TYPE)\n\t\t\t{\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst onEntryListReloadHandler = () => {\n\t\t\t\t\tthis.reloadEntryDataDebounce();\n\t\t\t\t\tBX.Event.EventEmitter.unsubscribe('BX.Calendar:onEntryListReload', onEntryListReloadHandler);\n\t\t\t\t};\n\t\t\t\tBX.Event.EventEmitter.subscribe('BX.Calendar:onEntryListReload', onEntryListReloadHandler);\n\t\t\t}\n\t\t}\n\t}\n\n\tisSyncSection(section)\n\t{\n\t\treturn section.isGoogle()\n\t\t\t|| section.isIcloud()\n\t\t\t|| section.isOffice365()\n\t\t\t|| section.isCalDav()\n\t\t\t|| section.hasConnection()\n\t\t;\n\t}\n\n\tgetSectionsForEditEvent(sections, currentSection)\n\t{\n\t\tconst result = [];\n\t\tconst currentType = currentSection.type;\n\t\tresult.push(currentSection);\n\n\t\tsections.forEach((section) => {\n\t\t\tif (!this.isSyncSection(section) && section.type === currentType)\n\t\t\t{\n\t\t\t\tresult.push(section);\n\t\t\t}\n\t\t});\n\n\t\tthis.sections = result;\n\t\tthis.updateSectionIndex();\n\t}\n\n\treleaseLocation(options = {})\n\t{\n\t\tconst entry = this.getCurrentEntry();\n\n\t\tif (entry.id && entry.isRecursive()\n\t\t\t&& !options.confirmed\n\t\t)\n\t\t{\n\t\t\tEntryManager.showConfirmEditDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.confirmed = true;\n\t\t\t\t\tthis.releaseLocation({\n\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\tconfirmed: true,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!options.recursionMode)\n\t\t{\n\t\t\toptions.recursionMode = '';\n\t\t}\n\n\t\tthis.state = this.STATE.REQUEST;\n\n\t\tthis.freezePopup();\n\n\t\tthis.BX.ajax.runAction('calendar.api.locationajax.cancelBooking', {\n\t\t\tdata: {\n\t\t\t\tparent_event_id: entry.parentId,\n\t\t\t\trecursion_mode: options.recursionMode,\n\t\t\t\tsection_id: entry.sectionId,\n\t\t\t\tcurrent_event_date_from: entry.data.DATE_FROM,\n\t\t\t\tcurrent_event_date_to: entry.data.DATE_TO,\n\t\t\t\towner_id: entry.data.CREATED_BY,\n\t\t\t},\n\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.unfreezePopup();\n\t\t\t\t\tthis.state = this.STATE.READY;\n\t\t\t\t\tEntryManager.showReleaseLocationNotification();\n\t\t\t\t\tthis.calendarContext.reloadDebounce();\n\t\t\t\t\tthis.close();\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.unfreezePopup();\n\t\t\t\t\tthis.state = this.STATE.ERROR;\n\t\t\t\t\tthis.close();\n\t\t\t\t},\n\t\t\t);\n\n\t\treturn true;\n\t}\n\n\tshowConfirmClosePopup()\n\t{\n\t\tthis.DOM.confirmPopup = new MessageBox({\n\t\t\tmessage: this.getConfirmContent(),\n\t\t\tminHeight: 120,\n\t\t\tminWidth: 350,\n\t\t\tmaxWidth: 350,\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,\n\t\t\tonOk: () => {\n\t\t\t\tthis.DOM.confirmPopup.close();\n\t\t\t\tthis.close(true, true);\n\t\t\t},\n\t\t\tonCancel: () => {\n\t\t\t\tthis.DOM.confirmPopup.close();\n\t\t\t},\n\t\t\tokCaption: Loc.getMessage('EC_SEC_SLIDER_CLOSE'),\n\t\t\tpopupOptions: {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tdelete this.DOM.confirmPopup;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t});\n\n\t\tthis.DOM.confirmPopup.show();\n\t}\n\n\tgetConfirmContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-list-slider-messagebox-text\">${`${Loc.getMessage('EC_LEAVE_EVENT_CONFIRM_QUESTION')\n\t\t\t}<br>${Loc.getMessage('EC_LEAVE_EVENT_CONFIRM_DESC')}`}</div>\n\t\t`;\n\t}\n\n\tgetUndeselectedItems()\n\t{\n\t\tif (this.canDo('edit'))\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn [['user', this.entry.data.MEETING_HOST || 0], ['user', this.entry.getOwnerId()]];\n\t}\n\n\tsendOpenViewCardAnalytics()\n\t{\n\t\tsendData({\n\t\t\ttool: 'im',\n\t\t\tcategory: 'events',\n\t\t\tevent: 'view_card',\n\t\t\tc_section: 'card_compact',\n\t\t\tp5: `eventId_${this.entry.data.PARENT_ID}`,\n\t\t});\n\t}\n\n\tupdateSectionIndex()\n\t{\n\t\tthis.sectionIndex = {};\n\t\tif (Type.isArray(this.sections))\n\t\t{\n\t\t\tthis.sections.forEach((value, ind) => {\n\t\t\t\tconst id = parseInt(value.ID || value.id, 10);\n\t\t\t\tif (id > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.sectionIndex[id] = ind;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tgetFormAnalyticsContext()\n\t{\n\t\tif (this.type === 'group')\n\t\t{\n\t\t\treturn 'calendar_collab';\n\t\t}\n\n\t\treturn 'calendar_personal';\n\t}\n}\n"],"names":["CompactEventForm","EventEmitter","constructor","options","STATE","READY","REQUEST","ERROR","zIndex","Z_INDEX_OFFSET","userSettings","DOM","displayed","sections","sectionIndex","trackingUsersList","checkDataBeforeCloseMode","CHECK_CHANGES_DELAY","RELOAD_DATA_DELAY","excludedUsers","setEventNamespace","BX","Util","getBX","userId","parseInt","getCurrentUserId","type","isLocationCalendar","calendarContext","ownerId","isCollabUser","getCalendarContext","checkForChangesDebounce","Runtime","debounce","checkForChanges","reloadEntryDataDebounce","reloadEntryData","checkOutsideClickClose","bind","outsideMouseDownClose","keyHandler","handleKeyPress","lastUsedSaveOptions","show","mode","EDIT_MODE","params","setParams","setMode","state","popupId","Math","round","random","popup","destroy","getPopup","Dom","addClass","titleBar","removeClass","popupContainer","closeIcon","Event","document","isEditMode","EntryManager","doDelayedActions","isViewMode","isLocationMode","sendOpenViewCardAnalytics","prepareData","then","setFormValuesLocation","setFormValues","hasToOpenPlannerInDefault","userPlannerSelector","showPlanner","isTitleOverflowing","titleInput","title","entry","name","canDo","focus","select","getMode","VIEW_MODE","sendAnalyticLabel","calendarAction","formType","getButtons","button","isPlannerDisplayed","checkBusyTime","Popup","bindNode","closeByEsc","offsetTop","offsetLeft","draggable","restrict","resizable","lightShadow","className","cacheable","content","getPopupContentLocation","getPopupContentCalendar","buttons","events","onPopupClose","close","isShown","fromButton","fromPopup","checkTopSlider","destroyed","setTimeout","formDataChanged","showConfirmClosePopup","emit","unbind","Location","setCurrentCapacity","clearPlannerWatches","closeAllPopups","wrap","Tag","render","titleOuterWrap","getEntryCounter","getTitleControl","getTitleFade","getColorControl","getSectionControl","getDateTimeControl","getUserPlannerSelector","getTypeInfoControl","getLocationControl","remindersOuterWrap","Loc","getMessage","createRemindersControl","getRRuleInfoControl","getRelationControl","getTitleControlLocation","getColorControlsLocationView","id","parentId","appendChild","getHostControl","getLocationModeButtons","isInvitedMode","getInvitedButtons","getEditModeButtons","getViewModeButtons","length","firstTwoButtons","slice","menuButtons","getMoreButton","getOpenParentButton","push","getReleaseLocationButton","getAcceptButton","getDeclineButton","getOpenButton","getEditEventButtons","getSaveButton","getCloseButton","getFullFormButton","isMeeting","getMeetingHost","getCurrentStatus","getAcceptButtonWithoutBorder","isNewEntry","permissions","edit","getEditButton","view_full","getDownloadIcsButton","getDeleteButton","isInvited","openButton","UI","Button","text","click","Calendar","openViewSlider","from","timezoneOffset","data","TZ_OFFSET_FROM","setAttribute","editEntryInSlider","messageCode","saveButton","save","subscribeOnce","deleteEntry","wasEverRecursive","closeButton","setButtons","fullFormButton","downloadIcs","getCurrentEntry","withoutBorder","acceptButton","isRecursive","setCurrentStatus","setMeetingStatus","refreshMeetingStatus","declineButton","releaseLocation","buttonsMenu","moreButton","buttonsItems","map","innerText","onclick","MenuManager","create","Date","now","bindElement","items","freezePopup","forEach","setClocking","setDisabled","unfreezePopup","entryCounter","setViewMode","displayAttendees","getAttendees","locationSelector","setValue","default","locationOuterWrap","style","display","getLocation","hideLoader","Type","isDomNode","loader","remove","showInEditMode","showInViewMode","emitOnChange","updateEventNameInputTitle","value","el","clientWidth","scrollWidth","clientHeight","scrollHeight","attendeesEntityList","checkLocationForm","event","BaseEvent","getData","usersCount","locationCapacity","getCurrentCapacity","undefined","addCapacityAlert","removeCapacityAlert","getFormDataChanges","excludes","fields","includes","getTextLocation","parseStringValue","getTextValue","dateTime","dateTimeControl","getValue","isFullDay","fullDay","toString","to","getMeetingNotify","getInformValue","sectionId","sectionValue","getEntityList","item","entityId","join","getAttendeesEntityList","locationAccess","getEntryInstance","userIndex","analyticsSubSection","getFormAnalyticsContext","isPlainObject","entryTime","isDate","setDateTimeValue","locationFeatureEnabled","Boolean","locationList","isArray","filter","locationItem","PERM","roomsManager","iblockMeetingRoomList","plannerFeatureEnabled","setSections","trackingUserList","updateSectionIndex","section","getCurrentSection","getSectionsForEditEvent","Promise","resolve","ajax","runAction","entryId","loadSectionId","response","window","BXEventCalendar","Section","bindFade","isInputFocus","offsetWidth","classList","add","ceil","scrollLeft","titleFade","CREATED_BY","userUrl","USER_URL","replace","userAvatar","AVATAR","hostBar","renderAvatar","util","htmlspecialchars","src","avatarClassName","isAvatar","isStringFilled","colorSelect","colorSelector","ColorSelector","subscribe","color","COLOR","sectionSelectWrap","sectionSelector","SectionSelector","outerWrap","defaultCalendarType","defaultOwnerId","sectionList","filterSectionsByContext","calendarType","calendarOwnerId","sectionGroupList","SectionManager","getSectionGroupList","isCollabContext","isCollab","selectCallback","saveDefaultSectionId","dateTimeWrap","DateTimeControl","showTimezone","inlineEditMode","remindersControl","setFullDayMode","wasChangedByUser","defaultReminders","getNewEntryReminders","refreshPlannerStateDebounce","setLocationValue","setDateTime","checkLocationAccessibility","currentEventId","userPlannerSelectorOuterWrap","userSelectorWrap","informWrap","plannerOuterWrap","hideGuestsWrap","UserPlannerSelector","plannerReadOnly","readOnlyMode","isEditableSharingEvent","shouldShowFakeUserControl","openEditFormCallback","handlePlannerSelectorChanges","relationWrap","EVENT_TYPE","relationControl","RelationInterface","parentNode","eventId","append","locationWrap","readOnly","richLocationEnabled","hideLocationLock","inlineEditModeEnabled","onChangeCallback","locationName","editLocationInFullForm","shouldShowFakeLocationControl","planner","reminderValues","remindersWrap","Reminder","values","reminders","REMIND","typeInfoTitle","typeInfoLink","typeInfoWrap","rruleInfo","rruleInfoWrap","getTimezoneInfoControl","timezoneInfo","timezoneInfoWrap","action","isResourcebooking","isBoolean","view_time","isInvitedOrRejected","canEdit","canEditLocation","edit_location","canEditAttendees","edit_attendees","adjustDateForTimezoneOffset","userTimezoneOffsetFrom","userTimezoneOffsetTo","timezoneFrom","getTimezoneFrom","timezoneTo","getTimezoneTo","timezoneName","setInlineEditMode","setEventNameInputValue","getName","attr","getColor","getCurrentSectionId","updateValue","isSyncSection","isSharingEvent","getReminders","adjust","getRRuleDescription","readOnlyLocation","location","attendees","notify","viewMode","hideGuests","getHideGuests","attendeesUndeselectedItems","getUndeselectedItems","readOnlyUserPlanner","setEditableSharingEventMode","setCanEditAttendeesMode","hideInfoContainer","infoContainer","querySelector","i","childNodes","isElementNode","sendFromEmail","hasExternalEmailUsers","emailConfirmDialogShown","showConfirmedEmailDialog","callback","confirmed","showConfirmEditDialog","recursionMode","isFirstInstance","sendInvitesAgain","find","STATUS","showReInviteUsersDialog","desc","getDescription","reminder","getSelectedValues","date_from","fromDate","date_to","toDate","skip_time","time_from","formatTime","time_to","tz_from","tz_to","meeting_notify","meeting_host","MEETING_HOST","chat_id","MEETING","CHAT_ID","exclude_users","user","ID","hide_guests","requestUid","registerRequestId","private_event","isPrivate","checkCurrentUsersAccessibility","previousAttendeesList","newAttendeesList","entity","doCheckOccupancy","EVENT_RRULE","RRULE","rec_edit_mode","current_date_from","formatDate","toLowerCase","unsetHiddenRoom","room_id","showEditEntryNotification","showNewEntryNotification","responseData","eventList","setNewEntryReminders","errors","error","code","showLocationRepeatBusyErrorPopup","message","busyUsersList","handleBusyUsersError","showError","locationRepeatBusyErrorPopup","getLocationRepeatBusyErrorPopup","onYesCallback","onCancelCallback","onPopupCloseCallback","busyUsers","users","hasOwnProperty","busyUsersDialog","BusyUsersDialog","e","keyCode","getKeyCode","ctrlKey","metaKey","altKey","isAdditionalPopupShown","isCoveredByTopSlider","selectContol","couldBeClosedByEsc","target","srcElement","tagName","confirmPopup","Entry","dateTimeValue","dateFrom","dateTo","jumpToControl","openEditSlider","formDataValue","getSelectedRawValues","meetingNotify","outsideMouseDown","checkOutsideMouseClickTarget","topSlider","SidePanel","Instance","getTopSlider","url","outsideMouseUp","hasClass","parentElement","closest","PopupManager","_popups","getId","form","errorList","errorText","alert","calendar","getView","getEntryById","getUniqueId","handlePull","userIdList","ATTENDEES","eventOwner","CAL_TYPE","OWNER_ID","clearAccessibilityData","PARENT_ID","command","getType","onEntryListReloadHandler","unsubscribe","isGoogle","isIcloud","isOffice365","isCalDav","hasConnection","currentSection","result","currentType","parent_event_id","recursion_mode","section_id","current_event_date_from","DATE_FROM","current_event_date_to","DATE_TO","owner_id","showReleaseLocationNotification","reloadDebounce","MessageBox","getConfirmContent","minHeight","minWidth","maxWidth","Dialogs","MessageBoxButtons","OK_CANCEL","onOk","onCancel","okCaption","popupOptions","padding","contentPadding","animation","getOwnerId","sendData","tool","category","c_section","p5","ind"],"mappings":"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"}